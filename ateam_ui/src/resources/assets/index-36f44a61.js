(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function $h(e,t){const i=Object.create(null),n=e.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return t?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const ot={},er=[],Ii=()=>{},xb=()=>!1,wb=/^on[^a-z]/,hl=e=>wb.test(e),Wh=e=>e.startsWith("onUpdate:"),_t=Object.assign,zh=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Sb=Object.prototype.hasOwnProperty,Ke=(e,t)=>Sb.call(e,t),Ee=Array.isArray,tr=e=>Co(e)==="[object Map]",dl=e=>Co(e)==="[object Set]",sf=e=>Co(e)==="[object Date]",Le=e=>typeof e=="function",vt=e=>typeof e=="string",eo=e=>typeof e=="symbol",nt=e=>e!==null&&typeof e=="object",jg=e=>nt(e)&&Le(e.then)&&Le(e.catch),Xg=Object.prototype.toString,Co=e=>Xg.call(e),Tb=e=>Co(e).slice(8,-1),Yg=e=>Co(e)==="[object Object]",jh=e=>vt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Sa=$h(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fl=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Cb=/-(\w)/g,hi=fl(e=>e.replace(Cb,(t,i)=>i?i.toUpperCase():"")),Eb=/\B([A-Z])/g,gr=fl(e=>e.replace(Eb,"-$1").toLowerCase()),vn=fl(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ta=fl(e=>e?`on${vn(e)}`:""),to=(e,t)=>!Object.is(e,t),Ca=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},La=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Ab=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Ib=e=>{const t=vt(e)?Number(e):NaN;return isNaN(t)?e:t};let rf;const ku=()=>rf||(rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ci(e){if(Ee(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=vt(n)?kb(n):ci(n);if(s)for(const r in s)t[r]=s[r]}return t}else{if(vt(e))return e;if(nt(e))return e}}const Pb=/;(?![^(]*\))/g,Mb=/:([^]+)/,Rb=new RegExp("\\/\\*.*?\\*\\/","gs");function kb(e){const t={};return e.replace(Rb,"").split(Pb).forEach(i=>{if(i){const n=i.split(Mb);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function no(e){let t="";if(vt(e))t=e;else if(Ee(e))for(let i=0;i<e.length;i++){const n=no(e[i]);n&&(t+=n+" ")}else if(nt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Bb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Fb=$h(Bb);function qg(e){return!!e||e===""}function Db(e,t){if(e.length!==t.length)return!1;let i=!0;for(let n=0;i&&n<e.length;n++)i=pl(e[n],t[n]);return i}function pl(e,t){if(e===t)return!0;let i=sf(e),n=sf(t);if(i||n)return i&&n?e.getTime()===t.getTime():!1;if(i=eo(e),n=eo(t),i||n)return e===t;if(i=Ee(e),n=Ee(t),i||n)return i&&n?Db(e,t):!1;if(i=nt(e),n=nt(t),i||n){if(!i||!n)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!pl(e[o],t[o]))return!1}}return String(e)===String(t)}function Kg(e,t){return e.findIndex(i=>pl(i,t))}const mt=e=>vt(e)?e:e==null?"":Ee(e)||nt(e)&&(e.toString===Xg||!Le(e.toString))?JSON.stringify(e,Zg,2):String(e),Zg=(e,t)=>t&&t.__v_isRef?Zg(e,t.value):tr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:dl(t)?{[`Set(${t.size})`]:[...t.values()]}:nt(t)&&!Ee(t)&&!Yg(t)?String(t):t;let Jt;class Jg{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Jt,!t&&Jt&&(this.index=(Jt.scopes||(Jt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=Jt;try{return Jt=this,t()}finally{Jt=i}}}on(){Jt=this}off(){Jt=this.parent}stop(t){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Xh(e){return new Jg(e)}function Ob(e,t=Jt){t&&t.active&&t.effects.push(e)}function Lb(){return Jt}function ii(e){Jt&&Jt.cleanups.push(e)}const Yh=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Qg=e=>(e.w&Wn)>0,ev=e=>(e.n&Wn)>0,Nb=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Wn},Ub=e=>{const{deps:t}=e;if(t.length){let i=0;for(let n=0;n<t.length;n++){const s=t[n];Qg(s)&&!ev(s)?s.delete(e):t[i++]=s,s.w&=~Wn,s.n&=~Wn}t.length=i}},Na=new WeakMap;let Vr=0,Wn=1;const Bu=30;let Ci;const ys=Symbol(""),Fu=Symbol("");class qh{constructor(t,i=null,n){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Ob(this,n)}run(){if(!this.active)return this.fn();let t=Ci,i=Dn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ci,Ci=this,Dn=!0,Wn=1<<++Vr,Vr<=Bu?Nb(this):of(this),this.fn()}finally{Vr<=Bu&&Ub(this),Wn=1<<--Vr,Ci=this.parent,Dn=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ci===this?this.deferStop=!0:this.active&&(of(this),this.onStop&&this.onStop(),this.active=!1)}}function of(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Dn=!0;const tv=[];function vr(){tv.push(Dn),Dn=!1}function yr(){const e=tv.pop();Dn=e===void 0?!0:e}function Yt(e,t,i){if(Dn&&Ci){let n=Na.get(e);n||Na.set(e,n=new Map);let s=n.get(i);s||n.set(i,s=Yh()),iv(s)}}function iv(e,t){let i=!1;Vr<=Bu?ev(e)||(e.n|=Wn,i=!Qg(e)):i=!e.has(Ci),i&&(e.add(Ci),Ci.deps.push(e))}function hn(e,t,i,n,s,r){const o=Na.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(i==="length"&&Ee(e)){const l=Number(n);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(i!==void 0&&a.push(o.get(i)),t){case"add":Ee(e)?jh(i)&&a.push(o.get("length")):(a.push(o.get(ys)),tr(e)&&a.push(o.get(Fu)));break;case"delete":Ee(e)||(a.push(o.get(ys)),tr(e)&&a.push(o.get(Fu)));break;case"set":tr(e)&&a.push(o.get(ys));break}if(a.length===1)a[0]&&Du(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Du(Yh(l))}}function Du(e,t){const i=Ee(e)?e:[...e];for(const n of i)n.computed&&af(n);for(const n of i)n.computed||af(n)}function af(e,t){(e!==Ci||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function Vb(e,t){var i;return(i=Na.get(e))==null?void 0:i.get(t)}const Hb=$h("__proto__,__v_isRef,__isVue"),nv=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(eo)),Gb=Kh(),$b=Kh(!1,!0),Wb=Kh(!0),lf=zb();function zb(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const n=Ue(this);for(let r=0,o=this.length;r<o;r++)Yt(n,"get",r+"");const s=n[t](...i);return s===-1||s===!1?n[t](...i.map(Ue)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){vr();const n=Ue(this)[t].apply(this,i);return yr(),n}}),e}function jb(e){const t=Ue(this);return Yt(t,"has",e),t.hasOwnProperty(e)}function Kh(e=!1,t=!1){return function(n,s,r){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&r===(e?t?lx:lv:t?av:ov).get(n))return n;const o=Ee(n);if(!e){if(o&&Ke(lf,s))return Reflect.get(lf,s,r);if(s==="hasOwnProperty")return jb}const a=Reflect.get(n,s,r);return(eo(s)?nv.has(s):Hb(s))||(e||Yt(n,"get",s),t)?a:dt(a)?o&&jh(s)?a:a.value:nt(a)?e?Eo(a):$t(a):a}}const Xb=sv(),Yb=sv(!0);function sv(e=!1){return function(i,n,s,r){let o=i[n];if(hr(o)&&dt(o)&&!dt(s))return!1;if(!e&&(!Ua(s)&&!hr(s)&&(o=Ue(o),s=Ue(s)),!Ee(i)&&dt(o)&&!dt(s)))return o.value=s,!0;const a=Ee(i)&&jh(n)?Number(n)<i.length:Ke(i,n),l=Reflect.set(i,n,s,r);return i===Ue(r)&&(a?to(s,o)&&hn(i,"set",n,s):hn(i,"add",n,s)),l}}function qb(e,t){const i=Ke(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&hn(e,"delete",t,void 0),n}function Kb(e,t){const i=Reflect.has(e,t);return(!eo(t)||!nv.has(t))&&Yt(e,"has",t),i}function Zb(e){return Yt(e,"iterate",Ee(e)?"length":ys),Reflect.ownKeys(e)}const rv={get:Gb,set:Xb,deleteProperty:qb,has:Kb,ownKeys:Zb},Jb={get:Wb,set(e,t){return!0},deleteProperty(e,t){return!0}},Qb=_t({},rv,{get:$b,set:Yb}),Zh=e=>e,ml=e=>Reflect.getPrototypeOf(e);function zo(e,t,i=!1,n=!1){e=e.__v_raw;const s=Ue(e),r=Ue(t);i||(t!==r&&Yt(s,"get",t),Yt(s,"get",r));const{has:o}=ml(s),a=n?Zh:i?ed:so;if(o.call(s,t))return a(e.get(t));if(o.call(s,r))return a(e.get(r));e!==s&&e.get(t)}function jo(e,t=!1){const i=this.__v_raw,n=Ue(i),s=Ue(e);return t||(e!==s&&Yt(n,"has",e),Yt(n,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function Xo(e,t=!1){return e=e.__v_raw,!t&&Yt(Ue(e),"iterate",ys),Reflect.get(e,"size",e)}function cf(e){e=Ue(e);const t=Ue(this);return ml(t).has.call(t,e)||(t.add(e),hn(t,"add",e,e)),this}function uf(e,t){t=Ue(t);const i=Ue(this),{has:n,get:s}=ml(i);let r=n.call(i,e);r||(e=Ue(e),r=n.call(i,e));const o=s.call(i,e);return i.set(e,t),r?to(t,o)&&hn(i,"set",e,t):hn(i,"add",e,t),this}function hf(e){const t=Ue(this),{has:i,get:n}=ml(t);let s=i.call(t,e);s||(e=Ue(e),s=i.call(t,e)),n&&n.call(t,e);const r=t.delete(e);return s&&hn(t,"delete",e,void 0),r}function df(){const e=Ue(this),t=e.size!==0,i=e.clear();return t&&hn(e,"clear",void 0,void 0),i}function Yo(e,t){return function(n,s){const r=this,o=r.__v_raw,a=Ue(o),l=t?Zh:e?ed:so;return!e&&Yt(a,"iterate",ys),o.forEach((c,u)=>n.call(s,l(c),l(u),r))}}function qo(e,t,i){return function(...n){const s=this.__v_raw,r=Ue(s),o=tr(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...n),u=i?Zh:t?ed:so;return!t&&Yt(r,"iterate",l?Fu:ys),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Cn(e){return function(...t){return e==="delete"?!1:this}}function ex(){const e={get(r){return zo(this,r)},get size(){return Xo(this)},has:jo,add:cf,set:uf,delete:hf,clear:df,forEach:Yo(!1,!1)},t={get(r){return zo(this,r,!1,!0)},get size(){return Xo(this)},has:jo,add:cf,set:uf,delete:hf,clear:df,forEach:Yo(!1,!0)},i={get(r){return zo(this,r,!0)},get size(){return Xo(this,!0)},has(r){return jo.call(this,r,!0)},add:Cn("add"),set:Cn("set"),delete:Cn("delete"),clear:Cn("clear"),forEach:Yo(!0,!1)},n={get(r){return zo(this,r,!0,!0)},get size(){return Xo(this,!0)},has(r){return jo.call(this,r,!0)},add:Cn("add"),set:Cn("set"),delete:Cn("delete"),clear:Cn("clear"),forEach:Yo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=qo(r,!1,!1),i[r]=qo(r,!0,!1),t[r]=qo(r,!1,!0),n[r]=qo(r,!0,!0)}),[e,i,t,n]}const[tx,ix,nx,sx]=ex();function Jh(e,t){const i=t?e?sx:nx:e?ix:tx;return(n,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(Ke(i,s)&&s in n?i:n,s,r)}const rx={get:Jh(!1,!1)},ox={get:Jh(!1,!0)},ax={get:Jh(!0,!1)},ov=new WeakMap,av=new WeakMap,lv=new WeakMap,lx=new WeakMap;function cx(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ux(e){return e.__v_skip||!Object.isExtensible(e)?0:cx(Tb(e))}function $t(e){return hr(e)?e:Qh(e,!1,rv,rx,ov)}function hx(e){return Qh(e,!1,Qb,ox,av)}function Eo(e){return Qh(e,!0,Jb,ax,lv)}function Qh(e,t,i,n,s){if(!nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=ux(e);if(o===0)return e;const a=new Proxy(e,o===2?n:i);return s.set(e,a),a}function ir(e){return hr(e)?ir(e.__v_raw):!!(e&&e.__v_isReactive)}function hr(e){return!!(e&&e.__v_isReadonly)}function Ua(e){return!!(e&&e.__v_isShallow)}function cv(e){return ir(e)||hr(e)}function Ue(e){const t=e&&e.__v_raw;return t?Ue(t):e}function uv(e){return La(e,"__v_skip",!0),e}const so=e=>nt(e)?$t(e):e,ed=e=>nt(e)?Eo(e):e;function hv(e){Dn&&Ci&&(e=Ue(e),iv(e.dep||(e.dep=Yh())))}function dv(e,t){e=Ue(e);const i=e.dep;i&&Du(i)}function dt(e){return!!(e&&e.__v_isRef===!0)}function Pe(e){return fv(e,!1)}function Re(e){return fv(e,!0)}function fv(e,t){return dt(e)?e:new dx(e,t)}class dx{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:Ue(t),this._value=i?t:so(t)}get value(){return hv(this),this._value}set value(t){const i=this.__v_isShallow||Ua(t)||hr(t);t=i?t:Ue(t),to(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:so(t),dv(this))}}function on(e){return dt(e)?e.value:e}const fx={get:(e,t,i)=>on(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return dt(s)&&!dt(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function pv(e){return ir(e)?e:new Proxy(e,fx)}function td(e){const t=Ee(e)?new Array(e.length):{};for(const i in e)t[i]=mv(e,i);return t}class px{constructor(t,i,n){this._object=t,this._key=i,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Vb(Ue(this._object),this._key)}}class mx{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function we(e,t,i){return dt(e)?e:Le(e)?new mx(e):nt(e)&&arguments.length>1?mv(e,t,i):Pe(e)}function mv(e,t,i){const n=e[t];return dt(n)?n:new px(e,t,i)}class gx{constructor(t,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new qh(t,()=>{this._dirty||(this._dirty=!0,dv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const t=Ue(this);return hv(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function vx(e,t,i=!1){let n,s;const r=Le(e);return r?(n=e,s=Ii):(n=e.get,s=e.set),new gx(n,s,r||!s,i)}function On(e,t,i,n){let s;try{s=n?e(...n):e()}catch(r){gl(r,t,i)}return s}function ui(e,t,i,n){if(Le(e)){const r=On(e,t,i,n);return r&&jg(r)&&r.catch(o=>{gl(o,t,i)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(ui(e[r],t,i,n));return s}function gl(e,t,i,n=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=i;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){On(l,null,10,[e,o,a]);return}}yx(e,i,s,n)}function yx(e,t,i,n=!0){console.error(e)}let ro=!1,Ou=!1;const Lt=[];let Wi=0;const nr=[];let sn=null,us=0;const gv=Promise.resolve();let id=null;function ni(e){const t=id||gv;return e?t.then(this?e.bind(this):e):t}function _x(e){let t=Wi+1,i=Lt.length;for(;t<i;){const n=t+i>>>1;oo(Lt[n])<e?t=n+1:i=n}return t}function nd(e){(!Lt.length||!Lt.includes(e,ro&&e.allowRecurse?Wi+1:Wi))&&(e.id==null?Lt.push(e):Lt.splice(_x(e.id),0,e),vv())}function vv(){!ro&&!Ou&&(Ou=!0,id=gv.then(_v))}function bx(e){const t=Lt.indexOf(e);t>Wi&&Lt.splice(t,1)}function xx(e){Ee(e)?nr.push(...e):(!sn||!sn.includes(e,e.allowRecurse?us+1:us))&&nr.push(e),vv()}function ff(e,t=ro?Wi+1:0){for(;t<Lt.length;t++){const i=Lt[t];i&&i.pre&&(Lt.splice(t,1),t--,i())}}function yv(e){if(nr.length){const t=[...new Set(nr)];if(nr.length=0,sn){sn.push(...t);return}for(sn=t,sn.sort((i,n)=>oo(i)-oo(n)),us=0;us<sn.length;us++)sn[us]();sn=null,us=0}}const oo=e=>e.id==null?1/0:e.id,wx=(e,t)=>{const i=oo(e)-oo(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function _v(e){Ou=!1,ro=!0,Lt.sort(wx);const t=Ii;try{for(Wi=0;Wi<Lt.length;Wi++){const i=Lt[Wi];i&&i.active!==!1&&On(i,null,14)}}finally{Wi=0,Lt.length=0,yv(),ro=!1,id=null,(Lt.length||nr.length)&&_v()}}function Sx(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||ot;let s=i;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in n){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=n[u]||ot;d&&(s=i.map(f=>vt(f)?f.trim():f)),h&&(s=i.map(Ab))}let a,l=n[a=Ta(t)]||n[a=Ta(hi(t))];!l&&r&&(l=n[a=Ta(gr(t))]),l&&ui(l,e,6,s);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ui(c,e,6,s)}}function bv(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!Le(e)){const l=c=>{const u=bv(c,t,!0);u&&(a=!0,_t(o,u))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(nt(e)&&n.set(e,null),null):(Ee(r)?r.forEach(l=>o[l]=null):_t(o,r),nt(e)&&n.set(e,o),o)}function vl(e,t){return!e||!hl(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ke(e,t[0].toLowerCase()+t.slice(1))||Ke(e,gr(t))||Ke(e,t))}let ti=null,xv=null;function Va(e){const t=ti;return ti=e,xv=e&&e.type.__scopeId||null,t}function se(e,t=ti,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&Ef(-1);const r=Va(t);let o;try{o=e(...s)}finally{Va(r),n._d&&Ef(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Kl(e){const{type:t,vnode:i,proxy:n,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:g}=e;let y,w;const x=Va(e);try{if(i.shapeFlag&4){const C=s||n;y=Hi(u.call(C,C,h,r,f,d,p)),w=l}else{const C=t;y=Hi(C.length>1?C(r,{attrs:l,slots:a,emit:c}):C(r,null)),w=t.props?l:Tx(l)}}catch(C){qr.length=0,gl(C,e,1),y=b(Pi)}let _=y;if(w&&g!==!1){const C=Object.keys(w),{shapeFlag:k}=_;C.length&&k&7&&(o&&C.some(Wh)&&(w=Cx(w,o)),_=dn(_,w))}return i.dirs&&(_=dn(_),_.dirs=_.dirs?_.dirs.concat(i.dirs):i.dirs),i.transition&&(_.transition=i.transition),y=_,Va(x),y}const Tx=e=>{let t;for(const i in e)(i==="class"||i==="style"||hl(i))&&((t||(t={}))[i]=e[i]);return t},Cx=(e,t)=>{const i={};for(const n in e)(!Wh(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function Ex(e,t,i){const{props:n,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?pf(n,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==n[d]&&!vl(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?pf(n,o,c):!0:!!o;return!1}function pf(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!vl(i,r))return!0}return!1}function Ax({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Ix=e=>e.__isSuspense;function Px(e,t){t&&t.pendingBranch?Ee(e)?t.effects.push(...e):t.effects.push(e):xx(e)}function Kn(e,t){return sd(e,null,t)}const Ko={};function Ge(e,t,i){return sd(e,t,i)}function sd(e,t,{immediate:i,deep:n,flush:s,onTrack:r,onTrigger:o}=ot){var a;const l=Lb()===((a=It)==null?void 0:a.scope)?It:null;let c,u=!1,h=!1;if(dt(e)?(c=()=>e.value,u=Ua(e)):ir(e)?(c=()=>e,n=!0):Ee(e)?(h=!0,u=e.some(C=>ir(C)||Ua(C)),c=()=>e.map(C=>{if(dt(C))return C.value;if(ir(C))return ps(C);if(Le(C))return On(C,l,2)})):Le(e)?t?c=()=>On(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return d&&d(),ui(e,l,3,[f])}:c=Ii,t&&n){const C=c;c=()=>ps(C())}let d,f=C=>{d=x.onStop=()=>{On(C,l,4)}},p;if(uo)if(f=Ii,t?i&&ui(t,l,3,[c(),h?[]:void 0,f]):c(),s==="sync"){const C=xw();p=C.__watcherHandles||(C.__watcherHandles=[])}else return Ii;let g=h?new Array(e.length).fill(Ko):Ko;const y=()=>{if(x.active)if(t){const C=x.run();(n||u||(h?C.some((k,V)=>to(k,g[V])):to(C,g)))&&(d&&d(),ui(t,l,3,[C,g===Ko?void 0:h&&g[0]===Ko?[]:g,f]),g=C)}else x.run()};y.allowRecurse=!!t;let w;s==="sync"?w=y:s==="post"?w=()=>Wt(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),w=()=>nd(y));const x=new qh(c,w);t?i?y():g=x.run():s==="post"?Wt(x.run.bind(x),l&&l.suspense):x.run();const _=()=>{x.stop(),l&&l.scope&&zh(l.scope.effects,x)};return p&&p.push(_),_}function Mx(e,t,i){const n=this.proxy,s=vt(e)?e.includes(".")?wv(n,e):()=>n[e]:e.bind(n,n);let r;Le(t)?r=t:(r=t.handler,i=t);const o=It;dr(this);const a=sd(s,r.bind(n),i);return o?dr(o):_s(),a}function wv(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function ps(e,t){if(!nt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),dt(e))ps(e.value,t);else if(Ee(e))for(let i=0;i<e.length;i++)ps(e[i],t);else if(dl(e)||tr(e))e.forEach(i=>{ps(i,t)});else if(Yg(e))for(const i in e)ps(e[i],t);return e}function Et(e,t){const i=ti;if(i===null)return e;const n=wl(i)||i.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,a,l,c=ot]=t[r];o&&(Le(o)&&(o={mounted:o,updated:o}),o.deep&&ps(a),s.push({dir:o,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function es(e,t,i,n){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(vr(),ui(l,i,8,[e.el,a,e,t]),yr())}}function Sv(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zn(()=>{e.isMounted=!0}),Fi(()=>{e.isUnmounting=!0}),e}const ri=[Function,Array],Tv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ri,onEnter:ri,onAfterEnter:ri,onEnterCancelled:ri,onBeforeLeave:ri,onLeave:ri,onAfterLeave:ri,onLeaveCancelled:ri,onBeforeAppear:ri,onAppear:ri,onAfterAppear:ri,onAppearCancelled:ri},Rx={name:"BaseTransition",props:Tv,setup(e,{slots:t}){const i=xl(),n=Sv();let s;return()=>{const r=t.default&&rd(t.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const g of r)if(g.type!==Pi){o=g;break}}const a=Ue(e),{mode:l}=a;if(n.isLeaving)return Zl(o);const c=mf(o);if(!c)return Zl(o);const u=ao(c,a,n,i);lo(c,u);const h=i.subTree,d=h&&mf(h);let f=!1;const{getTransitionKey:p}=c.type;if(p){const g=p();s===void 0?s=g:g!==s&&(s=g,f=!0)}if(d&&d.type!==Pi&&(!hs(c,d)||f)){const g=ao(d,a,n,i);if(lo(d,g),l==="out-in")return n.isLeaving=!0,g.afterLeave=()=>{n.isLeaving=!1,i.update.active!==!1&&i.update()},Zl(o);l==="in-out"&&c.type!==Pi&&(g.delayLeave=(y,w,x)=>{const _=Cv(n,d);_[String(d.key)]=d,y._leaveCb=()=>{w(),y._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=x})}return o}}},kx=Rx;function Cv(e,t){const{leavingVNodes:i}=e;let n=i.get(t.type);return n||(n=Object.create(null),i.set(t.type,n)),n}function ao(e,t,i,n){const{appear:s,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:g,onAppear:y,onAfterAppear:w,onAppearCancelled:x}=t,_=String(e.key),C=Cv(i,e),k=(M,G)=>{M&&ui(M,n,9,G)},V=(M,G)=>{const j=G[1];k(M,G),Ee(M)?M.every(B=>B.length<=1)&&j():M.length<=1&&j()},L={mode:r,persisted:o,beforeEnter(M){let G=a;if(!i.isMounted)if(s)G=g||a;else return;M._leaveCb&&M._leaveCb(!0);const j=C[_];j&&hs(e,j)&&j.el._leaveCb&&j.el._leaveCb(),k(G,[M])},enter(M){let G=l,j=c,B=u;if(!i.isMounted)if(s)G=y||l,j=w||c,B=x||u;else return;let R=!1;const F=M._enterCb=O=>{R||(R=!0,O?k(B,[M]):k(j,[M]),L.delayedLeave&&L.delayedLeave(),M._enterCb=void 0)};G?V(G,[M,F]):F()},leave(M,G){const j=String(e.key);if(M._enterCb&&M._enterCb(!0),i.isUnmounting)return G();k(h,[M]);let B=!1;const R=M._leaveCb=F=>{B||(B=!0,G(),F?k(p,[M]):k(f,[M]),M._leaveCb=void 0,C[j]===e&&delete C[j])};C[j]=e,d?V(d,[M,R]):R()},clone(M){return ao(M,t,i,n)}};return L}function Zl(e){if(yl(e))return e=dn(e),e.children=null,e}function mf(e){return yl(e)?e.children?e.children[0]:void 0:e}function lo(e,t){e.shapeFlag&6&&e.component?lo(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function rd(e,t=!1,i){let n=[],s=0;for(let r=0;r<e.length;r++){let o=e[r];const a=i==null?o.key:String(i)+String(o.key!=null?o.key:r);o.type===Xe?(o.patchFlag&128&&s++,n=n.concat(rd(o.children,t,a))):(t||o.type!==Pi)&&n.push(a!=null?dn(o,{key:a}):o)}if(s>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}function Bx(e,t){return Le(e)?(()=>_t({name:e.name},t,{setup:e}))():e}const Ea=e=>!!e.type.__asyncLoader,yl=e=>e.type.__isKeepAlive;function Ev(e,t){Iv(e,"a",t)}function Av(e,t){Iv(e,"da",t)}function Iv(e,t,i=It){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(_l(t,n,i),i){let s=i.parent;for(;s&&s.parent;)yl(s.parent.vnode)&&Fx(n,t,i,s),s=s.parent}}function Fx(e,t,i,n){const s=_l(t,e,n,!0);Mv(()=>{zh(n[t],s)},i)}function _l(e,t,i=It,n=!1){if(i){const s=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{if(i.isUnmounted)return;vr(),dr(i);const a=ui(t,i,e,o);return _s(),yr(),a});return n?s.unshift(r):s.push(r),r}}const yn=e=>(t,i=It)=>(!uo||e==="sp")&&_l(e,(...n)=>t(...n),i),od=yn("bm"),Zn=yn("m"),Dx=yn("bu"),Pv=yn("u"),Fi=yn("bum"),Mv=yn("um"),Ox=yn("sp"),Lx=yn("rtg"),Nx=yn("rtc");function Ux(e,t=It){_l("ec",e,t)}const ad="components",Vx="directives";function zt(e,t){return ld(ad,e,!0,t)||e}const Rv=Symbol.for("v-ndc");function Hx(e){return vt(e)?ld(ad,e,!1)||e:e||Rv}function Bi(e){return ld(Vx,e)}function ld(e,t,i=!0,n=!1){const s=ti||It;if(s){const r=s.type;if(e===ad){const a=yw(r,!1);if(a&&(a===t||a===hi(t)||a===vn(hi(t))))return r}const o=gf(s[e]||r[e],t)||gf(s.appContext[e],t);return!o&&n?r:o}}function gf(e,t){return e&&(e[t]||e[hi(t)]||e[vn(hi(t))])}function zn(e,t,i,n){let s;const r=i&&i[n];if(Ee(e)||vt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,r&&r[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,r&&r[o])}else if(nt(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,r&&r[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,r&&r[a])}}else s=[];return i&&(i[n]=s),s}function Jl(e,t){const i={};for(const n in e)i[t&&/[A-Z]/.test(n)?`on:${n}`:Ta(n)]=e[n];return i}const Lu=e=>e?Gv(e)?wl(e)||e.proxy:Lu(e.parent):null,Xr=_t(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Lu(e.parent),$root:e=>Lu(e.root),$emit:e=>e.emit,$options:e=>cd(e),$forceUpdate:e=>e.f||(e.f=()=>nd(e.update)),$nextTick:e=>e.n||(e.n=ni.bind(e.proxy)),$watch:e=>Mx.bind(e)}),Ql=(e,t)=>e!==ot&&!e.__isScriptSetup&&Ke(e,t),Gx={get({_:e},t){const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return r[t]}else{if(Ql(n,t))return o[t]=1,n[t];if(s!==ot&&Ke(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&Ke(c,t))return o[t]=3,r[t];if(i!==ot&&Ke(i,t))return o[t]=4,i[t];Nu&&(o[t]=0)}}const u=Xr[t];let h,d;if(u)return t==="$attrs"&&Yt(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(i!==ot&&Ke(i,t))return o[t]=4,i[t];if(d=l.config.globalProperties,Ke(d,t))return d[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:r}=e;return Ql(s,t)?(s[t]=i,!0):n!==ot&&Ke(n,t)?(n[t]=i,!0):Ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:r}},o){let a;return!!i[o]||e!==ot&&Ke(e,o)||Ql(t,o)||(a=r[0])&&Ke(a,o)||Ke(n,o)||Ke(Xr,o)||Ke(s.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Ke(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function vf(e){return Ee(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Nu=!0;function $x(e){const t=cd(e),i=e.proxy,n=e.ctx;Nu=!1,t.beforeCreate&&yf(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:g,deactivated:y,beforeDestroy:w,beforeUnmount:x,destroyed:_,unmounted:C,render:k,renderTracked:V,renderTriggered:L,errorCaptured:M,serverPrefetch:G,expose:j,inheritAttrs:B,components:R,directives:F,filters:O}=t;if(c&&Wx(c,n,null),o)for(const W in o){const S=o[W];Le(S)&&(n[W]=S.bind(i))}if(s){const W=s.call(i,i);nt(W)&&(e.data=$t(W))}if(Nu=!0,r)for(const W in r){const S=r[W],A=Le(S)?S.bind(i,i):Le(S.get)?S.get.bind(i,i):Ii,E=!Le(S)&&Le(S.set)?S.set.bind(i):Ii,I=N({get:A,set:E});Object.defineProperty(n,W,{enumerable:!0,configurable:!0,get:()=>I.value,set:U=>I.value=U})}if(a)for(const W in a)kv(a[W],n,i,W);if(l){const W=Le(l)?l.call(i):l;Reflect.ownKeys(W).forEach(S=>{Ut(S,W[S])})}u&&yf(u,e,"c");function X(W,S){Ee(S)?S.forEach(A=>W(A.bind(i))):S&&W(S.bind(i))}if(X(od,h),X(Zn,d),X(Dx,f),X(Pv,p),X(Ev,g),X(Av,y),X(Ux,M),X(Nx,V),X(Lx,L),X(Fi,x),X(Mv,C),X(Ox,G),Ee(j))if(j.length){const W=e.exposed||(e.exposed={});j.forEach(S=>{Object.defineProperty(W,S,{get:()=>i[S],set:A=>i[S]=A})})}else e.exposed||(e.exposed={});k&&e.render===Ii&&(e.render=k),B!=null&&(e.inheritAttrs=B),R&&(e.components=R),F&&(e.directives=F)}function Wx(e,t,i=Ii){Ee(e)&&(e=Uu(e));for(const n in e){const s=e[n];let r;nt(s)?"default"in s?r=qe(s.from||n,s.default,!0):r=qe(s.from||n):r=qe(s),dt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function yf(e,t,i){ui(Ee(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function kv(e,t,i,n){const s=n.includes(".")?wv(i,n):()=>i[n];if(vt(e)){const r=t[e];Le(r)&&Ge(s,r)}else if(Le(e))Ge(s,e.bind(i));else if(nt(e))if(Ee(e))e.forEach(r=>kv(r,t,i,n));else{const r=Le(e.handler)?e.handler.bind(i):t[e.handler];Le(r)&&Ge(s,r,e)}}function cd(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(c=>Ha(l,c,o,!0)),Ha(l,t,o)),nt(t)&&r.set(t,l),l}function Ha(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&Ha(e,r,i,!0),s&&s.forEach(o=>Ha(e,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const a=zx[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const zx={data:_f,props:bf,emits:bf,methods:Hr,computed:Hr,beforeCreate:Vt,created:Vt,beforeMount:Vt,mounted:Vt,beforeUpdate:Vt,updated:Vt,beforeDestroy:Vt,beforeUnmount:Vt,destroyed:Vt,unmounted:Vt,activated:Vt,deactivated:Vt,errorCaptured:Vt,serverPrefetch:Vt,components:Hr,directives:Hr,watch:Xx,provide:_f,inject:jx};function _f(e,t){return t?e?function(){return _t(Le(e)?e.call(this,this):e,Le(t)?t.call(this,this):t)}:t:e}function jx(e,t){return Hr(Uu(e),Uu(t))}function Uu(e){if(Ee(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Vt(e,t){return e?[...new Set([].concat(e,t))]:t}function Hr(e,t){return e?_t(Object.create(null),e,t):t}function bf(e,t){return e?Ee(e)&&Ee(t)?[...new Set([...e,...t])]:_t(Object.create(null),vf(e),vf(t??{})):t}function Xx(e,t){if(!e)return t;if(!t)return e;const i=_t(Object.create(null),e);for(const n in t)i[n]=Vt(e[n],t[n]);return i}function Bv(){return{app:null,config:{isNativeTag:xb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Yx=0;function qx(e,t){return function(n,s=null){Le(n)||(n=_t({},n)),s!=null&&!nt(s)&&(s=null);const r=Bv(),o=new Set;let a=!1;const l=r.app={_uid:Yx++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:ww,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&Le(c.install)?(o.add(c),c.install(l,...u)):Le(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,h){if(!a){const d=b(n,s);return d.appContext=r,u&&t?t(d,c):e(d,c,h),a=!0,l._container=c,c.__vue_app__=l,wl(d.component)||d.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){Ga=l;try{return c()}finally{Ga=null}}};return l}}let Ga=null;function Ut(e,t){if(It){let i=It.provides;const n=It.parent&&It.parent.provides;n===i&&(i=It.provides=Object.create(n)),i[e]=t}}function qe(e,t,i=!1){const n=It||ti;if(n||Ga){const s=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Ga._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Le(t)?t.call(n&&n.proxy):t}}function Kx(e,t,i,n=!1){const s={},r={};La(r,bl,1),e.propsDefaults=Object.create(null),Fv(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);i?e.props=n?s:hx(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Zx(e,t,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=Ue(s),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(vl(e.emitsOptions,d))continue;const f=t[d];if(l)if(Ke(r,d))f!==r[d]&&(r[d]=f,c=!0);else{const p=hi(d);s[p]=Vu(l,a,p,f,e,!1)}else f!==r[d]&&(r[d]=f,c=!0)}}}else{Fv(e,t,s,r)&&(c=!0);let u;for(const h in a)(!t||!Ke(t,h)&&((u=gr(h))===h||!Ke(t,u)))&&(l?i&&(i[h]!==void 0||i[u]!==void 0)&&(s[h]=Vu(l,a,h,void 0,e,!0)):delete s[h]);if(r!==a)for(const h in r)(!t||!Ke(t,h))&&(delete r[h],c=!0)}c&&hn(e,"set","$attrs")}function Fv(e,t,i,n){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Sa(l))continue;const c=t[l];let u;s&&Ke(s,u=hi(l))?!r||!r.includes(u)?i[u]=c:(a||(a={}))[u]=c:vl(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=Ue(i),c=a||ot;for(let u=0;u<r.length;u++){const h=r[u];i[h]=Vu(s,l,h,c[h],e,!Ke(c,h))}}return o}function Vu(e,t,i,n,s,r){const o=e[i];if(o!=null){const a=Ke(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Le(l)){const{propsDefaults:c}=s;i in c?n=c[i]:(dr(s),n=c[i]=l.call(null,t),_s())}else n=l}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===gr(i))&&(n=!0))}return n}function Dv(e,t,i=!1){const n=t.propsCache,s=n.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!Le(e)){const u=h=>{l=!0;const[d,f]=Dv(h,t,!0);_t(o,d),f&&a.push(...f)};!i&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return nt(e)&&n.set(e,er),er;if(Ee(r))for(let u=0;u<r.length;u++){const h=hi(r[u]);xf(h)&&(o[h]=ot)}else if(r)for(const u in r){const h=hi(u);if(xf(h)){const d=r[u],f=o[h]=Ee(d)||Le(d)?{type:d}:_t({},d);if(f){const p=Tf(Boolean,f.type),g=Tf(String,f.type);f[0]=p>-1,f[1]=g<0||p<g,(p>-1||Ke(f,"default"))&&a.push(h)}}}const c=[o,a];return nt(e)&&n.set(e,c),c}function xf(e){return e[0]!=="$"}function wf(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Sf(e,t){return wf(e)===wf(t)}function Tf(e,t){return Ee(t)?t.findIndex(i=>Sf(i,e)):Le(t)&&Sf(t,e)?0:-1}const Ov=e=>e[0]==="_"||e==="$stable",ud=e=>Ee(e)?e.map(Hi):[Hi(e)],Jx=(e,t,i)=>{if(t._n)return t;const n=se((...s)=>ud(t(...s)),i);return n._c=!1,n},Lv=(e,t,i)=>{const n=e._ctx;for(const s in e){if(Ov(s))continue;const r=e[s];if(Le(r))t[s]=Jx(s,r,n);else if(r!=null){const o=ud(r);t[s]=()=>o}}},Nv=(e,t)=>{const i=ud(t);e.slots.default=()=>i},Qx=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=Ue(t),La(t,"_",i)):Lv(t,e.slots={})}else e.slots={},t&&Nv(e,t);La(e.slots,bl,1)},ew=(e,t,i)=>{const{vnode:n,slots:s}=e;let r=!0,o=ot;if(n.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:(_t(s,t),!i&&a===1&&delete s._):(r=!t.$stable,Lv(t,s)),o=t}else t&&(Nv(e,t),o={default:1});if(r)for(const a in s)!Ov(a)&&!(a in o)&&delete s[a]};function Hu(e,t,i,n,s=!1){if(Ee(e)){e.forEach((d,f)=>Hu(d,t&&(Ee(t)?t[f]:t),i,n,s));return}if(Ea(n)&&!s)return;const r=n.shapeFlag&4?wl(n.component)||n.component.proxy:n.el,o=s?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===ot?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(vt(c)?(u[c]=null,Ke(h,c)&&(h[c]=null)):dt(c)&&(c.value=null)),Le(l))On(l,a,12,[o,u]);else{const d=vt(l),f=dt(l);if(d||f){const p=()=>{if(e.f){const g=d?Ke(h,l)?h[l]:u[l]:l.value;s?Ee(g)&&zh(g,r):Ee(g)?g.includes(r)||g.push(r):d?(u[l]=[r],Ke(h,l)&&(h[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else d?(u[l]=o,Ke(h,l)&&(h[l]=o)):f&&(l.value=o,e.k&&(u[e.k]=o))};o?(p.id=-1,Wt(p,i)):p()}}}const Wt=Px;function tw(e){return iw(e)}function iw(e,t){const i=ku();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Ii,insertStaticContent:p}=e,g=(D,H,K,ie=null,ne=null,ae=null,ce=!1,re=null,de=!!H.dynamicChildren)=>{if(D===H)return;D&&!hs(D,H)&&(ie=Q(D),U(D,ne,ae,!0),D=null),H.patchFlag===-2&&(de=!1,H.dynamicChildren=null);const{type:oe,ref:me,shapeFlag:ge}=H;switch(oe){case Ao:y(D,H,K,ie);break;case Pi:w(D,H,K,ie);break;case ec:D==null&&x(H,K,ie,ce);break;case Xe:R(D,H,K,ie,ne,ae,ce,re,de);break;default:ge&1?k(D,H,K,ie,ne,ae,ce,re,de):ge&6?F(D,H,K,ie,ne,ae,ce,re,de):(ge&64||ge&128)&&oe.process(D,H,K,ie,ne,ae,ce,re,de,Fe)}me!=null&&ne&&Hu(me,D&&D.ref,ae,H||D,!H)},y=(D,H,K,ie)=>{if(D==null)n(H.el=a(H.children),K,ie);else{const ne=H.el=D.el;H.children!==D.children&&c(ne,H.children)}},w=(D,H,K,ie)=>{D==null?n(H.el=l(H.children||""),K,ie):H.el=D.el},x=(D,H,K,ie)=>{[D.el,D.anchor]=p(D.children,H,K,ie,D.el,D.anchor)},_=({el:D,anchor:H},K,ie)=>{let ne;for(;D&&D!==H;)ne=d(D),n(D,K,ie),D=ne;n(H,K,ie)},C=({el:D,anchor:H})=>{let K;for(;D&&D!==H;)K=d(D),s(D),D=K;s(H)},k=(D,H,K,ie,ne,ae,ce,re,de)=>{ce=ce||H.type==="svg",D==null?V(H,K,ie,ne,ae,ce,re,de):G(D,H,ne,ae,ce,re,de)},V=(D,H,K,ie,ne,ae,ce,re)=>{let de,oe;const{type:me,props:ge,shapeFlag:Ce,transition:Ae,dirs:We}=D;if(de=D.el=o(D.type,ae,ge&&ge.is,ge),Ce&8?u(de,D.children):Ce&16&&M(D.children,de,null,ie,ne,ae&&me!=="foreignObject",ce,re),We&&es(D,null,ie,"created"),L(de,D,D.scopeId,ce,ie),ge){for(const m in ge)m!=="value"&&!Sa(m)&&r(de,m,null,ge[m],ae,D.children,ie,ne,$);"value"in ge&&r(de,"value",null,ge.value),(oe=ge.onVnodeBeforeMount)&&Ni(oe,ie,D)}We&&es(D,null,ie,"beforeMount");const T=(!ne||ne&&!ne.pendingBranch)&&Ae&&!Ae.persisted;T&&Ae.beforeEnter(de),n(de,H,K),((oe=ge&&ge.onVnodeMounted)||T||We)&&Wt(()=>{oe&&Ni(oe,ie,D),T&&Ae.enter(de),We&&es(D,null,ie,"mounted")},ne)},L=(D,H,K,ie,ne)=>{if(K&&f(D,K),ie)for(let ae=0;ae<ie.length;ae++)f(D,ie[ae]);if(ne){let ae=ne.subTree;if(H===ae){const ce=ne.vnode;L(D,ce,ce.scopeId,ce.slotScopeIds,ne.parent)}}},M=(D,H,K,ie,ne,ae,ce,re,de=0)=>{for(let oe=de;oe<D.length;oe++){const me=D[oe]=re?Mn(D[oe]):Hi(D[oe]);g(null,me,H,K,ie,ne,ae,ce,re)}},G=(D,H,K,ie,ne,ae,ce)=>{const re=H.el=D.el;let{patchFlag:de,dynamicChildren:oe,dirs:me}=H;de|=D.patchFlag&16;const ge=D.props||ot,Ce=H.props||ot;let Ae;K&&ts(K,!1),(Ae=Ce.onVnodeBeforeUpdate)&&Ni(Ae,K,H,D),me&&es(H,D,K,"beforeUpdate"),K&&ts(K,!0);const We=ne&&H.type!=="foreignObject";if(oe?j(D.dynamicChildren,oe,re,K,ie,We,ae):ce||S(D,H,re,null,K,ie,We,ae,!1),de>0){if(de&16)B(re,H,ge,Ce,K,ie,ne);else if(de&2&&ge.class!==Ce.class&&r(re,"class",null,Ce.class,ne),de&4&&r(re,"style",ge.style,Ce.style,ne),de&8){const T=H.dynamicProps;for(let m=0;m<T.length;m++){const v=T[m],P=ge[v],z=Ce[v];(z!==P||v==="value")&&r(re,v,P,z,ne,D.children,K,ie,$)}}de&1&&D.children!==H.children&&u(re,H.children)}else!ce&&oe==null&&B(re,H,ge,Ce,K,ie,ne);((Ae=Ce.onVnodeUpdated)||me)&&Wt(()=>{Ae&&Ni(Ae,K,H,D),me&&es(H,D,K,"updated")},ie)},j=(D,H,K,ie,ne,ae,ce)=>{for(let re=0;re<H.length;re++){const de=D[re],oe=H[re],me=de.el&&(de.type===Xe||!hs(de,oe)||de.shapeFlag&70)?h(de.el):K;g(de,oe,me,null,ie,ne,ae,ce,!0)}},B=(D,H,K,ie,ne,ae,ce)=>{if(K!==ie){if(K!==ot)for(const re in K)!Sa(re)&&!(re in ie)&&r(D,re,K[re],null,ce,H.children,ne,ae,$);for(const re in ie){if(Sa(re))continue;const de=ie[re],oe=K[re];de!==oe&&re!=="value"&&r(D,re,oe,de,ce,H.children,ne,ae,$)}"value"in ie&&r(D,"value",K.value,ie.value)}},R=(D,H,K,ie,ne,ae,ce,re,de)=>{const oe=H.el=D?D.el:a(""),me=H.anchor=D?D.anchor:a("");let{patchFlag:ge,dynamicChildren:Ce,slotScopeIds:Ae}=H;Ae&&(re=re?re.concat(Ae):Ae),D==null?(n(oe,K,ie),n(me,K,ie),M(H.children,K,me,ne,ae,ce,re,de)):ge>0&&ge&64&&Ce&&D.dynamicChildren?(j(D.dynamicChildren,Ce,K,ne,ae,ce,re),(H.key!=null||ne&&H===ne.subTree)&&hd(D,H,!0)):S(D,H,K,me,ne,ae,ce,re,de)},F=(D,H,K,ie,ne,ae,ce,re,de)=>{H.slotScopeIds=re,D==null?H.shapeFlag&512?ne.ctx.activate(H,K,ie,ce,de):O(H,K,ie,ne,ae,ce,de):q(D,H,de)},O=(D,H,K,ie,ne,ae,ce)=>{const re=D.component=fw(D,ie,ne);if(yl(D)&&(re.ctx.renderer=Fe),pw(re),re.asyncDep){if(ne&&ne.registerDep(re,X),!D.el){const de=re.subTree=b(Pi);w(null,de,H,K)}return}X(re,D,H,K,ne,ae,ce)},q=(D,H,K)=>{const ie=H.component=D.component;if(Ex(D,H,K))if(ie.asyncDep&&!ie.asyncResolved){W(ie,H,K);return}else ie.next=H,bx(ie.update),ie.update();else H.el=D.el,ie.vnode=H},X=(D,H,K,ie,ne,ae,ce)=>{const re=()=>{if(D.isMounted){let{next:me,bu:ge,u:Ce,parent:Ae,vnode:We}=D,T=me,m;ts(D,!1),me?(me.el=We.el,W(D,me,ce)):me=We,ge&&Ca(ge),(m=me.props&&me.props.onVnodeBeforeUpdate)&&Ni(m,Ae,me,We),ts(D,!0);const v=Kl(D),P=D.subTree;D.subTree=v,g(P,v,h(P.el),Q(P),D,ne,ae),me.el=v.el,T===null&&Ax(D,v.el),Ce&&Wt(Ce,ne),(m=me.props&&me.props.onVnodeUpdated)&&Wt(()=>Ni(m,Ae,me,We),ne)}else{let me;const{el:ge,props:Ce}=H,{bm:Ae,m:We,parent:T}=D,m=Ea(H);if(ts(D,!1),Ae&&Ca(Ae),!m&&(me=Ce&&Ce.onVnodeBeforeMount)&&Ni(me,T,H),ts(D,!0),ge&&ve){const v=()=>{D.subTree=Kl(D),ve(ge,D.subTree,D,ne,null)};m?H.type.__asyncLoader().then(()=>!D.isUnmounted&&v()):v()}else{const v=D.subTree=Kl(D);g(null,v,K,ie,D,ne,ae),H.el=v.el}if(We&&Wt(We,ne),!m&&(me=Ce&&Ce.onVnodeMounted)){const v=H;Wt(()=>Ni(me,T,v),ne)}(H.shapeFlag&256||T&&Ea(T.vnode)&&T.vnode.shapeFlag&256)&&D.a&&Wt(D.a,ne),D.isMounted=!0,H=K=ie=null}},de=D.effect=new qh(re,()=>nd(oe),D.scope),oe=D.update=()=>de.run();oe.id=D.uid,ts(D,!0),oe()},W=(D,H,K)=>{H.component=D;const ie=D.vnode.props;D.vnode=H,D.next=null,Zx(D,H.props,ie,K),ew(D,H.children,K),vr(),ff(),yr()},S=(D,H,K,ie,ne,ae,ce,re,de=!1)=>{const oe=D&&D.children,me=D?D.shapeFlag:0,ge=H.children,{patchFlag:Ce,shapeFlag:Ae}=H;if(Ce>0){if(Ce&128){E(oe,ge,K,ie,ne,ae,ce,re,de);return}else if(Ce&256){A(oe,ge,K,ie,ne,ae,ce,re,de);return}}Ae&8?(me&16&&$(oe,ne,ae),ge!==oe&&u(K,ge)):me&16?Ae&16?E(oe,ge,K,ie,ne,ae,ce,re,de):$(oe,ne,ae,!0):(me&8&&u(K,""),Ae&16&&M(ge,K,ie,ne,ae,ce,re,de))},A=(D,H,K,ie,ne,ae,ce,re,de)=>{D=D||er,H=H||er;const oe=D.length,me=H.length,ge=Math.min(oe,me);let Ce;for(Ce=0;Ce<ge;Ce++){const Ae=H[Ce]=de?Mn(H[Ce]):Hi(H[Ce]);g(D[Ce],Ae,K,null,ne,ae,ce,re,de)}oe>me?$(D,ne,ae,!0,!1,ge):M(H,K,ie,ne,ae,ce,re,de,ge)},E=(D,H,K,ie,ne,ae,ce,re,de)=>{let oe=0;const me=H.length;let ge=D.length-1,Ce=me-1;for(;oe<=ge&&oe<=Ce;){const Ae=D[oe],We=H[oe]=de?Mn(H[oe]):Hi(H[oe]);if(hs(Ae,We))g(Ae,We,K,null,ne,ae,ce,re,de);else break;oe++}for(;oe<=ge&&oe<=Ce;){const Ae=D[ge],We=H[Ce]=de?Mn(H[Ce]):Hi(H[Ce]);if(hs(Ae,We))g(Ae,We,K,null,ne,ae,ce,re,de);else break;ge--,Ce--}if(oe>ge){if(oe<=Ce){const Ae=Ce+1,We=Ae<me?H[Ae].el:ie;for(;oe<=Ce;)g(null,H[oe]=de?Mn(H[oe]):Hi(H[oe]),K,We,ne,ae,ce,re,de),oe++}}else if(oe>Ce)for(;oe<=ge;)U(D[oe],ne,ae,!0),oe++;else{const Ae=oe,We=oe,T=new Map;for(oe=We;oe<=Ce;oe++){const ze=H[oe]=de?Mn(H[oe]):Hi(H[oe]);ze.key!=null&&T.set(ze.key,oe)}let m,v=0;const P=Ce-We+1;let z=!1,Z=0;const te=new Array(P);for(oe=0;oe<P;oe++)te[oe]=0;for(oe=Ae;oe<=ge;oe++){const ze=D[oe];if(v>=P){U(ze,ne,ae,!0);continue}let Ye;if(ze.key!=null)Ye=T.get(ze.key);else for(m=We;m<=Ce;m++)if(te[m-We]===0&&hs(ze,H[m])){Ye=m;break}Ye===void 0?U(ze,ne,ae,!0):(te[Ye-We]=oe+1,Ye>=Z?Z=Ye:z=!0,g(ze,H[Ye],K,null,ne,ae,ce,re,de),v++)}const Ve=z?nw(te):er;for(m=Ve.length-1,oe=P-1;oe>=0;oe--){const ze=We+oe,Ye=H[ze],rt=ze+1<me?H[ze+1].el:ie;te[oe]===0?g(null,Ye,K,rt,ne,ae,ce,re,de):z&&(m<0||oe!==Ve[m]?I(Ye,K,rt,2):m--)}}},I=(D,H,K,ie,ne=null)=>{const{el:ae,type:ce,transition:re,children:de,shapeFlag:oe}=D;if(oe&6){I(D.component.subTree,H,K,ie);return}if(oe&128){D.suspense.move(H,K,ie);return}if(oe&64){ce.move(D,H,K,Fe);return}if(ce===Xe){n(ae,H,K);for(let ge=0;ge<de.length;ge++)I(de[ge],H,K,ie);n(D.anchor,H,K);return}if(ce===ec){_(D,H,K);return}if(ie!==2&&oe&1&&re)if(ie===0)re.beforeEnter(ae),n(ae,H,K),Wt(()=>re.enter(ae),ne);else{const{leave:ge,delayLeave:Ce,afterLeave:Ae}=re,We=()=>n(ae,H,K),T=()=>{ge(ae,()=>{We(),Ae&&Ae()})};Ce?Ce(ae,We,T):T()}else n(ae,H,K)},U=(D,H,K,ie=!1,ne=!1)=>{const{type:ae,props:ce,ref:re,children:de,dynamicChildren:oe,shapeFlag:me,patchFlag:ge,dirs:Ce}=D;if(re!=null&&Hu(re,null,K,D,!0),me&256){H.ctx.deactivate(D);return}const Ae=me&1&&Ce,We=!Ea(D);let T;if(We&&(T=ce&&ce.onVnodeBeforeUnmount)&&Ni(T,H,D),me&6)ee(D.component,K,ie);else{if(me&128){D.suspense.unmount(K,ie);return}Ae&&es(D,null,H,"beforeUnmount"),me&64?D.type.remove(D,H,K,ne,Fe,ie):oe&&(ae!==Xe||ge>0&&ge&64)?$(oe,H,K,!1,!0):(ae===Xe&&ge&384||!ne&&me&16)&&$(de,H,K),ie&&Y(D)}(We&&(T=ce&&ce.onVnodeUnmounted)||Ae)&&Wt(()=>{T&&Ni(T,H,D),Ae&&es(D,null,H,"unmounted")},K)},Y=D=>{const{type:H,el:K,anchor:ie,transition:ne}=D;if(H===Xe){J(K,ie);return}if(H===ec){C(D);return}const ae=()=>{s(K),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(D.shapeFlag&1&&ne&&!ne.persisted){const{leave:ce,delayLeave:re}=ne,de=()=>ce(K,ae);re?re(D.el,ae,de):de()}else ae()},J=(D,H)=>{let K;for(;D!==H;)K=d(D),s(D),D=K;s(H)},ee=(D,H,K)=>{const{bum:ie,scope:ne,update:ae,subTree:ce,um:re}=D;ie&&Ca(ie),ne.stop(),ae&&(ae.active=!1,U(ce,D,H,K)),re&&Wt(re,H),Wt(()=>{D.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},$=(D,H,K,ie=!1,ne=!1,ae=0)=>{for(let ce=ae;ce<D.length;ce++)U(D[ce],H,K,ie,ne)},Q=D=>D.shapeFlag&6?Q(D.component.subTree):D.shapeFlag&128?D.suspense.next():d(D.anchor||D.el),he=(D,H,K)=>{D==null?H._vnode&&U(H._vnode,null,null,!0):g(H._vnode||null,D,H,null,null,null,K),ff(),yv(),H._vnode=D},Fe={p:g,um:U,m:I,r:Y,mt:O,mc:M,pc:S,pbc:j,n:Q,o:e};let Te,ve;return t&&([Te,ve]=t(Fe)),{render:he,hydrate:Te,createApp:qx(he,Te)}}function ts({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function hd(e,t,i=!1){const n=e.children,s=t.children;if(Ee(n)&&Ee(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=Mn(s[r]),a.el=o.el),i||hd(o,a)),a.type===Ao&&(a.el=o.el)}}function nw(e){const t=e.slice(),i=[0];let n,s,r,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(s=i[i.length-1],e[s]<c){t[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<c?r=a+1:o=a;c<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}const sw=e=>e.__isTeleport,Yr=e=>e&&(e.disabled||e.disabled===""),Cf=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Gu=(e,t)=>{const i=e&&e.to;return vt(i)?t?t(i):null:i},rw={__isTeleport:!0,process(e,t,i,n,s,r,o,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:g,createComment:y}}=c,w=Yr(t.props);let{shapeFlag:x,children:_,dynamicChildren:C}=t;if(e==null){const k=t.el=g(""),V=t.anchor=g("");f(k,i,n),f(V,i,n);const L=t.target=Gu(t.props,p),M=t.targetAnchor=g("");L&&(f(M,L),o=o||Cf(L));const G=(j,B)=>{x&16&&u(_,j,B,s,r,o,a,l)};w?G(i,V):L&&G(L,M)}else{t.el=e.el;const k=t.anchor=e.anchor,V=t.target=e.target,L=t.targetAnchor=e.targetAnchor,M=Yr(e.props),G=M?i:V,j=M?k:L;if(o=o||Cf(V),C?(d(e.dynamicChildren,C,G,s,r,o,a),hd(e,t,!0)):l||h(e,t,G,j,s,r,o,a,!1),w)M||Zo(t,i,k,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const B=t.target=Gu(t.props,p);B&&Zo(t,B,null,c,0)}else M&&Zo(t,V,L,c,1)}Uv(t)},remove(e,t,i,n,{um:s,o:{remove:r}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=e;if(h&&r(u),(o||!Yr(d))&&(r(c),a&16))for(let f=0;f<l.length;f++){const p=l[f];s(p,t,i,!0,!!p.dynamicChildren)}},move:Zo,hydrate:ow};function Zo(e,t,i,{o:{insert:n},m:s},r=2){r===0&&n(e.targetAnchor,t,i);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=e,h=r===2;if(h&&n(o,t,i),(!h||Yr(u))&&l&16)for(let d=0;d<c.length;d++)s(c[d],t,i,2);h&&n(a,t,i)}function ow(e,t,i,n,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=t.target=Gu(t.props,l);if(u){const h=u._lpa||u.firstChild;if(t.shapeFlag&16)if(Yr(t.props))t.anchor=c(o(e),t,a(e),i,n,s,r),t.targetAnchor=h;else{t.anchor=o(e);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){t.targetAnchor=d,u._lpa=t.targetAnchor&&o(t.targetAnchor);break}c(h,t,u,i,n,s,r)}Uv(t)}return t.anchor&&o(t.anchor)}const aw=rw;function Uv(e){const t=e.ctx;if(t&&t.ut){let i=e.children[0].el;for(;i!==e.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}const Xe=Symbol.for("v-fgt"),Ao=Symbol.for("v-txt"),Pi=Symbol.for("v-cmt"),ec=Symbol.for("v-stc"),qr=[];let Ei=null;function He(e=!1){qr.push(Ei=e?null:[])}function lw(){qr.pop(),Ei=qr[qr.length-1]||null}let co=1;function Ef(e){co+=e}function Vv(e){return e.dynamicChildren=co>0?Ei||er:null,lw(),co>0&&Ei&&Ei.push(e),e}function Ot(e,t,i,n,s,r){return Vv(gt(e,t,i,n,s,r,!0))}function at(e,t,i,n,s){return Vv(b(e,t,i,n,s,!0))}function $u(e){return e?e.__v_isVNode===!0:!1}function hs(e,t){return e.type===t.type&&e.key===t.key}const bl="__vInternal",Hv=({key:e})=>e??null,Aa=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?vt(e)||dt(e)||Le(e)?{i:ti,r:e,k:t,f:!!i}:e:null);function gt(e,t=null,i=null,n=0,s=null,r=e===Xe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Hv(t),ref:t&&Aa(t),scopeId:xv,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ti};return a?(dd(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=vt(i)?8:16),co>0&&!o&&Ei&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Ei.push(l),l}const b=cw;function cw(e,t=null,i=null,n=0,s=null,r=!1){if((!e||e===Rv)&&(e=Pi),$u(e)){const a=dn(e,t,!0);return i&&dd(a,i),co>0&&!r&&Ei&&(a.shapeFlag&6?Ei[Ei.indexOf(e)]=a:Ei.push(a)),a.patchFlag|=-2,a}if(_w(e)&&(e=e.__vccOpts),t){t=uw(t);let{class:a,style:l}=t;a&&!vt(a)&&(t.class=no(a)),nt(l)&&(cv(l)&&!Ee(l)&&(l=_t({},l)),t.style=ci(l))}const o=vt(e)?1:Ix(e)?128:sw(e)?64:nt(e)?4:Le(e)?2:0;return gt(e,t,i,n,s,o,r,!0)}function uw(e){return e?cv(e)||bl in e?_t({},e):e:null}function dn(e,t,i=!1){const{props:n,ref:s,patchFlag:r,children:o}=e,a=t?Oe(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Hv(a),ref:t&&t.ref?i&&s?Ee(s)?s.concat(Aa(t)):[s,Aa(t)]:Aa(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Xe?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&dn(e.ssContent),ssFallback:e.ssFallback&&dn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ze(e=" ",t=0){return b(Ao,null,e,t)}function cn(e="",t=!1){return t?(He(),at(Pi,null,e)):b(Pi,null,e)}function Hi(e){return e==null||typeof e=="boolean"?b(Pi):Ee(e)?b(Xe,null,e.slice()):typeof e=="object"?Mn(e):b(Ao,null,String(e))}function Mn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:dn(e)}function dd(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Ee(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),dd(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(bl in t)?t._ctx=ti:s===3&&ti&&(ti.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Le(t)?(t={default:t,_ctx:ti},i=32):(t=String(t),n&64?(i=16,t=[Ze(t)]):i=8);e.children=t,e.shapeFlag|=i}function Oe(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=no([t.class,n.class]));else if(s==="style")t.style=ci([t.style,n.style]);else if(hl(s)){const r=t[s],o=n[s];o&&r!==o&&!(Ee(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=n[s])}return t}function Ni(e,t,i,n=null){ui(e,t,7,[i,n])}const hw=Bv();let dw=0;function fw(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||hw,r={uid:dw++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Jg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dv(n,s),emitsOptions:bv(n,s),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:n.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Sx.bind(null,r),e.ce&&e.ce(r),r}let It=null;const xl=()=>It||ti;let fd,Us,Af="__VUE_INSTANCE_SETTERS__";(Us=ku()[Af])||(Us=ku()[Af]=[]),Us.push(e=>It=e),fd=e=>{Us.length>1?Us.forEach(t=>t(e)):Us[0](e)};const dr=e=>{fd(e),e.scope.on()},_s=()=>{It&&It.scope.off(),fd(null)};function Gv(e){return e.vnode.shapeFlag&4}let uo=!1;function pw(e,t=!1){uo=t;const{props:i,children:n}=e.vnode,s=Gv(e);Kx(e,i,s,t),Qx(e,n);const r=s?mw(e,t):void 0;return uo=!1,r}function mw(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=uv(new Proxy(e.ctx,Gx));const{setup:n}=i;if(n){const s=e.setupContext=n.length>1?vw(e):null;dr(e),vr();const r=On(n,e,0,[e.props,s]);if(yr(),_s(),jg(r)){if(r.then(_s,_s),t)return r.then(o=>{If(e,o,t)}).catch(o=>{gl(o,e,0)});e.asyncDep=r}else If(e,r,t)}else $v(e,t)}function If(e,t,i){Le(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:nt(t)&&(e.setupState=pv(t)),$v(e,i)}let Pf;function $v(e,t,i){const n=e.type;if(!e.render){if(!t&&Pf&&!n.render){const s=n.template||cd(e).template;if(s){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,c=_t(_t({isCustomElement:r,delimiters:a},o),l);n.render=Pf(s,c)}}e.render=n.render||Ii}dr(e),vr(),$x(e),yr(),_s()}function gw(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,i){return Yt(e,"get","$attrs"),t[i]}}))}function vw(e){const t=i=>{e.exposed=i||{}};return{get attrs(){return gw(e)},slots:e.slots,emit:e.emit,expose:t}}function wl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(pv(uv(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Xr)return Xr[i](e)},has(t,i){return i in t||i in Xr}}))}function yw(e,t=!0){return Le(e)?e.displayName||e.name:e.name||t&&e.__name}function _w(e){return Le(e)&&"__vccOpts"in e}const N=(e,t)=>vx(e,t,uo);function Jn(e,t,i){const n=arguments.length;return n===2?nt(t)&&!Ee(t)?$u(t)?b(e,null,[t]):b(e,t):b(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&$u(i)&&(i=[i]),b(e,t,i))}const bw=Symbol.for("v-scx"),xw=()=>qe(bw),ww="3.3.2",Sw="http://www.w3.org/2000/svg",ds=typeof document<"u"?document:null,Mf=ds&&ds.createElement("template"),Tw={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t?ds.createElementNS(Sw,e):ds.createElement(e,i?{is:i}:void 0);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>ds.createTextNode(e),createComment:e=>ds.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ds.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const o=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Mf.innerHTML=n?`<svg>${e}</svg>`:e;const a=Mf.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Cw(e,t,i){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Ew(e,t,i){const n=e.style,s=vt(i);if(i&&!s){if(t&&!vt(t))for(const r in t)i[r]==null&&Wu(n,r,"");for(const r in i)Wu(n,r,i[r])}else{const r=n.display;s?t!==i&&(n.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=r)}}const Rf=/\s*!important$/;function Wu(e,t,i){if(Ee(i))i.forEach(n=>Wu(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=Aw(e,t);Rf.test(i)?e.setProperty(gr(n),i.replace(Rf,""),"important"):e[n]=i}}const kf=["Webkit","Moz","ms"],tc={};function Aw(e,t){const i=tc[t];if(i)return i;let n=hi(t);if(n!=="filter"&&n in e)return tc[t]=n;n=vn(n);for(let s=0;s<kf.length;s++){const r=kf[s]+n;if(r in e)return tc[t]=r}return t}const Bf="http://www.w3.org/1999/xlink";function Iw(e,t,i,n,s){if(n&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Bf,t.slice(6,t.length)):e.setAttributeNS(Bf,t,i);else{const r=Fb(t);i==null||r&&!qg(i)?e.removeAttribute(t):e.setAttribute(t,r?"":i)}}function Pw(e,t,i,n,s,r,o){if(t==="innerHTML"||t==="textContent"){n&&o(n,s,r),e[t]=i??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=i;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=i??"";c!==u&&(e.value=u),i==null&&e.removeAttribute(t);return}let l=!1;if(i===""||i==null){const c=typeof e[t];c==="boolean"?i=qg(i):i==null&&c==="string"?(i="",l=!0):c==="number"&&(i=0,l=!0)}try{e[t]=i}catch{}l&&e.removeAttribute(t)}function Wv(e,t,i,n){e.addEventListener(t,i,n)}function Mw(e,t,i,n){e.removeEventListener(t,i,n)}function Rw(e,t,i,n,s=null){const r=e._vei||(e._vei={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=kw(t);if(n){const c=r[t]=Dw(n,s);Wv(e,a,c,l)}else o&&(Mw(e,a,o,l),r[t]=void 0)}}const Ff=/(?:Once|Passive|Capture)$/;function kw(e){let t;if(Ff.test(e)){t={};let n;for(;n=e.match(Ff);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):gr(e.slice(2)),t]}let ic=0;const Bw=Promise.resolve(),Fw=()=>ic||(Bw.then(()=>ic=0),ic=Date.now());function Dw(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;ui(Ow(n,i.value),t,5,[n])};return i.value=e,i.attached=Fw(),i}function Ow(e,t){if(Ee(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const Df=/^on[a-z]/,Lw=(e,t,i,n,s=!1,r,o,a,l)=>{t==="class"?Cw(e,n,s):t==="style"?Ew(e,i,n):hl(t)?Wh(t)||Rw(e,t,i,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Nw(e,t,n,s))?Pw(e,t,n,r,o,a,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Iw(e,t,n,s))};function Nw(e,t,i,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&Df.test(t)&&Le(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Df.test(t)&&vt(i)?!1:t in e}const En="transition",Ir="animation",fn=(e,{slots:t})=>Jn(kx,jv(e),t);fn.displayName="Transition";const zv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Uw=fn.props=_t({},Tv,zv),is=(e,t=[])=>{Ee(e)?e.forEach(i=>i(...t)):e&&e(...t)},Of=e=>e?Ee(e)?e.some(t=>t.length>1):e.length>1:!1;function jv(e){const t={};for(const R in e)R in zv||(t[R]=e[R]);if(e.css===!1)return t;const{name:i="v",type:n,duration:s,enterFromClass:r=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:a=`${i}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${i}-leave-from`,leaveActiveClass:d=`${i}-leave-active`,leaveToClass:f=`${i}-leave-to`}=e,p=Vw(s),g=p&&p[0],y=p&&p[1],{onBeforeEnter:w,onEnter:x,onEnterCancelled:_,onLeave:C,onLeaveCancelled:k,onBeforeAppear:V=w,onAppear:L=x,onAppearCancelled:M=_}=t,G=(R,F,O)=>{Pn(R,F?u:a),Pn(R,F?c:o),O&&O()},j=(R,F)=>{R._isLeaving=!1,Pn(R,h),Pn(R,f),Pn(R,d),F&&F()},B=R=>(F,O)=>{const q=R?L:x,X=()=>G(F,R,O);is(q,[F,X]),Lf(()=>{Pn(F,R?l:r),tn(F,R?u:a),Of(q)||Nf(F,n,g,X)})};return _t(t,{onBeforeEnter(R){is(w,[R]),tn(R,r),tn(R,o)},onBeforeAppear(R){is(V,[R]),tn(R,l),tn(R,c)},onEnter:B(!1),onAppear:B(!0),onLeave(R,F){R._isLeaving=!0;const O=()=>j(R,F);tn(R,h),Yv(),tn(R,d),Lf(()=>{R._isLeaving&&(Pn(R,h),tn(R,f),Of(C)||Nf(R,n,y,O))}),is(C,[R,O])},onEnterCancelled(R){G(R,!1),is(_,[R])},onAppearCancelled(R){G(R,!0),is(M,[R])},onLeaveCancelled(R){j(R),is(k,[R])}})}function Vw(e){if(e==null)return null;if(nt(e))return[nc(e.enter),nc(e.leave)];{const t=nc(e);return[t,t]}}function nc(e){return Ib(e)}function tn(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e._vtc||(e._vtc=new Set)).add(t)}function Pn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const{_vtc:i}=e;i&&(i.delete(t),i.size||(e._vtc=void 0))}function Lf(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Hw=0;function Nf(e,t,i,n){const s=e._endId=++Hw,r=()=>{s===e._endId&&n()};if(i)return setTimeout(r,i);const{type:o,timeout:a,propCount:l}=Xv(e,t);if(!o)return n();const c=o+"end";let u=0;const h=()=>{e.removeEventListener(c,d),r()},d=f=>{f.target===e&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),e.addEventListener(c,d)}function Xv(e,t){const i=window.getComputedStyle(e),n=p=>(i[p]||"").split(", "),s=n(`${En}Delay`),r=n(`${En}Duration`),o=Uf(s,r),a=n(`${Ir}Delay`),l=n(`${Ir}Duration`),c=Uf(a,l);let u=null,h=0,d=0;t===En?o>0&&(u=En,h=o,d=r.length):t===Ir?c>0&&(u=Ir,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?En:Ir:null,d=u?u===En?r.length:l.length:0);const f=u===En&&/\b(transform|all)(,|$)/.test(n(`${En}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function Uf(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,n)=>Vf(i)+Vf(e[n])))}function Vf(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Yv(){return document.body.offsetHeight}const qv=new WeakMap,Kv=new WeakMap,Zv={name:"TransitionGroup",props:_t({},Uw,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=xl(),n=Sv();let s,r;return Pv(()=>{if(!s.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!Xw(s[0].el,i.vnode.el,o))return;s.forEach(Ww),s.forEach(zw);const a=s.filter(jw);Yv(),a.forEach(l=>{const c=l.el,u=c.style;tn(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=c._moveCb=d=>{d&&d.target!==c||(!d||/transform$/.test(d.propertyName))&&(c.removeEventListener("transitionend",h),c._moveCb=null,Pn(c,o))};c.addEventListener("transitionend",h)})}),()=>{const o=Ue(e),a=jv(o);let l=o.tag||Xe;s=r,r=t.default?rd(t.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&lo(u,ao(u,a,n,i))}if(s)for(let c=0;c<s.length;c++){const u=s[c];lo(u,ao(u,a,n,i)),qv.set(u,u.el.getBoundingClientRect())}return b(l,null,r)}}},Gw=e=>delete e.mode;Zv.props;const $w=Zv;function Ww(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function zw(e){Kv.set(e,e.el.getBoundingClientRect())}function jw(e){const t=qv.get(e),i=Kv.get(e),n=t.left-i.left,s=t.top-i.top;if(n||s){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${n}px,${s}px)`,r.transitionDuration="0s",e}}function Xw(e,t,i){const n=e.cloneNode();e._vtc&&e._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&n.classList.remove(a))}),i.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(n);const{hasTransform:r}=Xv(n);return s.removeChild(n),r}const Hf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ee(t)?i=>Ca(t,i):t},Yw={deep:!0,created(e,t,i){e._assign=Hf(i),Wv(e,"change",()=>{const n=e._modelValue,s=qw(e),r=e.checked,o=e._assign;if(Ee(n)){const a=Kg(n,s),l=a!==-1;if(r&&!l)o(n.concat(s));else if(!r&&l){const c=[...n];c.splice(a,1),o(c)}}else if(dl(n)){const a=new Set(n);r?a.add(s):a.delete(s),o(a)}else o(Jv(e,r))})},mounted:Gf,beforeUpdate(e,t,i){e._assign=Hf(i),Gf(e,t,i)}};function Gf(e,{value:t,oldValue:i},n){e._modelValue=t,Ee(t)?e.checked=Kg(t,n.props.value)>-1:dl(t)?e.checked=t.has(n.props.value):t!==i&&(e.checked=pl(t,Jv(e,!0)))}function qw(e){return"_value"in e?e._value:e.value}function Jv(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const Kw=["ctrl","shift","alt","meta"],Zw={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Kw.some(i=>e[`${i}Key`]&&!t.includes(i))},Gt=(e,t)=>(i,...n)=>{for(let s=0;s<t.length;s++){const r=Zw[t[s]];if(r&&r(i,t))return}return e(i,...n)},Qn={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):Pr(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:n}){!t!=!i&&(n?t?(n.beforeEnter(e),Pr(e,!0),n.enter(e)):n.leave(e,()=>{Pr(e,!1)}):Pr(e,t))},beforeUnmount(e,{value:t}){Pr(e,t)}};function Pr(e,t){e.style.display=t?e._vod:"none"}const Jw=_t({patchProp:Lw},Tw);let $f;function Qw(){return $f||($f=tw(Jw))}const e1=(...e)=>{const t=Qw().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=t1(n);if(!s)return;const r=t._component;!Le(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function t1(e){return vt(e)?document.querySelector(e):e}function Qv(e,t,i){const n=t.length-1;if(n<0)return e===void 0?i:e;for(let s=0;s<n;s++){if(e==null)return i;e=e[t[s]]}return e==null||e[t[n]]===void 0?i:e[t[n]]}function _r(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const i=Object.keys(e);return i.length!==Object.keys(t).length?!1:i.every(n=>_r(e[n],t[n]))}function zu(e,t,i){return e==null||!t||typeof t!="string"?i:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),Qv(e,t.split("."),i))}function rn(e,t,i){if(t==null)return e===void 0?i:e;if(e!==Object(e)){if(typeof t!="function")return i;const s=t(e,i);return typeof s>"u"?i:s}if(typeof t=="string")return zu(e,t,i);if(Array.isArray(t))return Qv(e,t,i);if(typeof t!="function")return i;const n=t(e,i);return typeof n>"u"?i:n}function pd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(i,n)=>t+n)}function Ie(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(e==null||e===""))return isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${t}`:void 0}function ju(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function i1(e){return e==null?void 0:e.$el}const Wf=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),n1=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function ey(e){return Object.keys(e)}function Io(e,t,i){const n=Object.create(null),s=Object.create(null);for(const r in e)t.some(o=>o instanceof RegExp?o.test(r):o===r)&&!(i!=null&&i.some(o=>o===r))?n[r]=e[r]:s[r]=e[r];return[n,s]}function Po(e,t){const i={...e};return t.forEach(n=>delete i[n]),i}function Sl(e){return Io(e,["class","style","id",/^data-/])}function Ln(e){return e==null?[]:Array.isArray(e)?e:[e]}function ws(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(i,e))}function zf(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function jf(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+i.repeat(Math.max(0,t-e.length))}function s1(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=[];let n=0;for(;n<e.length;)i.push(e.substr(n,t)),n+=t;return i}function pn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const n={};for(const s in e)n[s]=e[s];for(const s in t){const r=e[s],o=t[s];if(ju(r)&&ju(o)){n[s]=pn(r,o,i);continue}if(Array.isArray(r)&&Array.isArray(o)&&i){n[s]=i(r,o);continue}n[s]=o}return n}function Nn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Nn.cache.has(e))return Nn.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Nn.cache.set(e,t),t}Nn.cache=new Map;function Kr(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(i=>Kr(e,i)).flat(1);if(Array.isArray(t.children))return t.children.map(i=>Kr(e,i)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return Kr(e,t.component.subTree).flat(1)}return[]}function md(e){const t=$t({}),i=N(e);return Kn(()=>{for(const n in i.value)t[n]=i.value[n]},{flush:"sync"}),td(t)}function $a(e,t){return e.includes(t)}const r1=/^on[^a-z]/,o1=e=>r1.test(e),Yi=()=>[Function,Array];function Xf(e,t){return t="on"+vn(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function a1(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(Array.isArray(e))for(const s of e)s(...i);else typeof e=="function"&&e(...i)}function ty(e){const t=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(i=>`${i}:not([tabindex="-1"]):not([disabled])`).join(", ");return[...e.querySelectorAll(t)]}function iy(e,t){var s,r,o;const i=ty(e),n=i.indexOf(document.activeElement);if(!t)e.contains(document.activeElement)||(s=i[0])==null||s.focus();else if(t==="first")(r=i[0])==null||r.focus();else if(t==="last")(o=i.at(-1))==null||o.focus();else{let a,l=n;const c=t==="next"?1:-1;do l+=c,a=i[l];while((!a||a.offsetParent==null)&&l<i.length&&l>=0);a?a.focus():iy(e,t==="next"?"first":"last")}}const ny=["top","bottom"],l1=["start","end","left","right"];function Xu(e,t){let[i,n]=e.split(" ");return n||(n=$a(ny,i)?"start":$a(l1,i)?"top":"center"),{side:Yf(i,t),align:Yf(n,t)}}function Yf(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function sc(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function rc(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function qf(e){return{side:e.align,align:e.side}}function Kf(e){return $a(ny,e.side)?"y":"x"}class sr{constructor(t){let{x:i,y:n,width:s,height:r}=t;this.x=i,this.y=n,this.width=s,this.height=r}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function Zf(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function gd(e){const t=e.getBoundingClientRect(),i=getComputedStyle(e),n=i.transform;if(n){let s,r,o,a,l;if(n.startsWith("matrix3d("))s=n.slice(9,-1).split(/, /),r=+s[0],o=+s[5],a=+s[12],l=+s[13];else if(n.startsWith("matrix("))s=n.slice(7,-1).split(/, /),r=+s[0],o=+s[3],a=+s[4],l=+s[5];else return new sr(t);const c=i.transformOrigin,u=t.x-a-(1-r)*parseFloat(c),h=t.y-l-(1-o)*parseFloat(c.slice(c.indexOf(" ")+1)),d=r?t.width/r:e.offsetWidth+1,f=o?t.height/o:e.offsetHeight+1;return new sr({x:u,y:h,width:d,height:f})}else return new sr(t)}function ms(e,t,i){if(typeof e.animate>"u")return{finished:Promise.resolve()};let n;try{n=e.animate(t,i)}catch{return{finished:Promise.resolve()}}return typeof n.finished>"u"&&(n.finished=new Promise(s=>{n.onfinish=()=>{s(n)}})),n}function sy(e,t,i){if(i&&(t={__isVue:!0,$parent:i,$options:t}),t){if(t.$_alreadyWarned=t.$_alreadyWarned||[],t.$_alreadyWarned.includes(e))return;t.$_alreadyWarned.push(e)}return`[Vuetify] ${e}`+(t?h1(t):"")}function bs(e,t,i){const n=sy(e,t,i);n!=null&&console.warn(n)}function Yu(e,t,i){const n=sy(e,t,i);n!=null&&console.error(n)}const c1=/(?:^|[-_])(\w)/g,u1=e=>e.replace(c1,t=>t.toUpperCase()).replace(/[-_]/g,"");function oc(e,t){if(e.$root===e)return"<Root>";const i=typeof e=="function"&&e.cid!=null?e.options:e.__isVue?e.$options||e.constructor.options:e||{};let n=i.name||i._componentTag;const s=i.__file;if(!n&&s){const r=s.match(/([^/\\]+)\.vue$/);n=r==null?void 0:r[1]}return(n?`<${u1(n)}>`:"<Anonymous>")+(s&&t!==!1?` at ${s}`:"")}function h1(e){if(e.__isVue&&e.$parent){const t=[];let i=0;for(;e;){if(t.length>0){const n=t[t.length-1];if(n.constructor===e.constructor){i++,e=e.$parent;continue}else i>0&&(t[t.length-1]=[n,i],i=0)}t.push(e),e=e.$parent}return`

found in

`+t.map((n,s)=>`${s===0?"---> ":" ".repeat(5+s*2)}${Array.isArray(n)?`${oc(n[0])}... (${n[1]} recursive calls)`:oc(n)}`).join(`
`)}else return`

(found in ${oc(e)})`}const d1=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],f1=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,p1=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],m1=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function ry(e){const t=Array(3),i=f1,n=d1;for(let s=0;s<3;++s)t[s]=Math.round(ws(i(n[s][0]*e[0]+n[s][1]*e[1]+n[s][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function vd(e){let{r:t,g:i,b:n}=e;const s=[0,0,0],r=m1,o=p1;t=r(t/255),i=r(i/255),n=r(n/255);for(let a=0;a<3;++a)s[a]=o[a][0]*t+o[a][1]*i+o[a][2]*n;return s}const Wa=.20689655172413793,g1=e=>e>Wa**3?Math.cbrt(e):e/(3*Wa**2)+4/29,v1=e=>e>Wa?e**3:3*Wa**2*(e-4/29);function oy(e){const t=g1,i=t(e[1]);return[116*i-16,500*(t(e[0]/.95047)-i),200*(i-t(e[2]/1.08883))]}function ay(e){const t=v1,i=(e[0]+16)/116;return[t(i+e[1]/500)*.95047,t(i),t(i-e[2]/200)*1.08883]}function Jf(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function gs(e){if(typeof e=="number")return(isNaN(e)||e<0||e>16777215)&&bs(`'${e}' is not a valid hex color`),{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length)||bs(`'${e}' is not a valid hex(a) color`);const i=parseInt(t,16);return(isNaN(i)||i<0||i>4294967295)&&bs(`'${e}' is not a valid hex(a) color`),_1(t)}else throw new TypeError(`Colors can only be numbers or strings, recieved ${e==null?e:e.constructor.name} instead`)}function Jo(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function y1(e){let{r:t,g:i,b:n,a:s}=e;return`#${[Jo(t),Jo(i),Jo(n),s!==void 0?Jo(Math.round(s*255)):""].join("")}`}function _1(e){e=b1(e);let[t,i,n,s]=s1(e,2).map(r=>parseInt(r,16));return s=s===void 0?s:s/255,{r:t,g:i,b:n,a:s}}function b1(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=jf(jf(e,6),8,"F")),e}function x1(e,t){const i=oy(vd(e));return i[0]=i[0]+t*10,ry(ay(i))}function w1(e,t){const i=oy(vd(e));return i[0]=i[0]-t*10,ry(ay(i))}function S1(e){const t=gs(e);return vd(t)[1]}function le(e,t){return i=>Object.keys(e).reduce((n,s)=>{const o=typeof e[s]=="object"&&e[s]!=null&&!Array.isArray(e[s])?e[s]:{type:e[s]};return i&&s in i?n[s]={...o,default:i[s]}:n[s]=o,t&&!n[s].source&&(n[s].source=t),n},{})}const $e=le({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component");function Ss(e,t){let i;function n(){i=Xh(),i.run(()=>t.length?t(()=>{i==null||i.stop(),n()}):t())}Ge(e,s=>{s&&!i?n():s||(i==null||i.stop(),i=void 0)},{immediate:!0}),ii(()=>{i==null||i.stop()})}const ho=Symbol.for("vuetify:defaults");function T1(e){return Pe(e)}function yd(){const e=qe(ho);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function _n(e,t){const i=yd(),n=Pe(e),s=N(()=>{if(on(t==null?void 0:t.disabled))return i.value;const o=on(t==null?void 0:t.scoped),a=on(t==null?void 0:t.reset),l=on(t==null?void 0:t.root);let c=pn(n.value,{prev:i.value});if(o)return c;if(a||l){const u=Number(a||1/0);for(let h=0;h<=u&&!(!c||!("prev"in c));h++)c=c.prev;return c}return c.prev?pn(c.prev,c):c});return Ut(ho,s),s}function C1(e,t){var i,n;return typeof((i=e.props)==null?void 0:i[t])<"u"||typeof((n=e.props)==null?void 0:n[Nn(t)])<"u"}function E1(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yd();const n=Ft("useDefaults");if(t=t??n.type.name??n.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const s=N(()=>{var l;return(l=i.value)==null?void 0:l[e._as??t]}),r=new Proxy(e,{get(l,c){var h,d,f,p;const u=Reflect.get(l,c);return c==="class"||c==="style"?[(h=s.value)==null?void 0:h[c],u].filter(g=>g!=null):typeof c=="string"&&!C1(n.vnode,c)?((d=s.value)==null?void 0:d[c])??((p=(f=i.value)==null?void 0:f.global)==null?void 0:p[c])??u:u}}),o=Re();Kn(()=>{if(s.value){const l=Object.entries(s.value).filter(c=>{let[u]=c;return u.startsWith(u[0].toUpperCase())});l.length&&(o.value=Object.fromEntries(l))}});function a(){Ss(o,()=>{var l;_n(pn(((l=R1(ho))==null?void 0:l.value)??{},o.value))})}return{props:r,provideSubDefaults:a}}function br(e){if(e._setup=e._setup??e.setup,!e.name)return bs("The component is missing an explicit name, unable to generate default prop value"),e;if(e._setup){e.props=le(e.props??{},Nn(e.name))();const t=Object.keys(e.props);e.filterProps=function(n){return Io(n,t,["class","style"])},e.props._as=String,e.setup=function(n,s){const r=yd();if(!r.value)return e._setup(n,s);const{props:o,provideSubDefaults:a}=E1(n,n._as??e.name,r),l=e._setup(o,s);return a(),l}}return e}function xe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?br:Bx)(t)}function As(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",i=arguments.length>2?arguments[2]:void 0;return xe()({name:i??vn(hi(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...$e()},setup(n,s){let{slots:r}=s;return()=>{var o;return Jn(n.tag,{class:[e,n.class],style:n.style},(o=r.default)==null?void 0:o.call(r))}}})}function ly(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const fo="cubic-bezier(0.4, 0, 0.2, 1)",A1="cubic-bezier(0.0, 0, 0.2, 1)",I1="cubic-bezier(0.4, 0, 1, 1)";function Ft(e,t){const i=xl();if(!i)throw new Error(`[Vuetify] ${e} ${t||"must be called from inside a setup function"}`);return i}function bn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=Ft(e).type;return Nn((t==null?void 0:t.aliasName)||(t==null?void 0:t.name))}let cy=0,Ia=new WeakMap;function qt(){const e=Ft("getUid");if(Ia.has(e))return Ia.get(e);{const t=cy++;return Ia.set(e,t),t}}qt.reset=()=>{cy=0,Ia=new WeakMap};function P1(e){for(;e;){if(_d(e))return e;e=e.parentElement}return document.scrollingElement}function za(e,t){const i=[];if(t&&e&&!t.contains(e))return i;for(;e&&(_d(e)&&i.push(e),e!==t);)e=e.parentElement;return i}function _d(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight}const St=typeof window<"u",bd=St&&"IntersectionObserver"in window,M1=St&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),qu=St&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports("selector(:focus-visible)");function R1(e){const{provides:t}=Ft("injectSelf");if(t&&e in t)return t[e]}function k1(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function Be(e){const t=Ft("useRender");t.render=e}function ct(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:h=>h,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:h=>h;const r=Ft("useProxiedModel"),o=Pe(e[t]!==void 0?e[t]:i),a=Nn(t),c=N(a!==t?()=>{var h,d,f,p;return e[t],!!(((h=r.vnode.props)!=null&&h.hasOwnProperty(t)||(d=r.vnode.props)!=null&&d.hasOwnProperty(a))&&((f=r.vnode.props)!=null&&f.hasOwnProperty(`onUpdate:${t}`)||(p=r.vnode.props)!=null&&p.hasOwnProperty(`onUpdate:${a}`)))}:()=>{var h,d;return e[t],!!((h=r.vnode.props)!=null&&h.hasOwnProperty(t)&&((d=r.vnode.props)!=null&&d.hasOwnProperty(`onUpdate:${t}`)))});Ss(()=>!c.value,()=>{Ge(()=>e[t],h=>{o.value=h})});const u=N({get(){const h=e[t];return n(c.value?h:o.value)},set(h){const d=s(h),f=Ue(c.value?e[t]:o.value);f===d||n(f)===h||(o.value=d,r==null||r.emit(`update:${t}`,d))}});return Object.defineProperty(u,"externalValue",{get:()=>c.value?e[t]:o.value}),u}const B1={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},Qf="$vuetify.",ep=(e,t)=>e.replace(/\{(\d+)\}/g,(i,n)=>String(t[+n])),uy=(e,t,i)=>function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];if(!n.startsWith(Qf))return ep(n,r);const a=n.replace(Qf,""),l=e.value&&i.value[e.value],c=t.value&&i.value[t.value];let u=zu(l,a,null);return u||(bs(`Translation key "${n}" not found in "${e.value}", trying fallback locale`),u=zu(c,a,null)),u||(Yu(`Translation key "${n}" not found in fallback`),u=n),typeof u!="string"&&(Yu(`Translation key "${n}" has a non-string value`),u=n),ep(u,r)};function hy(e,t){return(i,n)=>new Intl.NumberFormat([e.value,t.value],n).format(i)}function ac(e,t,i){const n=ct(e,t,e[t]??i.value);return n.value=e[t]??i.value,Ge(i,s=>{e[t]==null&&(n.value=i.value)}),n}function dy(e){return t=>{const i=ac(t,"locale",e.current),n=ac(t,"fallback",e.fallback),s=ac(t,"messages",e.messages);return{name:"vuetify",current:i,fallback:n,messages:s,t:uy(i,n,s),n:hy(i,n),provide:dy({current:i,fallback:n,messages:s})}}}function F1(e){const t=Re((e==null?void 0:e.locale)??"en"),i=Re((e==null?void 0:e.fallback)??"en"),n=Pe({en:B1,...e==null?void 0:e.messages});return{name:"vuetify",current:t,fallback:i,messages:n,t:uy(t,i,n),n:hy(t,i),provide:dy({current:t,fallback:i,messages:n})}}const D1={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},ja=Symbol.for("vuetify:locale");function O1(e){return e.name!=null}function L1(e){const t=e!=null&&e.adapter&&O1(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:F1(e),i=N1(t,e);return{...t,...i}}function Mo(){const e=qe(ja);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function N1(e,t){const i=Pe((t==null?void 0:t.rtl)??D1),n=N(()=>i.value[e.current.value]??!1);return{isRtl:n,rtl:i,rtlClasses:N(()=>`v-locale--is-${n.value?"rtl":"ltr"}`)}}function Di(){const e=qe(ja);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function U1(e){let t=[];const i=[],n=fy(e),s=py(e);for(let r=0;r<n.getDay();r++)t.push(null);for(let r=1;r<=s.getDate();r++){const o=new Date(e.getFullYear(),e.getMonth(),r);t.push(o),t.length===7&&(i.push(t),t=[])}for(let r=t.length;r<7;r++)t.push(null);return i.push(t),i}function fy(e){return new Date(e.getFullYear(),e.getMonth(),1)}function py(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function V1(e){if(e==null)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=Date.parse(e);if(!isNaN(t))return new Date(t)}return null}const H1={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:0,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:0,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0},tp=new Date(2e3,0,2);function G1(e){const t=H1[e.slice(-2).toUpperCase()];return pd(7).map(i=>{const n=new Date(tp);return n.setDate(tp.getDate()+t+i),new Intl.DateTimeFormat(e,{weekday:"long"}).format(n)})}function $1(e,t,i){const n=new Date(e);let s={};switch(t){case"fullDateWithWeekday":s={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":s={weekday:"short",day:"numeric",month:"short",year:"numeric"};break;case"keyboardDate":s={};break;case"monthAndDate":s={month:"long",day:"numeric"};break;case"monthAndYear":s={month:"long",year:"numeric"};break;default:s={timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(i,s).format(n)}function W1(e,t){const i=new Date(e);return i.setDate(i.getDate()+t),i}function z1(e,t){const i=new Date(e);return i.setMonth(i.getMonth()+t),i}function j1(e){return e.getFullYear()}function X1(e){return e.getMonth()}function Y1(e){return new Date(e.getFullYear(),0,1)}function q1(e){return new Date(e.getFullYear(),11,31)}function lc(e){return new Date(e,0,1)}function K1(e){let t=e.getFullYear(),i=lc(t);if(e<i)t=t-1,i=lc(t);else{const r=lc(t+1);e>=r&&(t=t+1,i=r)}const n=Math.abs(e.getTime()-i.getTime()),s=Math.ceil(n/(1e3*60*60*24));return Math.floor(s/7)+1}function Z1(e,t){return my(e,t[0])&&Q1(e,t[1])}function J1(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function my(e,t){return e.getTime()>t.getTime()}function Q1(e,t){return e.getTime()<t.getTime()}function eS(e,t){return e.getTime()===t.getTime()}function tS(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function iS(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function nS(e,t,i){const n=new Date(e),s=new Date(t);return i==="month"?n.getMonth()-s.getMonth()+(n.getFullYear()-s.getFullYear())*12:Math.floor((n.getTime()-s.getTime())/(1e3*60*60*24))}function sS(e,t){const i=new Date(e);return i.setFullYear(t),i}class rS{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en";this.locale=t}date(t){return V1(t)}addDays(t,i){return W1(t,i)}addMonths(t,i){return z1(t,i)}getWeekArray(t){return U1(t)}startOfMonth(t){return fy(t)}endOfMonth(t){return py(t)}format(t,i){return $1(t,i,this.locale)}isEqual(t,i){return eS(t,i)}isValid(t){return J1(t)}isWithinRange(t,i){return Z1(t,i)}isAfter(t,i){return my(t,i)}isSameDay(t,i){return tS(t,i)}isSameMonth(t,i){return iS(t,i)}setYear(t,i){return sS(t,i)}getDiff(t,i,n){return nS(t,i,n)}getWeek(t){return K1(t)}getWeekdays(){return G1(this.locale)}getYear(t){return j1(t)}getMonth(t){return X1(t)}startOfYear(t){return Y1(t)}endOfYear(t){return q1(t)}}const ip=Symbol.for("vuetify:date-adapter");function oS(e){return e??{adapter:rS}}const Tl=["sm","md","lg","xl","xxl"],Ku=Symbol.for("vuetify:display"),np={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},aS=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:np;return pn(np,e)};function sp(e){return St&&!e?window.innerWidth:0}function rp(e){return St&&!e?window.innerHeight:0}function op(e){const t=St&&!e?window.navigator.userAgent:"ssr";function i(p){return!!t.match(p)}const n=i(/android/i),s=i(/iphone|ipad|ipod/i),r=i(/cordova/i),o=i(/electron/i),a=i(/chrome/i),l=i(/edge/i),c=i(/firefox/i),u=i(/opera/i),h=i(/win/i),d=i(/mac/i),f=i(/linux/i);return{android:n,ios:s,cordova:r,electron:o,chrome:a,edge:l,firefox:c,opera:u,win:h,mac:d,linux:f,touch:M1,ssr:t==="ssr"}}function lS(e,t){const{thresholds:i,mobileBreakpoint:n}=aS(e),s=Re(rp(t)),r=Re(op(t)),o=$t({}),a=Re(sp(t));function l(){s.value=rp(),a.value=sp()}function c(){l(),r.value=op()}return Kn(()=>{const u=a.value<i.sm,h=a.value<i.md&&!u,d=a.value<i.lg&&!(h||u),f=a.value<i.xl&&!(d||h||u),p=a.value<i.xxl&&!(f||d||h||u),g=a.value>=i.xxl,y=u?"xs":h?"sm":d?"md":f?"lg":p?"xl":"xxl",w=typeof n=="number"?n:i[n],x=a.value<w;o.xs=u,o.sm=h,o.md=d,o.lg=f,o.xl=p,o.xxl=g,o.smAndUp=!u,o.mdAndUp=!(u||h),o.lgAndUp=!(u||h||d),o.xlAndUp=!(u||h||d||f),o.smAndDown=!(d||f||p||g),o.mdAndDown=!(f||p||g),o.lgAndDown=!(p||g),o.xlAndDown=!g,o.name=y,o.height=s.value,o.width=a.value,o.mobile=x,o.mobileBreakpoint=n,o.platform=r.value,o.thresholds=i}),St&&window.addEventListener("resize",l,{passive:!0}),{...td(o),update:c,ssr:!!t}}function gy(){const e=qe(Ku);if(!e)throw new Error("Could not find Vuetify display injection");return e}const vy={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},yy={component:e=>Jn(by,{...e,class:"mdi"})},et=[String,Function,Object,Array],Zu=Symbol.for("vuetify:icons"),Cl=le({icon:{type:et},tag:{type:String,required:!0}},"icon"),ap=xe()({name:"VComponentIcon",props:Cl(),setup(e,t){let{slots:i}=t;return()=>{const n=e.icon;return b(e.tag,null,{default:()=>{var s;return[e.icon?b(n,null,null):(s=i.default)==null?void 0:s.call(i)]}})}}}),_y=br({name:"VSvgIcon",inheritAttrs:!1,props:Cl(),setup(e,t){let{attrs:i}=t;return()=>b(e.tag,Oe(i,{style:null}),{default:()=>[b("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(n=>Array.isArray(n)?b("path",{d:n[0],"fill-opacity":n[1]},null):b("path",{d:n},null)):b("path",{d:e.icon},null)])]})}});br({name:"VLigatureIcon",props:Cl(),setup(e){return()=>b(e.tag,null,{default:()=>[e.icon]})}});const by=br({name:"VClassIcon",props:Cl(),setup(e){return()=>b(e.tag,{class:e.icon},null)}}),cS={svg:{component:_y},class:{component:by}};function uS(e){return pn({defaultSet:"mdi",sets:{...cS,mdi:yy},aliases:vy},e)}const hS=e=>{const t=qe(Zu);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:N(()=>{var l;const n=on(e);if(!n)return{component:ap};let s=n;if(typeof s=="string"&&(s=s.trim(),s.startsWith("$")&&(s=(l=t.aliases)==null?void 0:l[s.slice(1)])),!s)throw new Error(`Could not find aliased icon "${n}"`);if(Array.isArray(s))return{component:_y,icon:s};if(typeof s!="string")return{component:ap,icon:s};const r=Object.keys(t.sets).find(c=>typeof s=="string"&&s.startsWith(`${c}:`)),o=r?s.slice(r.length+1):s;return{component:t.sets[r??t.defaultSet].component,icon:o}})}},Vs=2.4,lp=.2126729,cp=.7151522,up=.072175,dS=.55,fS=.58,pS=.57,mS=.62,Qo=.03,hp=1.45,gS=5e-4,vS=1.25,yS=1.25,dp=.078,fp=12.82051282051282,ea=.06,pp=.001;function mp(e,t){const i=(e.r/255)**Vs,n=(e.g/255)**Vs,s=(e.b/255)**Vs,r=(t.r/255)**Vs,o=(t.g/255)**Vs,a=(t.b/255)**Vs;let l=i*lp+n*cp+s*up,c=r*lp+o*cp+a*up;if(l<=Qo&&(l+=(Qo-l)**hp),c<=Qo&&(c+=(Qo-c)**hp),Math.abs(c-l)<gS)return 0;let u;if(c>l){const h=(c**dS-l**fS)*vS;u=h<pp?0:h<dp?h-h*fp*ea:h-ea}else{const h=(c**mS-l**pS)*yS;u=h>-pp?0:h>-dp?h-h*fp*ea:h+ea}return u*100}const po=Symbol.for("vuetify:theme"),Tt=le({theme:String},"theme"),Mr={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function _S(){var i,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mr;if(!e)return{...Mr,isDisabled:!0};const t={};for(const[s,r]of Object.entries(e.themes??{})){const o=r.dark||s==="dark"?(i=Mr.themes)==null?void 0:i.dark:(n=Mr.themes)==null?void 0:n.light;t[s]=pn(o,r)}return pn(Mr,{...e,themes:t})}function bS(e){const t=$t(_S(e)),i=Pe(t.defaultTheme),n=Pe(t.themes),s=N(()=>{const u={};for(const[h,d]of Object.entries(n.value)){const f=u[h]={...d,colors:{...d.colors}};if(t.variations)for(const p of t.variations.colors){const g=f.colors[p];if(g)for(const y of["lighten","darken"]){const w=y==="lighten"?x1:w1;for(const x of pd(t.variations[y],1))f.colors[`${p}-${y}-${x}`]=y1(w(gs(g),x))}}for(const p of Object.keys(f.colors)){if(/^on-[a-z]/.test(p)||f.colors[`on-${p}`])continue;const g=`on-${p}`,y=gs(f.colors[p]),w=Math.abs(mp(gs(0),y)),x=Math.abs(mp(gs(16777215),y));f.colors[g]=x>Math.min(w,50)?"#fff":"#000"}}return u}),r=N(()=>s.value[i.value]),o=N(()=>{const u=[];r.value.dark&&ns(u,":root",["color-scheme: dark"]),ns(u,":root",gp(r.value));for(const[p,g]of Object.entries(s.value))ns(u,`.v-theme--${p}`,[`color-scheme: ${g.dark?"dark":"normal"}`,...gp(g)]);const h=[],d=[],f=new Set(Object.values(s.value).flatMap(p=>Object.keys(p.colors)));for(const p of f)/^on-[a-z]/.test(p)?ns(d,`.${p}`,[`color: rgb(var(--v-theme-${p})) !important`]):(ns(h,`.bg-${p}`,[`--v-theme-overlay-multiplier: var(--v-theme-${p}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${p})) !important`,`color: rgb(var(--v-theme-on-${p})) !important`]),ns(d,`.text-${p}`,[`color: rgb(var(--v-theme-${p})) !important`]),ns(d,`.border-${p}`,[`--v-border-color: var(--v-theme-${p})`]));return u.push(...h,...d),u.map((p,g)=>g===0?p:`    ${p}`).join("")});function a(){return{style:[{children:o.value,id:"vuetify-theme-stylesheet",nonce:t.cspNonce||!1}]}}function l(u){const h=u._context.provides.usehead;if(h)if(h.push){const f=h.push(a);Ge(o,()=>{f.patch(a)})}else St?(h.addHeadObjs(N(a)),Kn(()=>h.updateDOM())):h.addHeadObjs(a());else{let p=function(){if(!t.isDisabled){if(typeof document<"u"&&!f){const g=document.createElement("style");g.type="text/css",g.id="vuetify-theme-stylesheet",t.cspNonce&&g.setAttribute("nonce",t.cspNonce),f=g,document.head.appendChild(f)}f&&(f.innerHTML=o.value)}};var d=p;let f=St?document.getElementById("vuetify-theme-stylesheet"):null;Ge(o,p,{immediate:!0})}}const c=N(()=>t.isDisabled?void 0:`v-theme--${i.value}`);return{install:l,isDisabled:t.isDisabled,name:i,themes:n,current:r,computedThemes:s,themeClasses:c,styles:o,global:{name:i,current:r}}}function Pt(e){Ft("provideTheme");const t=qe(po,null);if(!t)throw new Error("Could not find Vuetify theme injection");const i=N(()=>e.theme??(t==null?void 0:t.name.value)),n=N(()=>t.isDisabled?void 0:`v-theme--${i.value}`),s={...t,name:i,themeClasses:n};return Ut(po,s),s}function xS(){Ft("useTheme");const e=qe(po,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function ns(e,t,i){e.push(`${t} {
`,...i.map(n=>`  ${n};
`),`}
`)}function gp(e){const t=e.dark?2:1,i=e.dark?1:2,n=[];for(const[s,r]of Object.entries(e.colors)){const o=gs(r);n.push(`--v-theme-${s}: ${o.r},${o.g},${o.b}`),s.startsWith("on-")||n.push(`--v-theme-${s}-overlay-multiplier: ${S1(r)>.18?t:i}`)}for(const[s,r]of Object.entries(e.variables)){const o=typeof r=="string"&&r.startsWith("#")?gs(r):void 0,a=o?`${o.r}, ${o.g}, ${o.b}`:void 0;n.push(`--v-${s}: ${a??r}`)}return n}function Xa(e){const t=Pe(),i=Pe();if(St){const n=new ResizeObserver(s=>{e==null||e(s,n),s.length&&(i.value=s[0].contentRect)});Fi(()=>{n.disconnect()}),Ge(t,(s,r)=>{r&&(n.unobserve(r),i.value=void 0),s&&n.observe(s)},{flush:"post"})}return{resizeRef:t,contentRect:Eo(i)}}const Ya=Symbol.for("vuetify:layout"),xy=Symbol.for("vuetify:layout-item"),vp=1e3,wS=le({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),SS=le({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function TS(){const e=qe(Ya);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function CS(e){const t=qe(Ya);if(!t)throw new Error("[Vuetify] Could not find injected layout");const i=e.id??`layout-item-${qt()}`,n=Ft("useLayoutItem");Ut(xy,{id:i});const s=Re(!1);Av(()=>s.value=!0),Ev(()=>s.value=!1);const{layoutItemStyles:r,layoutItemScrimStyles:o}=t.register(n,{...e,active:N(()=>s.value?!1:e.active.value),id:i});return Fi(()=>t.unregister(i)),{layoutItemStyles:r,layoutRect:t.layoutRect,layoutItemScrimStyles:o}}const ES=(e,t,i,n)=>{let s={top:0,left:0,right:0,bottom:0};const r=[{id:"",layer:{...s}}];for(const o of e){const a=t.get(o),l=i.get(o),c=n.get(o);if(!a||!l||!c)continue;const u={...s,[a.value]:parseInt(s[a.value],10)+(c.value?parseInt(l.value,10):0)};r.push({id:o,layer:u}),s=u}return r};function AS(e){const t=qe(Ya,null),i=N(()=>t?t.rootZIndex.value-100:vp),n=Pe([]),s=$t(new Map),r=$t(new Map),o=$t(new Map),a=$t(new Map),l=$t(new Map),{resizeRef:c,contentRect:u}=Xa(),h=N(()=>{const V=new Map,L=e.overlaps??[];for(const M of L.filter(G=>G.includes(":"))){const[G,j]=M.split(":");if(!n.value.includes(G)||!n.value.includes(j))continue;const B=s.get(G),R=s.get(j),F=r.get(G),O=r.get(j);!B||!R||!F||!O||(V.set(j,{position:B.value,amount:parseInt(F.value,10)}),V.set(G,{position:R.value,amount:-parseInt(O.value,10)}))}return V}),d=N(()=>{const V=[...new Set([...o.values()].map(M=>M.value))].sort((M,G)=>M-G),L=[];for(const M of V){const G=n.value.filter(j=>{var B;return((B=o.get(j))==null?void 0:B.value)===M});L.push(...G)}return ES(L,s,r,a)}),f=N(()=>!Array.from(l.values()).some(V=>V.value)),p=N(()=>d.value[d.value.length-1].layer),g=N(()=>({"--v-layout-left":Ie(p.value.left),"--v-layout-right":Ie(p.value.right),"--v-layout-top":Ie(p.value.top),"--v-layout-bottom":Ie(p.value.bottom),...f.value?void 0:{transition:"none"}})),y=N(()=>d.value.slice(1).map((V,L)=>{let{id:M}=V;const{layer:G}=d.value[L],j=r.get(M),B=s.get(M);return{id:M,...G,size:Number(j.value),position:B.value}})),w=V=>y.value.find(L=>L.id===V),x=Ft("createLayout"),_=Re(!1);Zn(()=>{_.value=!0}),Ut(Ya,{register:(V,L)=>{let{id:M,order:G,position:j,layoutSize:B,elementSize:R,active:F,disableTransitions:O,absolute:q}=L;o.set(M,G),s.set(M,j),r.set(M,B),a.set(M,F),O&&l.set(M,O);const W=Kr(xy,x==null?void 0:x.vnode).indexOf(V);W>-1?n.value.splice(W,0,M):n.value.push(M);const S=N(()=>y.value.findIndex(U=>U.id===M)),A=N(()=>i.value+d.value.length*2-S.value*2),E=N(()=>{const U=j.value==="left"||j.value==="right",Y=j.value==="right",J=j.value==="bottom",ee={[j.value]:0,zIndex:A.value,transform:`translate${U?"X":"Y"}(${(F.value?0:-110)*(Y||J?-1:1)}%)`,position:q.value||i.value!==vp?"absolute":"fixed",...f.value?void 0:{transition:"none"}};if(!_.value)return ee;const $=y.value[S.value];if(!$)throw new Error(`[Vuetify] Could not find layout item "${M}"`);const Q=h.value.get(M);return Q&&($[Q.position]+=Q.amount),{...ee,height:U?`calc(100% - ${$.top}px - ${$.bottom}px)`:R.value?`${R.value}px`:void 0,left:Y?void 0:`${$.left}px`,right:Y?`${$.right}px`:void 0,top:j.value!=="bottom"?`${$.top}px`:void 0,bottom:j.value!=="top"?`${$.bottom}px`:void 0,width:U?R.value?`${R.value}px`:void 0:`calc(100% - ${$.left}px - ${$.right}px)`}}),I=N(()=>({zIndex:A.value-1}));return{layoutItemStyles:E,layoutItemScrimStyles:I,zIndex:A}},unregister:V=>{o.delete(V),s.delete(V),r.delete(V),a.delete(V),l.delete(V),n.value=n.value.filter(L=>L!==V)},mainRect:p,mainStyles:g,getLayoutItem:w,items:y,layoutRect:u,rootZIndex:i});const C=N(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),k=N(()=>({zIndex:i.value,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:C,layoutStyles:k,getLayoutItem:w,items:y,layoutRect:u,layoutRef:c}}function wy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...i}=e,n=pn(t,i),{aliases:s={},components:r={},directives:o={}}=n,a=T1(n.defaults),l=lS(n.display,n.ssr),c=bS(n.theme),u=uS(n.icons),h=L1(n.locale),d=oS(n.date);return{install:p=>{for(const g in o)p.directive(g,o[g]);for(const g in r)p.component(g,r[g]);for(const g in s)p.component(g,br({...s[g],name:g,aliasName:s[g].name}));if(c.install(p),p.provide(ho,a),p.provide(Ku,l),p.provide(po,c),p.provide(Zu,u),p.provide(ja,h),p.provide(ip,d),St&&n.ssr)if(p.$nuxt)p.$nuxt.hook("app:suspense:resolve",()=>{l.update()});else{const{mount:g}=p;p.mount=function(){const y=g(...arguments);return ni(()=>l.update()),p.mount=g,y}}qt.reset(),p.mixin({computed:{$vuetify(){return $t({defaults:Hs.call(this,ho),display:Hs.call(this,Ku),theme:Hs.call(this,po),icons:Hs.call(this,Zu),locale:Hs.call(this,ja),date:Hs.call(this,ip)})}}})},defaults:a,display:l,theme:c,icons:u,locale:h,date:d}}const IS="3.2.4";wy.version=IS;function Hs(e){var n,s;const t=this.$,i=((n=t.parent)==null?void 0:n.provides)??((s=t.vnode.appContext)==null?void 0:s.provides);if(i&&e in i)return i[e]}const PS={dark:!0,colors:{field:"#008000",lines:"#ffffff",ball:"#ffa500","blue-team-field":"0000ff","yellow-team-field":"ffff00","blue-team-text":"#ffffff","yellow-team-text":"#000000","status-shell-color":"00008b","status-controlled-robot":"008000","status-visibility":"0000ff","status-warn":"ffff00","status-error":"ff0000","dot-pattern-pink":"ff1493","dot-pattern-green":"7cfc00","ateam-color":"#cbb26b"},variables:{name:"A-Team Theme"}},MS=wy({theme:{defaultTheme:"aTeamTheme",options:{customProperties:!0},themes:{aTeamTheme:PS}},icons:{defaultSet:"mdi",aliases:vy,sets:{mdi:yy}}});var Zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var yp=Object.getOwnPropertySymbols,RS=Object.prototype.hasOwnProperty,kS=Object.prototype.propertyIsEnumerable;function BS(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function FS(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(t).map(function(r){return t[r]});if(n.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(r){s[r]=r}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Is=FS()?Object.assign:function(e,t){for(var i,n=BS(e),s,r=1;r<arguments.length;r++){i=Object(arguments[r]);for(var o in i)RS.call(i,o)&&(n[o]=i[o]);if(yp){s=yp(i);for(var a=0;a<s.length;a++)kS.call(i,s[a])&&(n[s[a]]=i[s[a]])}}return n},cc={exports:{}},uc,_p;function wd(){return _p||(_p=1,uc=function(e,t,i){t.forEach(function(n){var s=i[n];e.prototype[n]=function(r){return r.ros=this,new s(r)}})}),uc}var hc,bp;function Sy(){return bp||(bp=1,hc=typeof window<"u"?window.WebSocket:WebSocket),hc}var dc,xp;function DS(){if(xp)return dc;xp=1;var e=arguments[3],t=arguments[4],i=arguments[5],n=JSON.stringify;return dc=function(s,r){for(var o,a=Object.keys(i),l=0,c=a.length;l<c;l++){var u=a[l],h=i[u].exports;if(h===s||h&&h.default===s){o=u;break}}if(!o){o=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},l=0,c=a.length;l<c;l++){var u=a[l];d[u]=u}t[o]=["function(require,module,exports){"+s+"(self); }",d]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[o]=o,t[f]=["function(require,module,exports){var f = require("+n(o)+");(f.default ? f.default : f)(self);}",p];var g={};y(f);function y(V){g[V]=!0;for(var L in t[V][1]){var M=t[V][1][L];g[M]||y(M)}}var w="("+e+")({"+Object.keys(g).map(function(V){return n(V)+":["+t[V][0]+","+n(t[V][1])+"]"}).join(",")+"},{},["+n(f)+"])",x=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([w],{type:"text/javascript"});if(r&&r.bare)return _;var C=x.createObjectURL(_),k=new Worker(C);return k.objectURL=C,k},dc}var fc={exports:{}},wp;function OS(){return wp||(wp=1,function(e){function t(c){var u={};function h(f){if(u[f])return u[f].exports;var p=u[f]={i:f,l:!1,exports:{}};return c[f].call(p.exports,p,p.exports,h),p.l=!0,p.exports}h.m=c,h.c=u,h.i=function(f){return f},h.d=function(f,p,g){h.o(f,p)||Object.defineProperty(f,p,{configurable:!1,enumerable:!0,get:g})},h.r=function(f){Object.defineProperty(f,"__esModule",{value:!0})},h.n=function(f){var p=f&&f.__esModule?function(){return f.default}:function(){return f};return h.d(p,"a",p),p},h.o=function(f,p){return Object.prototype.hasOwnProperty.call(f,p)},h.p="/",h.oe=function(f){throw console.error(f),f};var d=h(h.s=ENTRY_MODULE);return d.default||d}var i="[\\.|\\-|\\+|\\w|/|@]+",n="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function s(c){return(c+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function r(c){return!isNaN(1*c)}function o(c,u,h){var d={};d[h]=[];var f=u.toString(),p=f.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!p)return d;for(var g=p[1],y=new RegExp("(\\\\n|\\W)"+s(g)+n,"g"),w;w=y.exec(f);)w[3]!=="dll-reference"&&d[h].push(w[3]);for(y=new RegExp("\\("+s(g)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+n,"g");w=y.exec(f);)c[w[2]]||(d[h].push(w[1]),c[w[2]]=__webpack_require__(w[1]).m),d[w[2]]=d[w[2]]||[],d[w[2]].push(w[4]);for(var x=Object.keys(d),_=0;_<x.length;_++)for(var C=0;C<d[x[_]].length;C++)r(d[x[_]][C])&&(d[x[_]][C]=1*d[x[_]][C]);return d}function a(c){var u=Object.keys(c);return u.reduce(function(h,d){return h||c[d].length>0},!1)}function l(c,u){for(var h={main:[u]},d={main:[]},f={main:{}};a(h);)for(var p=Object.keys(h),g=0;g<p.length;g++){var y=p[g],w=h[y],x=w.pop();if(f[y]=f[y]||{},!(f[y][x]||!c[y][x])){f[y][x]=!0,d[y]=d[y]||[],d[y].push(x);for(var _=o(c,c[y][x],y),C=Object.keys(_),k=0;k<C.length;k++)h[C[k]]=h[C[k]]||[],h[C[k]]=h[C[k]].concat(_[C[k]])}}return d}e.exports=function(c,u){u=u||{};var h={main:__webpack_modules__},d=u.all?{main:Object.keys(h.main)}:l(h,c),f="";Object.keys(d).filter(function(x){return x!=="main"}).forEach(function(x){for(var _=0;d[x][_];)_++;d[x].push(_),h[x][_]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",f=f+"var "+x+" = ("+t.toString().replace("ENTRY_MODULE",JSON.stringify(_))+")({"+d[x].map(function(C){return""+JSON.stringify(C)+": "+h[x][C].toString()}).join(",")+`});
`}),f=f+"new (("+t.toString().replace("ENTRY_MODULE",JSON.stringify(c))+")({"+d.main.map(function(x){return""+JSON.stringify(x)+": "+h.main[x].toString()}).join(",")+"}))(self);";var p=new window.Blob([f],{type:"text/javascript"});if(u.bare)return p;var g=window.URL||window.webkitURL||window.mozURL||window.msURL,y=g.createObjectURL(p),w=new window.Worker(y);return w.objectURL=y,w}}(fc)),fc.exports}var pc,Sp;function LS(){if(Sp)return pc;Sp=1;var e=e||Sy();return pc=function(t){var i=null;function n(r){var o=r.data;o instanceof ArrayBuffer?t.postMessage(o,[o]):t.postMessage(o)}function s(r){t.postMessage({type:r.type})}t.addEventListener("message",function(r){var o=r.data;if(typeof o=="string")i.send(o);else if(o.hasOwnProperty("close"))i.close(),i=null;else if(o.hasOwnProperty("uri")){var a=o.uri;i=new e(a),i.binaryType="arraybuffer",i.onmessage=n,i.onclose=s,i.onopen=s,i.onerror=s}else throw"Unknown message to WorkerSocket"})},pc}var mc,Tp;function NS(){if(Tp)return mc;Tp=1;try{var e=DS()}catch{var e=OS()}var t=LS();function i(n){this.socket_=e(t),this.socket_.addEventListener("message",this.handleWorkerMessage_.bind(this)),this.socket_.postMessage({uri:n})}return i.prototype.handleWorkerMessage_=function(n){var s=n.data;if(s instanceof ArrayBuffer||typeof s=="string")this.onmessage(n);else{var r=s.type;if(r==="close")this.onclose(null);else if(r==="open")this.onopen(null);else if(r==="error")this.onerror(null);else throw"Unknown message from workersocket"}},i.prototype.send=function(n){this.socket_.postMessage(n)},i.prototype.close=function(){this.socket_.postMessage({close:!0})},mc=i,mc}var gc,Cp;function US(){return Cp||(Cp=1,gc=function(){return document.createElement("canvas")}),gc}var vc,Ep;function VS(){if(Ep)return vc;Ep=1;var e=US(),t=e.Image||window.Image;function i(n,s){var r=new t;r.onload=function(){var o=new e,a=o.getContext("2d");o.width=r.width,o.height=r.height,a.imageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.drawImage(r,0,0);for(var l=a.getImageData(0,0,r.width,r.height).data,c="",u=0;u<l.length;u+=4)c+=String.fromCharCode(l[u],l[u+1],l[u+2]);s(JSON.parse(c))},r.src="data:image/png;base64,"+n}return vc=i,vc}var yc={exports:{}},Ap;function HS(){return Ap||(Ap=1,function(e){(function(t,i){var n=Math.pow(2,-24),s=Math.pow(2,32),r=Math.pow(2,53);function o(c){var u=new ArrayBuffer(256),h=new DataView(u),d,f=0;function p(B){for(var R=u.byteLength,F=f+B;R<F;)R*=2;if(R!==u.byteLength){var O=h;u=new ArrayBuffer(R),h=new DataView(u);for(var q=f+3>>2,X=0;X<q;++X)h.setUint32(X*4,O.getUint32(X*4))}return d=B,h}function g(){f+=d}function y(B){g(p(8).setFloat64(f,B))}function w(B){g(p(1).setUint8(f,B))}function x(B){for(var R=p(B.length),F=0;F<B.length;++F)R.setUint8(f+F,B[F]);g()}function _(B){g(p(2).setUint16(f,B))}function C(B){g(p(4).setUint32(f,B))}function k(B){var R=B%s,F=(B-R)/s,O=p(8);O.setUint32(f,F),O.setUint32(f+4,R),g()}function V(B,R){R<24?w(B<<5|R):R<256?(w(B<<5|24),w(R)):R<65536?(w(B<<5|25),_(R)):R<4294967296?(w(B<<5|26),C(R)):(w(B<<5|27),k(R))}function L(B){var R;if(B===!1)return w(244);if(B===!0)return w(245);if(B===null)return w(246);if(B===i)return w(247);switch(typeof B){case"number":if(Math.floor(B)===B){if(0<=B&&B<=r)return V(0,B);if(-r<=B&&B<0)return V(1,-(B+1))}return w(251),y(B);case"string":var F=[];for(R=0;R<B.length;++R){var O=B.charCodeAt(R);O<128?F.push(O):O<2048?(F.push(192|O>>6),F.push(128|O&63)):O<55296?(F.push(224|O>>12),F.push(128|O>>6&63),F.push(128|O&63)):(O=(O&1023)<<10,O|=B.charCodeAt(++R)&1023,O+=65536,F.push(240|O>>18),F.push(128|O>>12&63),F.push(128|O>>6&63),F.push(128|O&63))}return V(3,F.length),x(F);default:var q;if(Array.isArray(B))for(q=B.length,V(4,q),R=0;R<q;++R)L(B[R]);else if(B instanceof Uint8Array)V(2,B.length),x(B);else{var X=Object.keys(B);for(q=X.length,V(5,q),R=0;R<q;++R){var W=X[R];L(W),L(B[W])}}}}if(L(c),"slice"in u)return u.slice(0,f);for(var M=new ArrayBuffer(f),G=new DataView(M),j=0;j<f;++j)G.setUint8(j,h.getUint8(j));return M}function a(c,u,h){var d=new DataView(c),f=0;typeof u!="function"&&(u=function(F){return F}),typeof h!="function"&&(h=function(){return i});function p(F,O){return f+=O,F}function g(F){return p(new Uint8Array(c,f,F),F)}function y(){var F=new ArrayBuffer(4),O=new DataView(F),q=C(),X=q&32768,W=q&31744,S=q&1023;if(W===31744)W=261120;else if(W!==0)W+=127-15<<10;else if(S!==0)return S*n;return O.setUint32(0,X<<16|W<<13|S<<13),O.getFloat32(0)}function w(){return p(d.getFloat32(f),4)}function x(){return p(d.getFloat64(f),8)}function _(){return p(d.getUint8(f),1)}function C(){return p(d.getUint16(f),2)}function k(){return p(d.getUint32(f),4)}function V(){return k()*s+k()}function L(){return d.getUint8(f)!==255?!1:(f+=1,!0)}function M(F){if(F<24)return F;if(F===24)return _();if(F===25)return C();if(F===26)return k();if(F===27)return V();if(F===31)return-1;throw"Invalid length encoding"}function G(F){var O=_();if(O===255)return-1;var q=M(O&31);if(q<0||O>>5!==F)throw"Invalid indefinite length element";return q}function j(F,O){for(var q=0;q<O;++q){var X=_();X&128&&(X<224?(X=(X&31)<<6|_()&63,O-=1):X<240?(X=(X&15)<<12|(_()&63)<<6|_()&63,O-=2):(X=(X&15)<<18|(_()&63)<<12|(_()&63)<<6|_()&63,O-=3)),X<65536?F.push(X):(X-=65536,F.push(55296|X>>10),F.push(56320|X&1023))}}function B(){var F=_(),O=F>>5,q=F&31,X,W;if(O===7)switch(q){case 25:return y();case 26:return w();case 27:return x()}if(W=M(q),W<0&&(O<2||6<O))throw"Invalid length";switch(O){case 0:return W;case 1:return-1-W;case 2:if(W<0){for(var S=[],A=0;(W=G(O))>=0;)A+=W,S.push(g(W));var E=new Uint8Array(A),I=0;for(X=0;X<S.length;++X)E.set(S[X],I),I+=S[X].length;return E}return g(W);case 3:var U=[];if(W<0)for(;(W=G(O))>=0;)j(U,W);else j(U,W);return String.fromCharCode.apply(null,U);case 4:var Y;if(W<0)for(Y=[];!L();)Y.push(B());else for(Y=new Array(W),X=0;X<W;++X)Y[X]=B();return Y;case 5:var J={};for(X=0;X<W||W<0&&!L();++X){var ee=B();J[ee]=B()}return J;case 6:return u(B(),W);case 7:switch(W){case 20:return!1;case 21:return!0;case 22:return null;case 23:return i;default:return h(W)}}}var R=B();if(f!==c.byteLength)throw"Remaining bytes";return R}var l={encode:o,decode:a};typeof i=="function"&&i.amd?i("cbor/cbor",l):e.exports?e.exports=l:t.CBOR||(t.CBOR=l)})(Zr)}(yc)),yc.exports}var _c={exports:{}},Ip;function GS(){return Ip||(Ip=1,function(e){var t=Math.pow(2,32),i=!1;function n(){i||(i=!0,console.warn("CBOR 64-bit integer array values may lose precision. No further warnings."))}function s(u){n();for(var h=u.byteLength,d=u.byteOffset,f=h/8,p=u.buffer.slice(d,d+h),g=new Uint32Array(p),y=new Array(f),w=0;w<f;w++){var x=w*2,_=g[x],C=g[x+1];y[w]=_+t*C}return y}function r(u){n();for(var h=u.byteLength,d=u.byteOffset,f=h/8,p=u.buffer.slice(d,d+h),g=new Uint32Array(p),y=new Int32Array(p),w=new Array(f),x=0;x<f;x++){var _=x*2,C=g[_],k=y[_+1];w[x]=C+t*k}return w}function o(u,h){var d=u.byteLength,f=u.byteOffset,p=u.buffer.slice(f,f+d);return new h(p)}var a={64:Uint8Array,69:Uint16Array,70:Uint32Array,72:Int8Array,77:Int16Array,78:Int32Array,85:Float32Array,86:Float64Array},l={71:s,79:r};function c(u,h){if(h in a){var d=a[h];return o(u,d)}return h in l?l[h](u):u}e.exports&&(e.exports=c)}(_c)),_c.exports}var bc,Pp;function $S(){if(Pp)return bc;Pp=1;var e=VS(),t=HS(),i=GS(),n=null;typeof bson<"u"&&(n=bson().BSON);function s(r){var o=null;r.transportOptions.decoder&&(o=r.transportOptions.decoder);function a(u){u.op==="publish"?r.emit(u.topic,u.msg):u.op==="service_response"?r.emit(u.id,u):u.op==="call_service"?r.emit(u.service,u):u.op==="status"&&(u.id?r.emit("status:"+u.id,u):r.emit("status",u))}function l(u,h){u.op==="png"?e(u.data,h):h(u)}function c(u,h){if(!n)throw"Cannot process BSON encoded message without BSON header.";var d=new FileReader;d.onload=function(){var f=new Uint8Array(this.result),p=n.deserialize(f);h(p)},d.readAsArrayBuffer(u)}return{onopen:function(h){r.isConnected=!0,r.emit("connection",h)},onclose:function(h){r.isConnected=!1,r.emit("close",h)},onerror:function(h){r.emit("error",h)},onmessage:function(h){if(o)o(h.data,function(p){a(p)});else if(typeof Blob<"u"&&h.data instanceof Blob)c(h.data,function(p){l(p,a)});else if(h.data instanceof ArrayBuffer){var d=t.decode(h.data,i);a(d)}else{var f=JSON.parse(typeof h=="string"?h:h.data);l(f,a)}}}}return bc=s,bc}var xc,Mp;function Ty(){if(Mp)return xc;Mp=1;var e=Is;function t(i){e(this,i)}return xc=t,xc}var wc,Rp;function Ro(){if(Rp)return wc;Rp=1;var e=Is;function t(i){e(this,i)}return wc=t,wc}var Sc={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */var kp;function Ps(){return kp||(kp=1,function(e,t){(function(i){var n=Object.hasOwnProperty,s=Array.isArray?Array.isArray:function(A){return Object.prototype.toString.call(A)==="[object Array]"},r=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",l=typeof Reflect=="object",c=typeof setImmediate=="function",u=c?setImmediate:setTimeout,h=a?l&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(S){var A=Object.getOwnPropertyNames(S);return A.push.apply(A,Object.getOwnPropertySymbols(S)),A}:Object.keys;function d(){this._events={},this._conf&&f.call(this,this._conf)}function f(S){S&&(this._conf=S,S.delimiter&&(this.delimiter=S.delimiter),S.maxListeners!==i&&(this._maxListeners=S.maxListeners),S.wildcard&&(this.wildcard=S.wildcard),S.newListener&&(this._newListener=S.newListener),S.removeListener&&(this._removeListener=S.removeListener),S.verboseMemoryLeak&&(this.verboseMemoryLeak=S.verboseMemoryLeak),S.ignoreErrors&&(this.ignoreErrors=S.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(S,A){var E="(node) warning: possible EventEmitter memory leak detected. "+S+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(E+=" Event name: "+A+"."),typeof process<"u"&&process.emitWarning){var I=new Error(E);I.name="MaxListenersExceededWarning",I.emitter=this,I.count=S,process.emitWarning(I)}else console.error(E),console.trace&&console.trace()}var g=function(S,A,E){var I=arguments.length;switch(I){case 0:return[];case 1:return[S];case 2:return[S,A];case 3:return[S,A,E];default:for(var U=new Array(I);I--;)U[I]=arguments[I];return U}};function y(S,A){for(var E={},I,U=S.length,Y=A?A.length:0,J=0;J<U;J++)I=S[J],E[I]=J<Y?A[J]:i;return E}function w(S,A,E){this._emitter=S,this._target=A,this._listeners={},this._listenersCount=0;var I,U;if((E.on||E.off)&&(I=E.on,U=E.off),A.addEventListener?(I=A.addEventListener,U=A.removeEventListener):A.addListener?(I=A.addListener,U=A.removeListener):A.on&&(I=A.on,U=A.off),!I&&!U)throw Error("target does not implement any known event API");if(typeof I!="function")throw TypeError("on method must be a function");if(typeof U!="function")throw TypeError("off method must be a function");this._on=I,this._off=U;var Y=S._observers;Y?Y.push(this):S._observers=[this]}Object.assign(w.prototype,{subscribe:function(S,A,E){var I=this,U=this._target,Y=this._emitter,J=this._listeners,ee=function(){var $=g.apply(null,arguments),Q={data:$,name:A,original:S};if(E){var he=E.call(U,Q);he!==!1&&Y.emit.apply(Y,[Q.name].concat($));return}Y.emit.apply(Y,[A].concat($))};if(J[S])throw Error("Event '"+S+"' is already listening");this._listenersCount++,Y._newListener&&Y._removeListener&&!I._onNewListener?(this._onNewListener=function($){$===A&&J[S]===null&&(J[S]=ee,I._on.call(U,S,ee))},Y.on("newListener",this._onNewListener),this._onRemoveListener=function($){$===A&&!Y.hasListeners($)&&J[S]&&(J[S]=null,I._off.call(U,S,ee))},J[S]=null,Y.on("removeListener",this._onRemoveListener)):(J[S]=ee,I._on.call(U,S,ee))},unsubscribe:function(S){var A=this,E=this._listeners,I=this._emitter,U,Y,J=this._off,ee=this._target,$;if(S&&typeof S!="string")throw TypeError("event must be a string");function Q(){A._onNewListener&&(I.off("newListener",A._onNewListener),I.off("removeListener",A._onRemoveListener),A._onNewListener=null,A._onRemoveListener=null);var he=M.call(I,A);I._observers.splice(he,1)}if(S){if(U=E[S],!U)return;J.call(ee,S,U),delete E[S],--this._listenersCount||Q()}else{for(Y=h(E),$=Y.length;$-- >0;)S=Y[$],J.call(ee,S,E[S]);this._listeners={},this._listenersCount=0,Q()}}});function x(S,A,E,I){var U=Object.assign({},A);if(!S)return U;if(typeof S!="object")throw TypeError("options must be an object");var Y=Object.keys(S),J=Y.length,ee,$,Q;function he(Te){throw Error('Invalid "'+ee+'" option value'+(Te?". Reason: "+Te:""))}for(var Fe=0;Fe<J;Fe++){if(ee=Y[Fe],!I&&!n.call(A,ee))throw Error('Unknown "'+ee+'" option');$=S[ee],$!==i&&(Q=E[ee],U[ee]=Q?Q($,he):$)}return U}function _(S,A){return(typeof S!="function"||!S.hasOwnProperty("prototype"))&&A("value must be a constructor"),S}function C(S){var A="value must be type of "+S.join("|"),E=S.length,I=S[0],U=S[1];return E===1?function(Y,J){if(typeof Y===I)return Y;J(A)}:E===2?function(Y,J){var ee=typeof Y;if(ee===I||ee===U)return Y;J(A)}:function(Y,J){for(var ee=typeof Y,$=E;$-- >0;)if(ee===S[$])return Y;J(A)}}var k=C(["function"]),V=C(["object","function"]);function L(S,A,E){var I,U,Y=0,J,ee=new S(function($,Q,he){E=x(E,{timeout:0,overload:!1},{timeout:function(D,H){return D*=1,(typeof D!="number"||D<0||!Number.isFinite(D))&&H("timeout must be a positive number"),D}}),I=!E.overload&&typeof S.prototype.cancel=="function"&&typeof he=="function";function Fe(){U&&(U=null),Y&&(clearTimeout(Y),Y=0)}var Te=function(D){Fe(),$(D)},ve=function(D){Fe(),Q(D)};I?A(Te,ve,he):(U=[function(D){ve(D||Error("canceled"))}],A(Te,ve,function(D){if(J)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof D!="function")throw TypeError("onCancel callback must be a function");U.push(D)}),J=!0),E.timeout>0&&(Y=setTimeout(function(){var D=Error("timeout");D.code="ETIMEDOUT",Y=0,ee.cancel(D),Q(D)},E.timeout))});return I||(ee.cancel=function($){if(U){for(var Q=U.length,he=1;he<Q;he++)U[he]($);U[0]($),U=null}}),ee}function M(S){var A=this._observers;if(!A)return-1;for(var E=A.length,I=0;I<E;I++)if(A[I]._target===S)return I;return-1}function G(S,A,E,I,U){if(!E)return null;if(I===0){var Y=typeof A;if(Y==="string"){var J,ee,$=0,Q=0,he=this.delimiter,Fe=he.length;if((ee=A.indexOf(he))!==-1){J=new Array(5);do J[$++]=A.slice(Q,ee),Q=ee+Fe;while((ee=A.indexOf(he,Q))!==-1);J[$++]=A.slice(Q),A=J,U=$}else A=[A],U=1}else Y==="object"?U=A.length:(A=[A],U=1)}var Te=null,ve,D,H,K,ie,ne=A[I],ae=A[I+1],ce,re;if(I===U)E._listeners&&(typeof E._listeners=="function"?(S&&S.push(E._listeners),Te=[E]):(S&&S.push.apply(S,E._listeners),Te=[E]));else if(ne==="*"){for(ce=h(E),ee=ce.length;ee-- >0;)ve=ce[ee],ve!=="_listeners"&&(re=G(S,A,E[ve],I+1,U),re&&(Te?Te.push.apply(Te,re):Te=re));return Te}else if(ne==="**"){for(ie=I+1===U||I+2===U&&ae==="*",ie&&E._listeners&&(Te=G(S,A,E,U,U)),ce=h(E),ee=ce.length;ee-- >0;)ve=ce[ee],ve!=="_listeners"&&(ve==="*"||ve==="**"?(E[ve]._listeners&&!ie&&(re=G(S,A,E[ve],U,U),re&&(Te?Te.push.apply(Te,re):Te=re)),re=G(S,A,E[ve],I,U)):ve===ae?re=G(S,A,E[ve],I+2,U):re=G(S,A,E[ve],I,U),re&&(Te?Te.push.apply(Te,re):Te=re));return Te}else E[ne]&&(Te=G(S,A,E[ne],I+1,U));if(D=E["*"],D&&G(S,A,D,I+1,U),H=E["**"],H)if(I<U)for(H._listeners&&G(S,A,H,U,U),ce=h(H),ee=ce.length;ee-- >0;)ve=ce[ee],ve!=="_listeners"&&(ve===ae?G(S,A,H[ve],I+2,U):ve===ne?G(S,A,H[ve],I+1,U):(K={},K[ve]=H[ve],G(S,A,{"**":K},I+1,U)));else H._listeners?G(S,A,H,U,U):H["*"]&&H["*"]._listeners&&G(S,A,H["*"],U,U);return Te}function j(S,A,E){var I=0,U=0,Y,J=this.delimiter,ee=J.length,$;if(typeof S=="string")if((Y=S.indexOf(J))!==-1){$=new Array(5);do $[I++]=S.slice(U,Y),U=Y+ee;while((Y=S.indexOf(J,U))!==-1);$[I++]=S.slice(U)}else $=[S],I=1;else $=S,I=S.length;if(I>1){for(Y=0;Y+1<I;Y++)if($[Y]==="**"&&$[Y+1]==="**")return}var Q=this.listenerTree,he;for(Y=0;Y<I;Y++)if(he=$[Y],Q=Q[he]||(Q[he]={}),Y===I-1)return Q._listeners?(typeof Q._listeners=="function"&&(Q._listeners=[Q._listeners]),E?Q._listeners.unshift(A):Q._listeners.push(A),!Q._listeners.warned&&this._maxListeners>0&&Q._listeners.length>this._maxListeners&&(Q._listeners.warned=!0,p.call(this,Q._listeners.length,he))):Q._listeners=A,!0;return!0}function B(S,A,E,I){for(var U=h(S),Y=U.length,J,ee,$,Q=S._listeners,he;Y-- >0;)ee=U[Y],J=S[ee],ee==="_listeners"?$=E:$=E?E.concat(ee):[ee],he=I||typeof ee=="symbol",Q&&A.push(he?$:$.join(this.delimiter)),typeof J=="object"&&B.call(this,J,A,$,he);return A}function R(S){for(var A=h(S),E=A.length,I,U,Y;E-- >0;)U=A[E],I=S[U],I&&(Y=!0,U!=="_listeners"&&!R(I)&&delete S[U]);return Y}function F(S,A,E){this.emitter=S,this.event=A,this.listener=E}F.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function O(S,A,E){if(E===!0)U=!0;else if(E===!1)I=!0;else{if(!E||typeof E!="object")throw TypeError("options should be an object or true");var I=E.async,U=E.promisify,Y=E.nextTick,J=E.objectify}if(I||Y||U){var ee=A,$=A._origin||A;if(Y&&!o)throw Error("process.nextTick is not supported");U===i&&(U=A.constructor.name==="AsyncFunction"),A=function(){var Q=arguments,he=this,Fe=this.event;return U?Y?Promise.resolve():new Promise(function(Te){u(Te)}).then(function(){return he.event=Fe,ee.apply(he,Q)}):(Y?process.nextTick:u)(function(){he.event=Fe,ee.apply(he,Q)})},A._async=!0,A._origin=$}return[A,J?new F(this,S,A):this]}function q(S){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,f.call(this,S)}q.EventEmitter2=q,q.prototype.listenTo=function(S,A,E){if(typeof S!="object")throw TypeError("target musts be an object");var I=this;E=x(E,{on:i,off:i,reducers:i},{on:k,off:k,reducers:V});function U(Y){if(typeof Y!="object")throw TypeError("events must be an object");var J=E.reducers,ee=M.call(I,S),$;ee===-1?$=new w(I,S,E):$=I._observers[ee];for(var Q=h(Y),he=Q.length,Fe,Te=typeof J=="function",ve=0;ve<he;ve++)Fe=Q[ve],$.subscribe(Fe,Y[Fe]||Fe,Te?J:J&&J[Fe])}return s(A)?U(y(A)):U(typeof A=="string"?y(A.split(/\s+/)):A),this},q.prototype.stopListeningTo=function(S,A){var E=this._observers;if(!E)return!1;var I=E.length,U,Y=!1;if(S&&typeof S!="object")throw TypeError("target should be an object");for(;I-- >0;)U=E[I],(!S||U._target===S)&&(U.unsubscribe(A),Y=!0);return Y},q.prototype.delimiter=".",q.prototype.setMaxListeners=function(S){S!==i&&(this._maxListeners=S,this._conf||(this._conf={}),this._conf.maxListeners=S)},q.prototype.getMaxListeners=function(){return this._maxListeners},q.prototype.event="",q.prototype.once=function(S,A,E){return this._once(S,A,!1,E)},q.prototype.prependOnceListener=function(S,A,E){return this._once(S,A,!0,E)},q.prototype._once=function(S,A,E,I){return this._many(S,1,A,E,I)},q.prototype.many=function(S,A,E,I){return this._many(S,A,E,!1,I)},q.prototype.prependMany=function(S,A,E,I){return this._many(S,A,E,!0,I)},q.prototype._many=function(S,A,E,I,U){var Y=this;if(typeof E!="function")throw new Error("many only accepts instances of Function");function J(){return--A===0&&Y.off(S,J),E.apply(this,arguments)}return J._origin=E,this._on(S,J,I,U)},q.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var S=arguments[0],A,E=this.wildcard,I,U,Y,J,ee;if(S==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(E&&(A=S,S!=="newListener"&&S!=="removeListener"&&typeof S=="object")){if(U=S.length,a){for(Y=0;Y<U;Y++)if(typeof S[Y]=="symbol"){ee=!0;break}}ee||(S=S.join(this.delimiter))}var $=arguments.length,Q;if(this._all&&this._all.length)for(Q=this._all.slice(),Y=0,U=Q.length;Y<U;Y++)switch(this.event=S,$){case 1:Q[Y].call(this,S);break;case 2:Q[Y].call(this,S,arguments[1]);break;case 3:Q[Y].call(this,S,arguments[1],arguments[2]);break;default:Q[Y].apply(this,arguments)}if(E)Q=[],G.call(this,Q,A,this.listenerTree,0,U);else if(Q=this._events[S],typeof Q=="function"){switch(this.event=S,$){case 1:Q.call(this);break;case 2:Q.call(this,arguments[1]);break;case 3:Q.call(this,arguments[1],arguments[2]);break;default:for(I=new Array($-1),J=1;J<$;J++)I[J-1]=arguments[J];Q.apply(this,I)}return!0}else Q&&(Q=Q.slice());if(Q&&Q.length){if($>3)for(I=new Array($-1),J=1;J<$;J++)I[J-1]=arguments[J];for(Y=0,U=Q.length;Y<U;Y++)switch(this.event=S,$){case 1:Q[Y].call(this);break;case 2:Q[Y].call(this,arguments[1]);break;case 3:Q[Y].call(this,arguments[1],arguments[2]);break;default:Q[Y].apply(this,I)}return!0}else if(!this.ignoreErrors&&!this._all&&S==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},q.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var S=arguments[0],A=this.wildcard,E,I,U,Y,J,ee;if(S==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(A&&(E=S,S!=="newListener"&&S!=="removeListener"&&typeof S=="object")){if(Y=S.length,a){for(J=0;J<Y;J++)if(typeof S[J]=="symbol"){I=!0;break}}I||(S=S.join(this.delimiter))}var $=[],Q=arguments.length,he;if(this._all)for(J=0,Y=this._all.length;J<Y;J++)switch(this.event=S,Q){case 1:$.push(this._all[J].call(this,S));break;case 2:$.push(this._all[J].call(this,S,arguments[1]));break;case 3:$.push(this._all[J].call(this,S,arguments[1],arguments[2]));break;default:$.push(this._all[J].apply(this,arguments))}if(A?(he=[],G.call(this,he,E,this.listenerTree,0)):he=this._events[S],typeof he=="function")switch(this.event=S,Q){case 1:$.push(he.call(this));break;case 2:$.push(he.call(this,arguments[1]));break;case 3:$.push(he.call(this,arguments[1],arguments[2]));break;default:for(U=new Array(Q-1),ee=1;ee<Q;ee++)U[ee-1]=arguments[ee];$.push(he.apply(this,U))}else if(he&&he.length){if(he=he.slice(),Q>3)for(U=new Array(Q-1),ee=1;ee<Q;ee++)U[ee-1]=arguments[ee];for(J=0,Y=he.length;J<Y;J++)switch(this.event=S,Q){case 1:$.push(he[J].call(this));break;case 2:$.push(he[J].call(this,arguments[1]));break;case 3:$.push(he[J].call(this,arguments[1],arguments[2]));break;default:$.push(he[J].apply(this,U))}}else if(!this.ignoreErrors&&!this._all&&S==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all($)},q.prototype.on=function(S,A,E){return this._on(S,A,!1,E)},q.prototype.prependListener=function(S,A,E){return this._on(S,A,!0,E)},q.prototype.onAny=function(S){return this._onAny(S,!1)},q.prototype.prependAny=function(S){return this._onAny(S,!0)},q.prototype.addListener=q.prototype.on,q.prototype._onAny=function(S,A){if(typeof S!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),A?this._all.unshift(S):this._all.push(S),this},q.prototype._on=function(S,A,E,I){if(typeof S=="function")return this._onAny(S,A),this;if(typeof A!="function")throw new Error("on only accepts instances of Function");this._events||d.call(this);var U=this,Y;return I!==i&&(Y=O.call(this,S,A,I),A=Y[0],U=Y[1]),this._newListener&&this.emit("newListener",S,A),this.wildcard?(j.call(this,S,A,E),U):(this._events[S]?(typeof this._events[S]=="function"&&(this._events[S]=[this._events[S]]),E?this._events[S].unshift(A):this._events[S].push(A),!this._events[S].warned&&this._maxListeners>0&&this._events[S].length>this._maxListeners&&(this._events[S].warned=!0,p.call(this,this._events[S].length,S))):this._events[S]=A,U)},q.prototype.off=function(S,A){if(typeof A!="function")throw new Error("removeListener only takes instances of Function");var E,I=[];if(this.wildcard){var U=typeof S=="string"?S.split(this.delimiter):S.slice();if(I=G.call(this,null,U,this.listenerTree,0),!I)return this}else{if(!this._events[S])return this;E=this._events[S],I.push({_listeners:E})}for(var Y=0;Y<I.length;Y++){var J=I[Y];if(E=J._listeners,s(E)){for(var ee=-1,$=0,Q=E.length;$<Q;$++)if(E[$]===A||E[$].listener&&E[$].listener===A||E[$]._origin&&E[$]._origin===A){ee=$;break}if(ee<0)continue;return this.wildcard?J._listeners.splice(ee,1):this._events[S].splice(ee,1),E.length===0&&(this.wildcard?delete J._listeners:delete this._events[S]),this._removeListener&&this.emit("removeListener",S,A),this}else(E===A||E.listener&&E.listener===A||E._origin&&E._origin===A)&&(this.wildcard?delete J._listeners:delete this._events[S],this._removeListener&&this.emit("removeListener",S,A))}return this.listenerTree&&R(this.listenerTree),this},q.prototype.offAny=function(S){var A=0,E=0,I;if(S&&this._all&&this._all.length>0){for(I=this._all,A=0,E=I.length;A<E;A++)if(S===I[A])return I.splice(A,1),this._removeListener&&this.emit("removeListenerAny",S),this}else{if(I=this._all,this._removeListener)for(A=0,E=I.length;A<E;A++)this.emit("removeListenerAny",I[A]);this._all=[]}return this},q.prototype.removeListener=q.prototype.off,q.prototype.removeAllListeners=function(S){if(S===i)return!this._events||d.call(this),this;if(this.wildcard){var A=G.call(this,null,S,this.listenerTree,0),E,I;if(!A)return this;for(I=0;I<A.length;I++)E=A[I],E._listeners=null;this.listenerTree&&R(this.listenerTree)}else this._events&&(this._events[S]=null);return this},q.prototype.listeners=function(S){var A=this._events,E,I,U,Y,J;if(S===i){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!A)return[];for(E=h(A),Y=E.length,U=[];Y-- >0;)I=A[E[Y]],typeof I=="function"?U.push(I):U.push.apply(U,I);return U}else{if(this.wildcard){if(J=this.listenerTree,!J)return[];var ee=[],$=typeof S=="string"?S.split(this.delimiter):S.slice();return G.call(this,ee,$,J,0),ee}return A?(I=A[S],I?typeof I=="function"?[I]:I:[]):[]}},q.prototype.eventNames=function(S){var A=this._events;return this.wildcard?B.call(this,this.listenerTree,[],null,S):A?h(A):[]},q.prototype.listenerCount=function(S){return this.listeners(S).length},q.prototype.hasListeners=function(S){if(this.wildcard){var A=[],E=typeof S=="string"?S.split(this.delimiter):S.slice();return G.call(this,A,E,this.listenerTree,0),A.length>0}var I=this._events,U=this._all;return!!(U&&U.length||I&&(S===i?h(I).length:I[S]))},q.prototype.listenersAny=function(){return this._all?this._all:[]},q.prototype.waitFor=function(S,A){var E=this,I=typeof A;return I==="number"?A={timeout:A}:I==="function"&&(A={filter:A}),A=x(A,{timeout:0,filter:i,handleError:!1,Promise,overload:!1},{filter:k,Promise:_}),L(A.Promise,function(U,Y,J){function ee(){var $=A.filter;if(!($&&!$.apply(E,arguments)))if(E.off(S,ee),A.handleError){var Q=arguments[0];Q?Y(Q):U(g.apply(null,arguments).slice(1))}else U(g.apply(null,arguments))}J(function(){E.off(S,ee)}),E._on(S,ee,!1)},{timeout:A.timeout,overload:A.overload})};function X(S,A,E){E=x(E,{Promise,timeout:0,overload:!1},{Promise:_});var I=E.Promise;return L(I,function(U,Y,J){var ee;if(typeof S.addEventListener=="function"){ee=function(){U(g.apply(null,arguments))},J(function(){S.removeEventListener(A,ee)}),S.addEventListener(A,ee,{once:!0});return}var $=function(){Q&&S.removeListener("error",Q),U(g.apply(null,arguments))},Q;A!=="error"&&(Q=function(he){S.removeListener(A,$),Y(he)},S.once("error",Q)),J(function(){Q&&S.removeListener("error",Q),S.removeListener(A,$)}),S.once(A,$)},{timeout:E.timeout,overload:E.overload})}var W=q.prototype;Object.defineProperties(q,{defaultMaxListeners:{get:function(){return W._maxListeners},set:function(S){if(typeof S!="number"||S<0||Number.isNaN(S))throw TypeError("n must be a non-negative number");W._maxListeners=S},enumerable:!0},once:{value:X,writable:!0,configurable:!0}}),Object.defineProperties(W,{_maxListeners:{value:r,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof i=="function"&&i.amd?i(function(){return q}):e.exports=q})()}(Sc)),Sc.exports}var Tc,Bp;function El(){if(Bp)return Tc;Bp=1;var e=Ty();Ro();var t=Ps().EventEmitter2;function i(n){n=n||{},this.ros=n.ros,this.name=n.name,this.serviceType=n.serviceType,this.isAdvertised=!1,this._serviceCallback=null}return i.prototype.__proto__=t.prototype,i.prototype.callService=function(n,s,r){if(!this.isAdvertised){var o="call_service:"+this.name+":"+ ++this.ros.idCounter;(s||r)&&this.ros.once(o,function(l){l.result!==void 0&&l.result===!1?typeof r=="function"&&r(l.values):typeof s=="function"&&s(new e(l.values))});var a={op:"call_service",id:o,service:this.name,type:this.serviceType,args:n};this.ros.callOnConnection(a)}},i.prototype.advertise=function(n){this.isAdvertised||typeof n!="function"||(this._serviceCallback=n,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},i.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},i.prototype._serviceResponse=function(n){var s={},r=this._serviceCallback(n.args,s),o={op:"service_response",service:this.name,values:new e(s),result:r};n.id&&(o.id=n.id),this.ros.callOnConnection(o)},Tc=i,Tc}var Cc,Fp;function Sd(){if(Fp)return Cc;Fp=1;var e=Sy(),t=NS(),i=$S(),n=El(),s=Ro(),r=Is,o=Ps().EventEmitter2;function a(l){l=l||{};var c=this;this.socket=null,this.idCounter=0,this.isConnected=!1,this.transportLibrary=l.transportLibrary||"websocket",this.transportOptions=l.transportOptions||{},this._sendFunc=function(u){c.sendEncodedMessage(u)},typeof l.groovyCompatibility>"u"?this.groovyCompatibility=!0:this.groovyCompatibility=l.groovyCompatibility,this.setMaxListeners(0),l.url&&this.connect(l.url)}return a.prototype.__proto__=o.prototype,a.prototype.connect=function(l){if(this.transportLibrary==="socket.io")this.socket=r(io(l,{"force new connection":!0}),i(this)),this.socket.on("connect",this.socket.onopen),this.socket.on("data",this.socket.onmessage),this.socket.on("close",this.socket.onclose),this.socket.on("error",this.socket.onerror);else if(this.transportLibrary.constructor.name==="RTCPeerConnection")this.socket=r(this.transportLibrary.createDataChannel(l,this.transportOptions),i(this));else if(this.transportLibrary==="websocket"){if(!this.socket||this.socket.readyState===e.CLOSED){var c=new e(l);c.binaryType="arraybuffer",this.socket=r(c,i(this))}}else if(this.transportLibrary==="workersocket")this.socket=r(new t(l),i(this));else throw"Unknown transportLibrary: "+this.transportLibrary.toString()},a.prototype.close=function(){this.socket&&this.socket.close()},a.prototype.authenticate=function(l,c,u,h,d,f,p){var g={op:"auth",mac:l,client:c,dest:u,rand:h,t:d,level:f,end:p};this.callOnConnection(g)},a.prototype.sendEncodedMessage=function(l){var c=null,u=this;this.transportLibrary==="socket.io"?c=function(h){u.socket.emit("operation",h)}:c=function(h){u.socket.send(h)},this.isConnected?c(l):u.once("connection",function(){c(l)})},a.prototype.callOnConnection=function(l){this.transportOptions.encoder?this.transportOptions.encoder(l,this._sendFunc):this._sendFunc(JSON.stringify(l))},a.prototype.setStatusLevel=function(l,c){var u={op:"set_level",level:l,id:c};this.callOnConnection(u)},a.prototype.getActionServers=function(l,c){var u=new n({ros:this,name:"/rosapi/action_servers",serviceType:"rosapi/GetActionServers"}),h=new s({});typeof c=="function"?u.callService(h,function(d){l(d.action_servers)},function(d){c(d)}):u.callService(h,function(d){l(d.action_servers)})},a.prototype.getTopics=function(l,c){var u=new n({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),h=new s;typeof c=="function"?u.callService(h,function(d){l(d)},function(d){c(d)}):u.callService(h,function(d){l(d)})},a.prototype.getTopicsForType=function(l,c,u){var h=new n({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),d=new s({type:l});typeof u=="function"?h.callService(d,function(f){c(f.topics)},function(f){u(f)}):h.callService(d,function(f){c(f.topics)})},a.prototype.getServices=function(l,c){var u=new n({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),h=new s;typeof c=="function"?u.callService(h,function(d){l(d.services)},function(d){c(d)}):u.callService(h,function(d){l(d.services)})},a.prototype.getServicesForType=function(l,c,u){var h=new n({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),d=new s({type:l});typeof u=="function"?h.callService(d,function(f){c(f.services)},function(f){u(f)}):h.callService(d,function(f){c(f.services)})},a.prototype.getServiceRequestDetails=function(l,c,u){var h=new n({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),d=new s({type:l});typeof u=="function"?h.callService(d,function(f){c(f)},function(f){u(f)}):h.callService(d,function(f){c(f)})},a.prototype.getServiceResponseDetails=function(l,c,u){var h=new n({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),d=new s({type:l});typeof u=="function"?h.callService(d,function(f){c(f)},function(f){u(f)}):h.callService(d,function(f){c(f)})},a.prototype.getNodes=function(l,c){var u=new n({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),h=new s;typeof c=="function"?u.callService(h,function(d){l(d.nodes)},function(d){c(d)}):u.callService(h,function(d){l(d.nodes)})},a.prototype.getNodeDetails=function(l,c,u){var h=new n({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),d=new s({node:l});typeof u=="function"?h.callService(d,function(f){c(f.subscribing,f.publishing,f.services)},function(f){u(f)}):h.callService(d,function(f){c(f)})},a.prototype.getParams=function(l,c){var u=new n({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),h=new s;typeof c=="function"?u.callService(h,function(d){l(d.names)},function(d){c(d)}):u.callService(h,function(d){l(d.names)})},a.prototype.getTopicType=function(l,c,u){var h=new n({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),d=new s({topic:l});typeof u=="function"?h.callService(d,function(f){c(f.type)},function(f){u(f)}):h.callService(d,function(f){c(f.type)})},a.prototype.getServiceType=function(l,c,u){var h=new n({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),d=new s({service:l});typeof u=="function"?h.callService(d,function(f){c(f.type)},function(f){u(f)}):h.callService(d,function(f){c(f.type)})},a.prototype.getMessageDetails=function(l,c,u){var h=new n({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),d=new s({type:l});typeof u=="function"?h.callService(d,function(f){c(f.typedefs)},function(f){u(f)}):h.callService(d,function(f){c(f.typedefs)})},a.prototype.decodeTypeDefs=function(l){var c=this,u=function(h,d){for(var f={},p=0;p<h.fieldnames.length;p++){var g=h.fieldarraylen[p],y=h.fieldnames[p],w=h.fieldtypes[p];if(w.indexOf("/")===-1)g===-1?f[y]=w:f[y]=[w];else{for(var x=!1,_=0;_<d.length;_++)if(d[_].type.toString()===w.toString()){x=d[_];break}if(x){var C=u(x,d);g===-1||(f[y]=[C])}else c.emit("error","Cannot find "+w+" in decodeTypeDefs")}}return f};return u(l[0],l)},a.prototype.getTopicsAndRawTypes=function(l,c){var u=new n({ros:this,name:"/rosapi/topics_and_raw_types",serviceType:"rosapi/TopicsAndRawTypes"}),h=new s;typeof c=="function"?u.callService(h,function(d){l(d)},function(d){c(d)}):u.callService(h,function(d){l(d)})},Cc=a,Cc}var Ec,Dp;function xr(){if(Dp)return Ec;Dp=1;var e=Is;function t(i){e(this,i)}return Ec=t,Ec}var Ac,Op;function ko(){if(Op)return Ac;Op=1;var e=Ps().EventEmitter2,t=xr();function i(n){n=n||{},this.ros=n.ros,this.name=n.name,this.messageType=n.messageType,this.isAdvertised=!1,this.compression=n.compression||"none",this.throttle_rate=n.throttle_rate||0,this.latch=n.latch||!1,this.queue_size=n.queue_size||100,this.queue_length=n.queue_length||0,this.reconnect_on_close=n.reconnect_on_close!==void 0?n.reconnect_on_close:!0,this.compression&&this.compression!=="png"&&this.compression!=="cbor"&&this.compression!=="cbor-raw"&&this.compression!=="none"&&(this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var s=this;this.reconnect_on_close?this.callForSubscribeAndAdvertise=function(r){s.ros.callOnConnection(r),s.waitForReconnect=!1,s.reconnectFunc=function(){s.waitForReconnect||(s.waitForReconnect=!0,s.ros.callOnConnection(r),s.ros.once("connection",function(){s.waitForReconnect=!1}))},s.ros.on("close",s.reconnectFunc)}:this.callForSubscribeAndAdvertise=this.ros.callOnConnection,this._messageCallback=function(r){s.emit("message",new t(r))}}return i.prototype.__proto__=e.prototype,i.prototype.subscribe=function(n){typeof n=="function"&&this.on("message",n),!this.subscribeId&&(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},i.prototype.unsubscribe=function(n){n&&(this.off("message",n),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},i.prototype.advertise=function(){if(!this.isAdvertised&&(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,!this.reconnect_on_close)){var n=this;this.ros.on("close",function(){n.isAdvertised=!1})}},i.prototype.unadvertise=function(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},i.prototype.publish=function(n){this.isAdvertised||this.advertise(),this.ros.idCounter++;var s={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:n,latch:this.latch};this.ros.callOnConnection(s)},Ac=i,Ac}var Ic,Lp;function WS(){if(Lp)return Ic;Lp=1;var e=El(),t=Ro();function i(n){n=n||{},this.ros=n.ros,this.name=n.name}return i.prototype.get=function(n){var s=new e({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),r=new t({name:this.name});s.callService(r,function(o){var a=JSON.parse(o.value);n(a)})},i.prototype.set=function(n,s){var r=new e({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),o=new t({name:this.name,value:JSON.stringify(n)});r.callService(o,s)},i.prototype.delete=function(n){var s=new e({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),r=new t({name:this.name});s.callService(r,n)},Ic=i,Ic}var Np;function zS(){if(Np)return cc.exports;Np=1;var e=wd(),t=cc.exports={Ros:Sd(),Topic:ko(),Message:xr(),Param:WS(),Service:El(),ServiceRequest:Ro(),ServiceResponse:Ty()};return e(t.Ros,["Param","Service","Topic"],t),cc.exports}var Pc={exports:{}},Mc,Up;function Cy(){if(Up)return Mc;Up=1;var e=ko(),t=xr(),i=Ps().EventEmitter2;function n(s){var r=this;s=s||{},this.ros=s.ros,this.serverName=s.serverName,this.actionName=s.actionName,this.timeout=s.timeout,this.omitFeedback=s.omitFeedback,this.omitStatus=s.omitStatus,this.omitResult=s.omitResult,this.goals={};var o=!1;this.feedbackListener=new e({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.statusListener=new e({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new e({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.goalTopic=new e({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new e({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe(function(a){o=!0,a.status_list.forEach(function(l){var c=r.goals[l.goal_id.id];c&&c.emit("status",l)})}),this.omitFeedback||this.feedbackListener.subscribe(function(a){var l=r.goals[a.status.goal_id.id];l&&(l.emit("status",a.status),l.emit("feedback",a.feedback))}),this.omitResult||this.resultListener.subscribe(function(a){var l=r.goals[a.status.goal_id.id];l&&(l.emit("status",a.status),l.emit("result",a.result))}),this.timeout&&setTimeout(function(){o||r.emit("timeout")},this.timeout)}return n.prototype.__proto__=i.prototype,n.prototype.cancel=function(){var s=new t;this.cancelTopic.publish(s)},n.prototype.dispose=function(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()},Mc=n,Mc}var Rc,Vp;function jS(){if(Vp)return Rc;Vp=1;var e=ko();xr();var t=Ps().EventEmitter2;function i(n){var s=this;n=n||{},this.ros=n.ros,this.serverName=n.serverName,this.actionName=n.actionName,this.timeout=n.timeout,this.omitFeedback=n.omitFeedback,this.omitStatus=n.omitStatus,this.omitResult=n.omitResult;var r=new e({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),o=new e({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),a=new e({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),l=new e({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});r.subscribe(function(c){s.emit("goal",c)}),a.subscribe(function(c){c.status_list.forEach(function(u){s.emit("status",u)})}),o.subscribe(function(c){s.emit("status",c.status),s.emit("feedback",c.feedback)}),l.subscribe(function(c){s.emit("status",c.status),s.emit("result",c.result)})}return i.prototype.__proto__=t.prototype,Rc=i,Rc}var kc,Hp;function Ey(){if(Hp)return kc;Hp=1;var e=xr(),t=Ps().EventEmitter2;function i(n){var s=this;this.actionClient=n.actionClient,this.goalMessage=n.goalMessage,this.isFinished=!1;var r=new Date;this.goalID="goal_"+Math.random()+"_"+r.getTime(),this.goalMessage=new e({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(o){s.status=o}),this.on("result",function(o){s.isFinished=!0,s.result=o}),this.on("feedback",function(o){s.feedback=o}),this.actionClient.goals[this.goalID]=this}return i.prototype.__proto__=t.prototype,i.prototype.send=function(n){var s=this;s.actionClient.goalTopic.publish(s.goalMessage),n&&setTimeout(function(){s.isFinished||s.emit("timeout")},n)},i.prototype.cancel=function(){var n=new e({id:this.goalID});this.actionClient.cancelTopic.publish(n)},kc=i,kc}var Bc,Gp;function XS(){if(Gp)return Bc;Gp=1;var e=ko(),t=xr(),i=Ps().EventEmitter2;function n(s){var r=this;s=s||{},this.ros=s.ros,this.serverName=s.serverName,this.actionName=s.actionName,this.feedbackPublisher=new e({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var o=new e({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});o.advertise(),this.resultPublisher=new e({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var a=new e({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),l=new e({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new t({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,a.subscribe(function(u){r.currentGoal?(r.nextGoal=u,r.emit("cancel")):(r.statusMessage.status_list=[{goal_id:u.goal_id,status:1}],r.currentGoal=u,r.emit("goal",u.goal))});var c=function(u,h){return u.secs>h.secs?!1:u.secs<h.secs?!0:u.nsecs<h.nsecs};l.subscribe(function(u){u.stamp.secs===0&&u.stamp.secs===0&&u.id===""?(r.nextGoal=null,r.currentGoal&&r.emit("cancel")):(r.currentGoal&&u.id===r.currentGoal.goal_id.id?r.emit("cancel"):r.nextGoal&&u.id===r.nextGoal.goal_id.id&&(r.nextGoal=null),r.nextGoal&&c(r.nextGoal.goal_id.stamp,u.stamp)&&(r.nextGoal=null),r.currentGoal&&c(r.currentGoal.goal_id.stamp,u.stamp)&&r.emit("cancel"))}),setInterval(function(){var u=new Date,h=Math.floor(u.getTime()/1e3),d=Math.round(1e9*(u.getTime()/1e3-h));r.statusMessage.header.stamp.secs=h,r.statusMessage.header.stamp.nsecs=d,o.publish(r.statusMessage)},500)}return n.prototype.__proto__=i.prototype,n.prototype.setSucceeded=function(s){var r=new t({status:{goal_id:this.currentGoal.goal_id,status:3},result:s});this.resultPublisher.publish(r),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},n.prototype.setAborted=function(s){var r=new t({status:{goal_id:this.currentGoal.goal_id,status:4},result:s});this.resultPublisher.publish(r),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},n.prototype.sendFeedback=function(s){var r=new t({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:s});this.feedbackPublisher.publish(r)},n.prototype.setPreempted=function(){this.statusMessage.status_list=[];var s=new t({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(s),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},Bc=n,Bc}var $p;function YS(){if($p)return Pc.exports;$p=1;var e=Sd(),t=wd(),i=Pc.exports={ActionClient:Cy(),ActionListener:jS(),Goal:Ey(),SimpleActionServer:XS()};return t(e,["ActionClient","SimpleActionServer"],i),Pc.exports}var Fc,Wp;function Ms(){if(Wp)return Fc;Wp=1;function e(t){t=t||{},this.x=t.x||0,this.y=t.y||0,this.z=t.z||0}return e.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},e.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},e.prototype.multiplyQuaternion=function(t){var i=t.w*this.x+t.y*this.z-t.z*this.y,n=t.w*this.y+t.z*this.x-t.x*this.z,s=t.w*this.z+t.x*this.y-t.y*this.x,r=-t.x*this.x-t.y*this.y-t.z*this.z;this.x=i*t.w+r*-t.x+n*-t.z-s*-t.y,this.y=n*t.w+r*-t.y+s*-t.x-i*-t.z,this.z=s*t.w+r*-t.z+i*-t.y-n*-t.x},e.prototype.clone=function(){return new e(this)},Fc=e,Fc}var Dc,zp;function Bo(){if(zp)return Dc;zp=1;function e(t){t=t||{},this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=typeof t.w=="number"?t.w:1}return e.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},e.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);t===0?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t)},e.prototype.invert=function(){this.conjugate(),this.normalize()},e.prototype.multiply=function(t){var i=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,n=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,s=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,r=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;this.x=i,this.y=n,this.z=s,this.w=r},e.prototype.clone=function(){return new e(this)},Dc=e,Dc}var Oc,jp;function Td(){if(jp)return Oc;jp=1;var e=Ms(),t=Bo();function i(n){n=n||{},this.position=new e(n.position),this.orientation=new t(n.orientation)}return i.prototype.applyTransform=function(n){this.position.multiplyQuaternion(n.rotation),this.position.add(n.translation);var s=n.rotation.clone();s.multiply(this.orientation),this.orientation=s},i.prototype.clone=function(){return new i(this)},i.prototype.multiply=function(n){var s=n.clone();return s.applyTransform({rotation:this.orientation,translation:this.position}),s},i.prototype.getInverse=function(){var n=this.clone();return n.orientation.invert(),n.position.multiplyQuaternion(n.orientation),n.position.x*=-1,n.position.y*=-1,n.position.z*=-1,n},Oc=i,Oc}var Lc,Xp;function Ay(){if(Xp)return Lc;Xp=1;var e=Ms(),t=Bo();function i(n){n=n||{},this.translation=new e(n.translation),this.rotation=new t(n.rotation)}return i.prototype.clone=function(){return new i(this)},Lc=i,Lc}var Nc,Yp;function qS(){return Yp||(Yp=1,Nc={Pose:Td(),Quaternion:Bo(),Transform:Ay(),Vector3:Ms()}),Nc}var Uc={exports:{}},Vc,qp;function KS(){if(qp)return Vc;qp=1;var e=Cy(),t=Ey(),i=El(),n=Ro(),s=ko(),r=Ay();function o(a){a=a||{},this.ros=a.ros,this.fixedFrame=a.fixedFrame||"/base_link",this.angularThres=a.angularThres||2,this.transThres=a.transThres||.01,this.rate=a.rate||10,this.updateDelay=a.updateDelay||50;var l=a.topicTimeout||2,c=Math.floor(l),u=Math.floor((l-c)*1e9);this.topicTimeout={secs:c,nsecs:u},this.serverName=a.serverName||"/tf2_web_republisher",this.repubServiceName=a.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this._subscribeCB=null,this._isDisposed=!1,this.actionClient=new e({ros:a.ros,serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=new i({ros:a.ros,name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}return o.prototype.processTFArray=function(a){a.transforms.forEach(function(l){var c=l.child_frame_id;c[0]==="/"&&(c=c.substring(1));var u=this.frameInfos[c];u&&(u.transform=new r({translation:l.transform.translation,rotation:l.transform.rotation}),u.cbs.forEach(function(h){h(u.transform)}))},this)},o.prototype.updateGoal=function(){var a={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};if(this.ros.groovyCompatibility)this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new t({actionClient:this.actionClient,goalMessage:a}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send();else{a.timeout=this.topicTimeout;var l=new n(a);this.serviceClient.callService(l,this.processResponse.bind(this))}this.republisherUpdateRequested=!1},o.prototype.processResponse=function(a){this._isDisposed||(this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB),this.currentTopic=new s({ros:this.ros,name:a.topic_name,messageType:"tf2_web_republisher/TFArray"}),this._subscribeCB=this.processTFArray.bind(this),this.currentTopic.subscribe(this._subscribeCB))},o.prototype.subscribe=function(a,l){a[0]==="/"&&(a=a.substring(1)),this.frameInfos[a]?this.frameInfos[a].transform&&l(this.frameInfos[a].transform):(this.frameInfos[a]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[a].cbs.push(l)},o.prototype.unsubscribe=function(a,l){a[0]==="/"&&(a=a.substring(1));for(var c=this.frameInfos[a],u=c&&c.cbs||[],h=u.length;h--;)u[h]===l&&u.splice(h,1);(!l||u.length===0)&&delete this.frameInfos[a]},o.prototype.dispose=function(){this._isDisposed=!0,this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB)},Vc=o,Vc}var Kp;function ZS(){if(Kp)return Uc.exports;Kp=1;var e=Sd(),t=wd(),i=Uc.exports={TFClient:KS()};return t(e,["TFClient"],i),Uc.exports}var Hc,Zp;function Fo(){return Zp||(Zp=1,Hc={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}),Hc}var Gc,Jp;function Iy(){if(Jp)return Gc;Jp=1;var e=Ms(),t=Fo();function i(n){this.dimension=null,this.type=t.URDF_BOX;var s=n.xml.getAttribute("size").split(" ");this.dimension=new e({x:parseFloat(s[0]),y:parseFloat(s[1]),z:parseFloat(s[2])})}return Gc=i,Gc}var $c,Qp;function Py(){if(Qp)return $c;Qp=1;function e(t){var i=t.xml.getAttribute("rgba").split(" ");this.r=parseFloat(i[0]),this.g=parseFloat(i[1]),this.b=parseFloat(i[2]),this.a=parseFloat(i[3])}return $c=e,$c}var Wc,em;function My(){if(em)return Wc;em=1;var e=Fo();function t(i){this.type=e.URDF_CYLINDER,this.length=parseFloat(i.xml.getAttribute("length")),this.radius=parseFloat(i.xml.getAttribute("radius"))}return Wc=t,Wc}var zc,tm;function Cd(){if(tm)return zc;tm=1;var e=Py();function t(n){this.textureFilename=null,this.color=null,this.name=n.xml.getAttribute("name");var s=n.xml.getElementsByTagName("texture");s.length>0&&(this.textureFilename=s[0].getAttribute("filename"));var r=n.xml.getElementsByTagName("color");r.length>0&&(this.color=new e({xml:r[0]}))}t.prototype.isLink=function(){return this.color===null&&this.textureFilename===null};var i=Is;return t.prototype.assign=function(n){return i(this,n)},zc=t,zc}var jc,im;function Ry(){if(im)return jc;im=1;var e=Ms(),t=Fo();function i(n){this.scale=null,this.type=t.URDF_MESH,this.filename=n.xml.getAttribute("filename");var s=n.xml.getAttribute("scale");if(s){var r=s.split(" ");this.scale=new e({x:parseFloat(r[0]),y:parseFloat(r[1]),z:parseFloat(r[2])})}}return jc=i,jc}var Xc,nm;function ky(){if(nm)return Xc;nm=1;var e=Fo();function t(i){this.type=e.URDF_SPHERE,this.radius=parseFloat(i.xml.getAttribute("radius"))}return Xc=t,Xc}var Yc,sm;function By(){if(sm)return Yc;sm=1;var e=Td(),t=Ms(),i=Bo(),n=My(),s=Iy(),r=Cd(),o=Ry(),a=ky();function l(c){var u=c.xml;this.origin=null,this.geometry=null,this.material=null,this.name=c.xml.getAttribute("name");var h=u.getElementsByTagName("origin");if(h.length===0)this.origin=new e;else{var d=h[0].getAttribute("xyz"),f=new t;d&&(d=d.split(" "),f=new t({x:parseFloat(d[0]),y:parseFloat(d[1]),z:parseFloat(d[2])}));var p=h[0].getAttribute("rpy"),g=new i;if(p){p=p.split(" ");var y=parseFloat(p[0]),w=parseFloat(p[1]),x=parseFloat(p[2]),_=y/2,C=w/2,k=x/2,V=Math.sin(_)*Math.cos(C)*Math.cos(k)-Math.cos(_)*Math.sin(C)*Math.sin(k),L=Math.cos(_)*Math.sin(C)*Math.cos(k)+Math.sin(_)*Math.cos(C)*Math.sin(k),M=Math.cos(_)*Math.cos(C)*Math.sin(k)-Math.sin(_)*Math.sin(C)*Math.cos(k),G=Math.cos(_)*Math.cos(C)*Math.cos(k)+Math.sin(_)*Math.sin(C)*Math.sin(k);g=new i({x:V,y:L,z:M,w:G}),g.normalize()}this.origin=new e({position:f,orientation:g})}var j=u.getElementsByTagName("geometry");if(j.length>0){for(var B=j[0],R=null,F=0;F<B.childNodes.length;F++){var O=B.childNodes[F];if(O.nodeType===1){R=O;break}}var q=R.nodeName;q==="sphere"?this.geometry=new a({xml:R}):q==="box"?this.geometry=new s({xml:R}):q==="cylinder"?this.geometry=new n({xml:R}):q==="mesh"?this.geometry=new o({xml:R}):console.warn("Unknown geometry type "+q)}var X=u.getElementsByTagName("material");X.length>0&&(this.material=new r({xml:X[0]}))}return Yc=l,Yc}var qc,rm;function Fy(){if(rm)return qc;rm=1;var e=By();function t(i){this.name=i.xml.getAttribute("name"),this.visuals=[];for(var n=i.xml.getElementsByTagName("visual"),s=0;s<n.length;s++)this.visuals.push(new e({xml:n[s]}))}return qc=t,qc}var Kc,om;function JS(){if(om)return Kc;om=1;var e=Td(),t=Ms(),i=Bo();function n(s){this.name=s.xml.getAttribute("name"),this.type=s.xml.getAttribute("type");var r=s.xml.getElementsByTagName("parent");r.length>0&&(this.parent=r[0].getAttribute("link"));var o=s.xml.getElementsByTagName("child");o.length>0&&(this.child=o[0].getAttribute("link"));var a=s.xml.getElementsByTagName("limit");a.length>0&&(this.minval=parseFloat(a[0].getAttribute("lower")),this.maxval=parseFloat(a[0].getAttribute("upper")));var l=s.xml.getElementsByTagName("origin");if(l.length===0)this.origin=new e;else{var c=l[0].getAttribute("xyz"),u=new t;c&&(c=c.split(" "),u=new t({x:parseFloat(c[0]),y:parseFloat(c[1]),z:parseFloat(c[2])}));var h=l[0].getAttribute("rpy"),d=new i;if(h){h=h.split(" ");var f=parseFloat(h[0]),p=parseFloat(h[1]),g=parseFloat(h[2]),y=f/2,w=p/2,x=g/2,_=Math.sin(y)*Math.cos(w)*Math.cos(x)-Math.cos(y)*Math.sin(w)*Math.sin(x),C=Math.cos(y)*Math.sin(w)*Math.cos(x)+Math.sin(y)*Math.cos(w)*Math.sin(x),k=Math.cos(y)*Math.cos(w)*Math.sin(x)-Math.sin(y)*Math.sin(w)*Math.cos(x),V=Math.cos(y)*Math.cos(w)*Math.cos(x)+Math.sin(y)*Math.sin(w)*Math.sin(x);d=new i({x:_,y:C,z:k,w:V}),d.normalize()}this.origin=new e({position:u,orientation:d})}}return Kc=n,Kc}var Rr={},am;function QS(){return am||(am=1,Rr.DOMImplementation=window.DOMImplementation,Rr.XMLSerializer=window.XMLSerializer,Rr.DOMParser=window.DOMParser),Rr}var Zc,lm;function eT(){if(lm)return Zc;lm=1;var e=Cd(),t=Fy(),i=JS(),n=QS().DOMParser;function s(r){r=r||{};var o=r.xml,a=r.string;if(this.materials={},this.links={},this.joints={},a){var l=new n;o=l.parseFromString(a,"text/xml")}var c=o.documentElement;this.name=c.getAttribute("name");for(var u=c.childNodes,h=0;h<u.length;h++){var d=u[h];if(d.tagName==="material"){var f=new e({xml:d});this.materials[f.name]!==void 0?this.materials[f.name].isLink()?this.materials[f.name].assign(f):console.warn("Material "+f.name+"is not unique."):this.materials[f.name]=f}else if(d.tagName==="link"){var p=new t({xml:d});if(this.links[p.name]!==void 0)console.warn("Link "+p.name+" is not unique.");else{for(var g=0;g<p.visuals.length;g++){var y=p.visuals[g].material;y!==null&&y.name&&(this.materials[y.name]!==void 0?p.visuals[g].material=this.materials[y.name]:this.materials[y.name]=y)}this.links[p.name]=p}}else if(d.tagName==="joint"){var w=new i({xml:d});this.joints[w.name]=w}}}return Zc=s,Zc}var Jc,cm;function tT(){return cm||(cm=1,Jc=Is({UrdfBox:Iy(),UrdfColor:Py(),UrdfCylinder:My(),UrdfLink:Fy(),UrdfMaterial:Cd(),UrdfMesh:Ry(),UrdfModel:eT(),UrdfSphere:ky(),UrdfVisual:By()},Fo())),Jc}var wr=Zr.ROSLIB||{REVISION:"1.3.0"},Do=Is;Do(wr,zS());Do(wr,YS());Do(wr,qS());Do(wr,ZS());Do(wr,tT());var Dy=wr;const Qe=xd(Dy);var Rs=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Rs||{}),Oy=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(Oy||{}),Ju=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Ju||{}),ke=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(ke||{}),ji=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(ji||{}),ue=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(ue||{}),rr=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(rr||{}),Me=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(Me||{}),Qu=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Qu||{}),Xi=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Xi||{}),Un=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(Un||{}),Zi=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(Zi||{}),Oi=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(Oi||{}),Gi=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(Gi||{}),Ed=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(Ed||{}),ai=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(ai||{}),Ct=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(Ct||{}),bt=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(bt||{}),qi=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(qi||{});const iT={createCanvas:(e,t)=>{const i=document.createElement("canvas");return i.width=e,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},fe={ADAPTER:iT,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Qc=/iPhone/i,um=/iPod/i,hm=/iPad/i,dm=/\biOS-universal(?:.+)Mac\b/i,eu=/\bAndroid(?:.+)Mobile\b/i,fm=/Android/i,Gs=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ta=/Silk/i,Qi=/Windows Phone/i,pm=/\bWindows(?:.+)ARM\b/i,mm=/BlackBerry/i,gm=/BB10/i,vm=/Opera Mini/i,ym=/\b(CriOS|Chrome)(?:.+)Mobile/i,_m=/Mobile(?:.+)Firefox\b/i,bm=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function nT(e){return function(t){return t.test(e)}}function xm(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var i=t.userAgent,n=i.split("[FBAN");typeof n[1]<"u"&&(i=n[0]),n=i.split("Twitter"),typeof n[1]<"u"&&(i=n[0]);var s=nT(i),r={apple:{phone:s(Qc)&&!s(Qi),ipod:s(um),tablet:!s(Qc)&&(s(hm)||bm(t))&&!s(Qi),universal:s(dm),device:(s(Qc)||s(um)||s(hm)||s(dm)||bm(t))&&!s(Qi)},amazon:{phone:s(Gs),tablet:!s(Gs)&&s(ta),device:s(Gs)||s(ta)},android:{phone:!s(Qi)&&s(Gs)||!s(Qi)&&s(eu),tablet:!s(Qi)&&!s(Gs)&&!s(eu)&&(s(ta)||s(fm)),device:!s(Qi)&&(s(Gs)||s(ta)||s(eu)||s(fm))||s(/\bokhttp\b/i)},windows:{phone:s(Qi),tablet:s(pm),device:s(Qi)||s(pm)},other:{blackberry:s(mm),blackberry10:s(gm),opera:s(vm),firefox:s(_m),chrome:s(ym),device:s(mm)||s(gm)||s(vm)||s(_m)||s(ym)},any:!1,phone:!1,tablet:!1};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}const sT=xm.default??xm,an=sT(globalThis.navigator);fe.RETINA_PREFIX=/@([0-9\.]+)x/;fe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ly={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function r(l,c,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,h||l,d),p=i?i+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)t.call(u,h)&&c.push(i?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=i?i+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,p=new Array(f);d<f;d++)p[d]=h[d].fn;return p},a.prototype.listenerCount=function(c){var u=i?i+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,d,f,p){var g=i?i+c:c;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,x,_;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,h),!0;case 4:return y.fn.call(y.context,u,h,d),!0;case 5:return y.fn.call(y.context,u,h,d,f),!0;case 6:return y.fn.call(y.context,u,h,d,f,p),!0}for(_=1,x=new Array(w-1);_<w;_++)x[_-1]=arguments[_];y.fn.apply(y.context,x)}else{var C=y.length,k;for(_=0;_<C;_++)switch(y[_].once&&this.removeListener(c,y[_].fn,void 0,!0),w){case 1:y[_].fn.call(y[_].context);break;case 2:y[_].fn.call(y[_].context,u);break;case 3:y[_].fn.call(y[_].context,u,h);break;case 4:y[_].fn.call(y[_].context,u,h,d);break;default:if(!x)for(k=1,x=new Array(w-1);k<w;k++)x[k-1]=arguments[k];y[_].fn.apply(y[_].context,x)}}return!0},a.prototype.on=function(c,u,h){return r(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return r(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,d){var f=i?i+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!d||p.once)&&(!h||p.context===h)&&o(this,f);else{for(var g=0,y=[],w=p.length;g<w;g++)(p[g].fn!==u||d&&!p[g].once||h&&p[g].context!==h)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=i?i+c:c,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a})(Ly);var rT=Ly.exports;const Oo=xd(rT);var Ad={exports:{}};Ad.exports=Al;Ad.exports.default=Al;function Al(e,t,i){i=i||2;var n=t&&t.length,s=n?t[0]*i:e.length,r=Ny(e,0,s,i,!0),o=[];if(!r||r.next===r.prev)return o;var a,l,c,u,h,d,f;if(n&&(r=uT(e,t,r,i)),e.length>80*i){a=c=e[0],l=u=e[1];for(var p=i;p<s;p+=i)h=e[p],d=e[p+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return mo(r,o,i,a,l,f,0),o}function Ny(e,t,i,n,s){var r,o;if(s===ih(e,t,i,n)>0)for(r=t;r<i;r+=n)o=wm(r,e[r],e[r+1],o);else for(r=i-n;r>=t;r-=n)o=wm(r,e[r],e[r+1],o);return o&&Il(o,o.next)&&(vo(o),o=o.next),o}function Ts(e,t){if(!e)return e;t||(t=e);var i=e,n;do if(n=!1,!i.steiner&&(Il(i,i.next)||ht(i.prev,i,i.next)===0)){if(vo(i),i=t=i.prev,i===i.next)break;n=!0}else i=i.next;while(n||i!==t);return t}function mo(e,t,i,n,s,r,o){if(e){!o&&r&&mT(e,n,s,r);for(var a=e,l,c;e.prev!==e.next;){if(l=e.prev,c=e.next,r?aT(e,n,s,r):oT(e)){t.push(l.i/i|0),t.push(e.i/i|0),t.push(c.i/i|0),vo(e),e=c.next,a=c.next;continue}if(e=c,e===a){o?o===1?(e=lT(Ts(e),t,i),mo(e,t,i,n,s,r,2)):o===2&&cT(e,t,i,n,s,r):mo(Ts(e),t,i,n,s,r,1);break}}}}function oT(e){var t=e.prev,i=e,n=e.next;if(ht(t,i,n)>=0)return!1;for(var s=t.x,r=i.x,o=n.x,a=t.y,l=i.y,c=n.y,u=s<r?s<o?s:o:r<o?r:o,h=a<l?a<c?a:c:l<c?l:c,d=s>r?s>o?s:o:r>o?r:o,f=a>l?a>c?a:c:l>c?l:c,p=n.next;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&Js(s,a,r,l,o,c,p.x,p.y)&&ht(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function aT(e,t,i,n){var s=e.prev,r=e,o=e.next;if(ht(s,r,o)>=0)return!1;for(var a=s.x,l=r.x,c=o.x,u=s.y,h=r.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,g=a>l?a>c?a:c:l>c?l:c,y=u>h?u>d?u:d:h>d?h:d,w=eh(f,p,t,i,n),x=eh(g,y,t,i,n),_=e.prevZ,C=e.nextZ;_&&_.z>=w&&C&&C.z<=x;){if(_.x>=f&&_.x<=g&&_.y>=p&&_.y<=y&&_!==s&&_!==o&&Js(a,u,l,h,c,d,_.x,_.y)&&ht(_.prev,_,_.next)>=0||(_=_.prevZ,C.x>=f&&C.x<=g&&C.y>=p&&C.y<=y&&C!==s&&C!==o&&Js(a,u,l,h,c,d,C.x,C.y)&&ht(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;_&&_.z>=w;){if(_.x>=f&&_.x<=g&&_.y>=p&&_.y<=y&&_!==s&&_!==o&&Js(a,u,l,h,c,d,_.x,_.y)&&ht(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;C&&C.z<=x;){if(C.x>=f&&C.x<=g&&C.y>=p&&C.y<=y&&C!==s&&C!==o&&Js(a,u,l,h,c,d,C.x,C.y)&&ht(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function lT(e,t,i){var n=e;do{var s=n.prev,r=n.next.next;!Il(s,r)&&Uy(s,n,n.next,r)&&go(s,r)&&go(r,s)&&(t.push(s.i/i|0),t.push(n.i/i|0),t.push(r.i/i|0),vo(n),vo(n.next),n=e=r),n=n.next}while(n!==e);return Ts(n)}function cT(e,t,i,n,s,r){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&yT(o,a)){var l=Vy(o,a);o=Ts(o,o.next),l=Ts(l,l.next),mo(o,t,i,n,s,r,0),mo(l,t,i,n,s,r,0);return}a=a.next}o=o.next}while(o!==e)}function uT(e,t,i,n){var s=[],r,o,a,l,c;for(r=0,o=t.length;r<o;r++)a=t[r]*n,l=r<o-1?t[r+1]*n:e.length,c=Ny(e,a,l,n,!1),c===c.next&&(c.steiner=!0),s.push(vT(c));for(s.sort(hT),r=0;r<s.length;r++)i=dT(s[r],i);return i}function hT(e,t){return e.x-t.x}function dT(e,t){var i=fT(e,t);if(!i)return t;var n=Vy(i,e);return Ts(n,n.next),Ts(i,i.next)}function fT(e,t){var i=t,n=e.x,s=e.y,r=-1/0,o;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>r&&(r=a,o=i.x<i.next.x?i:i.next,a===n))return o}i=i.next}while(i!==t);if(!o)return null;var l=o,c=o.x,u=o.y,h=1/0,d;i=o;do n>=i.x&&i.x>=c&&n!==i.x&&Js(s<u?n:r,s,c,u,s<u?r:n,s,i.x,i.y)&&(d=Math.abs(s-i.y)/(n-i.x),go(i,e)&&(d<h||d===h&&(i.x>o.x||i.x===o.x&&pT(o,i)))&&(o=i,h=d)),i=i.next;while(i!==l);return o}function pT(e,t){return ht(e.prev,e,t.prev)<0&&ht(t.next,e,e.next)<0}function mT(e,t,i,n){var s=e;do s.z===0&&(s.z=eh(s.x,s.y,t,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,gT(s)}function gT(e){var t,i,n,s,r,o,a,l,c=1;do{for(i=e,e=null,r=null,o=0;i;){for(o++,n=i,a=0,t=0;t<c&&(a++,n=n.nextZ,!!n);t++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||i.z<=n.z)?(s=i,i=i.nextZ,a--):(s=n,n=n.nextZ,l--),r?r.nextZ=s:e=s,s.prevZ=r,r=s;i=n}r.nextZ=null,c*=2}while(o>1);return e}function eh(e,t,i,n,s){return e=(e-i)*s|0,t=(t-n)*s|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function vT(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Js(e,t,i,n,s,r,o,a){return(s-o)*(t-a)>=(e-o)*(r-a)&&(e-o)*(n-a)>=(i-o)*(t-a)&&(i-o)*(r-a)>=(s-o)*(n-a)}function yT(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!_T(e,t)&&(go(e,t)&&go(t,e)&&bT(e,t)&&(ht(e.prev,e,t.prev)||ht(e,t.prev,t))||Il(e,t)&&ht(e.prev,e,e.next)>0&&ht(t.prev,t,t.next)>0)}function ht(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Il(e,t){return e.x===t.x&&e.y===t.y}function Uy(e,t,i,n){var s=na(ht(e,t,i)),r=na(ht(e,t,n)),o=na(ht(i,n,e)),a=na(ht(i,n,t));return!!(s!==r&&o!==a||s===0&&ia(e,i,t)||r===0&&ia(e,n,t)||o===0&&ia(i,e,n)||a===0&&ia(i,t,n))}function ia(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function na(e){return e>0?1:e<0?-1:0}function _T(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Uy(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function go(e,t){return ht(e.prev,e,e.next)<0?ht(e,t,e.next)>=0&&ht(e,e.prev,t)>=0:ht(e,t,e.prev)<0||ht(e,e.next,t)<0}function bT(e,t){var i=e,n=!1,s=(e.x+t.x)/2,r=(e.y+t.y)/2;do i.y>r!=i.next.y>r&&i.next.y!==i.y&&s<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==e);return n}function Vy(e,t){var i=new th(e.i,e.x,e.y),n=new th(t.i,t.x,t.y),s=e.next,r=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,n.next=i,i.prev=n,r.next=n,n.prev=r,n}function wm(e,t,i,n){var s=new th(e,t,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function vo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function th(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Al.deviation=function(e,t,i,n){var s=t&&t.length,r=s?t[0]*i:e.length,o=Math.abs(ih(e,0,r,i));if(s)for(var a=0,l=t.length;a<l;a++){var c=t[a]*i,u=a<l-1?t[a+1]*i:e.length;o-=Math.abs(ih(e,c,u,i))}var h=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,f=n[a+1]*i,p=n[a+2]*i;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function ih(e,t,i,n){for(var s=0,r=t,o=i-n;r<i;r+=n)s+=(e[o]-e[r])*(e[r+1]+e[o+1]),o=r;return s}Al.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,s=0;s<e.length;s++){for(var r=0;r<e[s].length;r++)for(var o=0;o<t;o++)i.vertices.push(e[s][r][o]);s>0&&(n+=e[s-1].length,i.holes.push(n))}return i};var xT=Ad.exports;const wT=xd(xT);var qa={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */qa.exports;(function(e,t){(function(i){var n=t&&!t.nodeType&&t,s=e&&!e.nodeType&&e,r=typeof Zr=="object"&&Zr;(r.global===r||r.window===r||r.self===r)&&(i=r);var o,a=2147483647,l=36,c=1,u=26,h=38,d=700,f=72,p=128,g="-",y=/^xn--/,w=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-c,k=Math.floor,V=String.fromCharCode,L;function M(E){throw RangeError(_[E])}function G(E,I){for(var U=E.length,Y=[];U--;)Y[U]=I(E[U]);return Y}function j(E,I){var U=E.split("@"),Y="";U.length>1&&(Y=U[0]+"@",E=U[1]),E=E.replace(x,".");var J=E.split("."),ee=G(J,I).join(".");return Y+ee}function B(E){for(var I=[],U=0,Y=E.length,J,ee;U<Y;)J=E.charCodeAt(U++),J>=55296&&J<=56319&&U<Y?(ee=E.charCodeAt(U++),(ee&64512)==56320?I.push(((J&1023)<<10)+(ee&1023)+65536):(I.push(J),U--)):I.push(J);return I}function R(E){return G(E,function(I){var U="";return I>65535&&(I-=65536,U+=V(I>>>10&1023|55296),I=56320|I&1023),U+=V(I),U}).join("")}function F(E){return E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:l}function O(E,I){return E+22+75*(E<26)-((I!=0)<<5)}function q(E,I,U){var Y=0;for(E=U?k(E/d):E>>1,E+=k(E/I);E>C*u>>1;Y+=l)E=k(E/C);return k(Y+(C+1)*E/(E+h))}function X(E){var I=[],U=E.length,Y,J=0,ee=p,$=f,Q,he,Fe,Te,ve,D,H,K,ie;for(Q=E.lastIndexOf(g),Q<0&&(Q=0),he=0;he<Q;++he)E.charCodeAt(he)>=128&&M("not-basic"),I.push(E.charCodeAt(he));for(Fe=Q>0?Q+1:0;Fe<U;){for(Te=J,ve=1,D=l;Fe>=U&&M("invalid-input"),H=F(E.charCodeAt(Fe++)),(H>=l||H>k((a-J)/ve))&&M("overflow"),J+=H*ve,K=D<=$?c:D>=$+u?u:D-$,!(H<K);D+=l)ie=l-K,ve>k(a/ie)&&M("overflow"),ve*=ie;Y=I.length+1,$=q(J-Te,Y,Te==0),k(J/Y)>a-ee&&M("overflow"),ee+=k(J/Y),J%=Y,I.splice(J++,0,ee)}return R(I)}function W(E){var I,U,Y,J,ee,$,Q,he,Fe,Te,ve,D=[],H,K,ie,ne;for(E=B(E),H=E.length,I=p,U=0,ee=f,$=0;$<H;++$)ve=E[$],ve<128&&D.push(V(ve));for(Y=J=D.length,J&&D.push(g);Y<H;){for(Q=a,$=0;$<H;++$)ve=E[$],ve>=I&&ve<Q&&(Q=ve);for(K=Y+1,Q-I>k((a-U)/K)&&M("overflow"),U+=(Q-I)*K,I=Q,$=0;$<H;++$)if(ve=E[$],ve<I&&++U>a&&M("overflow"),ve==I){for(he=U,Fe=l;Te=Fe<=ee?c:Fe>=ee+u?u:Fe-ee,!(he<Te);Fe+=l)ne=he-Te,ie=l-Te,D.push(V(O(Te+ne%ie,0))),he=k(ne/ie);D.push(V(O(he,0))),ee=q(U,K,Y==J),U=0,++Y}++U,++I}return D.join("")}function S(E){return j(E,function(I){return y.test(I)?X(I.slice(4).toLowerCase()):I})}function A(E){return j(E,function(I){return w.test(I)?"xn--"+W(I):I})}if(o={version:"1.3.2",ucs2:{decode:B,encode:R},decode:X,encode:W,toASCII:A,toUnicode:S},n&&s)if(e.exports==n)s.exports=o;else for(L in o)o.hasOwnProperty(L)&&(n[L]=o[L]);else i.punycode=o})(Zr)})(qa,qa.exports);var ST=qa.exports,TT={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},yo={};function CT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ET=function(e,t,i,n){t=t||"&",i=i||"=";var s={};if(typeof e!="string"||e.length===0)return s;var r=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var c=e[l].replace(r,"%20"),u=c.indexOf(i),h,d,f,p;u>=0?(h=c.substr(0,u),d=c.substr(u+1)):(h=c,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),CT(s,f)?Array.isArray(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s},kr=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},AT=function(e,t,i,n){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(s){var r=encodeURIComponent(kr(s))+i;return Array.isArray(e[s])?e[s].map(function(o){return r+encodeURIComponent(kr(o))}).join(t):r+encodeURIComponent(kr(e[s]))}).join(t):n?encodeURIComponent(kr(n))+i+encodeURIComponent(kr(e)):""};yo.decode=yo.parse=ET;yo.encode=yo.stringify=AT;var IT=ST,$i=TT,PT=Pl,MT=HT,RT=VT;function Mi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var kT=/^([a-z0-9.+-]+:)/i,BT=/:[0-9]*$/,FT=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,DT=["<",">",'"',"`"," ","\r",`
`,"	"],OT=["{","}","|","\\","^","`"].concat(DT),nh=["'"].concat(OT),Sm=["%","/","?",";","#"].concat(nh),Tm=["/","?","#"],LT=255,Cm=/^[+a-z0-9A-Z_-]{0,63}$/,NT=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,UT={javascript:!0,"javascript:":!0},sh={javascript:!0,"javascript:":!0},or={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},rh=yo;function Pl(e,t,i){if(e&&$i.isObject(e)&&e instanceof Mi)return e;var n=new Mi;return n.parse(e,t,i),n}Mi.prototype.parse=function(e,t,i){if(!$i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),s=n!==-1&&n<e.indexOf("#")?"?":"#",r=e.split(s),o=/\\/g;r[0]=r[0].replace(o,"/"),e=r.join(s);var a=e;if(a=a.trim(),!i&&e.split("#").length===1){var l=FT.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=rh.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=kT.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(i||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=a.substr(0,2)==="//";h&&!(c&&sh[c])&&(a=a.substr(2),this.slashes=!0)}if(!sh[c]&&(h||c&&!or[c])){for(var d=-1,f=0;f<Tm.length;f++){var p=a.indexOf(Tm[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var g,y;d===-1?y=a.lastIndexOf("@"):y=a.lastIndexOf("@",d),y!==-1&&(g=a.slice(0,y),a=a.slice(y+1),this.auth=decodeURIComponent(g)),d=-1;for(var f=0;f<Sm.length;f++){var p=a.indexOf(Sm[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var x=this.hostname.split(/\./),f=0,_=x.length;f<_;f++){var C=x[f];if(C&&!C.match(Cm)){for(var k="",V=0,L=C.length;V<L;V++)C.charCodeAt(V)>127?k+="x":k+=C[V];if(!k.match(Cm)){var M=x.slice(0,f),G=x.slice(f+1),j=C.match(NT);j&&(M.push(j[1]),G.unshift(j[2])),G.length&&(a="/"+G.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>LT?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=IT.toASCII(this.hostname));var B=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+B,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!UT[u])for(var f=0,_=nh.length;f<_;f++){var F=nh[f];if(a.indexOf(F)!==-1){var O=encodeURIComponent(F);O===F&&(O=escape(F)),a=a.split(F).join(O)}}var q=a.indexOf("#");q!==-1&&(this.hash=a.substr(q),a=a.slice(0,q));var X=a.indexOf("?");if(X!==-1?(this.search=a.substr(X),this.query=a.substr(X+1),t&&(this.query=rh.parse(this.query)),a=a.slice(0,X)):t&&(this.search="",this.query={}),a&&(this.pathname=a),or[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",W=this.search||"";this.path=B+W}return this.href=this.format(),this};function VT(e){return $i.isString(e)&&(e=Pl(e)),e instanceof Mi?e.format():Mi.prototype.format.call(e)}Mi.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,r="";this.host?s=e+this.host:this.hostname&&(s=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&$i.isObject(this.query)&&Object.keys(this.query).length&&(r=rh.stringify(this.query));var o=this.search||r&&"?"+r||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||or[t])&&s!==!1?(s="//"+(s||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),i=i.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+s+i+o+n};function HT(e,t){return Pl(e,!1,!0).resolve(t)}Mi.prototype.resolve=function(e){return this.resolveObject(Pl(e,!1,!0)).format()};Mi.prototype.resolveObject=function(e){if($i.isString(e)){var t=new Mi;t.parse(e,!1,!0),e=t}for(var i=new Mi,n=Object.keys(this),s=0;s<n.length;s++){var r=n[s];i[r]=this[r]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(i[l]=e[l])}return or[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!or[e.protocol]){for(var c=Object.keys(e),u=0;u<c.length;u++){var h=c[u];i[h]=e[h]}return i.href=i.format(),i}if(i.protocol=e.protocol,!e.host&&!sh[e.protocol]){for(var _=(e.pathname||"").split("/");_.length&&!(e.host=_.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),i.pathname=_.join("/")}else i.pathname=e.pathname;if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var d=i.pathname||"",f=i.search||"";i.path=d+f}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var p=i.pathname&&i.pathname.charAt(0)==="/",g=e.host||e.pathname&&e.pathname.charAt(0)==="/",y=g||p||i.host&&e.pathname,w=y,x=i.pathname&&i.pathname.split("/")||[],_=e.pathname&&e.pathname.split("/")||[],C=i.protocol&&!or[i.protocol];if(C&&(i.hostname="",i.port=null,i.host&&(x[0]===""?x[0]=i.host:x.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(_[0]===""?_[0]=e.host:_.unshift(e.host)),e.host=null),y=y&&(_[0]===""||x[0]==="")),g)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,x=_;else if(_.length)x||(x=[]),x.pop(),x=x.concat(_),i.search=e.search,i.query=e.query;else if(!$i.isNullOrUndefined(e.search)){if(C){i.hostname=i.host=x.shift();var k=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;k&&(i.auth=k.shift(),i.host=i.hostname=k.shift())}return i.search=e.search,i.query=e.query,(!$i.isNull(i.pathname)||!$i.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!x.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var V=x.slice(-1)[0],L=(i.host||e.host||x.length>1)&&(V==="."||V==="..")||V==="",M=0,G=x.length;G>=0;G--)V=x[G],V==="."?x.splice(G,1):V===".."?(x.splice(G,1),M++):M&&(x.splice(G,1),M--);if(!y&&!w)for(;M--;M)x.unshift("..");y&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),L&&x.join("/").substr(-1)!=="/"&&x.push("");var j=x[0]===""||x[0]&&x[0].charAt(0)==="/";if(C){i.hostname=i.host=j?"":x.length?x.shift():"";var k=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;k&&(i.auth=k.shift(),i.host=i.hostname=k.shift())}return y=y||i.host&&x.length,y&&!j&&x.unshift(""),x.length?i.pathname=x.join("/"):(i.pathname=null,i.path=null),(!$i.isNull(i.pathname)||!$i.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i};Mi.prototype.parseHost=function(){var e=this.host,t=BT.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const GT={parse:PT,format:RT,resolve:MT};function vi(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Br(e){return e.split("?")[0].split("#")[0]}function $T(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function WT(e,t,i){return e.replace(new RegExp($T(t),"g"),i)}function zT(e,t){let i="",n=0,s=-1,r=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||r===1))if(s!==a-1&&r===2){if(i.length<2||n!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const l=i.lastIndexOf("/");if(l!==i.length-1){l===-1?(i="",n=0):(i=i.slice(0,l),n=i.length-1-i.lastIndexOf("/")),s=a,r=0;continue}}else if(i.length===2||i.length===1){i="",n=0,s=a,r=0;continue}}t&&(i.length>0?i+="/..":i="..",n=2)}else i.length>0?i+=`/${e.slice(s+1,a)}`:i=e.slice(s+1,a),n=a-s-1;s=a,r=0}else o===46&&r!==-1?++r:r=-1}return i}const Nt={toPosix(e){return WT(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){vi(e),e=this.toPosix(e);let t="";const i=/^file:\/\/\//.exec(e),n=/^[^/:]+:\/\//.exec(e),s=/^[^/:]+:\//.exec(e);if(i||n||s){const r=(i==null?void 0:i[0])||(n==null?void 0:n[0])||(s==null?void 0:s[0]);t=r,e=e.slice(r.length)}return t},toAbsolute(e,t,i){if(this.isDataUrl(e))return e;const n=Br(this.toPosix(t??fe.ADAPTER.getBaseUrl())),s=Br(this.toPosix(i??this.rootname(n)));return vi(e),e=this.toPosix(e),e.startsWith("/")?Nt.join(s,e.slice(1)):this.isAbsolute(e)?e:this.join(n,e)},normalize(e){if(e=this.toPosix(e),vi(e),e.length===0)return".";let t="";const i=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const n=e.endsWith("/");return e=zT(e,!1),e.length>0&&n&&(e+="/"),i?`/${e}`:t+e},isAbsolute(e){return vi(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let i=0;i<e.length;++i){const n=e[i];if(vi(n),n.length>0)if(t===void 0)t=n;else{const s=e[i-1]??"";this.extname(s)?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(vi(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const i=t===47;let n=-1,s=!0;const r=this.getProtocol(e),o=e;e=e.slice(r.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!s){n=a;break}}else s=!1;return n===-1?i?"/":this.isUrl(o)?r+e:r:i&&n===1?"//":r+e.slice(0,n)},rootname(e){vi(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const i=e.indexOf("/",t.length);i!==-1?t=e.slice(0,i):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){vi(e),t&&vi(t),e=Br(this.toPosix(e));let i=0,n=-1,s=!0,r;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(r=e.length-1;r>=0;--r){const l=e.charCodeAt(r);if(l===47){if(!s){i=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return i===n?n=a:n===-1&&(n=e.length),e.slice(i,n)}for(r=e.length-1;r>=0;--r)if(e.charCodeAt(r)===47){if(!s){i=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":e.slice(i,n)},extname(e){vi(e),e=Br(this.toPosix(e));let t=-1,i=0,n=-1,s=!0,r=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!s){i=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===46?t===-1?t=o:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||n===-1||r===0||r===1&&t===n-1&&t===i+1?"":e.slice(t,n)},parse(e){vi(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Br(this.toPosix(e));let i=e.charCodeAt(0);const n=this.isAbsolute(e);let s;t.root=this.rootname(e),n||this.hasProtocol(e)?s=1:s=0;let r=-1,o=0,a=-1,l=!0,c=e.length-1,u=0;for(;c>=s;--c){if(i=e.charCodeAt(c),i===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),i===46?r===-1?r=c:u!==1&&(u=1):r!==-1&&(u=-1)}return r===-1||a===-1||u===0||u===1&&r===a-1&&r===o+1?a!==-1&&(o===0&&n?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&n?(t.name=e.slice(1,r),t.base=e.slice(1,a)):(t.name=e.slice(o,r),t.base=e.slice(o,a)),t.ext=e.slice(r,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},Em={};function je(e,t,i=3){if(Em[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(n=n.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(n))),Em[t]=!0}let tu;function jT(){return typeof tu>"u"&&(tu=function(){var i;const t={stencil:!0,failIfMajorPerformanceCaveat:fe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!fe.ADAPTER.getWebGLRenderingContext())return!1;const n=fe.ADAPTER.createCanvas();let s=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);const r=!!((i=s==null?void 0:s.getContextAttributes())!=null&&i.stencil);if(s){const o=s.getExtension("WEBGL_lose_context");o&&o.loseContext()}return s=null,r}catch{return!1}}()),tu}var XT={grad:.9,turn:360,rad:360/(2*Math.PI)},en=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},At=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},li=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),e>i?i:e>t?e:t},Hy=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Am=function(e){return{r:li(e.r,0,255),g:li(e.g,0,255),b:li(e.b,0,255),a:li(e.a)}},iu=function(e){return{r:At(e.r),g:At(e.g),b:At(e.b),a:At(e.a,3)}},YT=/^#([0-9a-f]{3,8})$/i,sa=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Gy=function(e){var t=e.r,i=e.g,n=e.b,s=e.a,r=Math.max(t,i,n),o=r-Math.min(t,i,n),a=o?r===t?(i-n)/o:r===i?2+(n-t)/o:4+(t-i)/o:0;return{h:60*(a<0?a+6:a),s:r?o/r*100:0,v:r/255*100,a:s}},$y=function(e){var t=e.h,i=e.s,n=e.v,s=e.a;t=t/360*6,i/=100,n/=100;var r=Math.floor(t),o=n*(1-i),a=n*(1-(t-r)*i),l=n*(1-(1-t+r)*i),c=r%6;return{r:255*[n,a,o,o,l,n][c],g:255*[l,n,n,a,o,o][c],b:255*[o,o,l,n,n,a][c],a:s}},Im=function(e){return{h:Hy(e.h),s:li(e.s,0,100),l:li(e.l,0,100),a:li(e.a)}},Pm=function(e){return{h:At(e.h),s:At(e.s),l:At(e.l),a:At(e.a,3)}},Mm=function(e){return $y((i=(t=e).s,{h:t.h,s:(i*=((n=t.l)<50?n:100-n)/100)>0?2*i/(n+i)*100:0,v:n+i,a:t.a}));var t,i,n},Jr=function(e){return{h:(t=Gy(e)).h,s:(s=(200-(i=t.s))*(n=t.v)/100)>0&&s<200?i*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,i,n,s},qT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ZT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oh={string:[[function(e){var t=YT.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?At(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?At(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=ZT.exec(e)||JT.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Am({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=qT.exec(e)||KT.exec(e);if(!t)return null;var i,n,s=Im({h:(i=t[1],n=t[2],n===void 0&&(n="deg"),Number(i)*(XT[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Mm(s)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,n=e.b,s=e.a,r=s===void 0?1:s;return en(t)&&en(i)&&en(n)?Am({r:Number(t),g:Number(i),b:Number(n),a:Number(r)}):null},"rgb"],[function(e){var t=e.h,i=e.s,n=e.l,s=e.a,r=s===void 0?1:s;if(!en(t)||!en(i)||!en(n))return null;var o=Im({h:Number(t),s:Number(i),l:Number(n),a:Number(r)});return Mm(o)},"hsl"],[function(e){var t=e.h,i=e.s,n=e.v,s=e.a,r=s===void 0?1:s;if(!en(t)||!en(i)||!en(n))return null;var o=function(a){return{h:Hy(a.h),s:li(a.s,0,100),v:li(a.v,0,100),a:li(a.a)}}({h:Number(t),s:Number(i),v:Number(n),a:Number(r)});return $y(o)},"hsv"]]},Rm=function(e,t){for(var i=0;i<t.length;i++){var n=t[i][0](e);if(n)return[n,t[i][1]]}return[null,void 0]},QT=function(e){return typeof e=="string"?Rm(e.trim(),oh.string):typeof e=="object"&&e!==null?Rm(e,oh.object):[null,void 0]},nu=function(e,t){var i=Jr(e);return{h:i.h,s:li(i.s+100*t,0,100),l:i.l,a:i.a}},su=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},km=function(e,t){var i=Jr(e);return{h:i.h,s:i.s,l:li(i.l+100*t,0,100),a:i.a}},ah=function(){function e(t){this.parsed=QT(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return At(su(this.rgba),2)},e.prototype.isDark=function(){return su(this.rgba)<.5},e.prototype.isLight=function(){return su(this.rgba)>=.5},e.prototype.toHex=function(){return t=iu(this.rgba),i=t.r,n=t.g,s=t.b,o=(r=t.a)<1?sa(At(255*r)):"","#"+sa(i)+sa(n)+sa(s)+o;var t,i,n,s,r,o},e.prototype.toRgb=function(){return iu(this.rgba)},e.prototype.toRgbString=function(){return t=iu(this.rgba),i=t.r,n=t.g,s=t.b,(r=t.a)<1?"rgba("+i+", "+n+", "+s+", "+r+")":"rgb("+i+", "+n+", "+s+")";var t,i,n,s,r},e.prototype.toHsl=function(){return Pm(Jr(this.rgba))},e.prototype.toHslString=function(){return t=Pm(Jr(this.rgba)),i=t.h,n=t.s,s=t.l,(r=t.a)<1?"hsla("+i+", "+n+"%, "+s+"%, "+r+")":"hsl("+i+", "+n+"%, "+s+"%)";var t,i,n,s,r},e.prototype.toHsv=function(){return t=Gy(this.rgba),{h:At(t.h),s:At(t.s),v:At(t.v),a:At(t.a,3)};var t},e.prototype.invert=function(){return Ui({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Ui(nu(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Ui(nu(this.rgba,-t))},e.prototype.grayscale=function(){return Ui(nu(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Ui(km(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Ui(km(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Ui({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):At(this.rgba.a,3);var i},e.prototype.hue=function(t){var i=Jr(this.rgba);return typeof t=="number"?Ui({h:t,s:i.s,l:i.l,a:i.a}):At(i.h)},e.prototype.isEqual=function(t){return this.toHex()===Ui(t).toHex()},e}(),Ui=function(e){return e instanceof ah?e:new ah(e)},Bm=[],eC=function(e){e.forEach(function(t){Bm.indexOf(t)<0&&(t(ah,oh),Bm.push(t))})};function tC(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var s in i)n[i[s]]=s;var r={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=n[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,d="black";if(!r.length)for(var f in i)r[f]=new e(i[f]).toRgb();for(var p in i){var g=(a=u,l=r[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<h&&(h=g,d=p)}return d}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":i[a];return l?new e(l).toRgb():null},"name"])}eC([tC]);const ar=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof ar)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,r)=>s===t[r]);if(e!==null&&t!==null){const s=Object.keys(e),r=Object.keys(t);return s.length!==r.length?!1:s.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,i,n]=this._components;return{r:e,g:t,b:i,a:n}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,n]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(n*255),e}toRgbArray(e){e=e??[];const[t,i,n]=this._components;return e[0]=t,e[1]=i,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,n,s]=ar.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return t&&(i=i*e+.5|0,n=n*e+.5|0,s=s*e+.5|0),(e*255<<24)+(i<<16)+(n<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,n,s]=this._components;return e[0]=t,e[1]=i,e[2]=n,e[3]=s,e}normalize(e){let t,i,n,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const r=e;t=(r>>16&255)/255,i=(r>>8&255)/255,n=(r&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,n,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,n,s=255]=e,t/=255,i/=255,n/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=ar.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const r=Ui(e);r.isValid()&&({r:t,g:i,b:n,a:s}=r.rgba,t/=255,i/=255,n/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((n,s)=>{e[s]=Math.min(Math.max(n,t),i)}),e)}};let it=ar;it.shared=new ar;it.temp=new ar;it.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function iC(e){return je("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),it.shared.setValue(e).toHex()}function nC(e){return je("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),it.shared.setValue(e).toNumber()}function sC(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[ke.NORMAL_NPM]=ke.NORMAL,e[ke.ADD_NPM]=ke.ADD,e[ke.SCREEN_NPM]=ke.SCREEN,t[ke.NORMAL]=ke.NORMAL_NPM,t[ke.ADD]=ke.ADD_NPM,t[ke.SCREEN]=ke.SCREEN_NPM;const i=[];return i.push(t),i.push(e),i}const Wy=sC();function zy(e,t){return Wy[t?1:0][e]}function rC(e,t=null){const i=e*6;if(t=t||new Uint16Array(i),t.length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(let n=0,s=0;n<i;n+=6,s+=4)t[n+0]=s+0,t[n+1]=s+1,t[n+2]=s+2,t[n+3]=s+0,t[n+4]=s+2,t[n+5]=s+3;return t}function jy(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function Ka(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function Fm(e){return!(e&e-1)&&!!e}function Dm(e){let t=(e>65535?1:0)<<4;e>>>=t;let i=(e>255?1:0)<<3;return e>>>=i,t|=i,i=(e>15?1:0)<<2,e>>>=i,t|=i,i=(e>3?1:0)<<1,e>>>=i,t|=i,t|e>>1}function lr(e,t,i){const n=e.length;let s;if(t>=n||i===0)return;i=t+i>n?n-t:i;const r=n-i;for(s=t;s<r;++s)e[s]=e[s+i];e.length=r}function Bn(e){return e===0?0:e<0?-1:1}let oC=0;function Cs(){return++oC}const Xy=class{constructor(e,t,i,n){this.left=e,this.top=t,this.right=i,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let lh=Xy;lh.EMPTY=new Xy(0,0,0,0);const Om={},Vi=Object.create(null),An=Object.create(null);class aC{constructor(t,i,n){this._canvas=fe.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||fe.RESOLUTION,this.resize(t,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,i){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Lm(e,t,i){for(let n=0,s=4*i*t;n<t;++n,s+=4)if(e[s+3]!==0)return!1;return!0}function Nm(e,t,i,n,s){const r=4*t;for(let o=n,a=n*r+4*i;o<=s;++o,a+=r)if(e[a+3]!==0)return!1;return!0}function lC(e){const{width:t,height:i}=e,n=e.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const r=n.getImageData(0,0,t,i).data;let o=0,a=0,l=t-1,c=i-1;for(;a<i&&Lm(r,t,a);)++a;if(a===i)return lh.EMPTY;for(;Lm(r,t,c);)--c;for(;Nm(r,t,o,a,c);)++o;for(;Nm(r,t,l,a,c);)--l;return++l,++c,new lh(o,a,l,c)}function cC(e){const t=lC(e),{width:i,height:n}=t;let s=null;if(!t.isEmpty()){const r=e.getContext("2d");if(r===null)throw new TypeError("Failed to get canvas 2D context");s=r.getImageData(t.left,t.top,i,n)}return{width:i,height:n,data:s}}let ra;function uC(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,ra||(ra=document.createElement("a")),ra.href=e;const i=GT.parse(ra.href),n=!i.port&&t.port===""||i.port===t.port;return i.hostname!==t.hostname||!n||i.protocol!==t.protocol?"anonymous":""}function jn(e,t=1){var n;const i=(n=fe.RETINA_PREFIX)==null?void 0:n.exec(e);return i?parseFloat(i[1]):t}var pe=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(pe||{});const ch=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},Um=(e,t)=>ch(e).priority??t,Se={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(ch).forEach(t=>{t.type.forEach(i=>{var n,s;return(s=(n=this._removeHandlers)[i])==null?void 0:s.call(n,t)})}),this},add(...e){return e.map(ch).forEach(t=>{t.type.forEach(i=>{const n=this._addHandlers,s=this._queue;n[i]?n[i](t):(s[i]=s[i]||[],s[i].push(t))})}),this},handle(e,t,i){const n=this._addHandlers,s=this._removeHandlers;if(n[e]||s[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,s[e]=i;const r=this._queue;return r[e]&&(r[e].forEach(o=>t(o)),delete r[e]),this},handleByMap(e,t){return this.handle(e,i=>{t[i.name]=i.ref},i=>{delete t[i.name]})},handleByList(e,t,i=-1){return this.handle(e,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((s,r)=>Um(r,i)-Um(s,i)))},n=>{const s=t.indexOf(n.ref);s!==-1&&t.splice(s,1)})}};class uh{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const hC=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function dC(e){let t="";for(let i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+=`if(test == ${i}.0){}`);return t}function fC(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=hC.replace(/%forloop%/gi,dC(e));if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))e=e/2|0;else break}return e}const ru=0,ou=1,au=2,lu=3,cu=4,uu=5;class xn{constructor(){this.data=0,this.blendMode=ke.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<ru)}set blend(t){!!(this.data&1<<ru)!==t&&(this.data^=1<<ru)}get offsets(){return!!(this.data&1<<ou)}set offsets(t){!!(this.data&1<<ou)!==t&&(this.data^=1<<ou)}get culling(){return!!(this.data&1<<au)}set culling(t){!!(this.data&1<<au)!==t&&(this.data^=1<<au)}get depthTest(){return!!(this.data&1<<lu)}set depthTest(t){!!(this.data&1<<lu)!==t&&(this.data^=1<<lu)}get depthMask(){return!!(this.data&1<<uu)}set depthMask(t){!!(this.data&1<<uu)!==t&&(this.data^=1<<uu)}get clockwiseFrontFace(){return!!(this.data&1<<cu)}set clockwiseFrontFace(t){!!(this.data&1<<cu)!==t&&(this.data^=1<<cu)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ke.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new xn;return t.depthTest=!1,t.blend=!0,t}}const hh=[];function Yy(e,t){if(!e)return null;let i="";if(typeof e=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(i=n[1].toLowerCase())}for(let n=hh.length-1;n>=0;--n){const s=hh[n];if(s.test&&s.test(e,i))return new s(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ri{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,i,n,s,r,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let h=0,d=u.length;h<d;h++)u[h][c](t,i,n,s,r,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ri.prototype,{dispatch:{value:Ri.prototype.emit},run:{value:Ri.prototype.emit}});class _o{constructor(t=0,i=0){this._width=t,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new Ri("setRealSize"),this.onUpdate=new Ri("update"),this.onError=new Ri("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,i){(t!==this._width||i!==this._height)&&(this._width=t,this._height=i,this.onResize.emit(t,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,i,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,i){return!1}}class Lo extends _o{constructor(t,i){const{width:n,height:s}=i||{};if(!n||!s)throw new Error("BufferResource width or height invalid");super(n,s),this.data=t}upload(t,i,n){const s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Oi.UNPACK);const r=i.realWidth,o=i.realHeight;return n.width===r&&n.height===o?s.texSubImage2D(i.target,0,0,0,r,o,i.format,n.type,this.data):(n.width=r,n.height=o,s.texImage2D(i.target,0,n.internalFormat,r,o,0,i.format,n.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const pC={scaleMode:Xi.NEAREST,format:ue.RGBA,alphaMode:Oi.NPM},js=class extends Oo{constructor(e=null,t=null){super(),t=Object.assign({},js.defaultOptions,t);const{alphaMode:i,mipmap:n,anisotropicLevel:s,scaleMode:r,width:o,height:a,wrapMode:l,format:c,type:u,target:h,resolution:d,resourceOptions:f}=t;e&&!(e instanceof _o)&&(e=Yy(e,f),e.internal=!0),this.resolution=d||fe.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=l,this._scaleMode=r,this.format=c,this.type=u,this.target=h,this.alphaMode=i,this.uid=Cs(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Fm(this.realWidth)&&Fm(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete An[this.cacheId],delete Vi[this.cacheId],this.cacheId=null),this.dispose(),js.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=fe.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let s=null;if(n)s=e;else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${Cs()}`}s=e._pixiId}let r=An[s];if(n&&i&&!r)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return r||(r=new js(e,t),r.cacheId=s,js.addToCache(r,s)),r}static fromBuffer(e,t,i,n){e=e||new Float32Array(t*i*4);const s=new Lo(e,{width:t,height:i}),r=e instanceof Float32Array?Me.FLOAT:Me.UNSIGNED_BYTE;return new js(s,Object.assign({},pC,{type:r},n))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),An[t]&&An[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),An[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=An[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete An[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete An[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let De=js;De.defaultOptions={mipmap:Zi.POW2,anisotropicLevel:0,scaleMode:Xi.LINEAR,wrapMode:Un.CLAMP,alphaMode:Oi.UNPACK,target:rr.TEXTURE_2D,format:ue.RGBA,type:Me.UNSIGNED_BYTE};De._globalBatch=0;class dh{constructor(){this.texArray=null,this.blend=0,this.type=ji.TRIANGLES,this.start=0,this.size=0,this.data=null}}let mC=0;class yt{constructor(t,i=!0,n=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=i,this.id=mC++,this.disposeRunner=new Ri("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?qi.ELEMENT_ARRAY_BUFFER:qi.ARRAY_BUFFER}get index(){return this.type===qi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new yt(t)}}class Za{constructor(t,i=0,n=!1,s=Me.FLOAT,r,o,a,l=1){this.buffer=t,this.size=i,this.normalized=n,this.type=s,this.stride=r,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,i,n,s,r){return new Za(t,i,n,s,r)}}const gC={Float32Array,Uint32Array,Int32Array,Uint8Array};function vC(e,t){let i=0,n=0;const s={};for(let l=0;l<e.length;l++)n+=t[l],i+=e[l].length;const r=new ArrayBuffer(i*4);let o=null,a=0;for(let l=0;l<e.length;l++){const c=t[l],u=e[l],h=jy(u);s[h]||(s[h]=new gC[h](r)),o=s[h];for(let d=0;d<u.length;d++){const f=(d/c|0)*n+a,p=d%c;o[f+p]=u[d]}a+=c}return new Float32Array(r)}const Vm={5126:4,5123:2,5121:1};let yC=0;const _C={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Xn{constructor(t=[],i={}){this.buffers=t,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=yC++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ri("disposeGeometry"),this.refCount=0}addAttribute(t,i,n=0,s=!1,r,o,a,l=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof yt||(i instanceof Array&&(i=new Float32Array(i)),i=new yt(i));const c=t.split("|");if(c.length>1){for(let h=0;h<c.length;h++)this.addAttribute(c[h],i,n,s,r);return this}let u=this.buffers.indexOf(i);return u===-1&&(this.buffers.push(i),u=this.buffers.length-1),this.attributes[t]=new Za(u,n,s,r,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof yt||(t instanceof Array&&(t=new Uint16Array(t)),t=new yt(t)),t.type=qi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],i=[],n=new yt;let s;for(s in this.attributes){const r=this.attributes[s],o=this.buffers[r.buffer];t.push(o.data),i.push(r.size*Vm[r.type]/4),r.buffer=0}for(n.data=vC(t,i),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const i=this.attributes[t];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Xn;for(let i=0;i<this.buffers.length;i++)t.buffers[i]=new yt(this.buffers[i].data.slice(0));for(const i in this.attributes){const n=this.attributes[i];t.attributes[i]=new Za(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=qi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const i=new Xn,n=[],s=[],r=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)s[l]=s[l]||0,s[l]+=o.buffers[l].data.length,r[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new _C[jy(o.buffers[a].data)](s[a]),i.buffers[a]=new yt(n[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,r[l]),r[l]+=o.buffers[l].data.length}if(i.attributes=o.attributes,o.indexBuffer){i.indexBuffer=i.buffers[o.buffers.indexOf(o.indexBuffer)],i.indexBuffer.type=qi.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){u=h;break}for(const h in o.attributes){const d=o.attributes[h];(d.buffer|0)===u&&(l+=d.size*Vm[d.type]/4)}for(let h=0;h<t.length;h++){const d=t[h].indexBuffer.data;for(let f=0;f<d.length;f++)i.indexBuffer.data[f+c]+=a;a+=t[h].buffers[u].data.length/l,c+=d.length}}return i}}class qy extends Xn{constructor(t=!1){super(),this._buffer=new yt(null,t,!1),this._indexBuffer=new yt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Me.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Me.FLOAT).addAttribute("aColor",this._buffer,4,!0,Me.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Me.FLOAT).addIndex(this._indexBuffer)}}const Ja=Math.PI*2,bC=180/Math.PI,xC=Math.PI/180;var kt=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(kt||{});class _e{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new _e(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const oa=[new _e,new _e,new _e,new _e];class Ne{constructor(t=0,i=0,n=0,s=0){this.x=Number(t),this.y=Number(i),this.width=Number(n),this.height=Number(s),this.type=kt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ne(0,0,0,0)}clone(){return new Ne(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){const M=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=M)return!1;const j=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>j}const n=this.left,s=this.right,r=this.top,o=this.bottom;if(s<=n||o<=r)return!1;const a=oa[0].set(t.left,t.top),l=oa[1].set(t.left,t.bottom),c=oa[2].set(t.right,t.top),u=oa[3].set(t.right,t.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(i.a*i.d-i.b*i.c);if(h===0||(i.apply(a,a),i.apply(l,l),i.apply(c,c),i.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=n||Math.min(a.x,l.x,c.x,u.x)>=s||Math.max(a.y,l.y,c.y,u.y)<=r||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const d=h*(l.y-a.y),f=h*(a.x-l.x),p=d*n+f*r,g=d*s+f*r,y=d*n+f*o,w=d*s+f*o;if(Math.max(p,g,y,w)<=d*a.x+f*a.y||Math.min(p,g,y,w)>=d*u.x+f*u.y)return!1;const x=h*(a.y-c.y),_=h*(c.x-a.x),C=x*n+_*r,k=x*s+_*r,V=x*n+_*o,L=x*s+_*o;return!(Math.max(C,k,V,L)<=x*a.x+_*a.y||Math.min(C,k,V,L)>=x*u.x+_*u.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(n-i,0),this.y=s,this.height=Math.max(r-s,0),this}ceil(t=1,i=.001){const n=Math.ceil((this.x+this.width-i)*t)/t,s=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=n-this.x,this.height=s-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=n-i,this.y=s,this.height=r-s,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Id{constructor(t=0,i=0,n=0){this.x=t,this.y=i,this.radius=n,this.type=kt.CIRC}clone(){return new Id(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const n=this.radius*this.radius;let s=this.x-t,r=this.y-i;return s*=s,r*=r,s+r<=n}getBounds(){return new Ne(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Pd{constructor(t=0,i=0,n=0,s=0){this.x=t,this.y=i,this.width=n,this.height=s,this.type=kt.ELIP}clone(){return new Pd(this.x,this.y,this.width,this.height)}contains(t,i){if(this.width<=0||this.height<=0)return!1;let n=(t-this.x)/this.width,s=(i-this.y)/this.height;return n*=n,s*=s,n+s<=1}getBounds(){return new Ne(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class cr{constructor(...t){let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const n=[];for(let s=0,r=i.length;s<r;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=kt.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),i=new cr(t);return i.closeStroke=this.closeStroke,i}contains(t,i){let n=!1;const s=this.points.length/2;for(let r=0,o=s-1;r<s;o=r++){const a=this.points[r*2],l=this.points[r*2+1],c=this.points[o*2],u=this.points[o*2+1];l>i!=u>i&&t<(c-a)*((i-l)/(u-l))+a&&(n=!n)}return n}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}}class Md{constructor(t=0,i=0,n=0,s=0,r=20){this.x=t,this.y=i,this.width=n,this.height=s,this.radius=r,this.type=kt.RREC}clone(){return new Md(this.x,this.y,this.width,this.height,this.radius)}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+n&&i<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let s=t-(this.x+n),r=i-(this.y+n);const o=n*n;if(s*s+r*r<=o||(s=t-(this.x+this.width-n),s*s+r*r<=o)||(r=i-(this.y+this.height-n),s*s+r*r<=o)||(s=t-(this.x+n),s*s+r*r<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class lt{constructor(t=1,i=0,n=0,s=1,r=0,o=0){this.array=null,this.a=t,this.b=i,this.c=n,this.d=s,this.tx=r,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,n,s,r,o){return this.a=t,this.b=i,this.c=n,this.d=s,this.tx=r,this.ty=o,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const n=i||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,i){i=i||new _e;const n=t.x,s=t.y;return i.x=this.a*n+this.c*s+this.tx,i.y=this.b*n+this.d*s+this.ty,i}applyInverse(t,i){i=i||new _e;const n=1/(this.a*this.d+this.c*-this.b),s=t.x,r=t.y;return i.x=this.d*n*s+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,i.y=this.a*n*r+-this.b*n*s+(-this.ty*this.a+this.tx*this.b)*n,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),n=Math.sin(t),s=this.a,r=this.c,o=this.tx;return this.a=s*i-this.b*n,this.b=s*n+this.b*i,this.c=r*i-this.d*n,this.d=r*n+this.d*i,this.tx=o*i-this.ty*n,this.ty=o*n+this.ty*i,this}append(t){const i=this.a,n=this.b,s=this.c,r=this.d;return this.a=t.a*i+t.b*s,this.b=t.a*n+t.b*r,this.c=t.c*i+t.d*s,this.d=t.c*n+t.d*r,this.tx=t.tx*i+t.ty*s+this.tx,this.ty=t.tx*n+t.ty*r+this.ty,this}setTransform(t,i,n,s,r,o,a,l,c){return this.a=Math.cos(a+c)*r,this.b=Math.sin(a+c)*r,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(n*this.a+s*this.c),this.ty=i-(n*this.b+s*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const n=this.a,s=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,n=this.b,s=this.c,r=this.d,o=t.pivot,a=-Math.atan2(-s,r),l=Math.atan2(n,i),c=Math.abs(a+l);return c<1e-5||Math.abs(Ja-c)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(i*i+n*n),t.scale.y=Math.sqrt(s*s+r*r),t.position.x=this.tx+(o.x*i+o.y*s),t.position.y=this.ty+(o.x*n+o.y*r),t}invert(){const t=this.a,i=this.b,n=this.c,s=this.d,r=this.tx,o=t*s-i*n;return this.a=s/o,this.b=-i/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-s*r)/o,this.ty=-(t*this.ty-i*r)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new lt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new lt}static get TEMP_MATRIX(){return new lt}}const os=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],as=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ls=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],cs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],fh=[],Ky=[],aa=Math.sign;function wC(){for(let e=0;e<16;e++){const t=[];fh.push(t);for(let i=0;i<16;i++){const n=aa(os[e]*os[i]+ls[e]*as[i]),s=aa(as[e]*os[i]+cs[e]*as[i]),r=aa(os[e]*ls[i]+ls[e]*cs[i]),o=aa(as[e]*ls[i]+cs[e]*cs[i]);for(let a=0;a<16;a++)if(os[a]===n&&as[a]===s&&ls[a]===r&&cs[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new lt;t.set(os[e],as[e],ls[e],cs[e],0,0),Ky.push(t)}}wC();const ut={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>os[e],uY:e=>as[e],vX:e=>ls[e],vY:e=>cs[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>fh[e][t],sub:(e,t)=>fh[e][ut.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?ut.S:ut.N:Math.abs(t)*2<=Math.abs(e)?e>0?ut.E:ut.W:t>0?e>0?ut.SE:ut.SW:e>0?ut.NE:ut.NW,matrixAppendRotationInv:(e,t,i=0,n=0)=>{const s=Ky[ut.inv(t)];s.tx=i,s.ty=n,e.append(s)}};class Fn{constructor(t,i,n=0,s=0){this._x=n,this._y=s,this.cb=t,this.scope=i}clone(t=this.cb,i=this.scope){return new Fn(t,i,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const Zy=class{constructor(){this.worldTransform=new lt,this.localTransform=new lt,this.position=new Fn(this.onChange,this,0,0),this.scale=new Fn(this.onChange,this,1,1),this.pivot=new Fn(this.onChange,this,0,0),this.skew=new Fn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const i=e.worldTransform,n=this.worldTransform;n.a=t.a*i.a+t.b*i.c,n.b=t.a*i.b+t.b*i.d,n.c=t.c*i.a+t.d*i.c,n.d=t.c*i.b+t.d*i.d,n.tx=t.tx*i.a+t.ty*i.c+i.tx,n.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let Rd=Zy;Rd.IDENTITY=new Zy;var SC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,TC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Hm(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}function hu(e){const t=new Array(e);for(let i=0;i<t.length;i++)t[i]=!1;return t}function Jy(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return hu(2*t);case"bvec3":return hu(3*t);case"bvec4":return hu(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ur=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],CC={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},EC={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function AC(e,t){var n;const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in e.uniforms){const r=t[s];if(!r){(n=e.uniforms[s])!=null&&n.group&&(e.uniforms[s].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const o=e.uniforms[s];let a=!1;for(let l=0;l<ur.length;l++)if(ur[l].test(r,o)){i.push(ur[l].code(s,o)),a=!0;break}if(!a){const c=(r.size===1&&!r.isArray?CC:EC)[r.type].replace("location",`ud["${s}"].location`);i.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${c};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const Qy={};let $s=Qy;function IC(){if($s===Qy||$s!=null&&$s.isContextLost()){const e=fe.ADAPTER.createCanvas();let t;fe.PREFER_ENV>=Rs.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),$s=t}return $s}let la;function PC(){if(!la){la=ai.MEDIUM;const e=IC();e&&e.getShaderPrecisionFormat&&(la=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?ai.HIGH:ai.MEDIUM)}return la}function Gm(e,t){const i=e.getShaderSource(t).split(`
`).map((c,u)=>`${u}: ${c}`),n=e.getShaderInfoLog(t),s=n.split(`
`),r={},o=s.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!r[c]?(r[c]=!0,!0):!1),a=[""];o.forEach(c=>{i[c-1]=`%c${i[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=i.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function MC(e,t,i,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||Gm(e,i),e.getShaderParameter(n,e.COMPILE_STATUS)||Gm(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const RC={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function e0(e){return RC[e]}let ca=null;const $m={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function t0(e,t){if(!ca){const i=Object.keys($m);ca={};for(let n=0;n<i.length;++n){const s=i[n];ca[e[s]]=$m[s]}}return ca[t]}function Wm(e,t,i){if(e.substring(0,9)!=="precision"){let n=t;return t===ai.HIGH&&i!==ai.HIGH&&(n=ai.MEDIUM),`precision ${n} float;
${e}`}else if(i!==ai.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let Fr;function kC(){if(typeof Fr=="boolean")return Fr;try{Fr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Fr=!1}return Fr}let BC=0;const ua={},Xs=class{constructor(e,t,i="pixi-shader",n={}){this.extra={},this.id=BC++,this.vertexSrc=e||Xs.defaultVertexSrc,this.fragmentSrc=t||Xs.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),ua[i]?(ua[i]++,i+=`-${ua[i]}`):ua[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=Wm(this.vertexSrc,Xs.defaultVertexPrecision,ai.HIGH),this.fragmentSrc=Wm(this.fragmentSrc,Xs.defaultFragmentPrecision,PC())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return TC}static get defaultFragmentSrc(){return SC}static from(e,t,i){const n=e+t;let s=Om[n];return s||(Om[n]=s=new Xs(e,t,i)),s}};let Ai=Xs;Ai.defaultVertexPrecision=ai.HIGH;Ai.defaultFragmentPrecision=an.apple.device?ai.HIGH:ai.MEDIUM;let FC=0;class ki{constructor(t,i,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=FC++,this.static=!!i,this.ubo=!!n,t instanceof yt?(this.buffer=t,this.buffer.type=qi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new yt(new Float32Array(1)),this.buffer.type=qi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,i,n){if(!this.ubo)this.uniforms[t]=new ki(i,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,i,n){return new ki(t,i,n)}static uboFrom(t,i){return new ki(t,i??!0,!0)}}class Ki{constructor(t,i){this.uniformBindCount=0,this.program=t,i?i instanceof ki?this.uniformGroup=i:this.uniformGroup=new ki(i):this.uniformGroup=new ki({}),this.disposeRunner=new Ri("disposeShader")}checkUniformExists(t,i){if(i.uniforms[t])return!0;for(const n in i.uniforms){const s=i.uniforms[n];if(s.group&&this.checkUniformExists(t,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,i,n){const s=Ai.from(t,i);return new Ki(s,n)}}class DC{constructor(t,i){if(this.vertexSrc=t,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=r;this.defaultGroupCache[t]=ki.from({uSamplers:n},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${t}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ai(this.vertexSrc,s)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new lt,default:this.defaultGroupCache[t]};return new Ki(this.programCache[t],i)}generateSampleSrc(t){let i="";i+=`
`,i+=`
`;for(let n=0;n<t;n++)n>0&&(i+=`
else `),n<t-1&&(i+=`if(vTextureId < ${n}.5)`),i+=`
{`,i+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class ph{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function OC(){return!an.apple.device}function LC(e){let t=!0;const i=fe.ADAPTER.getNavigator();if(an.tablet||an.phone){if(an.apple.device){const n=i.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(t=!1)}if(an.android.device){const n=i.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(t=!1)}}return t?e:4}class Ml{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var NC=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,UC=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _i=class extends Ml{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=qy,this.vertexSize=6,this.state=xn.for2d(),this.size=_i.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??LC(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??OC(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return je("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return UC}static get defaultFragmentTemplate(){return NC}setShaderGenerator({vertex:e=_i.defaultVertexSrc,fragment:t=_i.defaultFragmentTemplate}={}){this.shaderGenerator=new DC(e,t)}contextChange(){const e=this.renderer.gl;fe.PREFER_ENV===Rs.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),_i.defaultMaxTextures),this.maxTextures=fC(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=_i,i=this.size/4,n=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new dh);for(;t.length<n;)t.push(new ph);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=_i._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,r=this.renderer.textureGC.count;let o=++De._globalBatch,a=0,l=i[0],c=0;n.copyBoundTextures(s,t);for(let u=0;u<this._bufferSize;++u){const h=e[u];e[u]=null,h._batchEnabled!==o&&(l.count>=t&&(n.boundArray(l,s,o,t),this.buildDrawCalls(l,c,u),c=u,l=i[++a],++o),h._batchEnabled=o,h.touched=r,l.elements[l.count++]=h)}l.count>0&&(n.boundArray(l,s,o,t),this.buildDrawCalls(l,c,this._bufferSize),++a,++o);for(let u=0;u<s.length;u++)s[u]=null;De._globalBatch=o}buildDrawCalls(e,t,i){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:r,vertexSize:o}=this,a=_i._drawCallPool;let l=this._dcIndex,c=this._aIndex,u=this._iIndex,h=a[l];h.start=this._iIndex,h.texArray=e;for(let d=t;d<i;++d){const f=n[d],p=f._texture.baseTexture,g=Wy[p.alphaMode?1:0][f.blendMode];n[d]=null,t<d&&h.blend!==g&&(h.size=u-h.start,t=d,h=a[++l],h.texArray=e,h.start=u),this.packInterleavedGeometry(f,s,r,c,u),c+=f.vertexData.length/2*o,u+=f.indices.length,h.blend=g}t<i&&(h.size=u-h.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=u}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;_i.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,n=_i._drawCallPool;let s=null;for(let r=0;r<e;r++){const{texArray:o,type:a,size:l,start:c,blend:u}=n[r];s!==o&&(s=o,this.bindAndClearTexArray(o)),this.state.blendMode=u,i.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),_i.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Ka(Math.ceil(e/8)),i=Dm(t),n=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new uh(n*this.vertexSize*4)),s}getIndexBuffer(e){const t=Ka(Math.ceil(e/12)),i=Dm(t),n=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(n)),s}packInterleavedGeometry(e,t,i,n,s){const{uint32View:r,float32View:o}=t,a=n/this.vertexSize,l=e.uvs,c=e.indices,u=e.vertexData,h=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=it.shared.setValue(e._tintRGB).toPremultiplied(d,e._texture.baseTexture.alphaMode>0);for(let p=0;p<u.length;p+=2)o[n++]=u[p],o[n++]=u[p+1],o[n++]=l[p],o[n++]=l[p+1],r[n++]=f,o[n++]=h;for(let p=0;p<c.length;p++)i[s++]=a+c[p]}};let Si=_i;Si.defaultBatchSize=4096;Si.extension={name:"batch",type:pe.RendererPlugin};Si._drawCallPool=[];Si._textureArrayPool=[];Se.add(Si);var VC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,HC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Gr=class extends Ki{constructor(e,t,i){const n=Ai.from(e||Gr.defaultVertexSrc,t||Gr.defaultFragmentSrc);super(n,i),this.padding=0,this.resolution=Gr.defaultResolution,this.multisample=Gr.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new xn}apply(e,t,i,n,s){e.applyFilter(this,t,i,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return HC}static get defaultFragmentSrc(){return VC}};let Bt=Gr;Bt.defaultResolution=1;Bt.defaultMultisample=bt.NONE;class Rl{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new it(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:i,background:n,backgroundAlpha:s}=t,r=n??i;r!==void 0&&(this.color=r),this.alpha=s}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Rl.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Rl.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"background"};Se.add(Rl);class i0{constructor(t){this.renderer=t,this.emptyRenderer=new Ml(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,i){const{boundTextures:n}=this.renderer.texture;for(let s=i-1;s>=0;--s)t[s]=n[s]||null,t[s]&&(t[s]._batchLocation=s)}boundArray(t,i,n,s){const{elements:r,ids:o,count:a}=t;let l=0;for(let c=0;c<a;c++){const u=r[c],h=u._batchLocation;if(h>=0&&h<s&&i[h]===u){o[c]=h;continue}for(;l<s;){const d=i[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,i[l]=u;break}}}destroy(){this.renderer=null}}i0.extension={type:pe.RendererSystem,name:"batch"};Se.add(i0);let zm=0;class kl{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=zm++}init(t){if(t.context)this.initFromContext(t.context);else{const i=this.renderer.background.alpha<1,n=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:n,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=zm++,this.renderer.runners.contextChange.emit(t);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const i=this.createContext(this.renderer.view,t);this.initFromContext(i)}createContext(t,i){let n;if(fe.PREFER_ENV>=Rs.WEBGL2&&(n=t.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,i={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const i=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}kl.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};kl.extension={type:pe.RendererSystem,name:"context"};Se.add(kl);class GC extends Lo{upload(t,i,n){const s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Oi.UNPACK);const r=i.realWidth,o=i.realHeight;return n.width===r&&n.height===o?s.texSubImage2D(i.target,0,0,0,r,o,i.format,n.type,this.data):(n.width=r,n.height=o,s.texImage2D(i.target,0,n.internalFormat,r,o,0,i.format,n.type,this.data)),!0}}class mh{constructor(t,i){this.width=Math.round(t||100),this.height=Math.round(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ri("disposeFramebuffer"),this.multisample=bt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,i){return this.colorTextures[t]=i||new De(null,{scaleMode:Xi.NEAREST,resolution:1,mipmap:Zi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new De(new GC(null,{width:this.width,height:this.height}),{scaleMode:Xi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Zi.OFF,format:ue.DEPTH_COMPONENT,type:Me.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,i){if(t=Math.round(t),i=Math.round(i),!(t===this.width&&i===this.height)){this.width=t,this.height=i,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const s=this.colorTextures[n],r=s.resolution;s.setSize(t/r,i/r)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,i/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class n0 extends De{constructor(t={}){if(typeof t=="number"){const i=arguments[0],n=arguments[1],s=arguments[2],r=arguments[3];t={width:i,height:n,scaleMode:s,resolution:r}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=bt.NONE),super(null,t),this.mipmap=Zi.OFF,this.valid=!0,this._clear=new it([0,0,0,0]),this.framebuffer=new mh(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Yn extends _o{constructor(t){const i=t,n=i.naturalWidth||i.videoWidth||i.width,s=i.naturalHeight||i.videoHeight||i.height;super(n,s),this.source=t,this.noSubImage=!1}static crossOrigin(t,i,n){n===void 0&&!i.startsWith("data:")?t.crossOrigin=uC(i):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}upload(t,i,n,s){const r=t.gl,o=i.realWidth,a=i.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1&&s.buffered.length===0)return!1;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Oi.UNPACK),!this.noSubImage&&i.target===r.TEXTURE_2D&&n.width===o&&n.height===a?r.texSubImage2D(r.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=a,r.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0}update(){if(this.destroyed)return;const t=this.source,i=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(i,n),super.update()}dispose(){this.source=null}}class s0 extends Yn{constructor(t,i){if(i=i||{},typeof t=="string"){const n=new Image;Yn.crossOrigin(n,t,i.crossorigin),n.src=t,t=n}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??fe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((i,n)=>{const s=this.source;this.url=s.src;const r=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.resize(s.width,s.height),this._load=null,this.createBitmap?i(this.process()):i(this))};s.complete&&s.src?r():(s.onload=r,s.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,n=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:n?"cors":"no-cors"}).then(s=>s.blob()).then(s=>i(s,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Oi.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,i,n,this.bitmap),!this.preserveBitmap){let s=!0;const r=i._glTextures;for(const o in r){const a=r[o];if(a!==n&&a.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class r0{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,i,n){const s=i.width,r=i.height;if(n){const o=t.width/2/s,a=t.height/2/r,l=t.x/s+o,c=t.y/r+a;n=ut.add(n,ut.NW),this.x0=l+o*ut.uX(n),this.y0=c+a*ut.uY(n),n=ut.add(n,2),this.x1=l+o*ut.uX(n),this.y1=c+a*ut.uY(n),n=ut.add(n,2),this.x2=l+o*ut.uX(n),this.y2=c+a*ut.uY(n),n=ut.add(n,2),this.x3=l+o*ut.uX(n),this.y3=c+a*ut.uY(n)}else this.x0=t.x/s,this.y0=t.y/r,this.x1=(t.x+t.width)/s,this.y1=t.y/r,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/r,this.x3=t.x/s,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const jm=new r0;function ha(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class ye extends Oo{constructor(t,i,n,s,r,o,a){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new Ne(0,0,1,1)),t instanceof ye&&(t=t.baseTexture),this.baseTexture=t,this._frame=i,this.trim=s,this.valid=!1,this._uvs=jm,this.uvMatrix=null,this.orig=n||i,this._rotate=Number(r||0),r===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new _e(o.x,o.y):new _e(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=i:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:i}=this.baseTexture;i!=null&&i.url&&Vi[i.url]&&ye.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ye.removeFromCache(this),this.textureCacheIds=null}clone(){var s;const t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),n=new ye(this.baseTexture,!this.noFrame&&t,i,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=t),n}updateUvs(){this._uvs===jm&&(this._uvs=new r0),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,i={},n=fe.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let r=null;if(s)r=t;else if(t instanceof De){if(!t.cacheId){const a=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Cs()}`,De.addToCache(t,t.cacheId)}r=t.cacheId}else{if(!t._pixiId){const a=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Cs()}`}r=t._pixiId}let o=Vi[r];if(s&&n&&!o)throw new Error(`The cacheId "${r}" does not exist in TextureCache.`);return!o&&!(t instanceof De)?(i.resolution||(i.resolution=jn(t)),o=new ye(new De(t,i)),o.baseTexture.cacheId=r,De.addToCache(o.baseTexture,r),ye.addToCache(o,r)):!o&&t instanceof De&&(o=new ye(t),ye.addToCache(o,r)),o}static fromURL(t,i){const n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=ye.from(t,Object.assign({resourceOptions:n},i),!1),r=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):r.load().then(()=>Promise.resolve(s))}static fromBuffer(t,i,n,s){return new ye(De.fromBuffer(t,i,n,s))}static fromLoader(t,i,n,s){const r=new De(t,Object.assign({scaleMode:De.defaultOptions.scaleMode,resolution:jn(i)},s)),{resource:o}=r;o instanceof s0&&(o.url=i);const a=new ye(r);return n||(n=i),De.addToCache(a.baseTexture,n),ye.addToCache(a,n),n!==i&&(De.addToCache(a.baseTexture,i),ye.addToCache(a,i)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),Vi[i]&&Vi[i]!==t&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),Vi[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=Vi[t];if(i){const n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete Vi[t],i}}else if(t!=null&&t.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)Vi[t.textureCacheIds[i]]===t&&delete Vi[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:i,y:n,width:s,height:r}=t,o=i+s>this.baseTexture.width,a=n+r>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${i} + ${s} = ${i+s} > ${this.baseTexture.width}`,u=`Y: ${n} + ${r} = ${n+r} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=s&&r&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ye._EMPTY||(ye._EMPTY=new ye(new De),ha(ye._EMPTY),ha(ye._EMPTY.baseTexture)),ye._EMPTY}static get WHITE(){if(!ye._WHITE){const t=fe.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),ye._WHITE=new ye(De.from(t)),ha(ye._WHITE),ha(ye._WHITE.baseTexture)}return ye._WHITE}}class ks extends ye{constructor(t,i){super(t,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i,n=!0){const s=this.baseTexture.resolution,r=Math.round(t*s)/s,o=Math.round(i*s)/s;this.valid=r>0&&o>0,this._frame.width=this.orig.width=r,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(r,o),this.updateUvs()}setResolution(t){const{baseTexture:i}=this;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))}static create(t){return new ks(new n0(t))}}class o0{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,n=bt.NONE){const s=new n0(Object.assign({width:t,height:i,resolution:1,multisample:n},this.textureOptions));return new ks(s)}getOptimalTexture(t,i,n=1,s=bt.NONE){let r;t=Math.ceil(t*n-1e-6),i=Math.ceil(i*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||i!==this._pixelsHeight?(t=Ka(t),i=Ka(i),r=((t&65535)<<16|i&65535)>>>0,s>1&&(r+=s*4294967296)):r=s>1?-s:-1,this.texturePool[r]||(this.texturePool[r]=[]);let o=this.texturePool[r].pop();return o||(o=this.createTexture(t,i,s)),o.filterPoolKey=r,o.setResolution(n),o}getFilterTexture(t,i,n){const s=this.getOptimalTexture(t.width,t.height,i||t.resolution,n||bt.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const i in this.texturePool){const n=this.texturePool[i];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const n=this.texturePool[i];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}o0.SCREEN_KEY=-1;class $C extends Xn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class a0 extends Xn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new yt(this.vertices),this.uvBuffer=new yt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,i){let n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/t.width,this.uvs[3]=s,this.uvs[4]=n+i.width/t.width,this.uvs[5]=s+i.height/t.height,this.uvs[6]=n,this.uvs[7]=s+i.height/t.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class WC{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=bt.NONE,this.sourceFrame=new Ne,this.destinationFrame=new Ne,this.bindingSourceFrame=new Ne,this.bindingDestinationFrame=new Ne,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const da=[new _e,new _e,new _e,new _e],du=new lt;class l0{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new o0,this.statePool=[],this.quad=new $C,this.quadUv=new a0,this.tempRect=new Ne,this.activeState={},this.globalUniforms=new ki({outputFrame:new Ne,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,i){const n=this.renderer,s=this.defaultFilterStack,r=this.statePool.pop()||new WC,o=this.renderer.renderTexture;let a=i[0].resolution,l=i[0].multisample,c=i[0].padding,u=i[0].autoFit,h=i[0].legacy??!0;for(let p=1;p<i.length;p++){const g=i[p];a=Math.min(a,g.resolution),l=Math.min(l,g.multisample),c=this.useMaxPadding?Math.max(c,g.padding):c+g.padding,u=u&&g.autoFit,h=h||(g.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),s.push(r),r.resolution=a,r.multisample=l,r.legacy=h,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(c);const d=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(du.copyFrom(n.projection.transform).invert(),d),u?(r.sourceFrame.fit(d),(r.sourceFrame.width<=0||r.sourceFrame.height<=0)&&(r.sourceFrame.width=0,r.sourceFrame.height=0)):r.sourceFrame.intersects(d)||(r.sourceFrame.width=0,r.sourceFrame.height=0),this.roundFrame(r.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,a,l),r.filters=i,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=r.sourceFrame.width,f.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,r.bindingSourceFrame.copyFrom(o.sourceFrame),r.bindingDestinationFrame.copyFrom(o.destinationFrame),r.transform=n.projection.transform,n.projection.transform=null,o.bind(r.renderTexture,r.sourceFrame,f),n.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,i=t.pop(),n=i.filters;this.activeState=i;const s=this.globalUniforms.uniforms;s.outputFrame=i.sourceFrame,s.resolution=i.resolution;const r=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(r[0]=i.destinationFrame.width,r[1]=i.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=Math.round(r[0]*i.resolution),o[1]=Math.round(r[1]*i.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=i.sourceFrame.width*r[2]-.5*o[2],a[3]=i.sourceFrame.height*r[3]-.5*o[3],i.legacy){const c=s.filterArea;c[0]=i.destinationFrame.width,c[1]=i.destinationFrame.height,c[2]=i.sourceFrame.x,c[3]=i.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,l.renderTexture,Gi.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let c=i.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,i.resolution);u.filterFrame=c.filterFrame;let h=0;for(h=0;h<n.length-1;++h){h===1&&i.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,i.resolution),u.filterFrame=c.filterFrame),n[h].apply(this,c,u,Gi.CLEAR,i);const d=c;c=u,u=d}n[h].apply(this,c,l.renderTexture,Gi.BLEND,i),h>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}i.clear(),this.statePool.push(i)}bindAndClear(t,i=Gi.CLEAR){const{renderTexture:n,state:s}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const r=s.stateId&1||this.forceClear;(i===Gi.CLEAR||i===Gi.BLIT&&r)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,i,n,s){const r=this.renderer;r.state.set(t.state),this.bindAndClear(n,s),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,r.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(i._frame,i.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(ji.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(ji.TRIANGLE_STRIP))}calculateSpriteMatrix(t,i){const{sourceFrame:n,destinationFrame:s}=this.activeState,{orig:r}=i._texture,o=t.set(s.width,0,0,s.height,n.x,n.y),a=i.worldTransform.copyTo(lt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/r.width,1/r.height),o.translate(i.anchor.x,i.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,i,n=1,s=bt.NONE){return this.texturePool.getOptimalTexture(t,i,n,s)}getFilterTexture(t,i,n){if(typeof t=="number"){const r=t;t=i,i=r}t=t||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution,n||bt.NONE);return s.filterFrame=t.filterFrame,s}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,i){const n=da[0],s=da[1],r=da[2],o=da[3];n.set(i.left,i.top),s.set(i.left,i.bottom),r.set(i.right,i.top),o.set(i.right,i.bottom),t.apply(n,n),t.apply(s,s),t.apply(r,r),t.apply(o,o);const a=Math.min(n.x,s.x,r.x,o.x),l=Math.min(n.y,s.y,r.y,o.y),c=Math.max(n.x,s.x,r.x,o.x),u=Math.max(n.y,s.y,r.y,o.y);i.x=a,i.y=l,i.width=c-a,i.height=u-l}roundFrame(t,i,n,s,r){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(r){const{a:o,b:a,c:l,d:c}=r;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}r=r?du.copyFrom(r):du.identity(),r.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.transformAABB(r,t),t.ceil(i),this.transformAABB(r.invert(),t)}}}l0.extension={type:pe.RendererSystem,name:"filter"};Se.add(l0);class zC{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=bt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const jC=new Ne;class c0{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new mh(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ne,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;fe.PREFER_ENV===Rs.WEBGL_LEGACY&&(i=null,n=null),i?t.drawBuffers=s=>i.drawBuffersWEBGL(s):(this.hasMRT=!1,t.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,i,n=0){const{gl:s}=this;if(t){const r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,s.bindFramebuffer(s.FRAMEBUFFER,r.framebuffer)),r.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,r.mipLevel=n),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,r.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i){const o=i.width>>n,a=i.height>>n,l=o/i.width;this.setViewport(i.x*l,i.y*l,o,a)}else{const o=t.width>>n,a=t.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,i,n,s){const r=this.viewport;t=Math.round(t),i=Math.round(i),n=Math.round(n),s=Math.round(s),(r.width!==n||r.height!==s||r.x!==t||r.y!==i)&&(r.x=t,r.y=i,r.width=n,r.height=s,this.gl.viewport(t,i,n,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,i,n,s,r=Ju.COLOR|Ju.DEPTH){const{gl:o}=this;o.clearColor(t,i,n,s),o.clear(r)}initFramebuffer(t){const{gl:i}=this,n=new zC(i.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n}resizeFramebuffer(t){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height));const s=t.colorTextures;let r=s.length;i.drawBuffers||(r=Math.min(r,1));for(let o=0;o<r;o++){const a=s[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,i){const{gl:n}=this,s=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures;let o=r.length;n.drawBuffers||(o=Math.min(o,1)),s.multisample>1&&this.canMultisampleFramebuffer(t)?s.msaaBuffer=s.msaaBuffer||n.createRenderbuffer():s.msaaBuffer&&(n.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=r[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&s.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,s.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,s.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,i),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const c=t.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,i)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(s.stencil=s.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,s.stencil),s.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s.stencil)):s.stencil&&(n.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:i}=this;let n=bt.NONE;if(t<=1||i===null)return n;for(let s=0;s<i.length;s++)if(i[s]<=t){n=i[s];break}return n===1&&(n=bt.NONE),n}blit(t,i,n){const{current:s,renderer:r,gl:o,CONTEXT_UID:a}=this;if(r.context.webGLVersion!==2||!s)return;const l=s.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const u=s.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new mh(s.width,s.height),l.blitFramebuffer.addColorTexture(0,u)),t=l.blitFramebuffer,t.colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}i||(i=jC,i.width=s.width,i.height=s.height),n||(n=i);const c=i.width===n.width&&i.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(i.left,i.top,i.right,i.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,i){const n=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!n)return;delete t.glFramebuffers[this.CONTEXT_UID];const r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),i||(s.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&s.deleteRenderbuffer(n.msaaBuffer),n.stencil&&s.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,i)}disposeAll(t){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<i.length;n++)this.disposeFramebuffer(i[n],t)}forceStencil(){const t=this.current;if(!t)return;const i=t.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil)return;t.stencil=!0;const n=t.width,s=t.height,r=this.gl,o=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,o),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,n,s):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,n,s),i.stencil=o,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ne}destroy(){this.renderer=null}}c0.extension={type:pe.RendererSystem,name:"framebuffer"};Se.add(c0);const fu={5126:4,5123:2,5121:1};class u0{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;fe.PREFER_ENV===Rs.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=()=>n.createVertexArrayOES(),t.bindVertexArray=s=>n.bindVertexArrayOES(s),t.deleteVertexArray=s=>n.deleteVertexArrayOES(s)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=(s,r)=>n.vertexAttribDivisorANGLE(s,r),t.drawElementsInstanced=(s,r,o,a,l)=>n.drawElementsInstancedANGLE(s,r,o,a,l),t.drawArraysInstanced=(s,r,o,a)=>n.drawArraysInstancedANGLE(s,r,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(t,i){i=i||this.renderer.shader.shader;const{gl:n}=this;let s=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},r=!0);const o=s[i.program.id]||this.initGeometryVao(t,i,r);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,i=this.renderer.buffer;for(let n=0;n<t.buffers.length;n++){const s=t.buffers[n];i.update(s)}}checkCompatibility(t,i){const n=t.attributes,s=i.attributeData;for(const r in s)if(!n[r])throw new Error(`shader and geometry incompatible, geometry missing the "${r}" attribute`)}getSignature(t,i){const n=t.attributes,s=i.attributeData,r=["g",t.id];for(const o in n)s[o]&&r.push(o,s[o].location);return r.join("-")}initGeometryVao(t,i,n=!0){const s=this.gl,r=this.CONTEXT_UID,o=this.renderer.buffer,a=i.program;a.glPrograms[r]||this.renderer.shader.generateProgram(i),this.checkCompatibility(t,a);const l=this.getSignature(t,a),c=t.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const h=t.buffers,d=t.attributes,f={},p={};for(const g in h)f[g]=0,p[g]=0;for(const g in d)!d[g].size&&a.attributeData[g]?d[g].size=a.attributeData[g].size:d[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[g].buffer]+=d[g].size*fu[d[g].type];for(const g in d){const y=d[g],w=y.size;y.stride===void 0&&(f[y.buffer]===w*fu[y.type]?y.stride=0:y.stride=f[y.buffer]),y.start===void 0&&(y.start=p[y.buffer],p[y.buffer]+=w*fu[y.type])}u=s.createVertexArray(),s.bindVertexArray(u);for(let g=0;g<h.length;g++){const y=h[g];o.bind(y),n&&y._glBuffers[r].refCount++}return this.activateVao(t,a),c[a.id]=u,c[l]=u,s.bindVertexArray(null),o.unbind(qi.ARRAY_BUFFER),u}disposeGeometry(t,i){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,r=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(let l=0;l<r.length;l++){const c=r[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!i&&o.dispose(r[l],i))}if(!i){for(const l in n)if(l[0]==="g"){const c=n[l];this._activeVao===c&&this.unbind(),s.deleteVertexArray(c)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const i=Object.keys(this.managedGeometries);for(let n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],t)}activateVao(t,i){const n=this.gl,s=this.CONTEXT_UID,r=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&r.bind(t.indexBuffer);let l=null;for(const c in a){const u=a[c],h=o[u.buffer],d=h._glBuffers[s];if(i.attributeData[c]){l!==d&&(r.bind(h),l=d);const f=i.attributeData[c].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)n.vertexAttribDivisor(f,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,i,n,s){const{gl:r}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?r.UNSIGNED_SHORT:r.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(t,i||o.indexBuffer.data.length,l,(n||0)*a,s||1):r.drawElements(t,i||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(t,n,i||o.getSize(),s||1):r.drawArrays(t,n,i||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}u0.extension={type:pe.RendererSystem,name:"geometry"};Se.add(u0);const Xm=new lt;class h0{constructor(t,i){this._texture=t,this.mapCoord=new lt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,i){i===void 0&&(i=t);const n=this.mapCoord;for(let s=0;s<t.length;s+=2){const r=t[s],o=t[s+1];i[s]=r*n.a+o*n.c+n.tx,i[s+1]=r*n.b+o*n.d+n.ty}return i}update(t){const i=this._texture;if(!i||!i.valid||!t&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const n=i._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=i.orig,r=i.trim;r&&(Xm.set(s.width/r.width,0,0,s.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Xm));const o=i.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(i._frame.x+l+c)/o.width,a[1]=(i._frame.y+l+c)/o.height,a[2]=(i._frame.x+i._frame.width-l+c)/o.width,a[3]=(i._frame.y+i._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=i._frame.width===o.width&&i._frame.height===o.height&&i.rotate===0,!0}}var XC=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,YC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class qC extends Bt{constructor(t,i,n){let s=null;typeof t!="string"&&i===void 0&&n===void 0&&(s=t,t=void 0,i=void 0,n=void 0),super(t||YC,i||XC,n),this.maskSprite=s,this.maskMatrix=new lt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,i,n,s){const r=this._maskSprite,o=r._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new h0(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,i,n,s))}}class KC{constructor(t=null){this.type=Ct.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Bt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ct.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class d0{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,i){let n=i;if(!n.isMaskData){const r=this.maskDataPool.pop()||new KC;r.pooled=!0,r.maskObject=i,n=r}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(s),n._colorMask=s?s._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==Ct.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Ct.SCISSOR:this.renderer.scissor.push(n);break;case Ct.STENCIL:this.renderer.stencil.push(n);break;case Ct.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Ct.COLOR:this.pushColorMask(n);break}n.type===Ct.SPRITE&&this.maskStack.push(n)}pop(t){const i=this.maskStack.pop();if(!(!i||i._target!==t)){if(i.enabled)switch(i.type){case Ct.SCISSOR:this.renderer.scissor.pop(i);break;case Ct.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case Ct.SPRITE:this.popSpriteMask(i);break;case Ct.COLOR:this.popColorMask(i);break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Ct.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(t){const i=t.maskObject;i?i.isSprite?t.type=Ct.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Ct.SCISSOR:t.type=Ct.STENCIL:t.type=Ct.COLOR}pushSpriteMask(t){const{maskObject:i}=t,n=t._target;let s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new qC]));const r=this.renderer,o=r.renderTexture;let a,l;if(o.current){const u=o.current;a=t.resolution||u.resolution,l=t.multisample??u.multisample}else a=t.resolution||r.resolution,l=t.multisample??r.multisample;s[0].resolution=a,s[0].multisample=l,s[0].maskSprite=i;const c=n.filterArea;n.filterArea=i.getBounds(!0),r.filter.push(n,s),n.filterArea=c,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const i=t._colorMask,n=t._colorMask=i&t.colorMask;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(t){const i=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}d0.extension={type:pe.RendererSystem,name:"mask"};Se.add(d0);class f0{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:i}=this.renderer,n=this.getStackLength();this.maskStack=t;const s=this.getStackLength();s!==n&&(s===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Ym=new lt,qm=[],Pa=class extends f0{constructor(e){super(e),this.glConst=fe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:n}=this,s=n.renderTexture,r=i.getBounds(!0,qm.pop()??new Ne);this.roundFrameToPixels(r,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),t&&r.fit(t),e._scissorRectLocal=r}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:n,d:s}=e;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Pa.isMatrixRotated(t.worldTransform)||Pa.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,n,s){Pa.isMatrixRotated(s)||(s=s?Ym.copyFrom(s):Ym.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,e),e.fit(n),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&qm.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let p0=Pa;p0.extension={type:pe.RendererSystem,name:"scissor"};Se.add(p0);class m0 extends f0{constructor(t){super(t),this.glConst=fe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const i=t.maskObject,{gl:n}=this.renderer,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;const r=t._colorMask;r!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,r!==0&&(t._colorMask=r,n.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}pop(t){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=n?n._colorMask:15;s!==0&&(n._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(n._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}m0.extension={type:pe.RendererSystem,name:"stencil"};Se.add(m0);class g0{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return je("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return je("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return je("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const i in t)this.plugins[i]=new t[i](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}g0.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"_plugin"};Se.add(g0);class v0{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new lt,this.transform=null}update(t,i,n,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,s),this.transform&&this.projectionMatrix.append(this.transform);const r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)}calculateProjection(t,i,n,s){const r=this.projectionMatrix,o=s?-1:1;r.identity(),r.a=1/i.width*2,r.d=o*(1/i.height*2),r.tx=-1-i.x*r.a,r.ty=-o-i.y*r.d}setTransform(t){}destroy(){this.renderer=null}}v0.extension={type:pe.RendererSystem,name:"projection"};Se.add(v0);const ZC=new Rd;class y0{constructor(t){this.renderer=t,this._tempMatrix=new lt}generateTexture(t,i){const{region:n,...s}=i||{},r=n||t.getLocalBounds(null,!0);r.width===0&&(r.width=1),r.height===0&&(r.height=1);const o=ks.create({width:r.width,height:r.height,...s});this._tempMatrix.tx=-r.x,this._tempMatrix.ty=-r.y;const a=t.transform;return t.transform=ZC,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}y0.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"textureGenerator"};Se.add(y0);const ss=new Ne,Dr=new Ne;class _0{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ne,this.destinationFrame=new Ne,this.viewportFrame=new Ne}contextChange(){var i;const t=(i=this.renderer)==null?void 0:i.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,i,n){const s=this.renderer;this.current=t;let r,o,a;t?(r=t.baseTexture,a=r.resolution,i||(ss.width=t.frame.width,ss.height=t.frame.height,i=ss),n||(Dr.x=t.frame.x,Dr.y=t.frame.y,Dr.width=i.width,Dr.height=i.height,n=Dr),o=r.framebuffer):(a=s.resolution,i||(ss.width=s._view.screen.width,ss.height=s._view.screen.height,i=ss),n||(n=ss,n.width=i.width,n.height=i.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,t||(l.y=s.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,i,a,!o),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)}clear(t,i){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=it.shared.setValue(t||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const r=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=r.width!==o.width||r.height!==o.height;if(a){let{x:l,y:c,width:u,height:h}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,h)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,i),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}_0.extension={type:pe.RendererSystem,name:"renderTexture"};Se.add(_0);class JC{constructor(t,i){this.program=t,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function QC(e,t){const i={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=t.getActiveAttrib(e,s);if(r.name.startsWith("gl_"))continue;const o=t0(t,r.type),a={type:o,name:r.name,size:e0(o),location:t.getAttribLocation(e,r.name)};i[r.name]=a}return i}function eE(e,t){const i={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<n;s++){const r=t.getActiveUniform(e,s),o=r.name.replace(/\[.*?\]$/,""),a=!!r.name.match(/\[.*?\]$/),l=t0(t,r.type);i[o]={name:o,index:s,type:l,size:r.size,isArray:a,value:Jy(l,r.size)}}return i}function tE(e,t){var l;const i=Hm(e,e.VERTEX_SHADER,t.vertexSrc),n=Hm(e,e.FRAGMENT_SHADER,t.fragmentSrc),s=e.createProgram();e.attachShader(s,i),e.attachShader(s,n);const r=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(r&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(s,r.names,r.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||MC(e,s,i,n),t.attributeData=QC(s,e),t.uniformData=eE(s,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const c=Object.keys(t.attributeData);c.sort((u,h)=>u>h?1:-1);for(let u=0;u<c.length;u++)t.attributeData[c[u]].location=u,e.bindAttribLocation(s,u,c[u]);e.linkProgram(s)}e.deleteShader(i),e.deleteShader(n);const o={};for(const c in t.uniformData){const u=t.uniformData[c];o[c]={location:e.getUniformLocation(s,c),value:Jy(u.type,u.size)}}return new JC(s,o)}function iE(e,t,i,n,s){i.buffer.update(s)}const nE={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},b0={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function sE(e){const t=e.map(r=>({data:r,offset:0,dataLen:0,dirty:0}));let i=0,n=0,s=0;for(let r=0;r<t.length;r++){const o=t[r];if(i=b0[o.data.type],o.data.size>1&&(i=Math.max(i,16)*o.data.size),o.dataLen=i,n%i!==0&&n<16){const a=n%i%16;n+=a,s+=a}n+i>16?(s=Math.ceil(s/16)*16,o.offset=s,s+=i,n=i):(o.offset=s,n+=i,s+=i)}return s=Math.ceil(s/16)*16,{uboElements:t,size:s}}function rE(e,t){const i=[];for(const n in e)t[n]&&i.push(t[n]);return i.sort((n,s)=>n.index-s.index),i}function oE(e,t){if(!e.autoManage)return{size:0,syncFunc:iE};const i=rE(e.uniforms,t),{uboElements:n,size:s}=sE(i),r=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=e.uniforms[a.data.name],c=a.data.name;let u=!1;for(let h=0;h<ur.length;h++){const d=ur[h];if(d.codeUbo&&d.test(a.data,l)){r.push(`offset = ${a.offset/4};`,ur[h].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const h=e0(a.data.type),d=Math.max(b0[a.data.type]/16,1),f=h/d,p=(4-f%4)%4;r.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const h=nE[a.data.type];r.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${h};
                `)}}return r.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",r.join(`
`))}}let aE=0;const fa={textureCount:0,uboCount:0};class x0{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=aE++}systemCheck(){if(!kC())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,i){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const n=t.program,s=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(s.program)),i||(fa.textureCount=0,fa.uboCount=0,this.syncUniformGroup(t.uniformGroup,fa)),s}setUniforms(t){const i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,t,this.renderer)}syncUniformGroup(t,i){const n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,i))}syncUniforms(t,i,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(i.uniformData,t.uniforms,this.renderer,n)}createSyncGroups(t){const i=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=AC(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,i){const n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;const s=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,i);t.buffer.update(),s(n.uniformData,t.uniforms,this.renderer,fa,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[i])}createSyncBufferGroup(t,i,n){const{gl:s}=this.renderer;this.renderer.buffer.bind(t.buffer);const r=this.gl.getUniformBlockIndex(i.program,n);i.uniformBufferBindings[n]=this.shader.uniformBindCount,s.uniformBlockBinding(i.program,r,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=oE(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return i.uniformGroups[t.id]=a.syncFunc,i.uniformGroups[t.id]}getSignature(t,i,n){const s=t.uniforms,r=[`${n}-`];for(const o in s)r.push(o),i[o]&&r.push(i[o].type);return r.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const i=this.gl,n=t.program,s=tE(i,n);return n.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}x0.extension={type:pe.RendererSystem,name:"shader"};Se.add(x0);class Bl{constructor(t){this.renderer=t}run(t){const{renderer:i}=this;i.runners.init.emit(i.options),t.hello&&console.log(`PixiJS 7.2.4 - ${i.rendererLogId} - https://pixijs.com`),i.resize(i.screen.width,i.screen.height)}destroy(){}}Bl.defaultOptions={hello:!1};Bl.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"startup"};Se.add(Bl);function lE(e,t=[]){return t[ke.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.ADD]=[e.ONE,e.ONE],t[ke.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.NONE]=[0,0],t[ke.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ke.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ke.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ke.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ke.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ke.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ke.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ke.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ke.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ke.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ke.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const cE=0,uE=1,hE=2,dE=3,fE=4,pE=5,gh=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ke.NONE,this._blendEq=!1,this.map=[],this.map[cE]=this.setBlend,this.map[uE]=this.setOffset,this.map[hE]=this.setCullFace,this.map[dE]=this.setDepthTest,this.map[fE]=this.setFrontFace,this.map[pE]=this.setDepthMask,this.checks=[],this.defaultState=new xn,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=lE(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(gh.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(gh.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let w0=gh;w0.extension={type:pe.RendererSystem,name:"state"};Se.add(w0);class mE extends Oo{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const i=(t.priority??[]).filter(s=>t.systems[s]),n=[...i,...Object.keys(t.systems).filter(s=>!i.includes(s))];for(const s of n)this.addSystem(t.systems[s],s)}addRunners(...t){t.forEach(i=>{this.runners[i]=new Ri(i)})}addSystem(t,i){const n=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=n,this._systemsHash[i]=n;for(const s in this.runners)this.runners[s].add(n);return this}emitWithCustomOptions(t,i){const n=Object.keys(this._systemsHash);t.items.forEach(s=>{const r=n.find(o=>this._systemsHash[o]===s);s[t.name](i[r])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Ma=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Ma.defaultMaxIdle,this.checkCountMax=Ma.defaultCheckCountMax,this.mode=Ma.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Ed.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let n=0;n<t.length;n++){const s=t[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[n]=null,i=!0)}if(i){let n=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[n++]=t[s]);t.length=n}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};let Ti=Ma;Ti.defaultMode=Ed.AUTO;Ti.defaultMaxIdle=60*60;Ti.defaultCheckCountMax=60*10;Ti.extension={type:pe.RendererSystem,name:"textureGC"};Se.add(Ti);class pu{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Me.UNSIGNED_BYTE,this.internalFormat=ue.RGBA,this.samplerType=0}}function gE(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[Me.UNSIGNED_BYTE]:{[ue.RGBA]:e.RGBA8,[ue.RGB]:e.RGB8,[ue.RG]:e.RG8,[ue.RED]:e.R8,[ue.RGBA_INTEGER]:e.RGBA8UI,[ue.RGB_INTEGER]:e.RGB8UI,[ue.RG_INTEGER]:e.RG8UI,[ue.RED_INTEGER]:e.R8UI,[ue.ALPHA]:e.ALPHA,[ue.LUMINANCE]:e.LUMINANCE,[ue.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Me.BYTE]:{[ue.RGBA]:e.RGBA8_SNORM,[ue.RGB]:e.RGB8_SNORM,[ue.RG]:e.RG8_SNORM,[ue.RED]:e.R8_SNORM,[ue.RGBA_INTEGER]:e.RGBA8I,[ue.RGB_INTEGER]:e.RGB8I,[ue.RG_INTEGER]:e.RG8I,[ue.RED_INTEGER]:e.R8I},[Me.UNSIGNED_SHORT]:{[ue.RGBA_INTEGER]:e.RGBA16UI,[ue.RGB_INTEGER]:e.RGB16UI,[ue.RG_INTEGER]:e.RG16UI,[ue.RED_INTEGER]:e.R16UI,[ue.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[Me.SHORT]:{[ue.RGBA_INTEGER]:e.RGBA16I,[ue.RGB_INTEGER]:e.RGB16I,[ue.RG_INTEGER]:e.RG16I,[ue.RED_INTEGER]:e.R16I},[Me.UNSIGNED_INT]:{[ue.RGBA_INTEGER]:e.RGBA32UI,[ue.RGB_INTEGER]:e.RGB32UI,[ue.RG_INTEGER]:e.RG32UI,[ue.RED_INTEGER]:e.R32UI,[ue.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[Me.INT]:{[ue.RGBA_INTEGER]:e.RGBA32I,[ue.RGB_INTEGER]:e.RGB32I,[ue.RG_INTEGER]:e.RG32I,[ue.RED_INTEGER]:e.R32I},[Me.FLOAT]:{[ue.RGBA]:e.RGBA32F,[ue.RGB]:e.RGB32F,[ue.RG]:e.RG32F,[ue.RED]:e.R32F,[ue.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[Me.HALF_FLOAT]:{[ue.RGBA]:e.RGBA16F,[ue.RGB]:e.RGB16F,[ue.RG]:e.RG16F,[ue.RED]:e.R16F},[Me.UNSIGNED_SHORT_5_6_5]:{[ue.RGB]:e.RGB565},[Me.UNSIGNED_SHORT_4_4_4_4]:{[ue.RGBA]:e.RGBA4},[Me.UNSIGNED_SHORT_5_5_5_1]:{[ue.RGBA]:e.RGB5_A1},[Me.UNSIGNED_INT_2_10_10_10_REV]:{[ue.RGBA]:e.RGB10_A2,[ue.RGBA_INTEGER]:e.RGB10_A2UI},[Me.UNSIGNED_INT_10F_11F_11F_REV]:{[ue.RGB]:e.R11F_G11F_B10F},[Me.UNSIGNED_INT_5_9_9_9_REV]:{[ue.RGB]:e.RGB9_E5},[Me.UNSIGNED_INT_24_8]:{[ue.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[Me.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ue.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[Me.UNSIGNED_BYTE]:{[ue.RGBA]:e.RGBA,[ue.RGB]:e.RGB,[ue.ALPHA]:e.ALPHA,[ue.LUMINANCE]:e.LUMINANCE,[ue.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Me.UNSIGNED_SHORT_5_6_5]:{[ue.RGB]:e.RGB},[Me.UNSIGNED_SHORT_4_4_4_4]:{[ue.RGBA]:e.RGBA},[Me.UNSIGNED_SHORT_5_5_5_1]:{[ue.RGBA]:e.RGBA}},t}class S0{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new De,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=gE(t);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let s=0;s<i;s++)this.boundTextures[s]=null;this.emptyTextures={};const n=new pu(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new pu(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(t,i=0){const{gl:n}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(t)):s.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[i]=t}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:i,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)}ensureSamplerType(t){const{boundTextures:i,hasIntegerTextures:n,CONTEXT_UID:s}=this;if(n)for(let r=t-1;r>=0;--r){const o=i[r];o&&o._glTextures[s].samplerType!==Qu.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const i=new pu(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i}initTextureType(t,i){var n;i.internalFormat=((n=this.internalFormats[t.type])==null?void 0:n[t.format])??t.format,this.webGLVersion===2&&t.type===Me.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=t.type}updateTexture(t){var s;const i=t._glTextures[this.CONTEXT_UID];if(!i)return;const n=this.renderer;if(this.initTextureType(t,i),(s=t.resource)!=null&&s.upload(n,t,i))i.samplerType!==Qu.FLOAT&&(this.hasIntegerTextures=!0);else{const r=t.realWidth,o=t.realHeight,a=n.gl;(i.width!==r||i.height!==o||i.dirtyId<0)&&(i.width=r,i.height=o,a.texImage2D(t.target,0,i.internalFormat,r,o,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}destroyTexture(t,i){const{gl:n}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){const s=this.managedTextures.indexOf(t);s!==-1&&lr(this.managedTextures,s,1)}}updateTextureStyle(t){var n;const i=t._glTextures[this.CONTEXT_UID];i&&((t.mipmap===Zi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=Un.CLAMP:i.wrapMode=t.wrapMode,(n=t.resource)!=null&&n.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)}setStyle(t,i){const n=this.gl;if(i.mipmap&&t.mipmap!==Zi.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Xi.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===Xi.LINEAR){const r=Math.min(t.anisotropicLevel,n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Xi.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Xi.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}S0.extension={type:pe.RendererSystem,name:"texture"};Se.add(S0);class T0{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:n}=this,s=t._glTransformFeedbacks[n]||this.createGLTransformFeedback(t);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,i){const{gl:n,renderer:s}=this;i&&s.shader.bind(i),n.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:i,renderer:n,CONTEXT_UID:s}=this,r=i.createTransformFeedback();t._glTransformFeedbacks[s]=r,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(n.buffer.update(a),a._glBuffers[s].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[s].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),r}disposeTransformFeedback(t,i){const n=t._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this);const r=this.renderer.buffer;if(r)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!i&&r.dispose(a,i))}n&&(i||s.deleteTransformFeedback(n),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}T0.extension={type:pe.RendererSystem,name:"transformFeedback"};Se.add(T0);class Fl{constructor(t){this.renderer=t}init(t){this.screen=new Ne(0,0,t.width,t.height),this.element=t.view||fe.ADAPTER.createCanvas(),this.resolution=t.resolution||fe.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,i){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(i*this.resolution);const n=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",n,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var i;t&&((i=this.element.parentNode)==null||i.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Fl.defaultOptions={width:800,height:600,resolution:fe.RESOLUTION,autoDensity:!1};Fl.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"_view"};Se.add(Fl);fe.PREFER_ENV=Rs.WEBGL2;fe.STRICT_TEXTURE_CACHE=!1;fe.RENDER_OPTIONS={...kl.defaultOptions,...Rl.defaultOptions,...Fl.defaultOptions,...Bl.defaultOptions};Object.defineProperties(fe,{WRAP_MODE:{get(){return De.defaultOptions.wrapMode},set(e){je("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),De.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return De.defaultOptions.scaleMode},set(e){je("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),De.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return De.defaultOptions.mipmap},set(e){je("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),De.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return De.defaultOptions.anisotropicLevel},set(e){je("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),De.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return je("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Bt.defaultResolution},set(e){Bt.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return je("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Bt.defaultMultisample},set(e){Bt.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return Si.defaultMaxTextures},set(e){je("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Si.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return Si.defaultBatchSize},set(e){je("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Si.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return Si.canUploadSameBuffer},set(e){je("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Si.canUploadSameBuffer=e}},GC_MODE:{get(){return Ti.defaultMode},set(e){je("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ti.defaultMode=e}},GC_MAX_IDLE:{get(){return Ti.defaultMaxIdle},set(e){je("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ti.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return Ti.defaultCheckCountMax},set(e){je("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ti.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return Ai.defaultVertexPrecision},set(e){je("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ai.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return Ai.defaultFragmentPrecision},set(e){je("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ai.defaultFragmentPrecision=e}}});var Es=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Es||{});class mu{constructor(t,i=null,n=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=i,this.priority=n,this.once=s}match(t,i=null){return this.fn===t&&this.context===i}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const Zt=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new mu(null,null,1/0),this.deltaMS=1/Zt.targetFPMS,this.elapsedMS=1/Zt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Es.NORMAL){return this._addListener(new mu(e,t,i))}addOnce(e,t,i=Es.NORMAL){return this._addListener(new mu(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Zt.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Zt.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Zt._shared){const e=Zt._shared=new Zt;e.autoStart=!0,e._protected=!0}return Zt._shared}static get system(){if(!Zt._system){const e=Zt._system=new Zt;e.autoStart=!0,e._protected=!0}return Zt._system}};let Mt=Zt;Mt.targetFPMS=.06;Object.defineProperties(fe,{TARGET_FPMS:{get(){return Mt.targetFPMS},set(e){je("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Mt.targetFPMS=e}}});class C0{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Es.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Mt.shared:new Mt,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}C0.extension=pe.Application;Se.add(C0);const E0=[];Se.handleByList(pe.Renderer,E0);function vE(e){for(const t of E0)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var yE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,_E=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const bE=yE,A0=_E;class I0{constructor(t){this.renderer=t}contextChange(t){let i;if(this.renderer.context.webGLVersion===1){const n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{const n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}i>=bt.HIGH?this.multisample=bt.HIGH:i>=bt.MEDIUM?this.multisample=bt.MEDIUM:i>=bt.LOW?this.multisample=bt.LOW:this.multisample=bt.NONE}destroy(){}}I0.extension={type:pe.RendererSystem,name:"_multisample"};Se.add(I0);class xE{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class P0{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:n}=this,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)}unbind(t){const{gl:i}=this;i.bindBuffer(t,null)}bindBufferBase(t,i){const{gl:n,CONTEXT_UID:s}=this;if(this.boundBufferBases[i]!==t){const r=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[i]=t,n.bindBufferBase(n.UNIFORM_BUFFER,i,r.buffer)}}bindBufferRange(t,i,n){const{gl:s,CONTEXT_UID:r}=this;n=n||0;const o=t._glBuffers[r]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,i||0,o.buffer,n*256,256)}update(t){const{gl:i,CONTEXT_UID:n}=this,s=t._glBuffers[n]||this.createGLBuffer(t);if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{const r=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,r)}}dispose(t,i){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const n=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),n&&(i||s.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const i=Object.keys(this.managedBuffers);for(let n=0;n<i.length;n++)this.dispose(this.managedBuffers[i[n]],t)}createGLBuffer(t){const{CONTEXT_UID:i,gl:n}=this;return t._glBuffers[i]=new xE(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]}}P0.extension={type:pe.RendererSystem,name:"buffer"};Se.add(P0);class M0{constructor(t){this.renderer=t}render(t,i){const n=this.renderer;let s,r,o,a;if(i&&(s=i.renderTexture,r=i.clear,o=i.transform,a=i.skipUpdateTransform),this.renderingToScreen=!s,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(s||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}n.renderTexture.bind(s),n.batch.currentRenderer.start(),(r??n.background.clearBeforeRender)&&n.renderTexture.clear(),t.render(n),n.batch.currentRenderer.flush(),s&&(i.blit&&n.framebuffer.blit(),s.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}M0.extension={type:pe.RendererSystem,name:"objectRenderer"};Se.add(M0);const vh=class extends mE{constructor(e){super(),this.type=Oy.WEBGL,e=Object.assign({},fe.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ki({projectionMatrix:new lt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:vh.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(je("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=vh.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:jT()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return je("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return je("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return je("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return je("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){je("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return je("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){je("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return je("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Sr=vh;Sr.extension={type:pe.Renderer,priority:1};Sr.__plugins={};Sr.__systems={};Se.handleByMap(pe.RendererPlugin,Sr.__plugins);Se.handleByMap(pe.RendererSystem,Sr.__systems);Se.add(Sr);class R0 extends _o{constructor(t,i){const{width:n,height:s}=i||{};super(n,s),this.items=[],this.itemDirtyIds=[];for(let r=0;r<t;r++){const o=new De;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,i){for(let n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof _o?this.addResourceAt(t[n],n):this.addResourceAt(Yy(t[n],i),n))}dispose(){for(let t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)}unbind(t){super.unbind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)}load(){if(this._load)return this._load;const i=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(i).then(()=>{const{realWidth:n,realHeight:s}=this.items[0];return this.resize(n,s),Promise.resolve(this)}),this._load}}class wE extends R0{constructor(t,i){const{width:n,height:s}=i||{};let r,o;Array.isArray(t)?(r=t,o=t.length):o=t,super(o,{width:n,height:s}),r&&this.initFromArray(r,i)}addBaseTextureAt(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=rr.TEXTURE_2D_ARRAY}upload(t,i,n){const{length:s,itemDirtyIds:r,items:o}=this,{gl:a}=t;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,s,0,i.format,n.type,null);for(let l=0;l<s;l++){const c=o[l];r[l]<c.dirtyId&&(r[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,i.format,n.type,c.resource.source))}return!0}}class SE extends Yn{constructor(t){super(t)}static test(t){const{OffscreenCanvas:i}=globalThis;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const $r=class extends R0{constructor(e,t){const{width:i,height:n,autoLoad:s,linkBaseTexture:r}=t||{};if(e&&e.length!==$r.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:n});for(let o=0;o<$r.SIDES;o++)this.items[o].target=rr.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=r!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=rr.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=rr.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const n=this.itemDirtyIds;for(let s=0;s<$r.SIDES;s++){const r=this.items[s];(n[s]<r.dirtyId||i.dirtyId<t.dirtyId)&&(r.valid&&r.resource?(r.resource.upload(e,r,i),n[s]=r.dirtyId):n[s]<-1&&(e.gl.texImage2D(r.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),n[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===$r.SIDES}};let k0=$r;k0.SIDES=6;class Qs extends Yn{constructor(t,i){i=i||{};let n,s;typeof t=="string"?(n=Qs.EMPTY,s=t):(n=t,s=null),super(n),this.url=s,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,i)=>{if(this.url===null){t(this);return}try{const n=await fe.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await n.blob();if(this.destroyed)return;const r=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Oi.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=r,this.update(),t(this)}catch(n){if(this.destroyed)return;i(n),this.onError.emit(n)}}),this._load)}upload(t,i,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(t,i,n)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Qs._EMPTY=Qs._EMPTY??fe.ADAPTER.createCanvas(0,0),Qs._EMPTY}}const Ra=class extends Yn{constructor(e,t){t=t||{},super(fe.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},Ra.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Yn.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/i*t,s=this._overrideHeight||this._overrideWidth/t*i),n=Math.round(n),s=Math.round(s);const r=this.source;r.width=n,r.height=s,r._pixiId=`canvas_${Cs()}`,r.getContext("2d").drawImage(e,0,0,t,i,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(e){const t=Ra.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Ra.SVG_XML.test(e)}};let bo=Ra;bo.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;bo.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const yh=class extends Yn{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const n=e[0].src||e[0];Yn.crossOrigin(i,n,t.crossorigin);for(let s=0;s<e.length;++s){const r=document.createElement("source");let{src:o,mime:a}=e[s];o=o||e[s];const l=o.split("?").shift().toLowerCase(),c=l.slice(l.lastIndexOf(".")+1);a=a||yh.MIME_TYPES[c]||`video/${c}`,r.src=o,r.type=a,i.appendChild(r)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=Mt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Mt.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Mt.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(Mt.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Mt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Mt.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||yh.TYPES.includes(t)}};let kd=yh;kd.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];kd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};hh.push(Qs,s0,SE,kd,bo,Lo,k0,wE);class Qa{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ne.EMPTY:(t=t||new Ne(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,i){const{a:n,b:s,c:r,d:o,tx:a,ty:l}=t,c=n*i.x+r*i.y+a,u=s*i.x+o*i.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(t){let i=this.minX,n=this.minY,s=this.maxX,r=this.maxY,o=t[0],a=t[1];i=o<i?o:i,n=a<n?a:n,s=o>s?o:s,r=a>r?a:r,o=t[2],a=t[3],i=o<i?o:i,n=a<n?a:n,s=o>s?o:s,r=a>r?a:r,o=t[4],a=t[5],i=o<i?o:i,n=a<n?a:n,s=o>s?o:s,r=a>r?a:r,o=t[6],a=t[7],i=o<i?o:i,n=a<n?a:n,s=o>s?o:s,r=a>r?a:r,this.minX=i,this.minY=n,this.maxX=s,this.maxY=r}addFrame(t,i,n,s,r){this.addFrameMatrix(t.worldTransform,i,n,s,r)}addFrameMatrix(t,i,n,s,r){const o=t.a,a=t.b,l=t.c,c=t.d,u=t.tx,h=t.ty;let d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,y=o*i+l*n+u,w=a*i+c*n+h;d=y<d?y:d,f=w<f?w:f,p=y>p?y:p,g=w>g?w:g,y=o*s+l*n+u,w=a*s+c*n+h,d=y<d?y:d,f=w<f?w:f,p=y>p?y:p,g=w>g?w:g,y=o*i+l*r+u,w=a*i+c*r+h,d=y<d?y:d,f=w<f?w:f,p=y>p?y:p,g=w>g?w:g,y=o*s+l*r+u,w=a*s+c*r+h,d=y<d?y:d,f=w<f?w:f,p=y>p?y:p,g=w>g?w:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g}addVertexData(t,i,n){let s=this.minX,r=this.minY,o=this.maxX,a=this.maxY;for(let l=i;l<n;l+=2){const c=t[l],u=t[l+1];s=c<s?c:s,r=u<r?u:r,o=c>o?c:o,a=u>a?u:a}this.minX=s,this.minY=r,this.maxX=o,this.maxY=a}addVertices(t,i,n,s){this.addVerticesMatrix(t.worldTransform,i,n,s)}addVerticesMatrix(t,i,n,s,r=0,o=r){const a=t.a,l=t.b,c=t.c,u=t.d,h=t.tx,d=t.ty;let f=this.minX,p=this.minY,g=this.maxX,y=this.maxY;for(let w=n;w<s;w+=2){const x=i[w],_=i[w+1],C=a*x+c*_+h,k=u*_+l*x+d;f=Math.min(f,C-r),g=Math.max(g,C+r),p=Math.min(p,k-o),y=Math.max(y,k+o)}this.minX=f,this.minY=p,this.maxX=g,this.maxY=y}addBounds(t){const i=this.minX,n=this.minY,s=this.maxX,r=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>r?t.maxY:r}addBoundsMask(t,i){const n=t.minX>i.minX?t.minX:i.minX,s=t.minY>i.minY?t.minY:i.minY,r=t.maxX<i.maxX?t.maxX:i.maxX,o=t.maxY<i.maxY?t.maxY:i.maxY;if(n<=r&&s<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=s<l?s:l,this.maxX=r>c?r:c,this.maxY=o>u?o:u}}addBoundsMatrix(t,i){this.addFrameMatrix(i,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,i){const n=t.minX>i.x?t.minX:i.x,s=t.minY>i.y?t.minY:i.y,r=t.maxX<i.x+i.width?t.maxX:i.x+i.width,o=t.maxY<i.y+i.height?t.maxY:i.y+i.height;if(n<=r&&s<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=s<l?s:l,this.maxX=r>c?r:c,this.maxY=o>u?o:u}}pad(t=0,i=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i)}addFramePad(t,i,n,s,r,o){t-=r,i-=o,n+=r,s+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>s?this.maxY:s}}class ft extends Oo{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Rd,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Qa,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const i=Object.keys(t);for(let n=0;n<i.length;++n){const s=i[n];Object.defineProperty(ft.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Ne),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ne),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Qa);const i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,r=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-r,o}toGlobal(t,i,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)}toLocal(t,i,n,s){return i&&(t=i.toGlobal(t,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,i=0,n=1,s=1,r=0,o=0,a=0,l=0,c=0){return this.position.x=t,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=r,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TE),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*bC}set angle(t){this.transform.rotation=t*xC}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class TE extends ft{constructor(){super(...arguments),this.sortDirty=null}}ft.prototype.displayObjectUpdateTransform=ft.prototype.updateTransform;const CE=new lt;function EE(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const _h=class extends ft{constructor(){super(),this.children=[],this.sortableChildren=_h.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),n=this.getChildIndex(t);this.children[i]=t,this.children[n]=e,this.onChildrenChange(i<n?i:n)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);lr(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,lr(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,lr(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,n=t,s=n-i;let r;if(s>0&&s<=n){r=this.children.splice(i,s);for(let o=0;o<r.length;++o)r[o].parent=null,r[o].transform&&(r[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<r.length;++o)r[o].emit("removed",this),this.emit("childRemoved",r[o],this,o);return r}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(EE),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let n=0,s=this.children.length;n<s;++n){const r=this.children[n];r.visible&&r.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,n;this.cullArea?(i=this.cullArea,n=this.worldTransform):this._render!==_h.prototype._render&&(i=this.getBounds(!0));const s=e.projection.transform;if(s&&(n?(n=CE.copyFrom(n),n.prepend(s)):n=s),i&&t.intersects(i,n))this._render(e);else if(this.cullArea)return;for(let r=0,o=this.children.length;r<o;++r){const a=this.children[r],l=a.cullable;a.cullable=l||!this.cullArea,a.render(e),a.cullable=l}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}}renderAdvanced(e){var s,r,o;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const n=t&&((s=this._enabledFilters)==null?void 0:s.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Ct.NONE));if(n&&e.batch.flush(),t&&((r=this._enabledFilters)!=null&&r.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(e)}n&&e.batch.flush(),i&&e.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<i.length;++n)i[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let xt=_h;xt.defaultSortableChildren=!1;xt.prototype.containerUpdateTransform=xt.prototype.updateTransform;Object.defineProperties(fe,{SORTABLE_CHILDREN:{get(){return xt.defaultSortableChildren},set(e){je("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),xt.defaultSortableChildren=e}}});const Or=new _e,AE=new Uint16Array([0,1,2,0,2,3]);class Bs extends xt{constructor(t){super(),this._anchor=new Fn(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new it(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ke.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ye.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=AE,this.pluginName="batch",this.isSprite=!0,this._roundPixels=fe.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Bn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Bn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const i=this.transform.worldTransform,n=i.a,s=i.b,r=i.c,o=i.d,a=i.tx,l=i.ty,c=this.vertexData,u=t.trim,h=t.orig,d=this._anchor;let f=0,p=0,g=0,y=0;if(u?(p=u.x-d._x*h.width,f=p+u.width,y=u.y-d._y*h.height,g=y+u.height):(p=-d._x*h.width,f=p+h.width,y=-d._y*h.height,g=y+h.height),c[0]=n*p+r*y+a,c[1]=o*y+s*p+l,c[2]=n*f+r*y+a,c[3]=o*y+s*f+l,c[4]=n*f+r*g+a,c[5]=o*g+s*f+l,c[6]=n*p+r*g+a,c[7]=o*g+s*p+l,this._roundPixels){const w=fe.RESOLUTION;for(let x=0;x<c.length;++x)c[x]=Math.round(c[x]*w)/w}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,i=this.vertexTrimmedData,n=t.orig,s=this._anchor,r=this.transform.worldTransform,o=r.a,a=r.b,l=r.c,c=r.d,u=r.tx,h=r.ty,d=-s._x*n.width,f=d+n.width,p=-s._y*n.height,g=p+n.height;i[0]=o*d+l*p+u,i[1]=c*p+a*d+h,i[2]=o*f+l*p+u,i[3]=c*p+a*f+h,i[4]=o*f+l*g+u,i[5]=c*g+a*f+h,i[6]=o*d+l*g+u,i[7]=c*g+a*d+h}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Qa),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ne),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Or);const i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x;let r=0;return Or.x>=s&&Or.x<s+i&&(r=-n*this.anchor.y,Or.y>=r&&Or.y<r+n)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const n=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(t,i){const n=t instanceof ye?t:ye.from(t,i);return new Bs(n)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const i=Bn(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const i=Bn(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ye.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const B0=new lt;ft.prototype._cacheAsBitmap=!1;ft.prototype._cacheData=null;ft.prototype._cacheAsBitmapResolution=null;ft.prototype._cacheAsBitmapMultisample=null;class IE{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ft.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new IE),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});ft.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};ft.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const i=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;n.pad(p)}n.ceil(fe.RESOLUTION);const s=t.renderTexture.current,r=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=ks.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${Cs()}`;this._cacheData.textureCacheId=c,De.addToCache(l.baseTexture,c),ye.addToCache(l,c);const u=this.transform.localTransform.copyTo(B0).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(s,r,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const h=new Bs(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(n.x/n.width),h.anchor.y=-(n.y/n.height),h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};ft.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};ft.prototype._initCachedDisplayObjectCanvas=function(t){var u;if((u=this._cacheData)!=null&&u.sprite)return;const i=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;const s=t.canvasContext.activeContext,r=t._projTransform;i.ceil(fe.RESOLUTION);const o=ks.create({width:i.width,height:i.height}),a=`cacheAsBitmap_${Cs()}`;this._cacheData.textureCacheId=a,De.addToCache(o.baseTexture,a),ye.addToCache(o,a);const l=B0;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=i.x,l.ty-=i.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=s,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const c=new Bs(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(i.x/i.width),c.anchor.y=-(i.y/i.height),c.alpha=n,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};ft.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ft.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ft.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,De.removeFromCache(this._cacheData.textureCacheId),ye.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ft.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};ft.prototype.name=null;xt.prototype.getChildByName=function(t,i){for(let n=0,s=this.children.length;n<s;n++)if(this.children[n].name===t)return this.children[n];if(i)for(let n=0,s=this.children.length;n<s;n++){const r=this.children[n];if(!r.getChildByName)continue;const o=r.getChildByName(t,!0);if(o)return o}return null};ft.prototype.getGlobalPosition=function(t=new _e,i=!1){return this.parent?this.parent.toGlobal(this.position,t,i):(t.x=this.position.x,t.y=this.position.y),t};var PE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class ME extends Bt{constructor(t=1){super(bE,PE,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const RE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},kE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function BE(e){const t=RE[e],i=t.length;let n=kE,s="";const r="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let l=r.replace("%index%",a.toString());o=a,a>=i&&(o=e-a-1),l=l.replace("%value%",t[o].toString()),s+=l,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",e.toString()),n}const FE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function DE(e,t){const i=Math.ceil(e/2);let n=FE,s="",r;t?r="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":r="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=r.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(i-1)}.0`),s+=a,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",e.toString()),n}class bh extends Bt{constructor(t,i=8,n=4,s=Bt.defaultResolution,r=5){const o=DE(r,t),a=BE(r);super(o,a),this.horizontal=t,this.resolution=s,this._quality=0,this.quality=n,this.blur=i}apply(t,i,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,n,s);else{const r=t.getFilterTexture(),o=t.renderer;let a=i,l=r;this.state.blend=!1,t.applyFilter(this,a,l,Gi.CLEAR);for(let c=1;c<this.passes-1;c++){t.bindAndClear(a,Gi.BLIT),this.uniforms.uSampler=l;const u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,n,s),t.returnFilterTexture(r)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class OE extends Bt{constructor(t=8,i=4,n=Bt.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new bh(!0,t,i,n,s),this.blurYFilter=new bh(!1,t,i,n,s),this.resolution=n,this.quality=i,this.blur=t,this.repeatEdgePixels=!1}apply(t,i,n,s){const r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,i,a,Gi.CLEAR),this.blurYFilter.apply(t,a,n,s),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,i,n,s):this.blurXFilter.apply(t,i,n,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var LE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class xh extends Bt{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(A0,LE,t),this.alpha=1}_loadMatrix(t,i=!1){let n=t;i&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(t,i,n){return t[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],t[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],t[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],t[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],t[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],t[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],t[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],t[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],t[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],t[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],t[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],t[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],t[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],t[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],t[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],t[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],t[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],t[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],t[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],t[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],t}_colorMatrix(t){const i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(t,i){const n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)}tint(t,i){const[n,s,r]=it.shared.setValue(t).toArray(),o=[n,0,0,0,0,0,s,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(o,i)}greyscale(t,i){const n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)}blackAndWhite(t){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)}hue(t,i){t=(t||0)/180*Math.PI;const n=Math.cos(t),s=Math.sin(t),r=Math.sqrt,o=1/3,a=r(o),l=n+(1-n)*o,c=o*(1-n)-a*s,u=o*(1-n)+a*s,h=o*(1-n)+a*s,d=n+o*(1-n),f=o*(1-n)-a*s,p=o*(1-n)-a*s,g=o*(1-n)+a*s,y=n+o*(1-n),w=[l,c,u,0,0,h,d,f,0,0,p,g,y,0,0,0,0,0,1,0];this._loadMatrix(w,i)}contrast(t,i){const n=(t||0)+1,s=-.5*(n-1),r=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(r,i)}saturate(t=0,i){const n=t*2/3+1,s=(n-1)*-.5,r=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(r,i)}desaturate(){this.saturate(-1)}negative(t){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)}sepia(t){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)}technicolor(t){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)}polaroid(t){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)}toBGR(t){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)}kodachrome(t){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)}browni(t){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)}vintage(t){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)}colorTone(t,i,n,s,r){t=t||.2,i=i||.15,n=n||16770432,s=s||3375104;const o=it.shared,[a,l,c]=o.setValue(n).toArray(),[u,h,d]=o.setValue(s).toArray(),f=[.3,.59,.11,0,0,a,l,c,t,0,u,h,d,i,0,a-u,l-h,c-d,0,0];this._loadMatrix(f,r)}night(t,i){t=t||.1;const n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)}predator(t,i){const n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,i)}lsd(t){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}xh.prototype.grayscale=xh.prototype.greyscale;var NE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,UE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class VE extends Bt{constructor(t,i){const n=new lt;t.renderable=!1,super(UE,NE,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=n,i==null&&(i=20),this.scale=new _e(i,i)}apply(t,i,n,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const r=this.maskSprite.worldTransform,o=Math.sqrt(r.a*r.a+r.b*r.b),a=Math.sqrt(r.c*r.c+r.d*r.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=r.a/o,this.uniforms.rotation[1]=r.b/o,this.uniforms.rotation[2]=r.c/a,this.uniforms.rotation[3]=r.d/a),t.applyFilter(this,i,n,s)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var HE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,GE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class $E extends Bt{constructor(){super(GE,HE)}}var WE=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class zE extends Bt{constructor(t=.5,i=Math.random()){super(A0,WE,{uNoise:0,uSeed:0}),this.noise=t,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Km={AlphaFilter:ME,BlurFilter:OE,BlurFilterPass:bh,ColorMatrixFilter:xh,DisplacementFilter:VE,FXAAFilter:$E,NoiseFilter:zE};Object.entries(Km).forEach(([e,t])=>{Object.defineProperty(Km,e,{get(){return je("7.1.0",`filters.${e} has moved to ${e}`),t}})});class jE{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Mt.system.add(this.tickerUpdate,this,Es.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Mt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Rn=new jE;class No{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=No.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new _e,this.page=new _e,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,n,s,r){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class el extends No{constructor(){super(...arguments),this.client=new _e,this.movement=new _e,this.offset=new _e,this.global=new _e,this.screen=new _e}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,i,n){return t.worldTransform.applyInverse(n||this.global,i)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,i,n,s,r,o,a,l,c,u,h,d,f,p,g){throw new Error("Method not implemented.")}}class bi extends el{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class fr extends el{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}fr.DOM_DELTA_PIXEL=0;fr.DOM_DELTA_LINE=1;fr.DOM_DELTA_PAGE=2;const XE=2048,YE=new _e,gu=new _e;class qE{constructor(t){this.dispatch=new Oo,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,i){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:i,priority:0}),this.mappingTable[t].sort((n,s)=>n.priority-s.priority)}dispatchEvent(t,i){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,i),this.dispatch.emit(i||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const i=this.mappingTable[t.type];if(i)for(let n=0,s=i.length;n<s;n++)i[n].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,i){Rn.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[s](this.rootTarget,this.rootTarget.eventMode,YE.set(t,i),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,i){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,r=n.length-1;s<r;s++)if(t.currentTarget=n[s],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,i),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let s=n.length-2;s>=0;s--)if(t.currentTarget=n[s],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,i,n=this._allInteractiveElements){if(n.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const s=Array.isArray(i)?i:[i];for(let r=n.length-1;r>=0;r--)s.forEach(o=>{t.currentTarget=n[r],this.notifyTarget(t,o)})}propagationPath(t){const i=[t];for(let n=0;n<XE&&t!==this.rootTarget;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(t.parent),t=t.parent}return i.reverse(),i}hitTestMoveRecursive(t,i,n,s,r,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(Rn.pauseUpdate=!1),t.interactiveChildren&&t.children){const u=t.children;for(let h=u.length-1;h>=0;h--){const d=u[h],f=this.hitTestMoveRecursive(d,this._isInteractive(i)?i:d.eventMode,n,s,r,o||r(t,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=t.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(t),f.push(t)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(i),c=t.isInteractive();return c&&c&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!r(t,n)&&s(t,n)?c?[t]:[]:null}hitTestRecursive(t,i,n,s,r){if(this._interactivePrune(t)||r(t,n))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(Rn.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let c=l.length-1;c>=0;c--){const u=l[c],h=this.hitTestRecursive(u,this._isInteractive(i)?i:u.eventMode,n,s,r);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const d=t.isInteractive();return(h.length>0||d)&&h.push(t),h}}}const o=this._isInteractive(i),a=t.isInteractive();return o&&s(t,n)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,i){var n;if(t.hitArea&&(t.worldTransform.applyInverse(i,gu),!t.hitArea.contains(gu.x,gu.y)))return!0;if(t._mask){const s=t._mask.isMaskData?t._mask.maskObject:t._mask;if(s&&!((n=s.containsPoint)!=null&&n.call(s,i)))return!0}return!1}hitTestFn(t,i){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(i):!1}notifyTarget(t,i){var r,o;i=i??t.type;const n=`on${i}`;(o=(r=t.currentTarget)[n])==null||o.call(r,t);const s=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${i}capture`:i;this.notifyListeners(t,s),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,i)}mapPointerDown(t){if(!(t instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const s=i.button===2;this.dispatchEvent(i,s?"rightdown":"mousedown")}const n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(t){var l,c;if(!(t instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const n=i.pointerType==="mouse"||i.pointerType==="pen",s=this.trackingData(t.pointerId),r=this.findMountedTarget(s.overTargets);if(((l=s.overTargets)==null?void 0:l.length)>0&&r!==i.target){const u=t.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(t,u,r);if(this.dispatchEvent(h,"pointerout"),n&&this.dispatchEvent(h,"mouseout"),!i.composedPath().includes(r)){const d=this.createPointerEvent(t,"pointerleave",r);for(d.eventPhase=d.AT_TARGET;d.target&&!i.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(h)}if(r!==i.target){const u=t.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(i,u);this.dispatchEvent(h,"pointerover"),n&&this.dispatchEvent(h,"mouseover");let d=r==null?void 0:r.parent;for(;d&&d!==this.rootTarget.parent&&d!==i.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(i,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==r&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(h)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(i,"pointermove"),a&&o.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(c=i.target)==null?void 0:c.cursor),o.length>0&&this.all(i,o),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(t){var o;if(!(t instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),n=this.createPointerEvent(t),s=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),s&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const r=this.clonePointerEvent(n,"pointerenter");for(r.eventPhase=r.AT_TARGET;r.target&&r.target!==this.rootTarget.parent;)r.currentTarget=r.target,this.notifyTarget(r),s&&this.notifyTarget(r,"mouseenter"),r.target=r.target.parent;i.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(r)}mapPointerOut(t){if(!(t instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId);if(i.overTargets){const n=t.pointerType==="mouse"||t.pointerType==="pen",s=this.findMountedTarget(i.overTargets),r=this.createPointerEvent(t,"pointerout",s);this.dispatchEvent(r),n&&this.dispatchEvent(r,"mouseout");const o=this.createPointerEvent(t,"pointerleave",s);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;i.overTargets=null,this.freeEvent(r),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const s=this.trackingData(t.pointerId),r=this.findMountedTarget(s.pressTargetsByButton[t.button]);let o=r;if(r&&!n.composedPath().includes(r)){let a=r;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete s.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:i});const l=s.clicksByButton[t.button];if(l.target===a.target&&i-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=i,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),n=this.findMountedTarget(i.pressTargetsByButton[t.button]),s=this.createPointerEvent(t);if(n){let r=n;for(;r;)s.currentTarget=r,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),r=r.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(s)}mapWheel(t){if(!(t instanceof fr)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(t);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(t){if(!t)return null;let i=t[0];for(let n=1;n<t.length&&t[n].parent===i;n++)i=t[n];return i}createPointerEvent(t,i,n){const s=this.allocateEvent(bi);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=n??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof i=="string"&&(s.type=i),s}createWheelEvent(t){const i=this.allocateEvent(fr);return this.copyWheelData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(t,i){const n=this.allocateEvent(bi);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=i??n.type,n}copyWheelData(t,i){i.deltaMode=t.deltaMode,i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ}copyPointerData(t,i){t instanceof bi&&i instanceof bi&&(i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist)}copyMouseData(t,i){t instanceof el&&i instanceof el&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.copyFrom(t.client),i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.copyFrom(t.movement),i.screen.copyFrom(t.screen),i.shiftKey=t.shiftKey,i.global.copyFrom(t.global))}copyData(t,i){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.detail=t.detail,i.view=t.view,i.which=t.which,i.layer.copyFrom(t.layer),i.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const i=this.eventPool.get(t).pop()||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(t)}notifyListeners(t,i){const n=t.currentTarget._events[i];if(n&&t.currentTarget.isInteractive())if("fn"in n)n.once&&t.currentTarget.removeListener(i,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let s=0,r=n.length;s<r&&!t.propagationImmediatelyStopped;s++)n[s].once&&t.currentTarget.removeListener(i,n[s].fn,void 0,!0),n[s].fn.call(n[s].context,t)}}const KE=1,ZE={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},wh=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new qE(null),Rn.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new bi(null),this.rootWheelEvent=new fr(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...wh.defaultEventFeatures},{set:(t,i,n)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),t[i]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,wh._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,n=t.length;i<n;i++){const s=t[i],r=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;Rn.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,n=t.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let s=0,r=n.length;s<r;s++){const o=this.bootstrapEvent(this.rootPointerEvent,n[s]);o.type+=i,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let i=0,n=t.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Rn.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Rn.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Rn.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*s,e.y=(i-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,n=e.changedTouches.length;i<n;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=KE),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=ZE[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let xo=wh;xo.extension={name:"events",type:[pe.RendererSystem,pe.CanvasRendererSystem]};xo.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};Se.add(xo);function Zm(e){return e==="dynamic"||e==="static"}const JE={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Zm(xo.defaultEventMode)},set interactive(e){je("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??xo.defaultEventMode},set eventMode(e){this._internalInteractive=Zm(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,s=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,s)},removeEventListener(e,t,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,s=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,s)},dispatchEvent(e){if(!(e instanceof No))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};ft.mixin(JE);const QE={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ft.mixin(QE);const eA=9,pa=100,tA=0,iA=0,Jm=2,Qm=1,nA=-1e3,sA=-1e3,rA=2;class F0{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(an.tablet||an.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${pa}px`,i.style.height=`${pa}px`,i.style.position="absolute",i.style.top=`${tA}px`,i.style.left=`${iA}px`,i.style.zIndex=Jm.toString(),this.div=i,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Qm}px`,t.style.height=`${Qm}px`,t.style.position="absolute",t.style.top=`${nA}px`,t.style.left=`${sA}px`,t.style.zIndex=rA.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const i=t.children;if(i)for(let n=0;n<i.length;n++)this.updateAccessibleObjects(i[n])}update(){const t=performance.now();if(an.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:n,width:s,height:r}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=s/o*l,u=r/a*l;let h=this.div;h.style.left=`${i}px`,h.style.top=`${n}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,lr(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{h=f._accessibleDiv;let p=f.hitArea;const g=f.worldTransform;f.hitArea?(h.style.left=`${(g.tx+p.x*g.a)*c}px`,h.style.top=`${(g.ty+p.y*g.d)*u}px`,h.style.width=`${p.width*g.a*c}px`,h.style.height=`${p.height*g.d*u}px`):(p=f.getBounds(),this.capHitArea(p),h.style.left=`${p.x*c}px`,h.style.top=`${p.y*u}px`,h.style.width=`${p.width*c}px`,h.style.height=`${p.height*u}px`,h.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(h.title=f.accessibleTitle),h.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&h.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==h.title||f.tabIndex!==h.tabIndex)&&(h.title=f.accessibleTitle,h.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:i,height:n}=this.renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>n&&(t.height=n-t.y)}addChild(t){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${pa}px`,i.style.height=`${pa}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=Jm.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){const{displayObject:n}=t.target,s=this.renderer.events.rootBoundary,r=Object.assign(new No(s),{target:n});s.rootTarget=this.renderer.lastObjectRendered,i.forEach(o=>s.dispatchEvent(r,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===eA&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}F0.extension={name:"accessibility",type:[pe.RendererPlugin,pe.CanvasRendererPlugin]};Se.add(F0);const Sh=class{constructor(e){this.stage=new xt,e=Object.assign({forceCanvas:!1},e),this.renderer=vE(e),Sh._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const i=Sh._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Bd=Sh;Bd._plugins=[];Se.handleByList(pe.Application,Bd._plugins);class D0{static init(t){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,n;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:r}=this._resizeTo;i=s,n=r}this.renderer.resize(i,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}D0.extension=pe.Application;Se.add(D0);const eg={loader:pe.LoadParser,resolver:pe.ResolveParser,cache:pe.CacheParser,detection:pe.DetectionParser};Se.handle(pe.Asset,e=>{const t=e.ref;Object.entries(eg).filter(([i])=>!!t[i]).forEach(([i,n])=>Se.add(Object.assign(t[i],{extension:t[i].extension??n})))},e=>{const t=e.ref;Object.keys(eg).filter(i=>!!t[i]).forEach(i=>Se.remove(t[i]))});class oA{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<i;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Uo(e,t){if(Array.isArray(t)){for(const i of t)if(e.startsWith(`data:${i}`))return!0;return!1}return e.startsWith(`data:${t}`)}function Fs(e,t){const i=e.split("?")[0],n=Nt.extname(i).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const un=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(i=>typeof i=="string"?t(i):i):e),Th=(e,t)=>{const i=t.split("?")[1];return i&&(e+=`?${i}`),e};function O0(e,t,i,n,s){const r=t[i];for(let o=0;o<r.length;o++){const a=r[o];i<t.length-1?O0(e.replace(n[i],a),t,i+1,n,s):s.push(e.replace(n[i],a))}}function aA(e){const t=/\{(.*?)\}/g,i=e.match(t),n=[];if(i){const s=[];i.forEach(r=>{const o=r.substring(1,r.length-1).split(",");s.push(o)}),O0(e,s,0,i,n)}else n.push(e);return n}const tl=e=>!Array.isArray(e);class lA{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const n=un(t);let s;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(i)){s=l.getCacheableAssets(n,i);break}}s||(s={},n.forEach(a=>{s[a]=i}));const r=Object.keys(s),o={cacheKeys:r,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),r.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==i&&console.warn("[Cache] already has key:",a),this._cache.set(a,s[a])}),i instanceof ye){const a=i;n.forEach(l=>{a.baseTexture!==ye.EMPTY.baseTexture&&De.addToCache(a.baseTexture,l),ye.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(s=>{this._cache.delete(s)}),i.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const Lr=new lA;class cA{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,i,n)=>(this._parsersValidated=!1,t[i]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,i){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let s=null,r=null;if(i.loadParser&&(r=this._parserHash[i.loadParser],r||console.warn(`[Assets] specified load parser "${i.loadParser}" not found while loading ${t}`)),!r){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,t,i,this))){r=c;break}}if(!r)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await r.load(t,i,this),n.parser=r;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,s,i,this))&&(s=await c.parse(s,i,this)||s,n.parser=c)}return s})(),n}async load(t,i){this._parsersValidated||this._validateParsers();let n=0;const s={},r=tl(t),o=un(t,c=>({src:c})),a=o.length,l=o.map(async c=>{const u=Nt.toAbsolute(c.src);if(!s[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),s[c.src]=await this.promiseCache[u].promise,i&&i(++n/a)}catch(h){throw delete this.promiseCache[u],delete s[c.src],new Error(`[Loader.load] Failed to load ${u}.
${h}`)}});return await Promise.all(l),r?s[o[0].src]:s}async unload(t){const n=un(t,s=>({src:s})).map(async s=>{var a,l;const r=Nt.toAbsolute(s.src),o=this.promiseCache[r];if(o){const c=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,c,s,this),delete this.promiseCache[r]}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,i)=>(t[i.name]&&console.warn(`[Assets] loadParser name conflict "${i.name}"`),{...t,[i.name]:i}),{})}}var Ji=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Ji||{});const uA=".json",hA="application/json",dA={extension:{type:pe.LoadParser,priority:Ji.Low},name:"loadJson",test(e){return Uo(e,hA)||Fs(e,uA)},async load(e){return await(await fe.ADAPTER.fetch(e)).json()}};Se.add(dA);const fA=".txt",pA="text/plain",mA={name:"loadTxt",extension:{type:pe.LoadParser,priority:Ji.Low},test(e){return Uo(e,pA)||Fs(e,fA)},async load(e){return await(await fe.ADAPTER.fetch(e)).text()}};Se.add(mA);const gA=["normal","bold","100","200","300","400","500","600","700","800","900"],vA=[".ttf",".otf",".woff",".woff2"],yA=["font/ttf","font/otf","font/woff","font/woff2"],_A=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function bA(e){const t=Nt.extname(e),s=Nt.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let r=s.length>0;for(const a of s)if(!a.match(_A)){r=!1;break}let o=s.join(" ");return r||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const xA={extension:{type:pe.LoadParser,priority:Ji.Low},name:"loadWebFont",test(e){return Uo(e,yA)||Fs(e,vA)},async load(e,t){var n,s,r;const i=fe.ADAPTER.getFontFaceSet();if(i){const o=[],a=((n=t.data)==null?void 0:n.family)??bA(e),l=((r=(s=t.data)==null?void 0:s.weights)==null?void 0:r.filter(u=>gA.includes(u)))??["normal"],c=t.data??{};for(let u=0;u<l.length;u++){const h=l[u],d=new FontFace(a,`url(${encodeURI(e)})`,{...c,weight:h});await d.load(),i.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>fe.ADAPTER.getFontFaceSet().delete(t))}};Se.add(xA);let tg=0,vu;const wA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",SA={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${wA}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},TA={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let yu;class CA{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const i=URL.createObjectURL(new Blob([SA.code],{type:"application/javascript"})),n=new Worker(i);n.addEventListener("message",s=>{n.terminate(),URL.revokeObjectURL(i),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){vu===void 0&&(vu=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<vu&&(yu||(yu=URL.createObjectURL(new Blob([TA.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(yu),t.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const n=new Promise((s,r)=>{this.queue.push({id:t,arguments:i,resolve:s,reject:r})});return this.next(),n}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const i=this.queue.pop(),n=i.id;this.resolveHash[tg]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:tg++,id:n})}}const ig=new CA;function Dl(e,t,i){const n=new ye(e);return n.baseTexture.on("dispose",()=>{delete t.promiseCache[i]}),n}const EA=[".jpeg",".jpg",".png",".webp",".avif"],AA=["image/jpeg","image/png","image/webp","image/avif"];async function IA(e){const t=await fe.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const i=await t.blob();return await createImageBitmap(i)}const Ol={name:"loadTextures",extension:{type:pe.LoadParser,priority:Ji.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return Uo(e,AA)||Fs(e,EA)},async load(e,t,i){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ig.isImageBitmapSupported()?n=await ig.loadImageBitmap(e):n=await IA(e):n=await new Promise(r=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=e,n.complete?r(n):n.onload=()=>{r(n)}});const s=new De(n,{resolution:jn(e),...t.data});return s.resource.src=e,Dl(s,i,e)},unload(e){e.destroy(!0)}};Se.add(Ol);const PA=".svg",MA="image/svg+xml",RA={extension:{type:pe.LoadParser,priority:Ji.High},name:"loadSVG",test(e){return Uo(e,MA)||Fs(e,PA)},async testParse(e){return bo.test(e)},async parse(e,t,i){var o;const n=new bo(e,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await n.load();const s=new De(n,{resolution:jn(e),...t==null?void 0:t.data});return s.resource.src=e,Dl(s,i,e)},async load(e,t){return(await fe.ADAPTER.fetch(e)).text()},unload:Ol.unload};Se.add(RA);class kA{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(i[n])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const n=[];Array.isArray(i)?i.forEach(s=>{if(typeof s.name=="string"){const r=this._createBundleAssetId(t,s.name);n.push(r),this.add([s.name,r],s.srcs,s.data)}else{const r=s.name.map(o=>this._createBundleAssetId(t,o));r.forEach(o=>{n.push(o)}),this.add([...s.name,...r],s.srcs)}}):Object.keys(i).forEach(s=>{n.push(this._createBundleAssetId(t,s)),this.add([s,this._createBundleAssetId(t,s)],i[s])}),this._bundles[t]=n}add(t,i,n){const s=un(t);s.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(i)||(typeof i=="string"?i=aA(i):i=[i]);const r=i.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let c=0;c<this._parsers.length;c++){const u=this._parsers[c];if(u.test(o)){a=u.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=s),(this._basePath||this._rootPath)&&(a.src=Nt.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??n,a});s.forEach(o=>{this._assetMap[o]=r})}resolveBundle(t){const i=tl(t);t=un(t);const n={};return t.forEach(s=>{const r=this._bundles[s];if(r){const o=this.resolve(r),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(s,l)]=c}n[s]=a}}),i?n[t[0]]:n}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const n={};for(const s in i)n[s]=i[s].src;return n}return i.src}resolve(t){const i=tl(t);t=un(t);const n={};return t.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let r=this._assetMap[s];const o=this._getPreferredOrder(r),a=r[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(c=>{const u=r.filter(h=>h[l]?h[l]===c:!1);u.length&&(r=u)})}),this._resolverHash[s]=r[0]??a}else{let r=s;(this._basePath||this._rootPath)&&(r=Nt.toAbsolute(r,this._basePath,this._rootPath)),r=this._appendDefaultSearchParams(r),this._resolverHash[s]={src:r}}n[s]=this._resolverHash[s]}),i?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const n=t[0],s=this._preferredOrder.find(r=>r.params.format.includes(n.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}}class BA{constructor(){this._detections=[],this._initialized=!1,this.resolver=new kA,this.loader=new cA,this.cache=Lr,this._backgroundLoader=new oA(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var r,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const i=((r=t.texturePreference)==null?void 0:r.resolution)??1,n=typeof i=="number"?[i]:i;let s=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;s=typeof l=="string"?[l]:l;for(const c of this._detections)await c.test()||(s=await c.remove(s))}else for(const l of this._detections)await l.test()&&(s=await l.add(s));this.resolver.prefer({params:{format:s,resolution:n}}),t.preferences&&this.setPreferences(t.preferences)}add(t,i,n){this.resolver.add(t,i,n)}async load(t,i){this._initialized||await this.init();const n=tl(t),s=un(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),r=this.resolver.resolve(s),o=await this._mapLoadToResolve(r,i);return n?o[s[0]]:o}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);const s=this.resolver.resolveBundle(t),r={},o=Object.keys(s);let a=0,l=0;const c=()=>{i==null||i(++a/l)},u=o.map(h=>{const d=s[h];return l+=Object.keys(d).length,this._mapLoadToResolve(d,c).then(f=>{r[h]=f})});return await Promise.all(u),n?r[t[0]]:r}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Lr.get(t);const i={};for(let n=0;n<t.length;n++)i[n]=Lr.get(t[n]);return i}async _mapLoadToResolve(t,i){const n=Object.values(t),s=Object.keys(t);this._backgroundLoader.active=!1;const r=await this.loader.load(n,i);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const c=r[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[s[l]]=c,Lr.set(u,c)}),o}async unload(t){this._initialized||await this.init();const i=un(t).map(s=>typeof s!="string"?s.src:s),n=this.resolver.resolve(i);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=un(t);const i=this.resolver.resolveBundle(t),n=Object.keys(i).map(s=>this._unloadFromResolved(i[s]));await Promise.all(n)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(n=>{Lr.remove(n.src)}),await this.loader.unload(i)}get detections(){return this._detections}get preferWorkers(){return Ol.config.preferWorkers}set preferWorkers(t){je("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(n=>n in t).forEach(n=>{i.config[n]=t[n]})})}}const ma=new BA;Se.handleByList(pe.LoadParser,ma.loader.parsers).handleByList(pe.ResolveParser,ma.resolver.parsers).handleByList(pe.CacheParser,ma.cache.parsers).handleByList(pe.DetectionParser,ma.detections);const FA={extension:pe.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof ye),getCacheableAssets:(e,t)=>{const i={};return e.forEach(n=>{t.forEach((s,r)=>{i[n+(r===0?"":r+1)]=s})}),i}};Se.add(FA);const DA={extension:{type:pe.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await fe.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};Se.add(DA);const OA={extension:{type:pe.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await fe.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};Se.add(OA);const ng=["png","jpg","jpeg"],LA={extension:{type:pe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...ng],remove:async e=>e.filter(t=>!ng.includes(t))};Se.add(LA);const NA={extension:pe.ResolveParser,test:Ol.test,parse:e=>{var t;return{resolution:parseFloat(((t=fe.RETINA_PREFIX.exec(e))==null?void 0:t[1])??"1"),format:e.split(".").pop(),src:e}}};Se.add(NA);var Qt=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(Qt||{});const il={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let nn,Ys;function sg(){Ys={s3tc:nn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:nn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:nn.getExtension("WEBGL_compressed_texture_etc"),etc1:nn.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:nn.getExtension("WEBGL_compressed_texture_pvrtc")||nn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:nn.getExtension("WEBGL_compressed_texture_atc"),astc:nn.getExtension("WEBGL_compressed_texture_astc")}}const UA={extension:{type:pe.DetectionParser,priority:2},test:async()=>{const t=fe.ADAPTER.createCanvas().getContext("webgl");return t?(nn=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{Ys||sg();const t=[];for(const i in Ys)Ys[i]&&t.push(i);return[...t,...e]},remove:async e=>(Ys||sg(),e.filter(t=>!(t in Ys)))};Se.add(UA);class VA extends Lo{constructor(t,i={width:1,height:1,autoLoad:!0}){let n,s;typeof t=="string"?(n=t,s=new Uint8Array):(n=null,s=t),super(s,i),this.origin=n,this.buffer=s?new uh(s):null,this._load=null,this.loaded=!1,this.origin!==null&&i.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new uh(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class xs extends VA{constructor(t,i){super(t,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=xs._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||xs._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,i,n){const s=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:c,levelHeight:u,levelBuffer:h}=this._levelBuffers[o];s.compressedTexImage2D(s.TEXTURE_2D,l,this.format,c,u,0,h)}return!0}onBlobLoaded(){this._levelBuffers=xs._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,i,n,s,r,o,a){const l=new Array(n);let c=t.byteOffset,u=o,h=a,d=u+s-1&~(s-1),f=h+r-1&~(r-1),p=d*f*il[i];for(let g=0;g<n;g++)l[g]={levelID:g,levelWidth:n>1?u:d,levelHeight:n>1?h:f,levelBuffer:new Uint8Array(t.buffer,c,p)},c+=p,u=u>>1||1,h=h>>1||1,d=u+s-1&~(s-1),f=h+r-1&~(r-1),p=d*f*il[i];return l}}const _u=4,ga=124,HA=32,rg=20,GA=542327876,va={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},$A={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},ya={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},WA=1,zA=2,jA=4,XA=64,YA=512,qA=131072,KA=827611204,ZA=861165636,JA=894720068,QA=808540228,eI=4,tI={[KA]:Qt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[ZA]:Qt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[JA]:Qt.COMPRESSED_RGBA_S3TC_DXT5_EXT},iI={[70]:Qt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:Qt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:Qt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:Qt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:Qt.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:Qt.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:Qt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:Qt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:Qt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function nI(e){const t=new Uint32Array(e);if(t[0]!==GA)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(e,0,ga/Uint32Array.BYTES_PER_ELEMENT),s=n[va.HEIGHT],r=n[va.WIDTH],o=n[va.MIPMAP_COUNT],a=new Uint32Array(e,va.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,HA/Uint32Array.BYTES_PER_ELEMENT),l=a[WA];if(l&jA){const c=a[$A.FOURCC];if(c!==QA){const _=tI[c],C=_u+ga,k=new Uint8Array(e,C);return[new xs(k,{format:_,width:r,height:s,levels:o})]}const u=_u+ga,h=new Uint32Array(t.buffer,u,rg/Uint32Array.BYTES_PER_ELEMENT),d=h[ya.DXGI_FORMAT],f=h[ya.RESOURCE_DIMENSION],p=h[ya.MISC_FLAG],g=h[ya.ARRAY_SIZE],y=iI[d];if(y===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===eI)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const w=new Array,x=_u+ga+rg;if(g===1)w.push(new Uint8Array(e,x));else{const _=il[y];let C=0,k=r,V=s;for(let M=0;M<o;M++){const G=Math.max(1,k+3&-4),j=Math.max(1,V+3&-4),B=G*j*_;C+=B,k=k>>>1,V=V>>>1}let L=x;for(let M=0;M<g;M++)w.push(new Uint8Array(e,L,C)),L+=C}return w.map(_=>new xs(_,{format:y,width:r,height:s,levels:o}))}throw l&XA?new Error("DDSParser does not support uncompressed texture data."):l&YA?new Error("DDSParser does not supported YUV uncompressed texture data."):l&qA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&zA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const og=[171,75,84,88,32,49,49,187,13,10,26,10],sI=67305985,yi={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Ch=64,ag={[Me.UNSIGNED_BYTE]:1,[Me.UNSIGNED_SHORT]:2,[Me.INT]:4,[Me.UNSIGNED_INT]:4,[Me.FLOAT]:4,[Me.HALF_FLOAT]:8},rI={[ue.RGBA]:4,[ue.RGB]:3,[ue.RG]:2,[ue.RED]:1,[ue.LUMINANCE]:1,[ue.LUMINANCE_ALPHA]:2,[ue.ALPHA]:1},oI={[Me.UNSIGNED_SHORT_4_4_4_4]:2,[Me.UNSIGNED_SHORT_5_5_5_1]:2,[Me.UNSIGNED_SHORT_5_6_5]:2};function aI(e,t,i=!1){const n=new DataView(t);if(!lI(e,n))return null;const s=n.getUint32(yi.ENDIANNESS,!0)===sI,r=n.getUint32(yi.GL_TYPE,s),o=n.getUint32(yi.GL_FORMAT,s),a=n.getUint32(yi.GL_INTERNAL_FORMAT,s),l=n.getUint32(yi.PIXEL_WIDTH,s),c=n.getUint32(yi.PIXEL_HEIGHT,s)||1,u=n.getUint32(yi.PIXEL_DEPTH,s)||1,h=n.getUint32(yi.NUMBER_OF_ARRAY_ELEMENTS,s)||1,d=n.getUint32(yi.NUMBER_OF_FACES,s),f=n.getUint32(yi.NUMBER_OF_MIPMAP_LEVELS,s),p=n.getUint32(yi.BYTES_OF_KEY_VALUE_DATA,s);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");const g=4,y=4,w=l+3&-4,x=c+3&-4,_=new Array(h);let C=l*c;r===0&&(C=w*x);let k;if(r!==0?ag[r]?k=ag[r]*rI[o]:k=oI[r]:k=il[a],k===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const V=i?uI(n,p,s):null;let M=C*k,G=l,j=c,B=w,R=x,F=Ch+p;for(let O=0;O<f;O++){const q=n.getUint32(F,s);let X=F+4;for(let W=0;W<h;W++){let S=_[W];S||(S=_[W]=new Array(f)),S[O]={levelID:O,levelWidth:f>1||r!==0?G:B,levelHeight:f>1||r!==0?j:R,levelBuffer:new Uint8Array(t,X,M)},X+=M}F+=q+4,F=F%4!==0?F+4-F%4:F,G=G>>1||1,j=j>>1||1,B=G+g-1&~(g-1),R=j+y-1&~(y-1),M=B*R*k}return r!==0?{uncompressed:_.map(O=>{let q=O[0].levelBuffer,X=!1;return r===Me.FLOAT?q=new Float32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4):r===Me.UNSIGNED_INT?(X=!0,q=new Uint32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)):r===Me.INT&&(X=!0,q=new Int32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)),{resource:new Lo(q,{width:O[0].levelWidth,height:O[0].levelHeight}),type:r,format:X?cI(o):o}}),kvData:V}:{compressed:_.map(O=>new xs(null,{format:a,width:l,height:c,levels:f,levelBuffers:O})),kvData:V}}function lI(e,t){for(let i=0;i<og.length;i++)if(t.getUint8(i)!==og[i])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function cI(e){switch(e){case ue.RGBA:return ue.RGBA_INTEGER;case ue.RGB:return ue.RGB_INTEGER;case ue.RG:return ue.RG_INTEGER;case ue.RED:return ue.RED_INTEGER;default:return e}}function uI(e,t,i){const n=new Map;let s=0;for(;s<t;){const r=e.getUint32(Ch+s,i),o=Ch+s+4,a=3-(r+3)%4;if(r===0||r>t-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<r&&e.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(e.buffer,o,l)),u=new DataView(e.buffer,o+l+1,r-l-1);n.set(c,u),s+=4+r+a}return n}const hI={extension:{type:pe.LoadParser,priority:Ji.High},name:"loadDDS",test(e){return Fs(e,".dds")},async load(e,t,i){const s=await(await fe.ADAPTER.fetch(e)).arrayBuffer(),o=nI(s).map(a=>{const l=new De(a,{mipmap:Zi.OFF,alphaMode:Oi.NO_PREMULTIPLIED_ALPHA,resolution:jn(e),...t.data});return Dl(l,i,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Se.add(hI);const dI={extension:{type:pe.LoadParser,priority:Ji.High},name:"loadKTX",test(e){return Fs(e,".ktx")},async load(e,t,i){const s=await(await fe.ADAPTER.fetch(e)).arrayBuffer(),{compressed:r,uncompressed:o,kvData:a}=aI(e,s),l=r??o,c={mipmap:Zi.OFF,alphaMode:Oi.NO_PREMULTIPLIED_ALPHA,resolution:jn(e),...t.data},u=l.map(h=>{l===o&&Object.assign(c,{type:h.type,format:h.format});const d=new De(h,c);return d.ktxKeyValueData=a,Dl(d,i,e)});return u.length===1?u[0]:u},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Se.add(dI);const fI={extension:pe.ResolveParser,test:e=>{const i=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(i)},parse:e=>{var n,s;if(e.split("?")[0].split(".").pop()==="ktx"){const r=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(r.some(o=>e.endsWith(o)))return{resolution:parseFloat(((n=fe.RETINA_PREFIX.exec(e))==null?void 0:n[1])??"1"),format:r.find(o=>e.endsWith(o)),src:e}}return{resolution:parseFloat(((s=fe.RETINA_PREFIX.exec(e))==null?void 0:s[1])??"1"),format:e.split(".").pop(),src:e}}};Se.add(fI);const pI=new Ne,mI=4,Wr=class{constructor(e){this.renderer=e}async image(e,t,i){const n=new Image;return n.src=await this.base64(e,t,i),n}async base64(e,t,i){const n=this.canvas(e);if(n.toBlob!==void 0)return new Promise((s,r)=>{n.toBlob(o=>{if(!o){r(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>s(a.result),a.onerror=r,a.readAsDataURL(o)},t,i)});if(n.toDataURL!==void 0)return n.toDataURL(t,i);if(n.convertToBlob!==void 0){const s=await n.convertToBlob({type:t,quality:i});return new Promise((r,o)=>{const a=new FileReader;a.onload=()=>r(a.result),a.onerror=o,a.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:n,height:s,flipY:r}=this._rawPixels(e,t);r&&Wr._flipY(i,n,s),Wr._unpremultiplyAlpha(i);const o=new aC(n,s,1),a=new ImageData(new Uint8ClampedArray(i.buffer),n,s);return o.context.putImageData(a,0,0),o.canvas}pixels(e,t){const{pixels:i,width:n,height:s,flipY:r}=this._rawPixels(e,t);return r&&Wr._flipY(i,n,s),Wr._unpremultiplyAlpha(i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let n,s=!1,r,o=!1;if(e&&(e instanceof ks?r=e:(r=i.generateTexture(e,{resolution:i.resolution,multisample:i.multisample}),o=!0)),r){if(n=r.baseTexture.resolution,t=t??r.frame,s=!1,!o){i.renderTexture.bind(r);const h=r.framebuffer.glFramebuffers[i.CONTEXT_UID];h.blitFramebuffer&&i.framebuffer.bind(h.blitFramebuffer)}}else n=i.resolution,t||(t=pI,t.width=i.width/n,t.height=i.height/n),s=!0,i.renderTexture.bind();const a=Math.round(t.width*n),l=Math.round(t.height*n),c=new Uint8Array(mI*a*l),u=i.gl;return u.readPixels(Math.round(t.x*n),Math.round(t.y*n),a,l,u.RGBA,u.UNSIGNED_BYTE,c),o&&(r==null||r.destroy(!0)),{pixels:c,width:a,height:l,flipY:s}}destroy(){this.renderer=null}static _flipY(e,t,i){const n=t<<2,s=i>>1,r=new Uint8Array(n);for(let o=0;o<s;o++){const a=o*n,l=(i-o-1)*n;r.set(e.subarray(a,a+n)),e.copyWithin(a,l,l+n),e.set(r,l)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let i=0;i<t;i+=4){const n=e[i+3];if(n!==0){const s=255.001/n;e[i]=e[i]*s+.5,e[i+1]=e[i+1]*s+.5,e[i+2]=e[i+2]*s+.5}}}};let L0=Wr;L0.extension={name:"extract",type:pe.RendererSystem};Se.add(L0);const nl={build(e){const t=e.points;let i,n,s,r,o,a;if(e.type===kt.CIRC){const p=e.shape;i=p.x,n=p.y,o=a=p.radius,s=r=0}else if(e.type===kt.ELIP){const p=e.shape;i=p.x,n=p.y,o=p.width,a=p.height,s=r=0}else{const p=e.shape,g=p.width/2,y=p.height/2;i=p.x+g,n=p.y+y,o=a=Math.max(0,Math.min(p.radius,Math.min(g,y))),s=g-o,r=y-a}if(!(o>=0&&a>=0&&s>=0&&r>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(s?4:0)+(r?4:0);if(t.length=c,c===0)return;if(l===0){t.length=8,t[0]=t[6]=i+s,t[1]=t[3]=n+r,t[2]=t[4]=i-s,t[5]=t[7]=n-r;return}let u=0,h=l*4+(s?2:0)+2,d=h,f=c;{const p=s+o,g=r,y=i+p,w=i-p,x=n+g;if(t[u++]=y,t[u++]=x,t[--h]=x,t[--h]=w,r){const _=n-g;t[d++]=w,t[d++]=_,t[--f]=_,t[--f]=y}}for(let p=1;p<l;p++){const g=Math.PI/2*(p/l),y=s+Math.cos(g)*o,w=r+Math.sin(g)*a,x=i+y,_=i-y,C=n+w,k=n-w;t[u++]=x,t[u++]=C,t[--h]=C,t[--h]=_,t[d++]=_,t[d++]=k,t[--f]=k,t[--f]=x}{const p=s,g=r+a,y=i+p,w=i-p,x=n+g,_=n-g;t[u++]=y,t[u++]=x,t[--f]=_,t[--f]=y,s&&(t[u++]=w,t[u++]=x,t[--f]=_,t[--f]=w)}},triangulate(e,t){const i=e.points,n=t.points,s=t.indices;if(i.length===0)return;let r=n.length/2;const o=r;let a,l;if(e.type!==kt.RREC){const u=e.shape;a=u.x,l=u.y}else{const u=e.shape;a=u.x+u.width/2,l=u.y+u.height/2}const c=e.matrix;n.push(e.matrix?c.a*a+c.c*l+c.tx:a,e.matrix?c.b*a+c.d*l+c.ty:l),r++,n.push(i[0],i[1]);for(let u=2;u<i.length;u+=2)n.push(i[u],i[u+1]),s.push(r++,o,r);s.push(o+1,o,r)}};function lg(e,t=!1){const i=e.length;if(i<6)return;let n=0;for(let s=0,r=e[i-2],o=e[i-1];s<i;s+=2){const a=e[s],l=e[s+1];n+=(a-r)*(l+o),r=a,o=l}if(!t&&n>0||t&&n<=0){const s=i/2;for(let r=s+s%2;r<i;r+=2){const o=i-r-2,a=i-r-1,l=r,c=r+1;[e[o],e[l]]=[e[l],e[o]],[e[a],e[c]]=[e[c],e[a]]}}}const N0={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let i=e.points;const n=e.holes,s=t.points,r=t.indices;if(i.length>=6){lg(i,!1);const o=[];for(let c=0;c<n.length;c++){const u=n[c];lg(u.points,!0),o.push(i.length/2),i=i.concat(u.points)}const a=wT(i,o,2);if(!a)return;const l=s.length/2;for(let c=0;c<a.length;c+=3)r.push(a[c]+l),r.push(a[c+1]+l),r.push(a[c+2]+l);for(let c=0;c<i.length;c++)s.push(i[c])}}},gI={build(e){const t=e.shape,i=t.x,n=t.y,s=t.width,r=t.height,o=e.points;o.length=0,s>=0&&r>=0&&o.push(i,n,i+s,n,i+s,n+r,i,n+r)},triangulate(e,t){const i=e.points,n=t.points;if(i.length===0)return;const s=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},vI={build(e){nl.build(e)},triangulate(e,t){nl.triangulate(e,t)}};var wi=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(wi||{}),vs=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(vs||{});const pr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let i=Math.ceil(e/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}};class cg{static curveTo(t,i,n,s,r,o){const a=o[o.length-2],c=o[o.length-1]-i,u=a-t,h=s-i,d=n-t,f=Math.abs(c*d-u*h);if(f<1e-8||r===0)return(o[o.length-2]!==t||o[o.length-1]!==i)&&o.push(t,i),null;const p=c*c+u*u,g=h*h+d*d,y=c*h+u*d,w=r*Math.sqrt(p)/f,x=r*Math.sqrt(g)/f,_=w*y/p,C=x*y/g,k=w*d+x*u,V=w*h+x*c,L=u*(x+_),M=c*(x+_),G=d*(w+C),j=h*(w+C),B=Math.atan2(M-V,L-k),R=Math.atan2(j-V,G-k);return{cx:k+t,cy:V+i,radius:r,startAngle:B,endAngle:R,anticlockwise:u*h>d*c}}static arc(t,i,n,s,r,o,a,l,c){const u=a-o,h=pr._segmentsCount(Math.abs(u)*r,Math.ceil(Math.abs(u)/Ja)*40),d=u/(h*2),f=d*2,p=Math.cos(d),g=Math.sin(d),y=h-1,w=y%1/y;for(let x=0;x<=y;++x){const _=x+w*x,C=d+o+f*_,k=Math.cos(C),V=-Math.sin(C);c.push((p*k+g*V)*r+n,(p*-V+g*k)*r+s)}}}class yI{constructor(){this.reset()}begin(t,i,n){this.reset(),this.style=t,this.start=i,this.attribStart=n}end(t,i){this.attribSize=i-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Fd{static curveLength(t,i,n,s,r,o,a,l){let u=0,h=0,d=0,f=0,p=0,g=0,y=0,w=0,x=0,_=0,C=0,k=t,V=i;for(let L=1;L<=10;++L)h=L/10,d=h*h,f=d*h,p=1-h,g=p*p,y=g*p,w=y*t+3*g*h*n+3*p*d*r+f*a,x=y*i+3*g*h*s+3*p*d*o+f*l,_=k-w,C=V-x,k=w,V=x,u+=Math.sqrt(_*_+C*C);return u}static curveTo(t,i,n,s,r,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const u=pr._segmentsCount(Fd.curveLength(l,c,t,i,n,s,r,o));let h=0,d=0,f=0,p=0,g=0;a.push(l,c);for(let y=1,w=0;y<=u;++y)w=y/u,h=1-w,d=h*h,f=d*h,p=w*w,g=p*w,a.push(f*l+3*d*w*t+3*h*p*n+g*r,f*c+3*d*w*i+3*h*p*s+g*o)}}function ug(e,t,i,n,s,r,o,a){const l=e-i*s,c=t-n*s,u=e+i*r,h=t+n*r;let d,f;o?(d=n,f=-i):(d=-n,f=i);const p=l+d,g=c+f,y=u+d,w=h+f;return a.push(p,g,y,w),2}function rs(e,t,i,n,s,r,o,a){const l=i-e,c=n-t;let u=Math.atan2(l,c),h=Math.atan2(s-e,r-t);a&&u<h?u+=Math.PI*2:!a&&u>h&&(h+=Math.PI*2);let d=u;const f=h-u,p=Math.abs(f),g=Math.sqrt(l*l+c*c),y=(15*p*Math.sqrt(g)/Math.PI>>0)+1,w=f/y;if(d+=w,a){o.push(e,t,i,n);for(let x=1,_=d;x<y;x++,_+=w)o.push(e,t,e+Math.sin(_)*g,t+Math.cos(_)*g);o.push(e,t,s,r)}else{o.push(i,n,e,t);for(let x=1,_=d;x<y;x++,_+=w)o.push(e+Math.sin(_)*g,t+Math.cos(_)*g,e,t);o.push(s,r,e,t)}return y*2}function _I(e,t){const i=e.shape;let n=e.points||i.points.slice();const s=t.closePointEps;if(n.length===0)return;const r=e.lineStyle,o=new _e(n[0],n[1]),a=new _e(n[n.length-2],n[n.length-1]),l=i.type!==kt.POLY||i.closeStroke,c=Math.abs(o.x-a.x)<s&&Math.abs(o.y-a.y)<s;if(l){n=n.slice(),c&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const W=(o.x+a.x)*.5,S=(a.y+o.y)*.5;n.unshift(W,S),n.push(W,S)}const u=t.points,h=n.length/2;let d=n.length;const f=u.length/2,p=r.width/2,g=p*p,y=r.miterLimit*r.miterLimit;let w=n[0],x=n[1],_=n[2],C=n[3],k=0,V=0,L=-(x-C),M=w-_,G=0,j=0,B=Math.sqrt(L*L+M*M);L/=B,M/=B,L*=p,M*=p;const R=r.alignment,F=(1-R)*2,O=R*2;l||(r.cap===vs.ROUND?d+=rs(w-L*(F-O)*.5,x-M*(F-O)*.5,w-L*F,x-M*F,w+L*O,x+M*O,u,!0)+2:r.cap===vs.SQUARE&&(d+=ug(w,x,L,M,F,O,!0,u))),u.push(w-L*F,x-M*F,w+L*O,x+M*O);for(let W=1;W<h-1;++W){w=n[(W-1)*2],x=n[(W-1)*2+1],_=n[W*2],C=n[W*2+1],k=n[(W+1)*2],V=n[(W+1)*2+1],L=-(x-C),M=w-_,B=Math.sqrt(L*L+M*M),L/=B,M/=B,L*=p,M*=p,G=-(C-V),j=_-k,B=Math.sqrt(G*G+j*j),G/=B,j/=B,G*=p,j*=p;const S=_-w,A=x-C,E=_-k,I=V-C,U=S*E+A*I,Y=A*E-I*S,J=Y<0;if(Math.abs(Y)<.001*Math.abs(U)){u.push(_-L*F,C-M*F,_+L*O,C+M*O),U>=0&&(r.join===wi.ROUND?d+=rs(_,C,_-L*F,C-M*F,_-G*F,C-j*F,u,!1)+4:d+=2,u.push(_-G*O,C-j*O,_+G*F,C+j*F));continue}const ee=(-L+w)*(-M+C)-(-L+_)*(-M+x),$=(-G+k)*(-j+C)-(-G+_)*(-j+V),Q=(S*$-E*ee)/Y,he=(I*ee-A*$)/Y,Fe=(Q-_)*(Q-_)+(he-C)*(he-C),Te=_+(Q-_)*F,ve=C+(he-C)*F,D=_-(Q-_)*O,H=C-(he-C)*O,K=Math.min(S*S+A*A,E*E+I*I),ie=J?F:O,ne=K+ie*ie*g,ae=Fe<=ne;let ce=r.join;if(ce===wi.MITER&&Fe/g>y&&(ce=wi.BEVEL),ae)switch(ce){case wi.MITER:{u.push(Te,ve,D,H);break}case wi.BEVEL:{J?u.push(Te,ve,_+L*O,C+M*O,Te,ve,_+G*O,C+j*O):u.push(_-L*F,C-M*F,D,H,_-G*F,C-j*F,D,H),d+=2;break}case wi.ROUND:{J?(u.push(Te,ve,_+L*O,C+M*O),d+=rs(_,C,_+L*O,C+M*O,_+G*O,C+j*O,u,!0)+4,u.push(Te,ve,_+G*O,C+j*O)):(u.push(_-L*F,C-M*F,D,H),d+=rs(_,C,_-L*F,C-M*F,_-G*F,C-j*F,u,!1)+4,u.push(_-G*F,C-j*F,D,H));break}}else{switch(u.push(_-L*F,C-M*F,_+L*O,C+M*O),ce){case wi.MITER:{J?u.push(D,H,D,H):u.push(Te,ve,Te,ve),d+=2;break}case wi.ROUND:{J?d+=rs(_,C,_+L*O,C+M*O,_+G*O,C+j*O,u,!0)+2:d+=rs(_,C,_-L*F,C-M*F,_-G*F,C-j*F,u,!1)+2;break}}u.push(_-G*F,C-j*F,_+G*O,C+j*O),d+=2}}w=n[(h-2)*2],x=n[(h-2)*2+1],_=n[(h-1)*2],C=n[(h-1)*2+1],L=-(x-C),M=w-_,B=Math.sqrt(L*L+M*M),L/=B,M/=B,L*=p,M*=p,u.push(_-L*F,C-M*F,_+L*O,C+M*O),l||(r.cap===vs.ROUND?d+=rs(_-L*(F-O)*.5,C-M*(F-O)*.5,_-L*F,C-M*F,_+L*O,C+M*O,u,!1)+2:r.cap===vs.SQUARE&&(d+=ug(_,C,L,M,F,O,!1,u)));const q=t.indices,X=pr.epsilon*pr.epsilon;for(let W=f;W<d+f-2;++W)w=u[W*2],x=u[W*2+1],_=u[(W+1)*2],C=u[(W+1)*2+1],k=u[(W+2)*2],V=u[(W+2)*2+1],!(Math.abs(w*(C-V)+_*(V-x)+k*(x-C))<X)&&q.push(W,W+1,W+2)}function bI(e,t){let i=0;const n=e.shape,s=e.points||n.points,r=n.type!==kt.POLY||n.closeStroke;if(s.length===0)return;const o=t.points,a=t.indices,l=s.length/2,c=o.length/2;let u=c;for(o.push(s[0],s[1]),i=1;i<l;i++)o.push(s[i*2],s[i*2+1]),a.push(u,u+1),u++;r&&a.push(u,c)}function hg(e,t){e.lineStyle.native?bI(e,t):_I(e,t)}class Dd{static curveLength(t,i,n,s,r,o){const a=t-2*n+r,l=i-2*s+o,c=2*n-2*t,u=2*s-2*i,h=4*(a*a+l*l),d=4*(a*c+l*u),f=c*c+u*u,p=2*Math.sqrt(h+d+f),g=Math.sqrt(h),y=2*h*g,w=2*Math.sqrt(f),x=d/g;return(y*p+g*d*(p-w)+(4*f*h-d*d)*Math.log((2*g+x+p)/(x+w)))/(4*y)}static curveTo(t,i,n,s,r){const o=r[r.length-2],a=r[r.length-1],l=pr._segmentsCount(Dd.curveLength(o,a,t,i,n,s));let c=0,u=0;for(let h=1;h<=l;++h){const d=h/l;c=o+(t-o)*d,u=a+(i-a)*d,r.push(c+(t+(n-t)*d-c)*d,u+(i+(s-i)*d-u)*d)}}}const bu={[kt.POLY]:N0,[kt.CIRC]:nl,[kt.ELIP]:nl,[kt.RECT]:gI,[kt.RREC]:vI},dg=[],_a=[];class sl{constructor(t,i=null,n=null,s=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=i,this.matrix=s,this.type=t.type}clone(){return new sl(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Ws=new _e,U0=class extends qy{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Qa,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),_a.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),dg.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,n=null){const s=new sl(e,t,i,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new sl(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const n=t[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,Ws):Ws.copyFrom(e),n.shape.contains(Ws.x,Ws.y))){let s=!1;if(n.holes){for(let r=0;r<n.holes.length;r++)if(n.holes[r].shape.contains(Ws.x,Ws.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,n=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],n=i.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],c=l.fillStyle,u=l.lineStyle;bu[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(c.visible||u.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?c:u;if(!f.visible)continue;const p=f.texture.baseTexture,g=this.indices.length,y=this.points.length/2;p.wrapMode=Un.REPEAT,d===0?this.processFill(l):this.processLine(l);const w=this.points.length/2-y;w!==0&&(i&&!this._compareStyles(n,f)&&(i.end(g,y),i=null),i||(i=dg.pop()||new yI,i.begin(f,g,y),this.batches.push(i),n=f),this.addUvs(this.points,e,f.texture,y,w,f.matrix))}}const s=this.indices.length,r=this.points.length/2;if(i&&i.end(s,r),this.batches.length===0){this.batchable=!0;return}const o=r>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],n=i.fillStyle,s=i.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const n=e[t];for(let s=0;s<n.size;s++){const r=n.start+s;this.indicesUint16[r]=this.indicesUint16[r]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<U0.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++De._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),_a.push(this.drawCalls[u]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let n=_a.pop();n||(n=new dh,n.texArray=new ph),n.texArray.count=0,n.start=0,n.size=0,n.type=ji.TRIANGLES;let s=0,r=null,o=0,a=!1,l=ji.TRIANGLES,c=0;this.drawCalls.push(n);for(let u=0;u<this.batches.length;u++){const h=this.batches[u],d=8,f=h.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?ji.LINES:ji.TRIANGLES,r=null,s=d,e++),r!==p&&(r=p,p._batchEnabled!==e&&(s===d&&(e++,s=0,n.size>0&&(n=_a.pop(),n||(n=new dh,n.texArray=new ph),this.drawCalls.push(n)),n.start=c,n.size=0,n.texArray.count=0,n.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=s,p.wrapMode=Un.REPEAT,n.texArray.elements[n.texArray.count++]=p,s++)),n.size+=h.size,c+=h.size,o=p._batchLocation,this.addColors(t,f.color,f.alpha,h.attribSize,h.attribStart),this.addTextureIds(i,o,h.attribSize,h.attribStart)}De._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,n=this.textureIds,s=new ArrayBuffer(e.length*3*4),r=new Float32Array(s),o=new Uint32Array(s);let a=0;for(let l=0;l<e.length/2;l++)r[a++]=e[l*2],r[a++]=e[l*2+1],r[a++]=t[l*2],r[a++]=t[l*2+1],o[a++]=i[l],r[a++]=n[l];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?N0.triangulate(e,this):bu[e.type].triangulate(e,this)}processLine(e){hg(e,this);for(let t=0;t<e.holes.length;t++)hg(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];bu[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const n=e[i*2],s=e[i*2+1];e[i*2]=t.a*n+t.c*s+t.tx,e[i*2+1]=t.b*n+t.d*s+t.ty}}addColors(e,t,i,n,s=0){const r=it.shared.setValue(t).toLittleEndianNumber(),o=it.shared.setValue(r).toPremultiplied(i);e.length=Math.max(e.length,s+n);for(let a=0;a<n;a++)e[s+a]=o}addTextureIds(e,t,i,n=0){e.length=Math.max(e.length,n+i);for(let s=0;s<i;s++)e[n+s]=t}addUvs(e,t,i,n,s,r=null){let o=0;const a=t.length,l=i.frame;for(;o<s;){let u=e[(n+o)*2],h=e[(n+o)*2+1];if(r){const d=r.a*u+r.c*h+r.tx;h=r.b*u+r.d*h+r.ty,u=d}o++,t.push(u/l.width,h/l.height)}const c=i.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(t,i,a,s)}adjustUvs(e,t,i,n){const s=t.baseTexture,r=1e-6,o=i+n*2,a=t.frame,l=a.width/s.width,c=a.height/s.height;let u=a.x/a.width,h=a.y/a.height,d=Math.floor(e[i]+r),f=Math.floor(e[i+1]+r);for(let p=i+2;p<o;p+=2)d=Math.min(d,Math.floor(e[p]+r)),f=Math.min(f,Math.floor(e[p+1]+r));u-=d,h-=f;for(let p=i;p<o;p+=2)e[p]=(e[p]+u)*l,e[p+1]=(e[p+1]+h)*c}};let V0=U0;V0.BATCHABLE_SIZE=100;class Ll{constructor(){this.color=16777215,this.alpha=1,this.texture=ye.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Ll;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ye.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Od extends Ll{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=vs.BUTT,this.join=wi.MITER,this.miterLimit=10}clone(){const t=new Od;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const xu={},ka=class extends xt{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ll,this._lineStyle=new Od,this._matrix=null,this._holeMode=!1,this.state=xn.for2d(),this._geometry=e||new V0,this._geometry.refCount++,this._transformID=-1,this._tintColor=new it(16777215),this.blendMode=ke.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ka(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,n=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:n,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:ye.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:vs.BUTT,join:wi.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new cr,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new cr,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,n=i[i.length-2],s=i[i.length-1];return(n!==e||s!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Dd.curveTo(e,t,i,n,s),this}bezierCurveTo(e,t,i,n,s,r){return this._initCurve(),Fd.curveTo(e,t,i,n,s,r,this.currentPath.points),this}arcTo(e,t,i,n,s){this._initCurve(e,t);const r=this.currentPath.points,o=cg.curveTo(e,t,i,n,s,r);if(o){const{cx:a,cy:l,radius:c,startAngle:u,endAngle:h,anticlockwise:d}=o;this.arc(a,l,c,u,h,d)}return this}arc(e,t,i,n,s,r=!1){if(n===s)return this;if(!r&&s<=n?s+=Ja:r&&n<=s&&(n+=Ja),s-n===0)return this;const a=e+Math.cos(n)*i,l=t+Math.sin(n)*i,c=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const h=Math.abs(u[u.length-2]-a),d=Math.abs(u[u.length-1]-l);h<c&&d<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return cg.arc(a,l,e,t,i,n,s,r,u),this}beginFill(e=0,t){return this.beginTextureFill({texture:ye.WHITE,color:e,alpha:t})}normalizeColor(e){const t=it.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:ye.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,n){return this.drawShape(new Ne(e,t,i,n))}drawRoundedRect(e,t,i,n,s){return this.drawShape(new Md(e,t,i,n,s))}drawCircle(e,t,i){return this.drawShape(new Id(e,t,i))}drawEllipse(e,t,i,n){return this.drawShape(new Pd(e,t,i,n))}drawPolygon(...e){let t,i=!0;const n=e[0];n.points?(i=n.closeStroke,t=n.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new cr(t);return s.closeStroke=i,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===kt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let n=0;n<i;n++){const s=e.batches[n],r=s.style.color,o=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),a=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),c={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:it.shared.setValue(r).toRgbArray(),_tintRGB:r,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=c}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,n=this.worldAlpha,s=t.uniforms,r=i.drawCalls;s.translationMatrix=this.transform.worldTransform,it.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let o=0,a=r.length;o<a;o++)this._renderDrawCallDirect(e,i.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:i,type:n,size:s,start:r}=t,o=i.count;for(let a=0;a<o;a++)e.texture.bind(i.elements[a],a);e.geometry.draw(n,s,r)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!xu[i]){const{maxTextures:n}=e.plugins[i],s=new Int32Array(n);for(let a=0;a<n;a++)s[a]=a;const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new lt,default:ki.from({uSamplers:s},!0)},o=e.plugins[i]._shader.program;xu[i]=new Ki(o,r)}t=xu[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:n,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,i,n,s)}containsPoint(e){return this.worldTransform.applyInverse(e,ka._TEMP_POINT),this._geometry.containsPoint(ka._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=it.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,n=t.b,s=t.c,r=t.d,o=t.tx,a=t.ty,l=this._geometry.points,c=this.vertexData;let u=0;for(let h=0;h<l.length;h+=2){const d=l[h],f=l[h+1];c[u++]=i*d+s*f+o,c[u++]=r*f+n*d+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let Xt=ka;Xt.curves=pr;Xt._TEMP_POINT=new _e;class xI{constructor(t,i){this.uvBuffer=t,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const wu=new _e,fg=new cr,H0=class extends xt{constructor(e,t,i,n=ji.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||xn.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=fe.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ji.TRIANGLES&&t.length<H0.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],i=t.data,n=t._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const s=this.transform.worldTransform,r=s.a,o=s.b,a=s.c,l=s.d,c=s.tx,u=s.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){const f=i[d*2],p=i[d*2+1];h[d*2]=r*f+a*p+c,h[d*2+1]=o*f+l*p+u}if(this._roundPixels){const d=fe.RESOLUTION;for(let f=0;f<h.length;++f)h[f]=Math.round(h[f]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new xI(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,wu);const t=this.geometry.getBuffer("aVertexPosition").data,i=fg.points,n=this.geometry.getIndex().data,s=n.length,r=this.drawMode===4?3:1;for(let o=0;o+2<s;o+=r){const a=n[o]*2,l=n[o+1]*2,c=n[o+2]*2;if(i[0]=t[a],i[1]=t[a+1],i[2]=t[l],i[3]=t[l+1],i[4]=t[c],i[5]=t[c+1],fg.contains(wu.x,wu.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Eh=H0;Eh.BATCHABLE_SIZE=100;class wI extends Xn{constructor(t,i,n){super();const s=new yt(t),r=new yt(i,!0),o=new yt(n,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,Me.FLOAT).addAttribute("aTextureCoord",r,2,!1,Me.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var SI=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,TI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class pg extends Ki{constructor(t,i){const n={uSampler:t,alpha:1,uTextureMatrix:lt.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(n,i.uniforms),super(i.program||Ai.from(TI,SI),n),this._colorDirty=!1,this.uvMatrix=new h0(t),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this._tintColor=new it(i.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const i=this.texture.baseTexture.alphaMode;it.shared.setValue(this._tintColor).premultiply(this._alpha,i).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class mg{constructor(t,i,n){this.geometry=new Xn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<t.length;++s){let r=t[s];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||Me.FLOAT,offset:r.offset},i[s]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let i=0;this.indexBuffer=new yt(rC(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=i,i+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new yt(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=s,s+=a.size,this.staticStride+=a.size}const r=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(r),this.staticDataUint32=new Uint32Array(r),this.staticBuffer=new yt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Me.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Me.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,i,n){for(let s=0;s<this.dynamicProperties.length;s++){const r=this.dynamicProperties[s];r.uploadFunction(t,i,n,r.type===Me.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,i,n){for(let s=0;s<this.staticProperties.length;s++){const r=this.staticProperties[s];r.uploadFunction(t,i,n,r.type===Me.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var CI=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,EI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class G0 extends Ml{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new lt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Me.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ki.from(EI,CI,{}),this.state=xn.for2d()}render(t){const i=t.children,n=t._maxSize,s=t._batchSize,r=this.renderer;let o=i.length;if(o===0)return;o>n&&!t.autoResize&&(o=n);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=i[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=zy(t.blendMode,c),r.state.set(this.state);const u=r.gl,h=t.worldTransform.copyTo(this.tempMatrix);h.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=it.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=s,p+=1){let g=o-f;g>s&&(g=s),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const y=a[p];y.uploadDynamic(i,f,g);const w=t._bufferUpdateIDs[p]||0;d=d||y._updateID<w,d&&(y._updateID=t._updateID,y.uploadStatic(i,f,g)),r.geometry.bind(y.geometry),u.drawElements(u.TRIANGLES,g*6,u.UNSIGNED_SHORT,0)}}generateBuffers(t){const i=[],n=t._maxSize,s=t._batchSize,r=t._properties;for(let o=0;o<n;o+=s)i.push(new mg(this.properties,r,s));return i}_generateOneMoreBuffer(t){const i=t._batchSize,n=t._properties;return new mg(this.properties,n,i)}uploadVertices(t,i,n,s,r,o){let a=0,l=0,c=0,u=0;for(let h=0;h<n;++h){const d=t[i+h],f=d._texture,p=d.scale.x,g=d.scale.y,y=f.trim,w=f.orig;y?(l=y.x-d.anchor.x*w.width,a=l+y.width,u=y.y-d.anchor.y*w.height,c=u+y.height):(a=w.width*(1-d.anchor.x),l=w.width*-d.anchor.x,c=w.height*(1-d.anchor.y),u=w.height*-d.anchor.y),s[o]=l*p,s[o+1]=u*g,s[o+r]=a*p,s[o+r+1]=u*g,s[o+r*2]=a*p,s[o+r*2+1]=c*g,s[o+r*3]=l*p,s[o+r*3+1]=c*g,o+=r*4}}uploadPosition(t,i,n,s,r,o){for(let a=0;a<n;a++){const l=t[i+a].position;s[o]=l.x,s[o+1]=l.y,s[o+r]=l.x,s[o+r+1]=l.y,s[o+r*2]=l.x,s[o+r*2+1]=l.y,s[o+r*3]=l.x,s[o+r*3+1]=l.y,o+=r*4}}uploadRotation(t,i,n,s,r,o){for(let a=0;a<n;a++){const l=t[i+a].rotation;s[o]=l,s[o+r]=l,s[o+r*2]=l,s[o+r*3]=l,o+=r*4}}uploadUvs(t,i,n,s,r,o){for(let a=0;a<n;++a){const l=t[i+a]._texture._uvs;l?(s[o]=l.x0,s[o+1]=l.y0,s[o+r]=l.x1,s[o+r+1]=l.y1,s[o+r*2]=l.x2,s[o+r*2+1]=l.y2,s[o+r*3]=l.x3,s[o+r*3+1]=l.y3,o+=r*4):(s[o]=0,s[o+1]=0,s[o+r]=0,s[o+r+1]=0,s[o+r*2]=0,s[o+r*2+1]=0,s[o+r*3]=0,s[o+r*3+1]=0,o+=r*4)}}uploadTint(t,i,n,s,r,o){for(let a=0;a<n;++a){const l=t[i+a],c=it.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);s[o]=c,s[o+r]=c,s[o+r*2]=c,s[o+r*3]=c,o+=r*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}G0.extension={name:"particle",type:pe.RendererPlugin};Se.add(G0);var Nl=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(Nl||{});const ba={willReadFrequently:!0},be=class{static get experimentalLetterSpacingSupported(){let e=be._experimentalLetterSpacingSupported;if(e!==void 0){const t=fe.ADAPTER.getCanvasRenderingContext2D().prototype;e=be._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,n,s,r,o,a,l){this.text=e,this.style=t,this.width=i,this.height=n,this.lines=s,this.lineWidths=r,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(e,t,i,n=be._canvas){i=i??t.wordWrap;const s=t.toFontString(),r=be.measureFont(s);r.fontSize===0&&(r.fontSize=t.fontSize,r.ascent=t.fontSize);const o=n.getContext("2d",ba);o.font=s;const l=(i?be.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let u=0;for(let p=0;p<l.length;p++){const g=be._measureText(l[p],t.letterSpacing,o);c[p]=g,u=Math.max(u,g)}let h=u+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance);const d=t.lineHeight||r.fontSize+t.strokeThickness;let f=Math.max(d,r.fontSize+t.strokeThickness*2)+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new be(e,t,h,f,l,c,d+t.leading,u,r)}static _measureText(e,t,i){let n=!1;be.experimentalLetterSpacingSupported&&(be.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(e).width;return s>0&&(n?s-=t:s+=(be.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,i=be._canvas){const n=i.getContext("2d",ba);let s=0,r="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:c}=t,u=be.collapseSpaces(c),h=be.collapseNewlines(c);let d=!u;const f=t.wordWrapWidth+l,p=be.tokenize(e);for(let g=0;g<p.length;g++){let y=p[g];if(be.isNewline(y)){if(!h){o+=be.addLine(r),d=!u,r="",s=0;continue}y=" "}if(u){const x=be.isBreakingSpace(y),_=be.isBreakingSpace(r[r.length-1]);if(x&&_)continue}const w=be.getFromCache(y,l,a,n);if(w>f)if(r!==""&&(o+=be.addLine(r),r="",s=0),be.canBreakWords(y,t.breakWords)){const x=be.wordWrapSplit(y);for(let _=0;_<x.length;_++){let C=x[_],k=C,V=1;for(;x[_+V];){const M=x[_+V];if(!be.canBreakChars(k,M,y,_,t.breakWords))C+=M;else break;k=M,V++}_+=V-1;const L=be.getFromCache(C,l,a,n);L+s>f&&(o+=be.addLine(r),d=!1,r="",s=0),r+=C,s+=L}}else{r.length>0&&(o+=be.addLine(r),r="",s=0);const x=g===p.length-1;o+=be.addLine(y,!x),d=!1,r="",s=0}else w+s>f&&(d=!1,o+=be.addLine(r),r="",s=0),(r.length>0||!be.isBreakingSpace(y)||d)&&(r+=y,s+=w)}return o+=be.addLine(r,!1),o}static addLine(e,t=!0){return e=be.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,n){let s=i[e];return typeof s!="number"&&(s=be._measureText(e,t,n)+t,i[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!be.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:be._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:be._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let n=0;n<e.length;n++){const s=e[n],r=e[n+1];if(be.isBreakingSpace(s,r)||be.isNewline(s)){i!==""&&(t.push(i),i=""),t.push(s);continue}i+=s}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,n,s){return!0}static wordWrapSplit(e){return be.graphemeSegmenter(e)}static measureFont(e){if(be._fonts[e])return be._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=be._canvas,n=be._context;n.font=e;const s=be.METRICS_STRING+be.BASELINE_SYMBOL,r=Math.ceil(n.measureText(s).width);let o=Math.ceil(n.measureText(be.BASELINE_SYMBOL).width);const a=Math.ceil(be.HEIGHT_MULTIPLIER*o);if(o=o*be.BASELINE_MULTIPLIER|0,r===0||a===0)return be._fonts[e]=t,t;i.width=r,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,r,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,o);const l=n.getImageData(0,0,r,a).data,c=l.length,u=r*4;let h=0,d=0,f=!1;for(h=0;h<o;++h){for(let p=0;p<u;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=u;else break}for(t.ascent=o-h,d=c-u,f=!1,h=a;h>o;--h){for(let p=0;p<u;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=u;else break}return t.descent=h-o,t.fontSize=t.ascent+t.descent,be._fonts[e]=t,t}static clearMetrics(e=""){e?delete be._fonts[e]:be._fonts={}}static get _canvas(){if(!be.__canvas){let e;try{const t=new OffscreenCanvas(0,0),i=t.getContext("2d",ba);if(i!=null&&i.measureText)return be.__canvas=t,t;e=fe.ADAPTER.createCanvas()}catch{e=fe.ADAPTER.createCanvas()}e.width=e.height=10,be.__canvas=e}return be.__canvas}static get _context(){return be.__context||(be.__context=be._canvas.getContext("2d",ba)),be.__context}};let Rt=be;Rt.METRICS_STRING="|q";Rt.BASELINE_SYMBOL="M";Rt.BASELINE_MULTIPLIER=1.4;Rt.HEIGHT_MULTIPLIER=2;Rt.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(i=>i.segment)}return e=>[...e]})();Rt.experimentalLetterSpacing=!1;Rt._fonts={};Rt._newlines=[10,13];Rt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const AI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],zr=class{constructor(e){this.styleID=0,this.reset(),Tu(this,e,e)}clone(){const e={};return Tu(e,this,zr.defaultStyle),new zr(e)}reset(){Tu(this,zr.defaultStyle,zr.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Su(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Su(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){II(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Su(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let n=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!AI.includes(n)&&(n=`"${n}"`),t[i]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let mn=zr;mn.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Nl.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Su(e){const t=it.shared;return Array.isArray(e)?e.map(i=>t.setValue(i).toHex()):t.setValue(e).toHex()}function II(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}function Tu(e,t,i){for(const n in i)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}const PI={texture:!0,children:!1,baseTexture:!0},Ah=class extends Bs{constructor(e,t,i){let n=!1;i||(i=fe.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;const s=ye.from(i);s.orig=new Ne,s.trim=new Ne,super(s),this._ownCanvas=n,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Ah.defaultResolution??fe.RESOLUTION,this._autoResolution=Ah.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Rt.experimentalLetterSpacing}static set experimentalLetterSpacing(e){je("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Rt.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,n=Rt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,r=n.height,o=n.lines,a=n.lineHeight,l=n.lineWidths,c=n.maxLineWidth,u=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,r)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let h,d;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const g=t.dropShadow&&p===0,y=g?Math.ceil(Math.max(1,r)+t.padding*2):0,w=y*this._resolution;if(g){i.fillStyle="black",i.strokeStyle="black";const _=t.dropShadowColor,C=t.dropShadowBlur*this._resolution,k=t.dropShadowDistance*this._resolution;i.shadowColor=it.shared.setValue(_).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=C,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*k,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*k+w}else i.fillStyle=this._generateFillStyle(t,o,n),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let x=(a-u.fontSize)/2;a-u.fontSize<0&&(x=0);for(let _=0;_<o.length;_++)h=t.strokeThickness/2,d=t.strokeThickness/2+_*a+u.ascent+x,t.align==="right"?h+=c-l[_]:t.align==="center"&&(h+=(c-l[_])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[_],h+t.padding,d+t.padding-y,!0),t.fill&&this.drawLetterSpacing(o[_],h+t.padding,d+t.padding-y)}this.updateTexture()}drawLetterSpacing(e,t,i,n=!1){const r=this._style.letterSpacing;let o=!1;if(Rt.experimentalLetterSpacingSupported&&(Rt.experimentalLetterSpacing?(this.context.letterSpacing=`${r}px`,this.context.textLetterSpacing=`${r}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),r===0||o){n?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let a=t;const l=Rt.graphemeSegmenter(e);let c=this.context.measureText(e).width,u=0;for(let h=0;h<l.length;++h){const d=l[h];n?this.context.strokeText(d,a,i):this.context.fillText(d,a,i);let f="";for(let p=h+1;p<l.length;++p)f+=l[p];u=this.context.measureText(f).width,a+=c-u+r,c=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const r=cC(e);r.data&&(e.width=r.width,e.height=r.height,this.context.putImageData(r.data,0,0))}const t=this._texture,i=this._style,n=i.trim?0:i.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const r=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-r-o*2,l=this.canvas.height/this._resolution-r-o*2,c=n.slice(),u=e.fillGradientStops.slice();if(!u.length){const h=c.length+1;for(let d=1;d<h;++d)u.push(d/h)}if(c.unshift(n[0]),u.unshift(0),c.push(n[n.length-1]),u.push(1),e.fillGradientType===Nl.LINEAR_VERTICAL){s=this.context.createLinearGradient(a/2,o,a/2,l+o);const h=i.fontProperties.fontSize+e.strokeThickness;for(let d=0;d<t.length;d++){const f=i.lineHeight*(d-1)+h,p=i.lineHeight*d;let g=p;d>0&&f>p&&(g=(p+f)/2);const y=p+h,w=i.lineHeight*(d+1);let x=y;d+1<t.length&&w<y&&(x=(y+w)/2);const _=(x-g)/l;for(let C=0;C<c.length;C++){let k=0;typeof u[C]=="number"?k=u[C]:k=C/c.length;let V=Math.min(1,Math.max(0,g/l+k*_));V=Number(V.toFixed(5)),s.addColorStop(V,c[C])}}}else{s=this.context.createLinearGradient(o,l/2,a+o,l/2);const h=c.length+1;let d=1;for(let f=0;f<c.length;f++){let p;typeof u[f]=="number"?p=u[f]:p=d/h,s.addColorStop(p,c[f]),d++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},PI,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Bn(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Bn(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof mn?this._style=e:this._style=new mn(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Tr=Ah;Tr.defaultAutoResolution=!0;class MI{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function RI(e,t){var n;let i=!1;if((n=e==null?void 0:e._textures)!=null&&n.length){for(let s=0;s<e._textures.length;s++)if(e._textures[s]instanceof ye){const r=e._textures[s].baseTexture;t.includes(r)||(t.push(r),i=!0)}}return i}function kI(e,t){if(e.baseTexture instanceof De){const i=e.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function BI(e,t){if(e._texture&&e._texture instanceof ye){const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function FI(e,t){return t instanceof Tr?(t.updateText(!0),!0):!1}function DI(e,t){if(t instanceof mn){const i=t.toFontString();return Rt.measureFont(i),!0}return!1}function OI(e,t){if(e instanceof Tr){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function LI(e,t){return e instanceof mn?(t.includes(e)||t.push(e),!0):!1}const $0=class{constructor(e){this.limiter=new MI($0.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(OI),this.registerFindHook(LI),this.registerFindHook(RI),this.registerFindHook(kI),this.registerFindHook(BI),this.registerUploadHook(FI),this.registerUploadHook(DI)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Mt.system.addOnce(this.tick,this,Es.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Mt.system.addOnce(this.tick,this,Es.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof xt)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Mt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let rl=$0;rl.uploadsPerFrame=4;Object.defineProperties(fe,{UPLOADS_PER_FRAME:{get(){return rl.uploadsPerFrame},set(e){je("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),rl.uploadsPerFrame=e}}});function W0(e,t){return t instanceof De?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function NI(e,t){if(!(t instanceof Xt))return!1;const{geometry:i}=t;t.finishPoly(),i.updateBatches();const{batches:n}=i;for(let s=0;s<n.length;s++){const{texture:r}=n[s].style;r&&W0(e,r.baseTexture)}return i.batchable||e.geometry.bind(i,t._resolveDirectShader(e)),!0}function UI(e,t){return e instanceof Xt?(t.push(e),!0):!1}class z0 extends rl{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(UI),this.registerUploadHook(W0),this.registerUploadHook(NI)}}z0.extension={name:"prepare",type:pe.RendererSystem};Se.add(z0);var VI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,HI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,GI=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gg=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,$I=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const xa=new lt;class j0 extends Ml{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new a0,this.state=xn.for2d()}contextChange(){const t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=Ki.from(gg,$I,i),this.shader=t.context.webGLVersion>1?Ki.from(HI,VI,i):Ki.from(gg,GI,i)}render(t){const i=this.renderer,n=this.quad;let s=n.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);const r=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;s=n.uvs,s[0]=s[6]=-r,s[1]=s[3]=-o,s[2]=s[4]=1-r,s[5]=s[7]=1-o,n.invalidate();const a=t._texture,l=a.baseTexture,c=l.alphaMode>0,u=t.tileTransform.localTransform,h=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[i.CONTEXT_UID]?d=l.wrapMode!==Un.CLAMP:l.wrapMode===Un.CLAMP&&(l.wrapMode=Un.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,g=a.height,y=t._width,w=t._height;xa.set(u.a*p/y,u.b*p/w,u.c*g/y,u.d*g/w,u.tx/y,u.ty/w),xa.invert(),d?xa.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=xa.toArray(!0),f.uniforms.uColor=it.shared.setValue(t.tint).premultiply(t.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,i.shader.bind(f),i.geometry.bind(n),this.state.blendMode=zy(t.blendMode,c),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}j0.extension={name:"tilingSprite",type:pe.RendererPlugin};Se.add(j0);const jr=class{constructor(e,t,i=null){this.linkedSheets=[],this._texture=e instanceof ye?e:null,this.baseTexture=e instanceof De?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=jn(e,null);return i===null&&(i=parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=jr.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=jr.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const n=this._frameKeys[t],s=this._frames[n],r=s.frame;if(r){let o=null,a=null;const l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new Ne(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?o=new Ne(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):o=new Ne(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(a=new Ne(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[n]=new ye(this.baseTexture,o,c,a,s.rotated?2:0,s.anchor,s.borders),ye.addToCache(this.textures[n],n)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const n=e[t][i];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*jr.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*jr.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Ih=jr;Ih.BATCH_SIZE=1e3;const WI=["jpg","png","jpeg","avif","webp"];function X0(e,t,i){const n={};if(e.forEach(s=>{n[s]=t}),Object.keys(t.textures).forEach(s=>{n[s]=t.textures[s]}),!i){const s=Nt.dirname(e[0]);t.linkedSheets.forEach((r,o)=>{const a=X0([`${s}/${t.data.meta.related_multi_packs[o]}`],r,!0);Object.assign(n,a)})}return n}const zI={extension:pe.Asset,cache:{test:e=>e instanceof Ih,getCacheableAssets:(e,t)=>X0(e,t,!1)},resolver:{test:e=>{const i=e.split("?")[0].split("."),n=i.pop(),s=i.pop();return n==="json"&&WI.includes(s)},parse:e=>{var i;const t=e.split(".");return{resolution:parseFloat(((i=fe.RETINA_PREFIX.exec(e))==null?void 0:i[1])??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:pe.LoadParser,priority:Ji.Normal},async testParse(e,t){return Nt.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,i){var c,u;let n=Nt.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let s=n+e.meta.image;s=Th(s,t.src);const o=(await i.load([s]))[s],a=new Ih(o.baseTexture,e,t.src);await a.parse();const l=(c=e==null?void 0:e.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const h=[];for(const f of l){if(typeof f!="string")continue;let p=n+f;(u=t.data)!=null&&u.ignoreMultiPack||(p=Th(p,t.src),h.push(i.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(h);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(e){e.destroy(!0)}}};Se.add(zI);class ol{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Ba{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const i=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const r in i){const o=i[r].match(/^[a-z]+/gm)[0],a=i[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const u=a[c].split("="),h=u[0],d=u[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[h]=p}n[o].push(l)}const s=new ol;return n.info.forEach(r=>s.info.push({face:r.face,size:parseInt(r.size,10)})),n.common.forEach(r=>s.common.push({lineHeight:parseInt(r.lineHeight,10)})),n.page.forEach(r=>s.page.push({id:parseInt(r.id,10),file:r.file})),n.char.forEach(r=>s.char.push({id:parseInt(r.id,10),page:parseInt(r.page,10),x:parseInt(r.x,10),y:parseInt(r.y,10),width:parseInt(r.width,10),height:parseInt(r.height,10),xoffset:parseInt(r.xoffset,10),yoffset:parseInt(r.yoffset,10),xadvance:parseInt(r.xadvance,10)})),n.kerning.forEach(r=>s.kerning.push({first:parseInt(r.first,10),second:parseInt(r.second,10),amount:parseInt(r.amount,10)})),n.distanceField.forEach(r=>s.distanceField.push({distanceRange:parseInt(r.distanceRange,10),fieldType:r.fieldType})),s}}class Ph{static test(t){const i=t;return"getElementsByTagName"in i&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const i=new ol,n=t.getElementsByTagName("info"),s=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let c=0;c<n.length;c++)i.info.push({face:n[c].getAttribute("face"),size:parseInt(n[c].getAttribute("size"),10)});for(let c=0;c<s.length;c++)i.common.push({lineHeight:parseInt(s[c].getAttribute("lineHeight"),10)});for(let c=0;c<r.length;c++)i.page.push({id:parseInt(r[c].getAttribute("id"),10)||0,file:r[c].getAttribute("file")});for(let c=0;c<o.length;c++){const u=o[c];i.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)i.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)i.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return i}}class Mh{static test(t){return typeof t=="string"&&t.includes("<font>")?Ph.test(fe.ADAPTER.parseXML(t)):!1}static parse(t){return Ph.parse(fe.ADAPTER.parseXML(t))}}const Cu=[Ba,Ph,Mh];function jI(e){for(let t=0;t<Cu.length;t++)if(Cu[t].test(e))return Cu[t];return null}function XI(e,t,i,n,s,r){const o=i.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=i.dropShadow?i.dropShadowDistance:0,c=i.padding||0,u=e.width/n-l-c*2,h=e.height/n-l-c*2,d=o.slice(),f=i.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let g=1;g<p;++g)f.push(g/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),i.fillGradientType===Nl.LINEAR_VERTICAL){a=t.createLinearGradient(u/2,c,u/2,h+c);let p=0;const y=(r.fontProperties.fontSize+i.strokeThickness)/h;for(let w=0;w<s.length;w++){const x=r.lineHeight*w;for(let _=0;_<d.length;_++){let C=0;typeof f[_]=="number"?C=f[_]:C=_/d.length;const k=x/h+C*y;let V=Math.max(p,k);V=Math.min(V,1),a.addColorStop(V,d[_]),p=V}}}else{a=t.createLinearGradient(c,h/2,u+c,h/2);const p=d.length+1;let g=1;for(let y=0;y<d.length;y++){let w;typeof f[y]=="number"?w=f[y]:w=g/p,a.addColorStop(w,d[y]),g++}}return a}function YI(e,t,i,n,s,r,o){const a=i.text,l=i.fontProperties;t.translate(n,s),t.scale(r,r);const c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=XI(e,t,o,r,[a],i),t.strokeStyle=o.stroke,o.dropShadow){const h=o.dropShadowColor,d=o.dropShadowBlur*r,f=o.dropShadowDistance*r;t.shadowColor=it.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,c,u+i.lineHeight-l.descent),o.fill&&t.fillText(a,c,u+i.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Fa(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function Y0(e){return Array.from?Array.from(e):e.split("")}function qI(e){typeof e=="string"&&(e=[e]);const t=[];for(let i=0,n=e.length;i<n;i++){const s=e[i];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const r=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<r)throw new Error("[BitmapFont]: Invalid character range.");for(let a=r,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...Y0(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const xi=class{constructor(e,t,i){var c;const[n]=e.info,[s]=e.common,[r]=e.page,[o]=e.distanceField,a=jn(r.file),l={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/a,this.chars={},this.pageTextures=l;for(let u=0;u<e.page.length;u++){const{id:h,file:d}=e.page[u];l[h]=t instanceof Array?t[u]:t[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[h].baseTexture.alphaMode=Oi.NO_PREMULTIPLIED_ALPHA,l[h].baseTexture.mipmap=Zi.OFF)}for(let u=0;u<e.char.length;u++){const{id:h,page:d}=e.char[u];let{x:f,y:p,width:g,height:y,xoffset:w,yoffset:x,xadvance:_}=e.char[u];f/=a,p/=a,g/=a,y/=a,w/=a,x/=a,_/=a;const C=new Ne(f+l[d].frame.x/a,p+l[d].frame.y/a,g,y);this.chars[h]={xOffset:w,yOffset:x,xAdvance:_,kerning:{},texture:new ye(l[d].baseTexture,C),page:d}}for(let u=0;u<e.kerning.length;u++){let{first:h,second:d,amount:f}=e.kerning[u];h/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[h]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((c=o==null?void 0:o.fieldType)==null?void 0:c.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let n;if(e instanceof ol)n=e;else{const r=jI(e);if(!r)throw new Error("Unrecognized data format for font.");n=r.parse(e)}t instanceof ye&&(t=[t]);const s=new xi(n,t,i);return xi.available[s.font]=s,s}static uninstall(e){const t=xi.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete xi.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:r,textureWidth:o,textureHeight:a,...l}=Object.assign({},xi.defaultOptions,i),c=qI(n),u=t instanceof mn?t:new mn(t),h=o,d=new ol;d.info[0]={face:u.fontFamily,size:u.fontSize},d.common[0]={lineHeight:u.fontSize};let f=0,p=0,g,y,w,x=0;const _=[];for(let k=0;k<c.length;k++){g||(g=fe.ADAPTER.createCanvas(),g.width=o,g.height=a,y=g.getContext("2d"),w=new De(g,{resolution:r,...l}),_.push(new ye(w)),d.page.push({id:_.length-1,file:""}));const V=c[k],L=Rt.measureText(V,u,!1,g),M=L.width,G=Math.ceil(L.height),j=Math.ceil((u.fontStyle==="italic"?2:1)*M);if(p>=a-G*r){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${V}')`);--k,g=null,y=null,w=null,p=0,f=0,x=0;continue}if(x=Math.max(G+L.fontProperties.descent,x),j*r+f>=h){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${V}')`);--k,p+=x*r,p=Math.ceil(p),f=0,x=0;continue}YI(g,y,L,f,p,r,u);const B=Fa(L.text);d.char.push({id:B,page:_.length-1,x:f/r,y:p/r,width:j,height:G,xoffset:0,yoffset:0,xadvance:M-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0)}),f+=(j+2*s)*r,f=Math.ceil(f)}for(let k=0,V=c.length;k<V;k++){const L=c[k];for(let M=0;M<V;M++){const G=c[M],j=y.measureText(L).width,B=y.measureText(G).width,F=y.measureText(L+G).width-(j+B);F&&d.kerning.push({first:Fa(L),second:Fa(G),amount:F})}}const C=new xi(d,_,!0);return xi.available[e]!==void 0&&xi.uninstall(e),xi.available[e]=C,C}};let jt=xi;jt.ALPHA=[["a","z"],["A","Z"]," "];jt.NUMERIC=[["0","9"]];jt.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];jt.ASCII=[[" ","~"]];jt.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:xi.ALPHANUMERIC};jt.available={};var KI=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,ZI=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const vg=[],yg=[],_g=[],q0=class extends xt{constructor(e,t={}){super();const{align:i,tint:n,maxWidth:s,letterSpacing:r,fontName:o,fontSize:a}=Object.assign({},q0.styleDefaults,t);if(!jt.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new it(n),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=r,this._anchor=new Fn(()=>{this.dirty=!0},this,0,0),this._roundPixels=fe.ROUND_PIXELS,this.dirty=!0,this._resolution=fe.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var j;const e=jt.available[this._fontName],t=this.fontSize,i=t/e.size,n=new _e,s=[],r=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Y0(a),c=this._maxWidth*e.size/t,u=e.distanceFieldType==="none"?vg:yg;let h=null,d=0,f=0,p=0,g=-1,y=0,w=0,x=0,_=0;for(let B=0;B<l.length;B++){const R=l[B],F=Fa(R);if(/(?:\s)/.test(R)&&(g=B,y=d,_++),R==="\r"||R===`
`){r.push(d),o.push(-1),f=Math.max(f,d),++p,++w,n.x=0,n.y+=e.lineHeight,h=null,_=0;continue}const O=e.chars[F];if(!O)continue;h&&O.kerning[h]&&(n.x+=O.kerning[h]);const q=_g.pop()||{texture:ye.EMPTY,line:0,charCode:0,prevSpaces:0,position:new _e};q.texture=O.texture,q.line=p,q.charCode=F,q.position.x=Math.round(n.x+O.xOffset+this._letterSpacing/2),q.position.y=Math.round(n.y+O.yOffset),q.prevSpaces=_,s.push(q),d=q.position.x+Math.max(O.xAdvance-O.xOffset,O.texture.orig.width),n.x+=O.xAdvance+this._letterSpacing,x=Math.max(x,O.yOffset+O.texture.height),h=F,g!==-1&&c>0&&n.x>c&&(++w,lr(s,1+g-w,1+B-g),B=g,g=-1,r.push(y),o.push(s.length>0?s[s.length-1].prevSpaces:0),f=Math.max(f,y),p++,n.x=0,n.y+=e.lineHeight,h=null,_=0)}const C=l[l.length-1];C!=="\r"&&C!==`
`&&(/(?:\s)/.test(C)&&(d=y),r.push(d),f=Math.max(f,d),o.push(-1));const k=[];for(let B=0;B<=p;B++){let R=0;this._align==="right"?R=f-r[B]:this._align==="center"?R=(f-r[B])/2:this._align==="justify"&&(R=o[B]<0?0:(f-r[B])/o[B]),k.push(R)}const V=s.length,L={},M=[],G=this._activePagesMeshData;u.push(...G);for(let B=0;B<V;B++){const R=s[B].texture,F=R.baseTexture.uid;if(!L[F]){let O=u.pop();if(!O){const X=new wI;let W,S;e.distanceFieldType==="none"?(W=new pg(ye.EMPTY),S=ke.NORMAL):(W=new pg(ye.EMPTY,{program:Ai.from(ZI,KI),uniforms:{uFWidth:0}}),S=ke.NORMAL_NPM);const A=new Eh(X,W);A.blendMode=S,O={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:A,vertices:null,uvs:null,indices:null}}O.index=0,O.indexCount=0,O.vertexCount=0,O.uvsCount=0,O.total=0;const{_textureCache:q}=this;q[F]=q[F]||new ye(R.baseTexture),O.mesh.texture=q[F],O.mesh.tint=this._tintColor.value,M.push(O),L[F]=O}L[F].total++}for(let B=0;B<G.length;B++)M.includes(G[B])||this.removeChild(G[B].mesh);for(let B=0;B<M.length;B++)M[B].mesh.parent!==this&&this.addChild(M[B].mesh);this._activePagesMeshData=M;for(const B in L){const R=L[B],F=R.total;if(!(((j=R.indices)==null?void 0:j.length)>6*F)||R.vertices.length<Eh.BATCHABLE_SIZE*2)R.vertices=new Float32Array(4*2*F),R.uvs=new Float32Array(4*2*F),R.indices=new Uint16Array(6*F);else{const O=R.total,q=R.vertices;for(let X=O*4*2;X<q.length;X++)q[X]=0}R.mesh.size=6*F}for(let B=0;B<V;B++){const R=s[B];let F=R.position.x+k[R.line]*(this._align==="justify"?R.prevSpaces:1);this._roundPixels&&(F=Math.round(F));const O=F*i,q=R.position.y*i,X=R.texture,W=L[X.baseTexture.uid],S=X.frame,A=X._uvs,E=W.index++;W.indices[E*6+0]=0+E*4,W.indices[E*6+1]=1+E*4,W.indices[E*6+2]=2+E*4,W.indices[E*6+3]=0+E*4,W.indices[E*6+4]=2+E*4,W.indices[E*6+5]=3+E*4,W.vertices[E*8+0]=O,W.vertices[E*8+1]=q,W.vertices[E*8+2]=O+S.width*i,W.vertices[E*8+3]=q,W.vertices[E*8+4]=O+S.width*i,W.vertices[E*8+5]=q+S.height*i,W.vertices[E*8+6]=O,W.vertices[E*8+7]=q+S.height*i,W.uvs[E*8+0]=A.x0,W.uvs[E*8+1]=A.y0,W.uvs[E*8+2]=A.x1,W.uvs[E*8+3]=A.y1,W.uvs[E*8+4]=A.x2,W.uvs[E*8+5]=A.y2,W.uvs[E*8+6]=A.x3,W.uvs[E*8+7]=A.y3}this._textWidth=f*i,this._textHeight=(n.y+e.lineHeight)*i;for(const B in L){const R=L[B];if(this.anchor.x!==0||this.anchor.y!==0){let X=0;const W=this._textWidth*this.anchor.x,S=this._textHeight*this.anchor.y;for(let A=0;A<R.total;A++)R.vertices[X++]-=W,R.vertices[X++]-=S,R.vertices[X++]-=W,R.vertices[X++]-=S,R.vertices[X++]-=W,R.vertices[X++]-=S,R.vertices[X++]-=W,R.vertices[X++]-=S}this._maxLineHeight=x*i;const F=R.mesh.geometry.getBuffer("aVertexPosition"),O=R.mesh.geometry.getBuffer("aTextureCoord"),q=R.mesh.geometry.getIndex();F.data=R.vertices,O.data=R.uvs,q.data=R.indices,F.update(),O.update(),q.update()}for(let B=0;B<s.length;B++)_g.push(s[B]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:n}=jt.available[this._fontName];if(i!=="none"){const{a:s,b:r,c:o,d:a}=this.worldTransform,l=Math.sqrt(s*s+r*r),c=Math.sqrt(o*o+a*a),u=(Math.abs(l)+Math.abs(c))/2,h=this.fontSize/n,d=e._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=u*t*h*d}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=jt.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!jt.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??jt.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=jt.available[this._fontName].distanceFieldType==="none"?vg:yg;n.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],n.filter(s=>t[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=ye.EMPTY});for(const s in t)t[s].destroy(),delete t[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let JI=q0;JI.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const QI=[".xml",".fnt"],eP={extension:{type:pe.LoadParser,priority:Ji.Normal},name:"loadBitmapFont",test(e){return QI.includes(Nt.extname(e).toLowerCase())},async testParse(e){return Ba.test(e)||Mh.test(e)},async parse(e,t,i){const n=Ba.test(e)?Ba.parse(e):Mh.parse(e),{src:s}=t,{page:r}=n,o=[];for(let c=0;c<r.length;++c){const u=r[c].file;let h=Nt.join(Nt.dirname(s),u);h=Th(h,s),o.push(h)}const a=await i.load(o),l=o.map(c=>a[c]);return jt.install(n,l,!0)},async load(e,t){return(await fe.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};Se.add(eP);const qs=class extends mn{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new qs(Object.keys(qs.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete qs.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=qs;if(i[e]){const n=i[e];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return fe.ADAPTER.fetch(e).then(n=>n.blob()).then(async n=>new Promise((s,r)=>{const o=URL.createObjectURL(n),a=new FileReader;a.onload=()=>s([o,a.result]),a.onerror=r,a.readAsDataURL(n)})).then(async([n,s])=>{const r=Object.assign({family:Nt.basename(e,Nt.extname(e)),weight:"normal",style:"normal",src:n,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);i[e]=r,this._fonts.push(r),this.styleID++;const o=new FontFace(r.family,`url(${r.src})`,{weight:r.weight,style:r.style});r.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=nC(e)),typeof e=="number"?iC(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${i}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,qs.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=fe.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Qr=qs;Qr.availableFonts={};Qr.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const Ks=class extends Bs{constructor(e="",t={}){super(ye.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const i=new Image,n=ye.from(i,{scaleMode:fe.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new Ne,n.trim=new Ne,this.texture=n;const s="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject"),l=document.createElementNS(r,"div"),c=document.createElementNS(r,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=Ks.defaultMaxWidth,this.maxHeight=Ks.defaultMaxHeight,this._domElement=l,this._styleElement=c,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(c),this._foreignObject.appendChild(l),this._image=i,this._loadImage=new Image,this._autoResolution=Ks.defaultAutoResolution,this._resolution=Ks.defaultResolution??fe.RESOLUTION,this.text=e,this.style=t}measureText(e){var a,l;const{text:t,style:i,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(n)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const r=Math.min(this.maxWidth,Math.ceil(s.width)),o=Math.min(this.maxHeight,Math.ceil(s.height));return this._svgRoot.setAttribute("width",r.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(n)}),this._styleElement.textContent=(l=this._style)==null?void 0:l.toGlobalCSS()),{width:r+i.padding*2,height:o+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:n}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:r}=this.measureText();i.width=n.width=Math.ceil(Math.max(1,s)),i.height=n.height=Math.ceil(Math.max(1,r)),this._loading||(this._loading=!0,await new Promise(o=>{n.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,i.src=n.src,n.onload=null,n.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:n}=this,{padding:s}=e,{baseTexture:r}=t;t.trim.width=t._frame.width=i.width/n,t.trim.height=t._frame.height=i.height/n,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),r.setRealSize(i.width,i.height,n),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,n,s,r,o;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Ks.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=t,(n=this._svgRoot)==null||n.remove(),this._svgRoot=t,(s=this._domElement)==null||s.remove(),this._domElement=t,(r=this._foreignObject)==null||r.remove(),this._foreignObject=t,(o=this._styleElement)==null||o.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Bn(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Bn(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Qr?(this.ownsStyle=!1,this._style=e):e instanceof mn?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Qr.from(e)):(this.ownsStyle=!0,this._style=new Qr(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Ul=Ks;Ul.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Ul.defaultMaxWidth=2024;Ul.defaultMaxHeight=2024;Ul.defaultAutoResolution=!0;var Zs=(e=>(e[e.None=0]="None",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.Critical=3]="Critical",e))(Zs||{});class tP{}class K0{constructor(t,i,n,s){this.radio_connected=!1,this.id=t,this.visible=i,this.team=n,this.pose=s,this.status=new tP}}function bg(e){return e.visible||e.radio_connected}function Z0(e){return 2*Math.acos(e.pose.orientation.z)*180/Math.PI}function iP(e,t){if(!e.radio_connected)return 1;if(!t&&(e.status.power_error||e.status.power_board_error||e.status.battery_error)||!t&&e.status.battery_crit)return 3;for(var i of["fl","bl","br","fr","drib"])if(e.status["motor_"+i+"_general_error"]||e.status["motor_"+i+"_hall_error"])return 2;return e.status.battery_low||e.status.tipped_error||!t&&e.status.kicker_board_error?1:0}function nP(e,t,i){const n=i.scale;t.position.x=e.pose.position.x*n,t.position.y=-e.pose.position.y*n,t.getChildAt(0).angle=Z0(e)-90,t.visible=e.visible}function sP(e,t,i){const n=e.team+"_robot"+e.id,s=i.scale,o=s*.09,a=-50/180*Math.PI,l=230/180*Math.PI;let c=t.getChildByName(n);c?c.removeChildren():(c=new xt,c.name=n,c.eventMode="dynamic");const u=new Xt;u.name="robot",u.lineStyle(2,"black"),u.beginFill(e.team),u.arc(0,0,o,a,l),u.closePath(),u.endFill();const h=new Tr(e.id,{fontSize:16,fill:e.team==Dt.Blue?"white":"black"});h.name="id",h.anchor.set(.5,.5),h.angle=-i.angle,c.position.x=e.pose.position.x*s,c.y=-e.pose.position.y*s,u.angle=Z0(e)-90,c.addChild(u),c.addChild(h),c.visible=e.visible;const d=t.getChildByName(c.name);d&&t.removeChild(d),t.addChild(c)}const rP=16;var Dt=(e=>(e.Yellow="yellow",e.Blue="blue",e))(Dt||{});class xg{constructor(){this.yellow_card_times=[]}}class wg{constructor(t,i,n){this.color=i,this.defending=n,this.robots=[];const s=11;for(let r=0;r<rP;r++){let o=r<s,a=new Qe.Pose({position:{x:.4*this.defending,y:.23*(r-(s-1)/2),z:0},orientation:{x:0,y:0,z:this.defending>0?1:0,w:this.defending>0?0:1}});this.robots.push(new K0(r,o,this.color,a))}}}const oP=[{name:"Normal First Half Pre",color:"yellow"},{name:"Normal First Half",color:"green"},{name:"Normal Half Time",color:"red"},{name:"Normal Second Half Pre",color:"yellow"},{name:"Normal Second Half",color:"green"},{name:"Extra Time Break",color:"red"},{name:"Extra First Half Pre",color:"yellow"},{name:"Extra First Half",color:"green"},{name:"Extra Half Time",color:"red"},{name:"Extra Second Half Pre",color:"yellow"},{name:"Extra Second Half",color:"green"},{name:"Penalty Shootout Break",color:"red"},{name:"Penalty Shootout",color:"green"},{name:"Post Game",color:"red"}],aP=[{name:"Halt",color:"red"},{name:"Stop",color:"red"},{name:"Normal Start",color:"green"},{name:"Force Start",color:"green"},{name:"Prepare Kickoff Yellow",color:"yellow"},{name:"Prepare Kickoff Blue",color:"blue"},{name:"Prepare Penalty Yellow",color:"yellow"},{name:"Prepare Penalty Blue",color:"blue"},{name:"Direct Free Yellow",color:"yellow"},{name:"Direct Free Blue",color:"blue"},{name:"Indirect Free Yellow",color:"yellow"},{name:"Indirect Free Blue",color:"blue"},{name:"Timeout Yellow",color:"yellow"},{name:"Timeout Blue",color:"blue"},{name:"Goal Yellow",color:"yellow"},{name:"Goal Blue",color:"blue"},{name:"Ball Placement Yellow",color:"yellow"},{name:"Ball Placement Blue",color:"blue"}];class lP{constructor(){this.stage=0,this.command=0,this.command_counter=0,this.command_timestamp=0,this.blue=new xg,this.yellow=new xg}}function cP(e){return oP[e.stage]}function uP(e){return aP[e.command]}class hP{constructor(){this.visible=!0,this.pose=new Qe.Pose({position:{x:0,y:0,z:0}})}}function dP(e,t,i){const n=i.scale;t.position.x=e.pose.position.x*n,t.position.y=-e.pose.position.y*n;let s=t.getChildByName("invisibleBall"),r=t.getChildByName("visibleBall");s&&(s.visible=!e.visible),r&&(r.visible=e.visible)}function fP(e,t,i){const n=i.scale,s=new Xt;s.name="invisibleBall";const r=new Xt;r.name="visibleBall",s.beginFill("orange",0),s.lineStyle(2,"orange",1),s.drawCircle(0,0,.022*n),r.beginFill("orange",1),r.lineStyle(2,"orange",0),r.drawCircle(0,0,.022*n),t.addChild(s),t.addChild(r),t.position.x=e.pose.position.x*n,t.position.y=-e.pose.position.y*n}var J0={},Vl={};Vl.byteLength=gP;Vl.toByteArray=yP;Vl.fromByteArray=xP;var zi=[],oi=[],pP=typeof Uint8Array<"u"?Uint8Array:Array,Eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var zs=0,mP=Eu.length;zs<mP;++zs)zi[zs]=Eu[zs],oi[Eu.charCodeAt(zs)]=zs;oi["-".charCodeAt(0)]=62;oi["_".charCodeAt(0)]=63;function Q0(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var n=i===t?0:4-i%4;return[i,n]}function gP(e){var t=Q0(e),i=t[0],n=t[1];return(i+n)*3/4-n}function vP(e,t,i){return(t+i)*3/4-i}function yP(e){var t,i=Q0(e),n=i[0],s=i[1],r=new pP(vP(e,n,s)),o=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)t=oi[e.charCodeAt(l)]<<18|oi[e.charCodeAt(l+1)]<<12|oi[e.charCodeAt(l+2)]<<6|oi[e.charCodeAt(l+3)],r[o++]=t>>16&255,r[o++]=t>>8&255,r[o++]=t&255;return s===2&&(t=oi[e.charCodeAt(l)]<<2|oi[e.charCodeAt(l+1)]>>4,r[o++]=t&255),s===1&&(t=oi[e.charCodeAt(l)]<<10|oi[e.charCodeAt(l+1)]<<4|oi[e.charCodeAt(l+2)]>>2,r[o++]=t>>8&255,r[o++]=t&255),r}function _P(e){return zi[e>>18&63]+zi[e>>12&63]+zi[e>>6&63]+zi[e&63]}function bP(e,t,i){for(var n,s=[],r=t;r<i;r+=3)n=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(e[r+2]&255),s.push(_P(n));return s.join("")}function xP(e){for(var t,i=e.length,n=i%3,s=[],r=16383,o=0,a=i-n;o<a;o+=r)s.push(bP(e,o,o+r>a?a:o+r));return n===1?(t=e[i-1],s.push(zi[t>>2]+zi[t<<4&63]+"==")):n===2&&(t=(e[i-2]<<8)+e[i-1],s.push(zi[t>>10]+zi[t>>4&63]+zi[t<<2&63]+"=")),s.join("")}var Ld={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ld.read=function(e,t,i,n,s){var r,o,a=s*8-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?s-1:0,d=i?-1:1,f=e[t+h];for(h+=d,r=f&(1<<-u)-1,f>>=-u,u+=a;u>0;r=r*256+e[t+h],h+=d,u-=8);for(o=r&(1<<-u)-1,r>>=-u,u+=n;u>0;o=o*256+e[t+h],h+=d,u-=8);if(r===0)r=1-c;else{if(r===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-c}return(f?-1:1)*o*Math.pow(2,r-n)};Ld.write=function(e,t,i,n,s,r){var o,a,l,c=r*8-s-1,u=(1<<c)-1,h=u>>1,d=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:r-1,p=n?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,s),o=o+h):(a=t*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;e[i+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;e[i+f]=o&255,f+=p,o/=256,c-=8);e[i+f-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Vl,i=Ld,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=x,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=r(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{const T=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(T,m),T.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(T){if(T>s)throw new RangeError('The value "'+T+'" is invalid for option "size"');const m=new Uint8Array(T);return Object.setPrototypeOf(m,a.prototype),m}function a(T,m,v){if(typeof T=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(T)}return l(T,m,v)}a.poolSize=8192;function l(T,m,v){if(typeof T=="string")return d(T,m);if(ArrayBuffer.isView(T))return p(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(me(T,ArrayBuffer)||T&&me(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(T,SharedArrayBuffer)||T&&me(T.buffer,SharedArrayBuffer)))return g(T,m,v);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const P=T.valueOf&&T.valueOf();if(P!=null&&P!==T)return a.from(P,m,v);const z=y(T);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return a.from(T[Symbol.toPrimitive]("string"),m,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}a.from=function(T,m,v){return l(T,m,v)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function u(T,m,v){return c(T),T<=0?o(T):m!==void 0?typeof v=="string"?o(T).fill(m,v):o(T).fill(m):o(T)}a.alloc=function(T,m,v){return u(T,m,v)};function h(T){return c(T),o(T<0?0:w(T)|0)}a.allocUnsafe=function(T){return h(T)},a.allocUnsafeSlow=function(T){return h(T)};function d(T,m){if((typeof m!="string"||m==="")&&(m="utf8"),!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const v=_(T,m)|0;let P=o(v);const z=P.write(T,m);return z!==v&&(P=P.slice(0,z)),P}function f(T){const m=T.length<0?0:w(T.length)|0,v=o(m);for(let P=0;P<m;P+=1)v[P]=T[P]&255;return v}function p(T){if(me(T,Uint8Array)){const m=new Uint8Array(T);return g(m.buffer,m.byteOffset,m.byteLength)}return f(T)}function g(T,m,v){if(m<0||T.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<m+(v||0))throw new RangeError('"length" is outside of buffer bounds');let P;return m===void 0&&v===void 0?P=new Uint8Array(T):v===void 0?P=new Uint8Array(T,m):P=new Uint8Array(T,m,v),Object.setPrototypeOf(P,a.prototype),P}function y(T){if(a.isBuffer(T)){const m=w(T.length)|0,v=o(m);return v.length===0||T.copy(v,0,0,m),v}if(T.length!==void 0)return typeof T.length!="number"||ge(T.length)?o(0):f(T);if(T.type==="Buffer"&&Array.isArray(T.data))return f(T.data)}function w(T){if(T>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return T|0}function x(T){return+T!=T&&(T=0),a.alloc(+T)}a.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==a.prototype},a.compare=function(m,v){if(me(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),me(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),!a.isBuffer(m)||!a.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===v)return 0;let P=m.length,z=v.length;for(let Z=0,te=Math.min(P,z);Z<te;++Z)if(m[Z]!==v[Z]){P=m[Z],z=v[Z];break}return P<z?-1:z<P?1:0},a.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(m,v){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return a.alloc(0);let P;if(v===void 0)for(v=0,P=0;P<m.length;++P)v+=m[P].length;const z=a.allocUnsafe(v);let Z=0;for(P=0;P<m.length;++P){let te=m[P];if(me(te,Uint8Array))Z+te.length>z.length?(a.isBuffer(te)||(te=a.from(te)),te.copy(z,Z)):Uint8Array.prototype.set.call(z,te,Z);else if(a.isBuffer(te))te.copy(z,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=te.length}return z};function _(T,m){if(a.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||me(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const v=T.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&v===0)return 0;let z=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return ae(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return de(T).length;default:if(z)return P?-1:ae(T).length;m=(""+m).toLowerCase(),z=!0}}a.byteLength=_;function C(T,m,v){let P=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,m>>>=0,v<=m))return"";for(T||(T="utf8");;)switch(T){case"hex":return A(this,m,v);case"utf8":case"utf-8":return O(this,m,v);case"ascii":return W(this,m,v);case"latin1":case"binary":return S(this,m,v);case"base64":return F(this,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,m,v);default:if(P)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),P=!0}}a.prototype._isBuffer=!0;function k(T,m,v){const P=T[m];T[m]=T[v],T[v]=P}a.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<m;v+=2)k(this,v,v+1);return this},a.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<m;v+=4)k(this,v,v+3),k(this,v+1,v+2);return this},a.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<m;v+=8)k(this,v,v+7),k(this,v+1,v+6),k(this,v+2,v+5),k(this,v+3,v+4);return this},a.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?O(this,0,m):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(m){if(!a.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:a.compare(this,m)===0},a.prototype.inspect=function(){let m="";const v=e.INSPECT_MAX_BYTES;return m=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(m+=" ... "),"<Buffer "+m+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(m,v,P,z,Z){if(me(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(v===void 0&&(v=0),P===void 0&&(P=m?m.length:0),z===void 0&&(z=0),Z===void 0&&(Z=this.length),v<0||P>m.length||z<0||Z>this.length)throw new RangeError("out of range index");if(z>=Z&&v>=P)return 0;if(z>=Z)return-1;if(v>=P)return 1;if(v>>>=0,P>>>=0,z>>>=0,Z>>>=0,this===m)return 0;let te=Z-z,Ve=P-v;const ze=Math.min(te,Ve),Ye=this.slice(z,Z),rt=m.slice(v,P);for(let st=0;st<ze;++st)if(Ye[st]!==rt[st]){te=Ye[st],Ve=rt[st];break}return te<Ve?-1:Ve<te?1:0};function V(T,m,v,P,z){if(T.length===0)return-1;if(typeof v=="string"?(P=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,ge(v)&&(v=z?0:T.length-1),v<0&&(v=T.length+v),v>=T.length){if(z)return-1;v=T.length-1}else if(v<0)if(z)v=0;else return-1;if(typeof m=="string"&&(m=a.from(m,P)),a.isBuffer(m))return m.length===0?-1:L(T,m,v,P,z);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(T,m,v):Uint8Array.prototype.lastIndexOf.call(T,m,v):L(T,[m],v,P,z);throw new TypeError("val must be string, number or Buffer")}function L(T,m,v,P,z){let Z=1,te=T.length,Ve=m.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(T.length<2||m.length<2)return-1;Z=2,te/=2,Ve/=2,v/=2}function ze(rt,st){return Z===1?rt[st]:rt.readUInt16BE(st*Z)}let Ye;if(z){let rt=-1;for(Ye=v;Ye<te;Ye++)if(ze(T,Ye)===ze(m,rt===-1?0:Ye-rt)){if(rt===-1&&(rt=Ye),Ye-rt+1===Ve)return rt*Z}else rt!==-1&&(Ye-=Ye-rt),rt=-1}else for(v+Ve>te&&(v=te-Ve),Ye=v;Ye>=0;Ye--){let rt=!0;for(let st=0;st<Ve;st++)if(ze(T,Ye+st)!==ze(m,st)){rt=!1;break}if(rt)return Ye}return-1}a.prototype.includes=function(m,v,P){return this.indexOf(m,v,P)!==-1},a.prototype.indexOf=function(m,v,P){return V(this,m,v,P,!0)},a.prototype.lastIndexOf=function(m,v,P){return V(this,m,v,P,!1)};function M(T,m,v,P){v=Number(v)||0;const z=T.length-v;P?(P=Number(P),P>z&&(P=z)):P=z;const Z=m.length;P>Z/2&&(P=Z/2);let te;for(te=0;te<P;++te){const Ve=parseInt(m.substr(te*2,2),16);if(ge(Ve))return te;T[v+te]=Ve}return te}function G(T,m,v,P){return oe(ae(m,T.length-v),T,v,P)}function j(T,m,v,P){return oe(ce(m),T,v,P)}function B(T,m,v,P){return oe(de(m),T,v,P)}function R(T,m,v,P){return oe(re(m,T.length-v),T,v,P)}a.prototype.write=function(m,v,P,z){if(v===void 0)z="utf8",P=this.length,v=0;else if(P===void 0&&typeof v=="string")z=v,P=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(P)?(P=P>>>0,z===void 0&&(z="utf8")):(z=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-v;if((P===void 0||P>Z)&&(P=Z),m.length>0&&(P<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let te=!1;for(;;)switch(z){case"hex":return M(this,m,v,P);case"utf8":case"utf-8":return G(this,m,v,P);case"ascii":case"latin1":case"binary":return j(this,m,v,P);case"base64":return B(this,m,v,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,m,v,P);default:if(te)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(T,m,v){return m===0&&v===T.length?t.fromByteArray(T):t.fromByteArray(T.slice(m,v))}function O(T,m,v){v=Math.min(T.length,v);const P=[];let z=m;for(;z<v;){const Z=T[z];let te=null,Ve=Z>239?4:Z>223?3:Z>191?2:1;if(z+Ve<=v){let ze,Ye,rt,st;switch(Ve){case 1:Z<128&&(te=Z);break;case 2:ze=T[z+1],(ze&192)===128&&(st=(Z&31)<<6|ze&63,st>127&&(te=st));break;case 3:ze=T[z+1],Ye=T[z+2],(ze&192)===128&&(Ye&192)===128&&(st=(Z&15)<<12|(ze&63)<<6|Ye&63,st>2047&&(st<55296||st>57343)&&(te=st));break;case 4:ze=T[z+1],Ye=T[z+2],rt=T[z+3],(ze&192)===128&&(Ye&192)===128&&(rt&192)===128&&(st=(Z&15)<<18|(ze&63)<<12|(Ye&63)<<6|rt&63,st>65535&&st<1114112&&(te=st))}}te===null?(te=65533,Ve=1):te>65535&&(te-=65536,P.push(te>>>10&1023|55296),te=56320|te&1023),P.push(te),z+=Ve}return X(P)}const q=4096;function X(T){const m=T.length;if(m<=q)return String.fromCharCode.apply(String,T);let v="",P=0;for(;P<m;)v+=String.fromCharCode.apply(String,T.slice(P,P+=q));return v}function W(T,m,v){let P="";v=Math.min(T.length,v);for(let z=m;z<v;++z)P+=String.fromCharCode(T[z]&127);return P}function S(T,m,v){let P="";v=Math.min(T.length,v);for(let z=m;z<v;++z)P+=String.fromCharCode(T[z]);return P}function A(T,m,v){const P=T.length;(!m||m<0)&&(m=0),(!v||v<0||v>P)&&(v=P);let z="";for(let Z=m;Z<v;++Z)z+=Ce[T[Z]];return z}function E(T,m,v){const P=T.slice(m,v);let z="";for(let Z=0;Z<P.length-1;Z+=2)z+=String.fromCharCode(P[Z]+P[Z+1]*256);return z}a.prototype.slice=function(m,v){const P=this.length;m=~~m,v=v===void 0?P:~~v,m<0?(m+=P,m<0&&(m=0)):m>P&&(m=P),v<0?(v+=P,v<0&&(v=0)):v>P&&(v=P),v<m&&(v=m);const z=this.subarray(m,v);return Object.setPrototypeOf(z,a.prototype),z};function I(T,m,v){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+m>v)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(m,v,P){m=m>>>0,v=v>>>0,P||I(m,v,this.length);let z=this[m],Z=1,te=0;for(;++te<v&&(Z*=256);)z+=this[m+te]*Z;return z},a.prototype.readUintBE=a.prototype.readUIntBE=function(m,v,P){m=m>>>0,v=v>>>0,P||I(m,v,this.length);let z=this[m+--v],Z=1;for(;v>0&&(Z*=256);)z+=this[m+--v]*Z;return z},a.prototype.readUint8=a.prototype.readUInt8=function(m,v){return m=m>>>0,v||I(m,1,this.length),this[m]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(m,v){return m=m>>>0,v||I(m,2,this.length),this[m]|this[m+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(m,v){return m=m>>>0,v||I(m,2,this.length),this[m]<<8|this[m+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(m,v){return m=m>>>0,v||I(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(m,v){return m=m>>>0,v||I(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},a.prototype.readBigUInt64LE=Ae(function(m){m=m>>>0,H(m,"offset");const v=this[m],P=this[m+7];(v===void 0||P===void 0)&&K(m,this.length-8);const z=v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,Z=this[++m]+this[++m]*2**8+this[++m]*2**16+P*2**24;return BigInt(z)+(BigInt(Z)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ae(function(m){m=m>>>0,H(m,"offset");const v=this[m],P=this[m+7];(v===void 0||P===void 0)&&K(m,this.length-8);const z=v*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],Z=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+P;return(BigInt(z)<<BigInt(32))+BigInt(Z)}),a.prototype.readIntLE=function(m,v,P){m=m>>>0,v=v>>>0,P||I(m,v,this.length);let z=this[m],Z=1,te=0;for(;++te<v&&(Z*=256);)z+=this[m+te]*Z;return Z*=128,z>=Z&&(z-=Math.pow(2,8*v)),z},a.prototype.readIntBE=function(m,v,P){m=m>>>0,v=v>>>0,P||I(m,v,this.length);let z=v,Z=1,te=this[m+--z];for(;z>0&&(Z*=256);)te+=this[m+--z]*Z;return Z*=128,te>=Z&&(te-=Math.pow(2,8*v)),te},a.prototype.readInt8=function(m,v){return m=m>>>0,v||I(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},a.prototype.readInt16LE=function(m,v){m=m>>>0,v||I(m,2,this.length);const P=this[m]|this[m+1]<<8;return P&32768?P|4294901760:P},a.prototype.readInt16BE=function(m,v){m=m>>>0,v||I(m,2,this.length);const P=this[m+1]|this[m]<<8;return P&32768?P|4294901760:P},a.prototype.readInt32LE=function(m,v){return m=m>>>0,v||I(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},a.prototype.readInt32BE=function(m,v){return m=m>>>0,v||I(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},a.prototype.readBigInt64LE=Ae(function(m){m=m>>>0,H(m,"offset");const v=this[m],P=this[m+7];(v===void 0||P===void 0)&&K(m,this.length-8);const z=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(P<<24);return(BigInt(z)<<BigInt(32))+BigInt(v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),a.prototype.readBigInt64BE=Ae(function(m){m=m>>>0,H(m,"offset");const v=this[m],P=this[m+7];(v===void 0||P===void 0)&&K(m,this.length-8);const z=(v<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(z)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+P)}),a.prototype.readFloatLE=function(m,v){return m=m>>>0,v||I(m,4,this.length),i.read(this,m,!0,23,4)},a.prototype.readFloatBE=function(m,v){return m=m>>>0,v||I(m,4,this.length),i.read(this,m,!1,23,4)},a.prototype.readDoubleLE=function(m,v){return m=m>>>0,v||I(m,8,this.length),i.read(this,m,!0,52,8)},a.prototype.readDoubleBE=function(m,v){return m=m>>>0,v||I(m,8,this.length),i.read(this,m,!1,52,8)};function U(T,m,v,P,z,Z){if(!a.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>z||m<Z)throw new RangeError('"value" argument is out of bounds');if(v+P>T.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(m,v,P,z){if(m=+m,v=v>>>0,P=P>>>0,!z){const Ve=Math.pow(2,8*P)-1;U(this,m,v,P,Ve,0)}let Z=1,te=0;for(this[v]=m&255;++te<P&&(Z*=256);)this[v+te]=m/Z&255;return v+P},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(m,v,P,z){if(m=+m,v=v>>>0,P=P>>>0,!z){const Ve=Math.pow(2,8*P)-1;U(this,m,v,P,Ve,0)}let Z=P-1,te=1;for(this[v+Z]=m&255;--Z>=0&&(te*=256);)this[v+Z]=m/te&255;return v+P},a.prototype.writeUint8=a.prototype.writeUInt8=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,1,255,0),this[v]=m&255,v+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,2,65535,0),this[v]=m&255,this[v+1]=m>>>8,v+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,2,65535,0),this[v]=m>>>8,this[v+1]=m&255,v+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,4,4294967295,0),this[v+3]=m>>>24,this[v+2]=m>>>16,this[v+1]=m>>>8,this[v]=m&255,v+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,4,4294967295,0),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4};function Y(T,m,v,P,z){D(m,P,z,T,v,7);let Z=Number(m&BigInt(4294967295));T[v++]=Z,Z=Z>>8,T[v++]=Z,Z=Z>>8,T[v++]=Z,Z=Z>>8,T[v++]=Z;let te=Number(m>>BigInt(32)&BigInt(4294967295));return T[v++]=te,te=te>>8,T[v++]=te,te=te>>8,T[v++]=te,te=te>>8,T[v++]=te,v}function J(T,m,v,P,z){D(m,P,z,T,v,7);let Z=Number(m&BigInt(4294967295));T[v+7]=Z,Z=Z>>8,T[v+6]=Z,Z=Z>>8,T[v+5]=Z,Z=Z>>8,T[v+4]=Z;let te=Number(m>>BigInt(32)&BigInt(4294967295));return T[v+3]=te,te=te>>8,T[v+2]=te,te=te>>8,T[v+1]=te,te=te>>8,T[v]=te,v+8}a.prototype.writeBigUInt64LE=Ae(function(m,v=0){return Y(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ae(function(m,v=0){return J(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(m,v,P,z){if(m=+m,v=v>>>0,!z){const ze=Math.pow(2,8*P-1);U(this,m,v,P,ze-1,-ze)}let Z=0,te=1,Ve=0;for(this[v]=m&255;++Z<P&&(te*=256);)m<0&&Ve===0&&this[v+Z-1]!==0&&(Ve=1),this[v+Z]=(m/te>>0)-Ve&255;return v+P},a.prototype.writeIntBE=function(m,v,P,z){if(m=+m,v=v>>>0,!z){const ze=Math.pow(2,8*P-1);U(this,m,v,P,ze-1,-ze)}let Z=P-1,te=1,Ve=0;for(this[v+Z]=m&255;--Z>=0&&(te*=256);)m<0&&Ve===0&&this[v+Z+1]!==0&&(Ve=1),this[v+Z]=(m/te>>0)-Ve&255;return v+P},a.prototype.writeInt8=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,1,127,-128),m<0&&(m=255+m+1),this[v]=m&255,v+1},a.prototype.writeInt16LE=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,2,32767,-32768),this[v]=m&255,this[v+1]=m>>>8,v+2},a.prototype.writeInt16BE=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,2,32767,-32768),this[v]=m>>>8,this[v+1]=m&255,v+2},a.prototype.writeInt32LE=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,4,2147483647,-2147483648),this[v]=m&255,this[v+1]=m>>>8,this[v+2]=m>>>16,this[v+3]=m>>>24,v+4},a.prototype.writeInt32BE=function(m,v,P){return m=+m,v=v>>>0,P||U(this,m,v,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4},a.prototype.writeBigInt64LE=Ae(function(m,v=0){return Y(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ae(function(m,v=0){return J(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(T,m,v,P,z,Z){if(v+P>T.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function $(T,m,v,P,z){return m=+m,v=v>>>0,z||ee(T,m,v,4),i.write(T,m,v,P,23,4),v+4}a.prototype.writeFloatLE=function(m,v,P){return $(this,m,v,!0,P)},a.prototype.writeFloatBE=function(m,v,P){return $(this,m,v,!1,P)};function Q(T,m,v,P,z){return m=+m,v=v>>>0,z||ee(T,m,v,8),i.write(T,m,v,P,52,8),v+8}a.prototype.writeDoubleLE=function(m,v,P){return Q(this,m,v,!0,P)},a.prototype.writeDoubleBE=function(m,v,P){return Q(this,m,v,!1,P)},a.prototype.copy=function(m,v,P,z){if(!a.isBuffer(m))throw new TypeError("argument should be a Buffer");if(P||(P=0),!z&&z!==0&&(z=this.length),v>=m.length&&(v=m.length),v||(v=0),z>0&&z<P&&(z=P),z===P||m.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),m.length-v<z-P&&(z=m.length-v+P);const Z=z-P;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,P,z):Uint8Array.prototype.set.call(m,this.subarray(P,z),v),Z},a.prototype.fill=function(m,v,P,z){if(typeof m=="string"){if(typeof v=="string"?(z=v,v=0,P=this.length):typeof P=="string"&&(z=P,P=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!a.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(m.length===1){const te=m.charCodeAt(0);(z==="utf8"&&te<128||z==="latin1")&&(m=te)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(v<0||this.length<v||this.length<P)throw new RangeError("Out of range index");if(P<=v)return this;v=v>>>0,P=P===void 0?this.length:P>>>0,m||(m=0);let Z;if(typeof m=="number")for(Z=v;Z<P;++Z)this[Z]=m;else{const te=a.isBuffer(m)?m:a.from(m,z),Ve=te.length;if(Ve===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(Z=0;Z<P-v;++Z)this[Z+v]=te[Z%Ve]}return this};const he={};function Fe(T,m,v){he[T]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:z,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}Fe("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Fe("ERR_INVALID_ARG_TYPE",function(T,m){return`The "${T}" argument must be of type number. Received type ${typeof m}`},TypeError),Fe("ERR_OUT_OF_RANGE",function(T,m,v){let P=`The value of "${T}" is out of range.`,z=v;return Number.isInteger(v)&&Math.abs(v)>2**32?z=Te(String(v)):typeof v=="bigint"&&(z=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(z=Te(z)),z+="n"),P+=` It must be ${m}. Received ${z}`,P},RangeError);function Te(T){let m="",v=T.length;const P=T[0]==="-"?1:0;for(;v>=P+4;v-=3)m=`_${T.slice(v-3,v)}${m}`;return`${T.slice(0,v)}${m}`}function ve(T,m,v){H(m,"offset"),(T[m]===void 0||T[m+v]===void 0)&&K(m,T.length-(v+1))}function D(T,m,v,P,z,Z){if(T>v||T<m){const te=typeof m=="bigint"?"n":"";let Ve;throw Z>3?m===0||m===BigInt(0)?Ve=`>= 0${te} and < 2${te} ** ${(Z+1)*8}${te}`:Ve=`>= -(2${te} ** ${(Z+1)*8-1}${te}) and < 2 ** ${(Z+1)*8-1}${te}`:Ve=`>= ${m}${te} and <= ${v}${te}`,new he.ERR_OUT_OF_RANGE("value",Ve,T)}ve(P,z,Z)}function H(T,m){if(typeof T!="number")throw new he.ERR_INVALID_ARG_TYPE(m,"number",T)}function K(T,m,v){throw Math.floor(T)!==T?(H(T,v),new he.ERR_OUT_OF_RANGE(v||"offset","an integer",T)):m<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${m}`,T)}const ie=/[^+/0-9A-Za-z-_]/g;function ne(T){if(T=T.split("=")[0],T=T.trim().replace(ie,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function ae(T,m){m=m||1/0;let v;const P=T.length;let z=null;const Z=[];for(let te=0;te<P;++te){if(v=T.charCodeAt(te),v>55295&&v<57344){if(!z){if(v>56319){(m-=3)>-1&&Z.push(239,191,189);continue}else if(te+1===P){(m-=3)>-1&&Z.push(239,191,189);continue}z=v;continue}if(v<56320){(m-=3)>-1&&Z.push(239,191,189),z=v;continue}v=(z-55296<<10|v-56320)+65536}else z&&(m-=3)>-1&&Z.push(239,191,189);if(z=null,v<128){if((m-=1)<0)break;Z.push(v)}else if(v<2048){if((m-=2)<0)break;Z.push(v>>6|192,v&63|128)}else if(v<65536){if((m-=3)<0)break;Z.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((m-=4)<0)break;Z.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return Z}function ce(T){const m=[];for(let v=0;v<T.length;++v)m.push(T.charCodeAt(v)&255);return m}function re(T,m){let v,P,z;const Z=[];for(let te=0;te<T.length&&!((m-=2)<0);++te)v=T.charCodeAt(te),P=v>>8,z=v%256,Z.push(z),Z.push(P);return Z}function de(T){return t.toByteArray(ne(T))}function oe(T,m,v,P){let z;for(z=0;z<P&&!(z+v>=m.length||z>=T.length);++z)m[z+v]=T[z];return z}function me(T,m){return T instanceof m||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===m.name}function ge(T){return T!==T}const Ce=function(){const T="0123456789abcdef",m=new Array(256);for(let v=0;v<16;++v){const P=v*16;for(let z=0;z<16;++z)m[P+z]=T[v]+T[z]}return m}();function Ae(T){return typeof BigInt>"u"?We:T}function We(){throw new Error("BigInt not supported")}})(J0);var e_=(e=>(e[e.Point=0]="Point",e[e.Line=1]="Line",e[e.Rectangle=2]="Rectangle",e[e.Ellipse=3]="Ellipse",e[e.Polygon=4]="Polygon",e[e.Text=5]="Text",e[e.Heatmap=6]="Heatmap",e[e.Custom=7]="Custom",e[e.Arc=8]="Arc",e[e.Arrows=9]="Arrows",e))(e_||{});class wP{constructor(t,i,n=!1,s){this.visible=!0,this.stroke_color="black",this.fill_color="black",this.stroke_width=20,this.depth=0,this.id=t,this.checkOtherDepth=n;for(const r of Object.getOwnPropertyNames(i))r==="heatmap_data"||r=="heatmap_alpha"?this[r]=J0.Buffer.from(i[r],"base64"):this[r]=i[r];this.lifetime&&(this.lifetimeEnd=s+this.lifetime)}}function SP(e,t,i,n,s){if(e.checkOtherDepth){const o=e.depth?n:i;al(e,o),e.checkOtherDepth=!1}const r=e.depth?i:n;return TP(e,t)?(al(e,r),!0):(CP(e,r,s),!1)}function TP(e,t){return e.lifetimeEnd&&t>=e.lifetimeEnd}function al(e,t){let i=t.getChildByName(e.id);i&&(i.clear(),t.removeChild(i))}function CP(e,t,i){let n=t.getChildByName(e.id);n||(n=new Xt,n.name=e.id),n.clear();const s=i.scale;switch(n.position.x=s*e.position.x,n.position.y=-s*e.position.y,e.type){case 0:n.beginFill(e.fill_color),n.lineStyle(0,e.stroke_color),n.drawEllipse(0,0,s/30,s/30),n.endFill();break;case 1:if(e.points.length>=2){n.lineStyle(e.stroke_width,e.stroke_color),n.moveTo(s*e.points[0].x,-s*e.points[0].y);for(var r=1;r<e.points.length;r++)n.lineTo(s*e.points[r].x,-s*e.points[r].y)}break;case 2:n.beginFill(e.fill_color),n.lineStyle(e.stroke_width,e.stroke_color),n.drawRect(-s*e.scale.x/2,-s*e.scale.y/2,s*e.scale.x,s*e.scale.y),n.endFill();break;case 3:n.beginFill(e.fill_color),n.lineStyle(e.stroke_width,e.stroke_color),n.drawEllipse(0,0,s*e.scale.x/2,s*e.scale.y/2),n.endFill();break;case 4:if(e.points.length>=2){n.moveTo(s*e.points.at(-1).x,-s*e.points.at(-1).y),n.beginFill(e.fill_color),n.lineStyle(e.stroke_width,e.stroke_color);for(const a of e.points)n.lineTo(s*a.x,-s*a.y);n.endFill()}break;case 5:const o=new Tr(e.text,{fontSize:e.stroke_width,fill:e.fill_color});o.name="text",o.anchor.set(.5,.5),o.rotation=-i.angle;{let a=n.getChildByName("text");a?a=o:n.addChild(o)}break;case 6:{let a=n.getChildByName("heatmap");if(!a)return;a.width=s*e.scale.x,a.height=s*e.scale.y,a.x=-s*e.scale.x/2,a.y=-s*e.scale.y/2}break;case 7:break;case 8:n.beginFill(0,0),n.lineStyle(e.stroke_width,e.stroke_color),n.arc(0,0,s*e.scale.x/2,-e.start_angle+i.angle,-e.end_angle+i.angle,!0),n.endFill();break;case 9:n.beginFill(0,0),n.lineStyle(e.stroke_width,e.stroke_color);for(let a=0;a<e.points.length;a++){const l=e.points[a];let c=new Dy.Vector3;const u=e.scales[a];c.x=l.x+u.x,c.y=l.y+u.y,n.moveTo(s*l.x,-s*l.y),n.lineTo(s*c.x,-s*c.y);const h=.1*Math.sqrt(u.x**2+u.y**2),d=Math.atan2(u.y,u.x),f=d+Math.PI/8-Math.PI/4,p=d-Math.PI/8-Math.PI/4;n.moveTo(s*c.x,-s*c.y),n.lineTo(s*(c.x-(h*Math.cos(f)-h*Math.sin(f))),-s*(c.y-(h*Math.cos(f)+h*Math.sin(f)))),n.moveTo(s*c.x,-s*c.y),n.lineTo(s*(c.x-(h*Math.cos(p)-h*Math.sin(p))),-s*(c.y-(h*Math.cos(p)+h*Math.sin(p))))}n.endFill();break}t.addChild(n)}function EP(e,t){const n=e.heatmap_resolution_width*e.heatmap_resolution_height;let s=new Uint8Array(n*4);if(!e.heatmap_data)throw new Error("No heatmap data.");if(e.heatmap_data.length!=n)throw new Error("Heatmap data array does not have expected length.");const r=e.heatmap_alpha.length!=0,o=e.heatmap_alpha.length==n;if(r&&e.heatmap_alpha.length!=1&&!o)throw new Error("Heatmap alpha array does not have expected length.");for(let h=0;h<s.length;h+=4){const d=h/4;let f=255;o?f=e.heatmap_alpha[d]:r&&(f=e.heatmap_alpha[0]),s[h+0]=e.heatmap_data[d],s[h+1]=0,s[h+2]=0,s[h+3]=f}const a=ye.fromBuffer(s,e.heatmap_resolution_width,e.heatmap_resolution_height,{scaleMode:Xi.NEAREST}),l=e.depth?t.overlayContainer:t.underlayContainer;let c=l.getChildByName(e.id);c||(c=new Xt,c.name=e.id,l.addChild(c));let u=c.getChildByName("heatmap");u||(u=new Bs,u.name="heatmap",c.addChild(u)),u.texture=a}class fi{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var AP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IP(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t_={exports:{}};(function(e,t){(function(){var i,n;n=function(s){return e.exports=s},i={linear:function(s,r,o,a){return o*s/a+r},easeInQuad:function(s,r,o,a){return o*(s/=a)*s+r},easeOutQuad:function(s,r,o,a){return-o*(s/=a)*(s-2)+r},easeInOutQuad:function(s,r,o,a){return(s/=a/2)<1?o/2*s*s+r:-o/2*(--s*(s-2)-1)+r},easeInCubic:function(s,r,o,a){return o*(s/=a)*s*s+r},easeOutCubic:function(s,r,o,a){return o*((s=s/a-1)*s*s+1)+r},easeInOutCubic:function(s,r,o,a){return(s/=a/2)<1?o/2*s*s*s+r:o/2*((s-=2)*s*s+2)+r},easeInQuart:function(s,r,o,a){return o*(s/=a)*s*s*s+r},easeOutQuart:function(s,r,o,a){return-o*((s=s/a-1)*s*s*s-1)+r},easeInOutQuart:function(s,r,o,a){return(s/=a/2)<1?o/2*s*s*s*s+r:-o/2*((s-=2)*s*s*s-2)+r},easeInQuint:function(s,r,o,a){return o*(s/=a)*s*s*s*s+r},easeOutQuint:function(s,r,o,a){return o*((s=s/a-1)*s*s*s*s+1)+r},easeInOutQuint:function(s,r,o,a){return(s/=a/2)<1?o/2*s*s*s*s*s+r:o/2*((s-=2)*s*s*s*s+2)+r},easeInSine:function(s,r,o,a){return-o*Math.cos(s/a*(Math.PI/2))+o+r},easeOutSine:function(s,r,o,a){return o*Math.sin(s/a*(Math.PI/2))+r},easeInOutSine:function(s,r,o,a){return-o/2*(Math.cos(Math.PI*s/a)-1)+r},easeInExpo:function(s,r,o,a){return s===0?r:o*Math.pow(2,10*(s/a-1))+r},easeOutExpo:function(s,r,o,a){return s===a?r+o:o*(-Math.pow(2,-10*s/a)+1)+r},easeInOutExpo:function(s,r,o,a){return(s/=a/2)<1?o/2*Math.pow(2,10*(s-1))+r:o/2*(-Math.pow(2,-10*--s)+2)+r},easeInCirc:function(s,r,o,a){return-o*(Math.sqrt(1-(s/=a)*s)-1)+r},easeOutCirc:function(s,r,o,a){return o*Math.sqrt(1-(s=s/a-1)*s)+r},easeInOutCirc:function(s,r,o,a){return(s/=a/2)<1?-o/2*(Math.sqrt(1-s*s)-1)+r:o/2*(Math.sqrt(1-(s-=2)*s)+1)+r},easeInElastic:function(s,r,o,a){var l,c,u;return u=1.70158,c=0,l=o,s===0||(s/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(s-=1))*Math.sin((s*a-u)*(2*Math.PI)/c))+r},easeOutElastic:function(s,r,o,a){var l,c,u;return u=1.70158,c=0,l=o,s===0||(s/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*s)*Math.sin((s*a-u)*(2*Math.PI)/c)+o+r},easeInOutElastic:function(s,r,o,a){var l,c,u;return u=1.70158,c=0,l=o,s===0||(s/=a/2),c||(c=a*(.3*1.5)),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),s<1?-.5*(l*Math.pow(2,10*(s-=1))*Math.sin((s*a-u)*(2*Math.PI)/c))+r:l*Math.pow(2,-10*(s-=1))*Math.sin((s*a-u)*(2*Math.PI)/c)*.5+o+r},easeInBack:function(s,r,o,a,l){return l===void 0&&(l=1.70158),o*(s/=a)*s*((l+1)*s-l)+r},easeOutBack:function(s,r,o,a,l){return l===void 0&&(l=1.70158),o*((s=s/a-1)*s*((l+1)*s+l)+1)+r},easeInOutBack:function(s,r,o,a,l){return l===void 0&&(l=1.70158),(s/=a/2)<1?o/2*(s*s*(((l*=1.525)+1)*s-l))+r:o/2*((s-=2)*s*(((l*=1.525)+1)*s+l)+2)+r},easeInBounce:function(s,r,o,a){var l;return l=i.easeOutBounce(a-s,0,o,a),o-l+r},easeOutBounce:function(s,r,o,a){return(s/=a)<1/2.75?o*(7.5625*s*s)+r:s<2/2.75?o*(7.5625*(s-=1.5/2.75)*s+.75)+r:s<2.5/2.75?o*(7.5625*(s-=2.25/2.75)*s+.9375)+r:o*(7.5625*(s-=2.625/2.75)*s+.984375)+r},easeInOutBounce:function(s,r,o,a){var l;return s<a/2?(l=i.easeInBounce(s*2,0,o,a),l*.5+r):(l=i.easeOutBounce(s*2-a,0,o,a),l*.5+o*.5+r)}},n(i)}).call(AP)})(t_);var PP=t_.exports;const Sg=IP(PP);function Hl(e,t){if(e){if(typeof e=="function")return e;if(typeof e=="string")return Sg[e]}else return Sg[t]}const MP={removeOnInterrupt:!1,ease:"linear",time:1e3};class RP extends fi{constructor(t,i={}){super(t),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},MP,i),this.options.ease=Hl(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(this.paused)return;this.time+=t;const i=new _e(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const n=this.parent.width,s=this.parent.height;this.complete(),(n!==this.parent.width||s!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:i,type:"animate"})}else{const n=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const s=this.startWidth,r=this.deltaWidth;this.parent.fitWidth(s+r*n,this.keepCenter,this.height===null)}if(this.height!==null){const s=this.startHeight,r=this.deltaHeight;this.parent.fitHeight(s+r*n,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const s=this.startX,r=this.startY,o=this.deltaX,a=this.deltaY,l=new _e(this.parent.x,this.parent.y);this.parent.moveCenter(s+o*n,r+a*n),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:i,type:"animate"})}}}const kP={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class BP extends fi{constructor(t,i={}){super(t),this.options=Object.assign({},kP,i),this.ease=Hl(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const n=this.options.underflow.toLowerCase();n==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=n.indexOf("left")!==-1?-1:n.indexOf("right")!==-1?1:0,this.underflowY=n.indexOf("top")!==-1?-1:n.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const i=this.toX;i.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),i.time>=this.options.time?(this.parent.x=i.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(i.time,i.start,i.delta,this.options.time)}if(this.toY){const i=this.toY;i.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),i.time>=this.options.time?(this.parent.y=i.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(i.time,i.start,i.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const i=typeof t.x>"u"?0:t.x,n=typeof t.y>"u"?0:t.y,s=typeof t.width>"u"?this.parent.worldWidth:t.width,r=typeof t.height>"u"?this.parent.worldHeight:t.height;return{left:this.parent.left<i,right:this.parent.right>s,top:this.parent.top<n,bottom:this.parent.bottom>r,topLeft:new _e(i*this.parent.scale.x,n*this.parent.scale.y),bottomRight:new _e(s*this.parent.scale.x-this.parent.screenWidth,r*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new _e(0,0),bottomRight:new _e(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var t,i;if(this.paused)return;let n,s=this.parent.plugins.get("decelerate",!0);s&&(s.x||s.y)&&(s.x&&s.percentChangeX===((t=s.options)==null?void 0:t.friction)||s.y&&s.percentChangeY===((i=s.options)==null?void 0:i.friction))&&(n=this.oob(),(n.left&&this.left||n.right&&this.right)&&(s.percentChangeX=this.options.friction),(n.top&&this.top||n.bottom&&this.bottom)&&(s.percentChangeY=this.options.friction));const r=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(s=s||{},!(r!=null&&r.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!s.x||!s.y)){n=n||this.oob();const a=n.topLeft,l=n.bottomRight;if(!this.toX&&!s.x){let c=null;n.left&&this.left?c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:n.right&&this.right&&(c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),c!==null&&this.parent.x!==c&&(this.toX={time:0,start:this.parent.x,delta:c-this.parent.x,end:c},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!s.y){let c=null;n.top&&this.top?c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:n.bottom&&this.bottom&&(c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),c!==null&&this.parent.y!==c&&(this.toY={time:0,start:this.parent.y,delta:c-this.parent.y,end:c},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const FP={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class DP extends fi{constructor(t,i={}){super(t),this.options=Object.assign({},FP,i),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="none"?this.noUnderflow=!0:t==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=t.indexOf("left")!==-1?-1:t.indexOf("right")!==-1?1:0,this.underflowY=t.indexOf("top")!==-1?-1:t.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t=new _e(this.parent.x,this.parent.y),i=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let n=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,n=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,n=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,n=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,i.x=0,n=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,i.x=0,n=!0);n&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let n=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,n=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,n=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,n=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,i.y=0,n=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,i.y=0,n=!0);n&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const OP={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class LP extends fi{constructor(t,i={}){super(t),this.options=Object.assign({},OP,i),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&t<this.options.minWidth){const n=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/n,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&t>this.options.maxWidth){const n=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/n,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&i<this.options.minHeight){const n=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/n,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&i>this.options.maxHeight){const n=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/n,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},i={x:null,y:null};if(typeof this.options.minScale=="number")t.x=this.options.minScale,t.y=this.options.minScale;else if(this.options.minScale!==null){const r=this.options.minScale;t.x=typeof r.x>"u"?null:r.x,t.y=typeof r.y>"u"?null:r.y}if(typeof this.options.maxScale=="number")i.x=this.options.maxScale,i.y=this.options.maxScale;else if(this.options.maxScale!==null){const r=this.options.maxScale;i.x=typeof r.x>"u"?null:r.x,i.y=typeof r.y>"u"?null:r.y}let n=this.parent.scale.x,s=this.parent.scale.y;t.x!==null&&n<t.x&&(n=t.x),i.x!==null&&n>i.x&&(n=i.x),t.y!==null&&s<t.y&&(s=t.y),i.y!==null&&s>i.y&&(s=i.y),(n!==this.parent.scale.x||s!==this.parent.scale.y)&&(this.parent.scale.set(n,s),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const NP={friction:.98,bounce:.8,minSpeed:.01},In=16;class UP extends fi{constructor(t,i={}){super(t),this.options=Object.assign({},NP,i),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",n=>this.handleMoved(n))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(t===1||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(t){if(this.saved.length){const i=this.saved[this.saved.length-1];t.type==="clamp-x"&&t.original?i.x===t.original.x&&(i.x=this.parent.x):t.type==="clamp-y"&&t.original&&i.y===t.original.y&&(i.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const t=performance.now();for(const i of this.saved)if(i.time>=t-100){const n=t-i.time;this.x=(this.parent.x-i.x)/n,this.y=(this.parent.y-i.y)/n,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){t=t||{},typeof t.x<"u"&&(this.x=t.x,this.percentChangeX=this.options.friction),typeof t.y<"u"&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const i=this.x||this.y,n=this.timeSinceRelease,s=this.timeSinceRelease+t;if(this.x){const r=this.percentChangeX,o=Math.log(r);this.parent.x+=this.x*In/o*(Math.pow(r,s/In)-Math.pow(r,n/In)),this.x*=Math.pow(this.percentChangeX,t/In)}if(this.y){const r=this.percentChangeY,o=Math.log(r);this.parent.y+=this.y*In/o*(Math.pow(r,s/In)-Math.pow(r,n/In)),this.y*=Math.pow(this.percentChangeY,t/In)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),i&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const VP={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class HP extends fi{constructor(t,i={}){super(t),this.windowEventHandlers=[],this.options=Object.assign({},VP,i),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){const i=s=>{t.includes(s.code)&&(this.keyIsPressed=!0)},n=s=>{t.includes(s.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",n),this.addWindowEventHandler("keydown",i)}addWindowEventHandler(t,i){typeof window>"u"||(window.addEventListener(t,i),this.windowEventHandlers.push({event:t,handler:i}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:t,handler:i})=>{window.removeEventListener(t,i)})}mouseButtons(t){!t||t==="all"?this.mouse=[!0,!0,!0]:this.mouse=[t.indexOf("left")!==-1,t.indexOf("middle")!==-1,t.indexOf("right")!==-1]}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="center"?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const i=t.pointerType==="mouse",n=this.parent.input.count();return!!((n===1||n>1&&!this.parent.plugins.get("pinch",!0))&&(!i||this.mouse[t.button]))}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&t.data.pointerType==="touch"}down(t){return this.paused||!this.options.pressDrag?!1:this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.global.x,y:t.global.y},this.current=t.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const i=t.global.x,n=t.global.y,s=this.parent.input.count();if(s===1||s>1&&!this.parent.plugins.get("pinch",!0)){const r=i-this.last.x,o=n-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(r)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:i,y:n};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:t,screen:new _e(this.last.x,this.last.y),world:this.parent.toWorld(new _e(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const i=this.parent.input.touches;if(i.length===1){const n=i[0];return n.last&&(this.last={x:n.last.x,y:n.last.y},this.current=n.id),this.moved=!1,!0}else if(this.last&&this.moved){const n=new _e(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:n,world:this.parent.toWorld(n),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const i=this.parent.plugins.get("wheel",!0);if(!i||!i.options.wheelZoom&&!t.ctrlKey){const n=t.deltaMode?this.options.lineHeight:1,s=[t.deltaX,t.deltaY],[r,o]=this.options.wheelSwapAxes?s.reverse():s;return this.xDirection&&(this.parent.x+=r*n*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*n*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const GP={speed:0,acceleration:null,radius:null};class $P extends fi{constructor(t,i,n={}){super(t),this.target=i,this.options=Object.assign({},GP,n),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const i=this.parent.center;let n=this.target.x,s=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-i.y,2)+Math.pow(this.target.x-i.x,2))>this.options.radius){const a=Math.atan2(this.target.y-i.y,this.target.x-i.x);n=this.target.x-Math.cos(a)*this.options.radius,s=this.target.y-Math.sin(a)*this.options.radius}else return;const r=n-i.x,o=s-i.y;if(r||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(s-i.y,n-i.x),l=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));if(l){const c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>c?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*t,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*t,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const u=Math.cos(a)*this.velocity.x,h=Math.sin(a)*this.velocity.y,d=Math.abs(u)>Math.abs(r)?n:i.x+u,f=Math.abs(h)>Math.abs(o)?s:i.y+h;this.parent.moveCenter(d,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(s-i.y,n-i.x),l=Math.cos(a)*this.options.speed,c=Math.sin(a)*this.options.speed,u=Math.abs(l)>Math.abs(r)?n:i.x+l,h=Math.abs(c)>Math.abs(o)?s:i.y+c;this.parent.moveCenter(u,h),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(n,s),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const WP={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class zP extends fi{constructor(t,i={}){super(t),this.options=Object.assign({},WP,i),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;t!==null?(this.left=t,this.top=t,this.right=this.parent.screenWidth-t,this.bottom=this.parent.screenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused||t.pointerType!=="mouse"&&t.pointerId!==1||!this.options.allowButtons&&t.buttons!==0)return!1;const i=t.global.x,n=t.global.y;if(this.radiusSquared){const s=this.parent.toScreen(this.parent.center);if(Math.pow(s.x-i,2)+Math.pow(s.y-n,2)>=this.radiusSquared){const r=Math.atan2(s.y-n,s.x-i);this.options.linear?(this.horizontal=Math.round(Math.cos(r))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(r))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(r)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(r)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&i<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&i>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&n<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&n>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const jP={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class XP extends fi{constructor(t,i={}){super(t),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},jP,i)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const i=t.global.x,n=t.global.y,s=this.parent.input.touches;if(s.length>=2){const r=s[0],o=s[1],a=r.last&&o.last?Math.sqrt(Math.pow(o.last.x-r.last.x,2)+Math.pow(o.last.y-r.last.y,2)):null;if(r.id===t.pointerId?r.last={x:i,y:n,data:t}:o.id===t.pointerId&&(o.last={x:i,y:n,data:t}),a){let l;const c=new _e(r.last.x+(o.last.x-r.last.x)/2,r.last.y+(o.last.y-r.last.y)/2);this.options.center||(l=this.parent.toLocal(c));let u=Math.sqrt(Math.pow(o.last.x-r.last.x,2)+Math.pow(o.last.y-r.last.y,2));u=u===0?u=1e-10:u;const h=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=h),this.isAxisY()&&(this.parent.scale.y+=h),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:c});const d=this.parent.plugins.get("clamp-zoom",!0);if(d&&d.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const f=this.parent.toGlobal(l);this.parent.x+=(c.x-f.x)*this.options.factor,this.parent.y+=(c.y-f.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(c.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(c.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const YP={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class qP extends fi{constructor(t,i,n,s={}){super(t),this.options=Object.assign({},YP,s),this.ease=Hl(s.ease,"easeInOutSine"),this.x=i,this.y=n,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const i=this.snapping;i.time+=t;let n,s,r;const o=this.startX,a=this.startY,l=this.deltaX,c=this.deltaY;if(i.time>this.options.time)n=!0,s=o+l,r=a+c;else{const u=this.ease(i.time,0,1,this.options.time);s=o+l*u,r=a+c*u}this.options.topLeft?this.parent.moveCorner(s,r):this.parent.moveCenter(s,r),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),n&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const i=this.options.topLeft?this.parent.corner:this.parent.center;(i.x!==this.x||i.y!==this.y)&&this.snapStart()}}}const KP={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class ZP extends fi{constructor(t,i={}){super(t),this.options=Object.assign({},KP,i),this.ease=Hl(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):i.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,n=this.parent.screenWidth/this.xScale,s=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:i,deltaX:n-t,deltaY:s-i},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let i;if(!this.options.center&&!this.options.noMove&&(i=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const n=this.snapping;if(n.time+=t,n.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const r=this.snapping,o=this.ease(r.time,r.startX,r.deltaX,this.options.time),a=this.ease(r.time,r.startY,r.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const s=this.parent.plugins.get("clamp-zoom",!0);s&&s.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(i))}}resume(){this.snapping=null,super.resume()}}const JP={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class QP extends fi{constructor(t,i={}){super(t),this.options=Object.assign({},JP,i),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){typeof window>"u"||(window.addEventListener("keydown",i=>{t.includes(i.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",i=>{t.includes(i.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,i=this.smoothing;let n;this.options.center||(n=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=i.x),this.isAxisY()&&(this.parent.scale.y+=i.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const s=this.parent.plugins.get("clamp-zoom",!0);if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const r=this.parent.toGlobal(n);this.parent.x+=t.x-r.x,this.parent.y+=t.y-r.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const i=this.parent.input.getPointerPosition(t),n=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,s=Math.pow(2,(1+this.options.percent)*n);let r;this.options.center||(r=this.parent.toLocal(i)),this.isAxisX()&&(this.parent.scale.x*=s),this.isAxisY()&&(this.parent.scale.y*=s),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(r);this.parent.x+=i.x-a.x,this.parent.y+=i.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}wheel(t){if(this.paused||!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const i=this.parent.input.getPointerPosition(t),n=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,s=Math.pow(2,(1+this.options.percent)*n);if(this.options.smooth){const r={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+r.x)*s-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+r.y)*s-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=i}else{let r;this.options.center||(r=this.parent.toLocal(i)),this.isAxisX()&&(this.parent.scale.x*=s),this.isAxisY()&&(this.parent.scale.y*=s),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(r);this.parent.x+=i.x-a.x,this.parent.y+=i.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}class eM{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new Ne(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var t;(t=this.viewport.options.events.domElement)==null||t.removeEventListener("wheel",this.wheelFunction)}down(t){if(!(this.viewport.pause||!this.viewport.visible)){if(t.pointerType==="mouse"?this.isMouseDown=!0:this.get(t.pointerId)||this.touches.push({id:t.pointerId,last:null}),this.count()===1){this.last=t.global.clone();const i=this.viewport.plugins.get("decelerate",!0),n=this.viewport.plugins.get("bounce",!0);(!i||!i.isActive())&&(!n||!n.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.visible)return;const i=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const n=t.global.x-this.last.x,s=t.global.y-this.last.y;(this.checkThreshold(n)||this.checkThreshold(s))&&(this.clickedAvailable=!1)}i&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.visible)return;t.pointerType==="mouse"&&(this.isMouseDown=!1),t.pointerType!=="mouse"&&this.remove(t.pointerId);const i=this.viewport.plugins.up(t);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),i&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const i=new _e;return this.viewport.options.events.mapPositionToPoint(i,t.clientX,t.clientY),i}handleWheel(t){if(this.viewport.pause||!this.viewport.visible)return;const i=this.viewport.toLocal(this.getPointerPosition(t));this.viewport.left<=i.x&&i.x<=this.viewport.right&&this.viewport.top<=i.y&&i.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const i of this.touches)if(i.id===t)return i;return null}remove(t){for(let i=0;i<this.touches.length;i++)if(this.touches[i].id===t){this.touches.splice(i,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const Nr=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class tM{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,i,n=Nr.length){const s=this.plugins[t];s&&s.destroy(),this.plugins[t]=i;const r=Nr.indexOf(t);r!==-1&&Nr.splice(r,1),Nr.splice(n,0,t),this.sort()}get(t,i){var n;return i&&(n=this.plugins[t])!=null&&n.paused?null:this.plugins[t]}update(t){for(const i of this.list)i.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.list.forEach(t=>{t.destroy()}),this.plugins={},this.sort()}remove(t){var i;this.plugins[t]&&((i=this.plugins[t])==null||i.destroy(),delete this.plugins[t],this.viewport.emit("plugin-remove",t),this.sort())}pause(t){var i;(i=this.plugins[t])==null||i.pause()}resume(t){var i;(i=this.plugins[t])==null||i.resume()}sort(){this.list=[];for(const t of Nr)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let i=!1;for(const n of this.list)n.down(t)&&(i=!0);return i}move(t){let i=!1;for(const n of this.viewport.plugins.list)n.move(t)&&(i=!0);return i}up(t){let i=!1;for(const n of this.list)n.up(t)&&(i=!0);return i}wheel(t){let i=!1;for(const n of this.list)n.wheel(t)&&(i=!0);return i}}const iM={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:Mt.shared,allowPreserveDragOutside:!1};class nM extends xt{constructor(t){super(),this._disableOnContextMenu=i=>i.preventDefault(),this.options={...iM,...t},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new eM(this),this.plugins=new tM(this)}destroy(t){var i;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((i=this.options.events.domElement)==null||i.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Ne(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=typeof window>"u"?0:window.innerWidth,i=typeof window>"u"?0:window.innerHeight,n,s){this.screenWidth=t,this.screenHeight=i,typeof n<"u"&&(this._worldWidth=n),typeof s<"u"&&(this._worldHeight=s),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new Ne(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,i){return arguments.length===2?this.toLocal(new _e(t,i)):this.toLocal(t)}toScreen(t,i){return arguments.length===2?this.toGlobal(new _e(t,i)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new _e(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let i,n;typeof t[0]=="number"?(i=t[0],n=t[1]):(i=t[0].x,n=t[0].y);const s=(this.worldScreenWidth/2-i)*this.scale.x,r=(this.worldScreenHeight/2-n)*this.scale.y;return(this.x!==s||this.y!==r)&&(this.position.set(s,r),this.plugins.reset(),this.dirty=!0),this}get corner(){return new _e(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let i,n;return t.length===1?(i=-t[0].x*this.scale.x,n=-t[0].y*this.scale.y):(i=-t[0]*this.scale.x,n=-t[1]*this.scale.y),(i!==this.x||n!==this.y)&&(this.position.set(i,n),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,i){const n=this.screenWidth/t,s=this.screenHeight/i;return Math.min(n,s)}findCover(t,i){const n=this.screenWidth/t,s=this.screenHeight/i;return Math.max(n,s)}fitWidth(t=this.worldWidth,i,n=!0,s){let r;i&&(r=this.center),this.scale.x=this.screenWidth/t,n&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!s&&o&&o.clamp(),i&&r&&this.moveCenter(r),this}fitHeight(t=this.worldHeight,i,n=!0,s){let r;i&&(r=this.center),this.scale.y=this.screenHeight/t,n&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!s&&o&&o.clamp(),i&&r&&this.moveCenter(r),this}fitWorld(t){let i;t&&(i=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),t&&i&&this.moveCenter(i),this}fit(t,i=this.worldWidth,n=this.worldHeight){let s;t&&(s=this.center),this.scale.x=this.screenWidth/i,this.scale.y=this.screenHeight/n,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),t&&s&&this.moveCenter(s),this}setZoom(t,i){let n;i&&(n=this.center),this.scale.set(t);const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),i&&n&&this.moveCenter(n),this}zoomPercent(t,i){return this.setZoom(this.scale.x+this.scale.x*t,i)}zoom(t,i){return this.fitWidth(t+this.worldScreenWidth,i),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new ZP(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new _e(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new Ne(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new HP(this,t)),this}clamp(t){return this.plugins.add("clamp",new DP(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new UP(this,t)),this}bounce(t){return this.plugins.add("bounce",new BP(this,t)),this}pinch(t){return this.plugins.add("pinch",new XP(this,t)),this}snap(t,i,n){return this.plugins.add("snap",new qP(this,t,i,n)),this}follow(t,i){return this.plugins.add("follow",new $P(this,t,i)),this}wheel(t){return this.plugins.add("wheel",new QP(this,t)),this}animate(t){return this.plugins.add("animate",new RP(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new LP(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new zP(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,i,n,s,r){r&&(n>this.worldScreenWidth||s>this.worldScreenHeight)&&(this.fit(!0,n,s),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;t<this.left?(this.left=t,o=!0):t+n>this.right&&(this.right=t+n,o=!0),i<this.top?(this.top=i,o=!0):i+s>this.bottom&&(this.bottom=i+s,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}class i_{constructor(){this.length=12,this.width=9,this.border=.7,this.lineWidth=.01,this.goalWidth=1.8,this.goalDepth=.18,this.goalHeight=.16,this.penaltyShort=1.8,this.penaltyLong=3.6,this.centerRadius=.5,this.centerDiameter=1,this.goalFlat=.5,this.floorLength=13.4,this.floorWidth=10.4}}class sM{constructor(){this.overlays=new Map,this.fieldDimensions=new i_}}function n_(e,t){const i=e.world.field,n=e.renderConfig.scale;let s=t.getChildByName("ignoreOverlay");s||(s=new Xt,s.name="ignoreOverlay",s.visible=!1,t.addChild(s)),s.clear(),s.beginFill("#3b3b3bFF"),s.drawRect(0,-n*(i.fieldDimensions.width/2+i.fieldDimensions.border),n*(i.fieldDimensions.length/2+i.fieldDimensions.border),n*(i.fieldDimensions.width+2*i.fieldDimensions.border));let r=t.getChildByName("hoverOverlay");r||(r=new Xt,r.name="hoverOverlay",r.visible=!1,t.addChild(r)),r.clear(),r.beginFill("#3b3b3bBF"),r.drawRect(0,-n*(i.fieldDimensions.width/2+i.fieldDimensions.border),n*(i.fieldDimensions.length/2+i.fieldDimensions.border),n*(i.fieldDimensions.width+2*i.fieldDimensions.border))}function s_(e,t){const i=e.world.field,n=e.renderConfig.scale;t.clear();const s=8;t.lineStyle(s,0),t.drawRect(-(s/2)-n*(i.fieldDimensions.border+i.fieldDimensions.length/2),-(s/2)-n*(i.fieldDimensions.border+i.fieldDimensions.width/2),s+(i.fieldDimensions.length+2*i.fieldDimensions.border)*n,s+(i.fieldDimensions.width+2*i.fieldDimensions.border)*n)}function r_(e,t){const i=e.world.field,n=e.renderConfig.scale;t.clear(),t.lineStyle(4,16777215),t.drawRect(-n*i.fieldDimensions.length/2,-n*i.fieldDimensions.width/2,i.fieldDimensions.length*n,i.fieldDimensions.width*n),t.drawCircle(0,0,n*i.fieldDimensions.centerRadius),t.moveTo(0,-n*i.fieldDimensions.width/2),t.lineTo(0,n*i.fieldDimensions.width/2),t.moveTo(-n*i.fieldDimensions.length/2,0),t.lineTo(n*i.fieldDimensions.length/2,0);for(const s of e.world.teams.keys()){e.world.teams.get(s);const r=s==e.world.team?-1:1,o=r*n*i.fieldDimensions.length/2;t.lineStyle(4,16777215),t.moveTo(o,-n*i.fieldDimensions.penaltyLong/2),t.lineTo(o-r*n*i.fieldDimensions.penaltyShort,-n*i.fieldDimensions.penaltyLong/2),t.lineTo(o-r*n*i.fieldDimensions.penaltyShort,n*i.fieldDimensions.penaltyLong/2),t.lineTo(o,n*i.fieldDimensions.penaltyLong/2),t.lineStyle(4,s),t.moveTo(o,-n*i.fieldDimensions.goalWidth/2),t.lineTo(o+r*n*i.fieldDimensions.goalDepth,-n*i.fieldDimensions.goalWidth/2),t.lineTo(o+r*n*i.fieldDimensions.goalDepth,n*i.fieldDimensions.goalWidth/2),t.lineTo(o,n*i.fieldDimensions.goalWidth/2)}}function o_(e,t){const i=Array.from(e.world.teams.values()).map(s=>s.robots).flat();for(var n=0;n<i.length;n++)sP(i[n],t,e.renderConfig)}function rM(e,t){t.world.field;const i=new nM({screenWidth:1876,screenHeight:1456,worldWidth:1876,worldHeight:1456,passiveWheel:!1,stopPropagation:!0,disableOnContextMenu:!0,events:e.renderer.events});i.name="viewport";const n=e.screen.width/2,s=e.screen.height/2;i.position.set(n,s),e.stage.addChild(i),i.drag({mouseButtons:"left"}).pinch().wheel();const r=new xt,o=new Xt;o.name="ballVelLine",e.stage.addChild(o);const a=new Xt;a.name="fieldBoundary";const l=new Xt;l.name="fieldLines";const c=new xt;c.name="robots";const u=new xt;u.name="ball";const h=new xt;h.name="underlay",t.graphicState.underlayContainer=h;const d=new xt;d.name="overlay",t.graphicState.overlayContainer=d;const f=new xt;return f.name="fieldUI",r_(t,l),s_(t,a),n_(t,f),o_(t,c),fP(t.world.ball,u,t.renderConfig),r.addChild(l),r.addChild(a),r.addChild(h),r.addChild(c),r.addChild(u),r.addChild(d),r.addChild(f),i.addChild(r),r}function oM(e,t){const i=e.world.field,n=Array.from(e.world.teams.values()).map(o=>o.robots).flat(),s=t.getChildByName("robots").children;for(var r=0;r<n.length;r++)if(r!=e.draggedRobot){const o=s[r];nP(n[r],o,e.renderConfig)}dP(e.world.ball,t.getChildByName("ball"),e.renderConfig);for(const[o,a]of i.overlays)SP(a,e.world.timestamp,t.getChildByName("overlay"),t.getChildByName("underlay"),e.renderConfig)&&i.overlays.delete(o)}class aM{constructor(){this.name="No Play Specified",this.description='{"No Play Specified":""}'}}class lM{constructor(t,i,n=NaN){this.enabled=!0,this.name=t,this.enabled=i,this.score=n}}class cM{constructor(t){this.publishers=new Map,this.subscriptions=new Map,this.services=new Map,this.params=new Map,this.ros=new Qe.Ros({url:"ws://"+location.hostname+":9090"}),this.ros.on("connection",function(){console.log("Connected to ROS server.")}),this.ros.on("error",function(x){console.error("Error connecting to ROS server: ",x)}),this.ros.on("close",function(){console.log("Connection to ROS server closed.")});for(var i=0;i<16;i++)for(const x of t.realtimeWorld.teams.keys()){let _=new Qe.Topic({ros:this.ros,name:"/robot_feedback/connection/robot"+i,messageType:"ateam_radio_msgs/msg/ConnectionStatus"});_.subscribe(this.getRobotConnectionCallback(t.realtimeWorld,i)),this.subscriptions.set("/robot_feedback/connection/robot"+i,_);let C=new Qe.Topic({ros:this.ros,name:"/robot_feedback/basic/robot"+i,messageType:"ateam_radio_msgs/msg/BasicTelemetry"});C.subscribe(this.getRobotBasicCallback(t.realtimeWorld,i)),this.subscriptions.set("/robot_feedback/basic/robot"+i,C)}let n=new Qe.Topic({ros:this.ros,name:"/overlays",messageType:"ateam_msgs/msg/OverlayArray"});n.subscribe(this.getOverlayCallback(t)),this.subscriptions.set("overlay",n);let s=new Qe.Topic({ros:this.ros,name:"/field",messageType:"ateam_msgs/msg/FieldInfo"});s.subscribe(this.getFieldDimensionCallback(t.realtimeWorld)),this.subscriptions.set("fieldDimension",s);let r=new Qe.Topic({ros:this.ros,name:"/referee_messages",messageType:"ssl_league_msgs/msg/Referee"});r.subscribe(this.getRefereeCallback(t.realtimeWorld)),this.subscriptions.set("referee",r);let o=new Qe.Topic({ros:this.ros,name:"/play_info",messageType:"ateam_msgs/msg/PlayInfo"});o.subscribe(this.getPlayInfoCallback(t.realtimeWorld)),this.subscriptions.set("playInfo",o);let a=new Qe.Topic({ros:this.ros,name:"/kenobi_node/playbook_state",messageType:"ateam_msgs/msg/PlaybookState"});a.subscribe(this.getPlaybookCallback(t)),this.subscriptions.set("playbook",a);let l=new Qe.Topic({ros:this.ros,name:"/joystick_control_status",messageType:"ateam_msgs/msg/JoystickControlStatus"});l.subscribe(this.getJoystickStatusCallback(t)),this.subscriptions.set("joystickStatus",l);let c=new Qe.Service({ros:this.ros,name:"/team_client_node/set_desired_keeper",serviceType:"ateam_msgs/srv/SetDesiredKeeper"});this.services.set("setGoalie",c);let u=new Qe.Service({ros:this.ros,name:"/kenobi_node/set_play_enabled",serviceType:"ateam_msgs/srv/SetPlayEnabled"});this.services.set("setPlayEnabled",u);let h=new Qe.Service({ros:this.ros,name:"/kenobi_node/set_override_play",serviceType:"ateam_msgs/srv/SetOverridePlay"});this.services.set("setOverridePlay",h);let d=new Qe.Param({ros:this.ros,name:"/team_client_node:team_name"});d.get(this.getTeamNameCallback(t.realtimeWorld)),this.params.set("team_name_param",d);const f=new Qe.Param({ros:this.ros,name:"/joystick_control_node:robot_id"});this.params.set("joystick_param",f);let p=new Qe.Service({ros:this.ros,name:"/field_manager/set_ignore_field_side",serviceType:"ateam_msgs/srv/SetIgnoreFieldSide"});this.services.set("setIgnoreFieldSide",p);let g=new Qe.Service({ros:this.ros,name:"/radio_bridge/send_simulator_control_packet",serviceType:"ateam_msgs/srv/SendSimulatorControlPacket"});this.services.set("sendSimulatorControlPacket",g);let y=new Qe.Service({ros:this.ros,name:"/radio_bridge/send_power_request",serviceType:"ateam_msgs/srv/SendRobotPowerRequest"});this.services.set("sendPowerRequest",y);let w=new Qe.Service({ros:this.ros,name:"/strike_him_down",serviceType:"std_msgs/srv/Trigger"});this.services.set("sendRebootKenobiRequest",w),t.useKenobi?this.enableKenobiTopic(t):this.enableStateTopics(t)}enableKenobiTopic(t){let i=this.subscriptions.get("kenobi");i||(i=new Qe.Topic({ros:this.ros,name:"/kenobi_node/world",messageType:"ateam_msgs/msg/World"}),this.subscriptions.set("kenobi",i)),i.subscribe(this.getKenobiCallback(t))}disableKenobiTopic(t){let i=this.subscriptions.get("kenobi");i&&i.unsubscribe()}enableStateTopics(t){let i=this.subscriptions.get("ball");i||(i=new Qe.Topic({ros:this.ros,name:"/ball",messageType:"ateam_msgs/msg/BallState"}),this.subscriptions.set("ball",i)),i.subscribe(this.getBallCallback(t.realtimeWorld));for(var n=0;n<16;n++)for(const s of t.realtimeWorld.teams.keys()){let r=this.subscriptions.get("/"+s+"_team/robot"+n);r||(r=new Qe.Topic({ros:this.ros,name:"/"+s+"_team/robot"+n,messageType:"ateam_msgs/msg/RobotState"}),this.subscriptions.set("/"+s+"_team/robot"+n,r)),r.subscribe(this.getRobotCallback(t.realtimeWorld,s,n))}}disableStateTopics(t){for(var i=0;i<16;i++)for(const s of t.realtimeWorld.teams.keys()){let r=this.subscriptions.get("/"+s+"_team/robot"+i);r&&r.unsubscribe()}let n=this.subscriptions.get("ball");n&&n.unsubscribe()}getTeamNameCallback(t){return function(i){t.teamName=i,t.referee.blue.name==t.teamName?t.team=Dt.Blue:t.referee.yellow.name==t.teamName&&(t.team=Dt.Yellow)}}getKenobiCallback(t){return function(i){t.realtimeWorld.timestamp=i.current_time.sec*1e3+i.current_time.nanosec/1e6,t.realtimeWorld.fps=i.fps,t.lastTimeReceivedKenobi=Date.now(),i.balls.length>0&&(t.realtimeWorld.ball.pose=i.balls[0].pose,t.realtimeWorld.ball.visible=i.balls[0].visible);for(const n of[Dt.Blue,Dt.Yellow]){const s=n===t.realtimeWorld.team?i.our_robots:i.their_robots;for(let r=0;r<s.length;r++)t.realtimeWorld.teams.get(n).robots[r].pose=s[r].pose,t.realtimeWorld.teams.get(n).robots[r].twist=s[r].twist,t.realtimeWorld.teams.get(n).robots[r].accel=s[r].accel,t.realtimeWorld.teams.get(n).robots[r].visible=s[r].visible}t.useKenobi&&t.updateHistory()}}getBallCallback(t){return function(i){t.ball.pose=i.pose,t.ball.visible=i.visible}}getRobotCallback(t,i,n){return function(s){let r=t.teams.get(i).robots[n];r.pose=s.pose,r.twist=s.twist,r.accel=s.accel,r.visible=s.visible}}getRobotConnectionCallback(t,i){return function(n){let s=t.teams.get(t.team).robots[i];s.radio_connected=n.radio_connected}}getRobotBasicCallback(t,i){return function(n){let s=t.teams.get(t.team).robots[i];for(const r of Object.getOwnPropertyNames(n))s.status[r]=n[r]}}getOverlayCallback(t){return function(i){const n=t.graphicState.underlayContainer,s=t.graphicState.overlayContainer;for(const r of i.overlays){let o=r.ns+"/"+r.name;const a=o in t.realtimeWorld.field.overlays&&t.realtimeWorld.field.overlays.get(o).depth!=r.depth;switch(r.command){case 0:t.realtimeWorld.field.overlays.set(o,new wP(o,r,a,t.realtimeWorld.timestamp)),r.type==e_.Heatmap&&EP(t.realtimeWorld.field.overlays.get(o),t.graphicState);break;case 1:break;case 2:al(t.realtimeWorld.field.overlays.get(o),n),al(t.realtimeWorld.field.overlays.get(o),s),t.realtimeWorld.field.overlays.delete(o);break}}}}getFieldDimensionCallback(t){return function(i){let n=new i_;n.length=i.field_length,n.width=i.field_width,n.goalWidth=i.goal_width,n.goalDepth=i.goal_depth,n.border=i.boundary_width;let s=function(r){const o=r[0];let a;for(let u=1;u<r.length&&(a=r[u],!(o.x!=a.x&&o.y!=a.y));u++);const l=Math.abs(o.x-a.x),c=Math.abs(o.y-a.y);return[Math.min(l,c),Math.max(l,c)]};if(i.ours.defense_area_corners.points.length){const r=s(i.ours.defense_area_corners.points);n.penaltyShort=r[0],n.penaltyLong=r[1]}if(i.ours.goal_corners.points.length){const r=s(i.ours.goal_corners.points);n.goalDepth=r[0],n.goalWidth=r[1]}t.field.fieldDimensions=n,t.ignoreSide=i.ignore_side}}getRefereeCallback(t){return function(i){t.referee.stage=i.stage,t.referee.stage_time_left=i.stage_time_left,t.referee.command=i.command,t.referee.command_counter=i.command_counter,t.referee.command_timestamp=i.command_timestamp,t.referee.yellow=i.yellow,t.referee.blue=i.blue,t.referee.designatedPosition=i.designatedPosition,t.referee.next_command=i.next_command,t.referee.current_action_time_remaining=i.current_action_time_remaining,i.blue_team_on_positive_half.length!=0&&(t.teams.get(Dt.Blue).defending=i.blue_team_on_positive_half[0]?1:-1,t.teams.get(Dt.Yellow).defending=i.blue_team_on_positive_half[0]?-1:1),t.referee.blue.name==t.teamName?t.team=Dt.Blue:t.referee.yellow.name==t.teamName&&(t.team=Dt.Yellow)}}getPlayInfoCallback(t){return function(i){t.ai.name=i.name,t.ai.description=i.description}}getPlaybookCallback(t){return function(i){if(t.overridePlayInProgress==null?t.selectedPlayName=i.override_name:t.selectedPlayName=t.overridePlayInProgress,i.names.length>0){t.plays.clear();for(let n=0;n<i.names.length;n++)if(i.names[n]in t.plays)t.plays.get(i.names[n]).enabled=i.enableds[n],t.plays.get(i.names[n]).score=i.scores[n];else{let s=new lM(i.names[n],i.enableds[n],i.scores[n]);t.plays.set(s.name,s)}}}}getJoystickStatusCallback(t){return function(i){i.is_active?t.controlledRobot=i.active_id:t.controlledRobot=-1}}}class uM{constructor(){this.angle=0,this.scale=140}}class hM{constructor(){this.teams=new Map,this.teamName="A-Team",this.team=Dt.Blue,this.teams.set(Dt.Blue,new wg(this.teamName,Dt.Blue,-1)),this.teams.set(Dt.Yellow,new wg("Uknown",Dt.Yellow,1)),this.ball=new hP,this.field=new sM,this.referee=new lP,this.ai=new aM,this.ignoreSide=0,this.timestamp=Date.now(),this.fps=100}}class dM{constructor(){this.sslVisionContainers=new Map}}class fM{constructor(){this.worldHistory=[],this.historyEndIndex=-1,this.selectedHistoryFrame=-1,this.historyReplayIsPaused=!0,this.sim=!0,this.comp=!1,this.useKenobi=!0,this.controlledRobot=null,this.plays=new Map,this.selectedPlayName=null,this.overridePlayInProgress=null,this.hoveredFieldIgnoreSide=0,this.draggedRobot=null,this.goalieServiceStatus=[!0,""],this.renderConfig=new uM,this.graphicState=new dM,this.realtimeWorld=new hM,this.world=this.realtimeWorld,this.lastTimeReceivedKenobi=Date.now()}connectToRos(){this.rosManager=new cM(this)}updateHistory(){this.selectedHistoryFrame==-1&&(this.historyEndIndex++,this.worldHistory.length<1e5?this.worldHistory.push(structuredClone(this.realtimeWorld.__v_raw)):(this.historyEndIndex>=this.worldHistory.length&&(this.historyEndIndex=0),this.worldHistory[this.historyEndIndex]=structuredClone(this.realtimeWorld.__v_raw)))}setGoalie(t){const i=this,n=new Qe.ServiceRequest({desired_keeper:t});this.rosManager.services.get("setGoalie").callService(n,function(s){s.success?i.goalieServiceStatus=[!0,""]:i.goalieServiceStatus=[!1,s.reason]},function(s){i.goalieServiceStatus=[!1,s]})}getGoalie(){if(this.realtimeWorld.referee&&this.realtimeWorld.referee[this.realtimeWorld.team]){const t=this.realtimeWorld.referee[this.realtimeWorld.team].goalkeeper;return t==null||isNaN(t)?"X":String(t)}return"X"}setJoystickRobot(t){this.controlledRobot==t?this.controlledRobot=-1:this.controlledRobot=t,this.rosManager.params.get("joystick_param").set(this.controlledRobot,function(i){})}setPlayEnabled(t){const i=new Qe.ServiceRequest({play_name:t.name,enabled:t.enabled});this.rosManager.services.get("setPlayEnabled").callService(i,function(n){n.success||console.log("Failed to enable/disable ",t.name,": ",n.reason)})}setOverridePlay(t){const i=this,n=new Qe.ServiceRequest({play_name:t});i.overridePlayInProgress=t,this.rosManager.services.get("setOverridePlay").callService(n,function(s){i.overridePlayInProgress=null,s.success||console.log("Failed to set override play to ",t,": ",s.reason)})}setIgnoreFieldSide(t){let i=0;t>0?i=1:t<0&&(i=-1);const n=new Qe.ServiceRequest({ignore_side:i});this.rosManager.services.get("setIgnoreFieldSide").callService(n,function(s){s.success||console.error("Failed to set ignore side: ",s.reason)})}sendSimulatorControlPacket(t){const i=new Qe.ServiceRequest({simulator_control:t});this.rosManager.services.get("sendSimulatorControlPacket").callService(i,function(n){n.success||console.log("Failed to send simulator packet: ",n.reason)})}sendPowerRequest(t,i){let n=0;i=="shutdown"&&(n=1);const s=new Qe.ServiceRequest({robot_id:t,request_type:n});this.rosManager.services.get("sendPowerRequest").callService(s,function(r){r.success||console.log("Failed to send power request packet: ",r.reason)})}sendRebootKenobiRequest(){const t=new Qe.ServiceRequest({});this.rosManager.services.get("sendRebootKenobiRequest").callService(t,function(i){i.success||console.log("General Kenobi has escaped: ",i.reason)})}setUseKenobiTopic(t){t!=this.useKenobi&&(t?(this.rosManager.disableStateTopics(this),this.rosManager.enableKenobiTopic(this)):(this.rosManager.disableKenobiTopic(this),this.rosManager.enableStateTopics(this))),this.useKenobi=t}}const pM={inject:["state"],data(){return{pixi:{},fieldContainer:null,startDragPoint:null}},mounted(){let i=new Bd({width:1876,height:1456,background:"green",antialias:!0,view:this.$refs.canvas});this.pixi=Re(i),this.fieldContainer=rM(this.pixi,this.state),this.prepareRobotDragging(),this.pixi.stage.eventMode="static",this.pixi.stage.on("rightdown",this.onRightDown),window.addEventListener("keydown",function(n){if(n.key=="z"){const s=i.stage.getChildAt(0);s.setZoom(1,!1),s.moveCenter(0,0)}},!1),this.state.graphicState.fieldContainer=this.fieldContainer,this.state.graphicState.updateField=this.update},methods:{update:function(){oM(this.state,this.fieldContainer)},redraw:function(){r_(this.state,this.fieldContainer.getChildByName("fieldLines")),s_(this.state,this.fieldContainer.getChildByName("fieldBoundary")),o_(this.state,this.fieldContainer.getChildByName("robots")),n_(this.state,this.fieldContainer.getChildByName("fieldUI"))},onRightDown:function(e){const t=this.pixi.stage,i=this.pixi.stage.getChildByName("viewport"),n=this.pixi.stage.getChildByName("ballVelLine");this.startDragPoint=new _e(e.global.x,e.global.y);const s=this.startDragPoint,r=this.state.renderConfig.scale,o=this.state,a=this.getDefending;this.pixi.stage.on("pointermove",this.rightClickDrag),this.pixi.stage.on("rightup",function(u){const h=n.getChildByName("ballVelText");h&&n.removeChild(h),n.clear(),t.off("pointermove"),t.off("rightup");const d=new _e(s.x-u.global.x,s.y-u.global.y),f=new _e(d.x*Math.cos(-o.renderConfig.angle*Math.PI/180)-d.y*Math.sin(-o.renderConfig.angle*Math.PI/180),d.x*Math.sin(-o.renderConfig.angle*Math.PI/180)+d.y*Math.cos(-o.renderConfig.angle*Math.PI/180));if(Math.sqrt(f.x**2+f.y**2)/r<.05)return;let g=new _e;i.toLocal(s,null,g),g=new _e(g.x*Math.cos(-o.renderConfig.angle*Math.PI/180)-g.y*Math.sin(-o.renderConfig.angle*Math.PI/180),g.x*Math.sin(-o.renderConfig.angle*Math.PI/180)+g.y*Math.cos(-o.renderConfig.angle*Math.PI/180));const y={teleport_ball:[{pose:{position:{x:g.x*-a/r,y:-g.y/r}},twist:{linear:{x:2*f.x*-a/r,y:-2*f.y/r}},roll:!0}]};o.sendSimulatorControlPacket(y)});let l=new _e;i.toLocal(e.global,null,l),l=new _e(l.x*Math.cos(-o.renderConfig.angle*Math.PI/180)-l.y*Math.sin(-o.renderConfig.angle*Math.PI/180),l.x*Math.sin(-o.renderConfig.angle*Math.PI/180)+l.y*Math.cos(-o.renderConfig.angle*Math.PI/180)),this.state.world.ball.pose.position.x=l.x*-this.getDefending/r,this.state.world.ball.pose.position.y=-l.y/r;const c={teleport_ball:[{pose:this.state.world.ball.pose}]};this.state.sendSimulatorControlPacket(c)},rightClickDrag:function(e){this.pixi.stage.getChildAt(0);const t=this.pixi.stage.getChildByName("ballVelLine");t.clear();const i=t.getChildByName("ballVelText");i&&t.removeChild(i);let n=e.global,s=new _e;s.x=this.startDragPoint.x-n.x,s.y=this.startDragPoint.y-n.y;const r=Math.sqrt(s.x**2+s.y**2),o=this.state.renderConfig.scale;if(r/o<.05)return;const a=2*r/o;t.lineStyle(.08*o,"F7F7F750"),t.moveTo(this.startDragPoint.x,this.startDragPoint.y),t.lineTo(n.x,n.y);const l=new Tr(String(a.toFixed(2))+" m/s",{fontSize:20,fill:"F7F7F750"});l.name="ballVelText",l.anchor.set(.5,.5),l.position.x=this.startDragPoint.x+.2*o*s.x/r,l.position.y=this.startDragPoint.y+.2*o*s.y/r,t.addChild(l)},prepareRobotDragging:function(){const e=this.state,t=this.pixi.stage,i=this.pixi.stage.getChildAt(0);var n=this.getDefending;const s=Array.from(e.world.teams.values()).map(o=>o.robots).flat(),r=this.fieldContainer.getChildByName("robots").children;for(let o=0;o<s.length;o++){const a=r[o];a.on("pointerdown",function(l){a.visible&&(i.pause=!0,e.draggedRobot=o,t.on("pointerup",function(c){i.pause=!1,e.draggedRobot=null;const u=s[o];let h=new _e;i.toLocal(c.global,null,h),h=new _e(h.x*Math.cos(-e.renderConfig.angle*Math.PI/180)-h.y*Math.sin(-e.renderConfig.angle*Math.PI/180),h.x*Math.sin(-e.renderConfig.angle*Math.PI/180)+h.y*Math.cos(-e.renderConfig.angle*Math.PI/180));const d=e.renderConfig.scale;u.pose.position.x=h.x*-n/d,u.pose.position.y=-h.y/d;const f={teleport_robot:[{id:{id:[u.id],team:[{color:u.team==Dt.Yellow?1:2}]},pose:u.pose,present:!0}]};e.sendSimulatorControlPacket(f),t.off("pointerup"),t.off("pointermove")}),t.on("pointermove",function(c){let u=new _e;i.toLocal(c.global,null,u),a.position.x=u.x*Math.cos(-e.renderConfig.angle*Math.PI/180)-u.y*Math.sin(-e.renderConfig.angle*Math.PI/180),a.position.y=u.x*Math.sin(-e.renderConfig.angle*Math.PI/180)+u.y*Math.cos(-e.renderConfig.angle*Math.PI/180)}))})}}},computed:{getFieldDimensions:function(){return this.state.world.field.fieldDimensions},getDefending:function(){return this.state.world.teams.get(this.state.world.team).defending},getIgnoreFieldSide:function(){return this.state.world.ignoreSide*-this.getDefending},getHoverIgnoreSide:function(){return this.state.hoveredFieldIgnoreSide*-this.getDefending},getFieldRotation:function(){return this.state.renderConfig.angle}},watch:{getFieldDimensions:{handler(e,t){JSON.stringify(e)!=JSON.stringify(t)&&this.redraw()},deep:!0},getIgnoreFieldSide:{handler(){let e=this.fieldContainer.getChildByName("fieldUI").getChildByName("ignoreOverlay"),t=this.fieldContainer.getChildByName("fieldUI").getChildByName("hoverOverlay");t.visible=!1,this.state.world.ignoreSide==0?e.visible=!1:(e.visible=!0,e.scale.x=this.getIgnoreFieldSide)},deep:!0},getHoverIgnoreSide:{handler(){this.pixi.stage.getChildByName("viewport");let e=this.fieldContainer.getChildByName("fieldUI").getChildByName("ignoreOverlay"),t=this.fieldContainer.getChildByName("fieldUI").getChildByName("hoverOverlay");this.state.hoveredFieldIgnoreSide==0?(t.visible=!1,this.state.world.ignoreSide!=0&&(e.visible=!0)):(e.visible=!1,this.getIgnoreFieldSide!=this.getHoverIgnoreSide&&(t.visible=!0,t.scale.x=this.getHoverIgnoreSide))},deep:!0},getFieldRotation:{handler(){this.fieldContainer.angle=this.getFieldRotation,this.redraw()},deep:!1}}},Kt=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},mM={ref:"canvas",style:{width:"100%",height:"auto",display:"block"}};function gM(e,t,i,n,s,r){return He(),Ot("canvas",mM,null,512)}const vM=Kt(pM,[["render",gM]]),yM={inject:["state"],props:{robot:{type:K0,required:!0},activeDetailedMenuId:{type:Number,required:!0}},data(){return{state:qe("state"),holdStartTime:null,timeoutId:null}},methods:{startHold:function(e,t){this.holdStartTime===null&&(this.holdStartTime=performance.now()),this.timeoutId&&clearTimeout(this.timeoutId);const i=this;this.timeoutId=setTimeout(function(){i.holdStartTime=null,i.timeoutId=null,i.state.sendPowerRequest(t.id,e)},1e3)},stopHold:function(e,t){this.holdStartTime=null,this.timeoutId&&clearTimeout(this.timeoutId)}}};const Ds=le({border:[Boolean,Number,String]},"border");function Os(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn();return{borderClasses:N(()=>{const n=dt(e)?e.value:e.border,s=[];if(n===!0||n==="")s.push(`${t}--border`);else if(typeof n=="string"||n===0)for(const r of String(n).split(" "))s.push(`border-${r}`);return s})}}const _M=[null,"default","comfortable","compact"],pi=le({density:{type:String,default:"default",validator:e=>_M.includes(e)}},"density");function Li(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn();return{densityClasses:N(()=>`${t}--density-${e.density}`)}}const wn=le({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Sn(e){return{elevationClasses:N(()=>{const i=dt(e)?e.value:e.elevation,n=[];return i==null||n.push(`elevation-${i}`),n})}}const mi=le({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function gi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn();return{roundedClasses:N(()=>{const n=dt(e)?e.value:e.rounded,s=[];if(n===!0||n==="")s.push(`${t}--rounded`);else if(typeof n=="string"||n===0)for(const r of String(n).split(" "))s.push(`rounded-${r}`);return s})}}const pt=le({tag:{type:String,default:"div"}},"tag");function Nd(e){return md(()=>{const t=[],i={};return e.value.background&&(Jf(e.value.background)?i.backgroundColor=e.value.background:t.push(`bg-${e.value.background}`)),e.value.text&&(Jf(e.value.text)?(i.color=e.value.text,i.caretColor=e.value.text):t.push(`text-${e.value.text}`)),{colorClasses:t,colorStyles:i}})}function di(e,t){const i=N(()=>({text:dt(e)?e.value:t?e[t]:null})),{colorClasses:n,colorStyles:s}=Nd(i);return{textColorClasses:n,textColorStyles:s}}function gn(e,t){const i=N(()=>({background:dt(e)?e.value:t?e[t]:null})),{colorClasses:n,colorStyles:s}=Nd(i);return{backgroundColorClasses:n,backgroundColorStyles:s}}const bM=["elevated","flat","tonal","outlined","text","plain"];function Cr(e,t){return b(Xe,null,[e&&b("span",{key:"overlay",class:`${t}__overlay`},null),b("span",{key:"underlay",class:`${t}__underlay`},null)])}const Tn=le({color:String,variant:{type:String,default:"elevated",validator:e=>bM.includes(e)}},"variant");function Er(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn();const i=N(()=>{const{variant:r}=on(e);return`${t}--variant-${r}`}),{colorClasses:n,colorStyles:s}=Nd(N(()=>{const{variant:r,color:o}=on(e);return{[["elevated","flat"].includes(r)?"background":"text"]:o}}));return{colorClasses:n,colorStyles:s,variantClasses:i}}const a_=le({divided:Boolean,...Ds(),...$e(),...pi(),...wn(),...mi(),...pt(),...Tt(),...Tn()},"v-btn-group"),Tg=xe()({name:"VBtnGroup",props:a_(),setup(e,t){let{slots:i}=t;const{themeClasses:n}=Pt(e),{densityClasses:s}=Li(e),{borderClasses:r}=Os(e),{elevationClasses:o}=Sn(e),{roundedClasses:a}=gi(e);_n({VBtn:{height:"auto",color:we(e,"color"),density:we(e,"density"),flat:!0,variant:we(e,"variant")}}),Be(()=>b(e.tag,{class:["v-btn-group",{"v-btn-group--divided":e.divided},n.value,r.value,s.value,o.value,a.value,e.class],style:e.style},i))}}),Ud=le({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Vd=le({value:null,disabled:Boolean,selectedClass:String},"group-item");function Hd(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Ft("useGroupItem");if(!n)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const s=qt();Ut(Symbol.for(`${t.description}:id`),s);const r=qe(t,null);if(!r){if(!i)return r;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const o=we(e,"value"),a=N(()=>r.disabled.value||e.disabled);r.register({id:s,value:o,disabled:a},n),Fi(()=>{r.unregister(s)});const l=N(()=>r.isSelected(s)),c=N(()=>l.value&&[r.selectedClass.value,e.selectedClass]);return Ge(l,u=>{n.emit("group:selected",{value:u})}),{id:s,isSelected:l,toggle:()=>r.select(s,!l.value),select:u=>r.select(s,u),selectedClass:c,value:o,disabled:a,group:r}}function Gl(e,t){let i=!1;const n=$t([]),s=ct(e,"modelValue",[],d=>d==null?[]:l_(n,Ln(d)),d=>{const f=wM(n,d);return e.multiple?f:f[0]}),r=Ft("useGroup");function o(d,f){const p=d,g=Symbol.for(`${t.description}:id`),w=Kr(g,r==null?void 0:r.vnode).indexOf(f);w>-1?n.splice(w,0,p):n.push(p)}function a(d){if(i)return;l();const f=n.findIndex(p=>p.id===d);n.splice(f,1)}function l(){const d=n.find(f=>!f.disabled);d&&e.mandatory==="force"&&!s.value.length&&(s.value=[d.id])}Zn(()=>{l()}),Fi(()=>{i=!0});function c(d,f){const p=n.find(g=>g.id===d);if(!(f&&(p!=null&&p.disabled)))if(e.multiple){const g=s.value.slice(),y=g.findIndex(x=>x===d),w=~y;if(f=f??!w,w&&e.mandatory&&g.length<=1||!w&&e.max!=null&&g.length+1>e.max)return;y<0&&f?g.push(d):y>=0&&!f&&g.splice(y,1),s.value=g}else{const g=s.value.includes(d);if(e.mandatory&&g)return;s.value=f??!g?[d]:[]}}function u(d){if(e.multiple&&bs('This method is not supported when using "multiple" prop'),s.value.length){const f=s.value[0],p=n.findIndex(w=>w.id===f);let g=(p+d)%n.length,y=n[g];for(;y.disabled&&g!==p;)g=(g+d)%n.length,y=n[g];if(y.disabled)return;s.value=[n[g].id]}else{const f=n.find(p=>!p.disabled);f&&(s.value=[f.id])}}const h={register:o,unregister:a,selected:s,select:c,disabled:we(e,"disabled"),prev:()=>u(n.length-1),next:()=>u(1),isSelected:d=>s.value.includes(d),selectedClass:N(()=>e.selectedClass),items:N(()=>n),getItemIndex:d=>xM(n,d)};return Ut(t,h),h}function xM(e,t){const i=l_(e,[t]);return i.length?e.findIndex(n=>n.id===i[0]):-1}function l_(e,t){const i=[];for(let n=0;n<e.length;n++){const s=e[n];s.value!=null?t.find(r=>_r(r,s.value))!=null&&i.push(s.id):t.includes(n)&&i.push(s.id)}return i}function wM(e,t){const i=[];for(let n=0;n<e.length;n++){const s=e[n];t.includes(s.id)&&i.push(s.value!=null?s.value:n)}return i}const c_=Symbol.for("vuetify:v-btn-toggle"),SM=le({...a_(),...Ud()},"v-btn-toggle");xe()({name:"VBtnToggle",props:SM(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const{isSelected:n,next:s,prev:r,select:o,selected:a}=Gl(e,c_);return Be(()=>{const[l]=Tg.filterProps(e);return b(Tg,Oe({class:["v-btn-toggle",e.class]},l,{style:e.style}),{default:()=>{var c;return[(c=i.default)==null?void 0:c.call(i,{isSelected:n,next:s,prev:r,select:o,selected:a})]}})}),{next:s,prev:r,select:o}}});const TM=le({defaults:Object,disabled:Boolean,reset:[Number,String],root:Boolean,scoped:Boolean},"v-defaults-provider"),wt=xe(!1)({name:"VDefaultsProvider",props:TM(),setup(e,t){let{slots:i}=t;const{defaults:n,disabled:s,reset:r,root:o,scoped:a}=td(e);return _n(n,{reset:r,root:o,scoped:a,disabled:s}),()=>{var l;return(l=i.default)==null?void 0:l.call(i)}}});const CM=["x-small","small","default","large","x-large"],Vo=le({size:{type:[String,Number],default:"default"}},"size");function Ho(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn();return md(()=>{let i,n;return $a(CM,e.size)?i=`${t}--size-${e.size}`:e.size&&(n={width:Ie(e.size),height:Ie(e.size)}),{sizeClasses:i,sizeStyles:n}})}const EM=le({color:String,start:Boolean,end:Boolean,icon:et,...$e(),...Vo(),...pt({tag:"i"}),...Tt()},"v-icon"),tt=xe()({name:"VIcon",props:EM(),setup(e,t){let{attrs:i,slots:n}=t;const s=Pe(),{themeClasses:r}=Pt(e),{iconData:o}=hS(N(()=>s.value||e.icon)),{sizeClasses:a}=Ho(e),{textColorClasses:l,textColorStyles:c}=di(we(e,"color"));return Be(()=>{var h,d;const u=(h=n.default)==null?void 0:h.call(n);return u&&(s.value=(d=u.filter(f=>f.type===Ao&&f.children&&typeof f.children=="string")[0])==null?void 0:d.children),b(o.value.component,{tag:e.tag,icon:o.value.icon,class:["v-icon","notranslate",r.value,a.value,l.value,{"v-icon--clickable":!!i.onClick,"v-icon--start":e.start,"v-icon--end":e.end},e.class],style:[a.value?void 0:{fontSize:Ie(e.size),height:Ie(e.size),width:Ie(e.size)},c.value,e.style],role:i.onClick?"button":void 0,"aria-hidden":!i.onClick},{default:()=>[u]})}),{}}});function u_(e,t){const i=Pe(),n=Re(!1);if(bd){const s=new IntersectionObserver(r=>{e==null||e(r,s),n.value=!!r.find(o=>o.isIntersecting)},t);Fi(()=>{s.disconnect()}),Ge(i,(r,o)=>{o&&(s.unobserve(o),n.value=!1),r&&s.observe(r)},{flush:"post"})}return{intersectionRef:i,isIntersecting:n}}const AM=le({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...$e(),...Vo(),...pt({tag:"div"}),...Tt()},"v-progress-circular"),Gd=xe()({name:"VProgressCircular",props:AM(),setup(e,t){let{slots:i}=t;const n=20,s=2*Math.PI*n,r=Pe(),{themeClasses:o}=Pt(e),{sizeClasses:a,sizeStyles:l}=Ho(e),{textColorClasses:c,textColorStyles:u}=di(we(e,"color")),{textColorClasses:h,textColorStyles:d}=di(we(e,"bgColor")),{intersectionRef:f,isIntersecting:p}=u_(),{resizeRef:g,contentRect:y}=Xa(),w=N(()=>Math.max(0,Math.min(100,parseFloat(e.modelValue)))),x=N(()=>Number(e.width)),_=N(()=>l.value?Number(e.size):y.value?y.value.width:Math.max(x.value,32)),C=N(()=>n/(1-x.value/_.value)*2),k=N(()=>x.value/_.value*C.value),V=N(()=>Ie((100-w.value)/100*s));return Kn(()=>{f.value=r.value,g.value=r.value}),Be(()=>b(e.tag,{ref:r,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":p.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},o.value,a.value,c.value,e.class],style:[l.value,u.value,e.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:w.value},{default:()=>[b("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${C.value} ${C.value}`},[b("circle",{class:["v-progress-circular__underlay",h.value],style:d.value,fill:"transparent",cx:"50%",cy:"50%",r:n,"stroke-width":k.value,"stroke-dasharray":s,"stroke-dashoffset":0},null),b("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:n,"stroke-width":k.value,"stroke-dasharray":s,"stroke-dashoffset":V.value},null)]),i.default&&b("div",{class:"v-progress-circular__content"},[i.default({value:w.value})])]})),{}}});const Rh=Symbol("rippleStop"),IM=80;function Cg(e,t){e.style.transform=t,e.style.webkitTransform=t}function kh(e){return e.constructor.name==="TouchEvent"}function h_(e){return e.constructor.name==="KeyboardEvent"}const PM=function(e,t){var h;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=0,s=0;if(!h_(e)){const d=t.getBoundingClientRect(),f=kh(e)?e.touches[e.touches.length-1]:e;n=f.clientX-d.left,s=f.clientY-d.top}let r=0,o=.3;(h=t._ripple)!=null&&h.circle?(o=.15,r=t.clientWidth/2,r=i.center?r:r+Math.sqrt((n-r)**2+(s-r)**2)/4):r=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const a=`${(t.clientWidth-r*2)/2}px`,l=`${(t.clientHeight-r*2)/2}px`,c=i.center?a:`${n-r}px`,u=i.center?l:`${s-r}px`;return{radius:r,scale:o,x:c,y:u,centerX:a,centerY:l}},ll={show(e,t){var f;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((f=t==null?void 0:t._ripple)!=null&&f.enabled))return;const n=document.createElement("span"),s=document.createElement("span");n.appendChild(s),n.className="v-ripple__container",i.class&&(n.className+=` ${i.class}`);const{radius:r,scale:o,x:a,y:l,centerX:c,centerY:u}=PM(e,t,i),h=`${r*2}px`;s.className="v-ripple__animation",s.style.width=h,s.style.height=h,t.appendChild(n);const d=window.getComputedStyle(t);d&&d.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),Cg(s,`translate(${a}, ${l}) scale3d(${o},${o},${o})`),s.dataset.activated=String(performance.now()),setTimeout(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),Cg(s,`translate(${c}, ${u}) scale3d(1,1,1)`)},0)},hide(e){var r;if(!((r=e==null?void 0:e._ripple)!=null&&r.enabled))return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const i=t[t.length-1];if(i.dataset.isHiding)return;i.dataset.isHiding="true";const n=performance.now()-Number(i.dataset.activated),s=Math.max(250-n,0);setTimeout(()=>{i.classList.remove("v-ripple__animation--in"),i.classList.add("v-ripple__animation--out"),setTimeout(()=>{var a;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((a=i.parentNode)==null?void 0:a.parentNode)===e&&e.removeChild(i.parentNode)},300)},s)}};function d_(e){return typeof e>"u"||!!e}function wo(e){const t={},i=e.currentTarget;if(!(!(i!=null&&i._ripple)||i._ripple.touched||e[Rh])){if(e[Rh]=!0,kh(e))i._ripple.touched=!0,i._ripple.isTouch=!0;else if(i._ripple.isTouch)return;if(t.center=i._ripple.centered||h_(e),i._ripple.class&&(t.class=i._ripple.class),kh(e)){if(i._ripple.showTimerCommit)return;i._ripple.showTimerCommit=()=>{ll.show(e,i,t)},i._ripple.showTimer=window.setTimeout(()=>{var n;(n=i==null?void 0:i._ripple)!=null&&n.showTimerCommit&&(i._ripple.showTimerCommit(),i._ripple.showTimerCommit=null)},IM)}else ll.show(e,i,t)}}function Eg(e){e[Rh]=!0}function ei(e){const t=e.currentTarget;if(t!=null&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{ei(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),ll.hide(t)}}function f_(e){const t=e.currentTarget;t!=null&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let So=!1;function p_(e){!So&&(e.keyCode===Wf.enter||e.keyCode===Wf.space)&&(So=!0,wo(e))}function m_(e){So=!1,ei(e)}function g_(e){So&&(So=!1,ei(e))}function v_(e,t,i){const{value:n,modifiers:s}=t,r=d_(n);if(r||ll.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=r,e._ripple.centered=s.center,e._ripple.circle=s.circle,ju(n)&&n.class&&(e._ripple.class=n.class),r&&!i){if(s.stop){e.addEventListener("touchstart",Eg,{passive:!0}),e.addEventListener("mousedown",Eg);return}e.addEventListener("touchstart",wo,{passive:!0}),e.addEventListener("touchend",ei,{passive:!0}),e.addEventListener("touchmove",f_,{passive:!0}),e.addEventListener("touchcancel",ei),e.addEventListener("mousedown",wo),e.addEventListener("mouseup",ei),e.addEventListener("mouseleave",ei),e.addEventListener("keydown",p_),e.addEventListener("keyup",m_),e.addEventListener("blur",g_),e.addEventListener("dragstart",ei,{passive:!0})}else!r&&i&&y_(e)}function y_(e){e.removeEventListener("mousedown",wo),e.removeEventListener("touchstart",wo),e.removeEventListener("touchend",ei),e.removeEventListener("touchmove",f_),e.removeEventListener("touchcancel",ei),e.removeEventListener("mouseup",ei),e.removeEventListener("mouseleave",ei),e.removeEventListener("keydown",p_),e.removeEventListener("keyup",m_),e.removeEventListener("dragstart",ei),e.removeEventListener("blur",g_)}function MM(e,t){v_(e,t,!1)}function RM(e){delete e._ripple,y_(e)}function kM(e,t){if(t.value===t.oldValue)return;const i=d_(t.oldValue);v_(e,t,i)}const Ar={mounted:MM,unmounted:RM,updated:kM},Ls=le({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Ns(e){return{dimensionStyles:N(()=>({height:Ie(e.height),maxHeight:Ie(e.maxHeight),maxWidth:Ie(e.maxWidth),minHeight:Ie(e.minHeight),minWidth:Ie(e.minWidth),width:Ie(e.width)}))}}const Ag={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},$l=le({location:String},"location");function Wl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;const{isRtl:n}=Di();return{locationStyles:N(()=>{if(!e.location)return{};const{side:r,align:o}=Xu(e.location.split(" ").length>1?e.location:`${e.location} center`,n.value);function a(c){return i?i(c):0}const l={};return r!=="center"&&(t?l[Ag[r]]=`calc(100% - ${a(r)}px)`:l[r]=0),o!=="center"?t?l[Ag[o]]=`calc(100% - ${a(o)}px)`:l[o]=0:(r==="center"?l.top=l.left="50%":l[{top:"left",bottom:"left",left:"top",right:"top"}[r]]="50%",l.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[r]),l})}}const BM=le({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...$e(),...$l({location:"top"}),...mi(),...pt(),...Tt()},"v-progress-linear"),FM=xe()({name:"VProgressLinear",props:BM(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const n=ct(e,"modelValue"),{isRtl:s,rtlClasses:r}=Di(),{themeClasses:o}=Pt(e),{locationStyles:a}=Wl(e),{textColorClasses:l,textColorStyles:c}=di(e,"color"),{backgroundColorClasses:u,backgroundColorStyles:h}=gn(N(()=>e.bgColor||e.color)),{backgroundColorClasses:d,backgroundColorStyles:f}=gn(e,"color"),{roundedClasses:p}=gi(e),{intersectionRef:g,isIntersecting:y}=u_(),w=N(()=>parseInt(e.max,10)),x=N(()=>parseInt(e.height,10)),_=N(()=>parseFloat(e.bufferValue)/w.value*100),C=N(()=>parseFloat(n.value)/w.value*100),k=N(()=>s.value!==e.reverse),V=N(()=>e.indeterminate?"fade-transition":"slide-x-transition"),L=N(()=>e.bgOpacity==null?e.bgOpacity:parseFloat(e.bgOpacity));function M(G){if(!g.value)return;const{left:j,right:B,width:R}=g.value.getBoundingClientRect(),F=k.value?R-G.clientX+(B-R):G.clientX-j;n.value=Math.round(F/R*w.value)}return Be(()=>b(e.tag,{ref:g,class:["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&y.value,"v-progress-linear--reverse":k.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},p.value,o.value,r.value,e.class],style:[{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Ie(x.value):0,"--v-progress-linear-height":Ie(x.value),...a.value},e.style],role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:C.value,onClick:e.clickable&&M},{default:()=>[e.stream&&b("div",{key:"stream",class:["v-progress-linear__stream",l.value],style:{...c.value,[k.value?"left":"right"]:Ie(-x.value),borderTop:`${Ie(x.value/2)} dotted`,opacity:L.value,top:`calc(50% - ${Ie(x.value/4)})`,width:Ie(100-_.value,"%"),"--v-progress-linear-stream-to":Ie(x.value*(k.value?1:-1))}},null),b("div",{class:["v-progress-linear__background",u.value],style:[h.value,{opacity:L.value,width:Ie(e.stream?_.value:100,"%")}]},null),b(fn,{name:V.value},{default:()=>[e.indeterminate?b("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(G=>b("div",{key:G,class:["v-progress-linear__indeterminate",G,d.value],style:f.value},null))]):b("div",{class:["v-progress-linear__determinate",d.value],style:[f.value,{width:Ie(C.value,"%")}]},null)]}),i.default&&b("div",{class:"v-progress-linear__content"},[i.default({value:C.value,buffer:_.value})])]})),{}}}),$d=le({loading:[Boolean,String]},"loader");function zl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn();return{loaderClasses:N(()=>({[`${t}--loading`]:e.loading}))}}function Wd(e,t){var n;let{slots:i}=t;return b("div",{class:`${e.name}__loader`},[((n=i.default)==null?void 0:n.call(i,{color:e.color,isActive:e.active}))||b(FM,{active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const DM=["static","relative","fixed","absolute","sticky"],zd=le({position:{type:String,validator:e=>DM.includes(e)}},"position");function jd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn();return{positionClasses:N(()=>e.position?`${t}--${e.position}`:void 0)}}function OM(){var e,t;return(t=(e=Ft("useRouter"))==null?void 0:e.proxy)==null?void 0:t.$router}function jl(e,t){const i=Hx("RouterLink"),n=N(()=>!!(e.href||e.to)),s=N(()=>(n==null?void 0:n.value)||Xf(t,"click")||Xf(e,"click"));if(typeof i=="string")return{isLink:n,isClickable:s,href:we(e,"href")};const r=e.to?i.useLink(e):void 0;return{isLink:n,isClickable:s,route:r==null?void 0:r.route,navigate:r==null?void 0:r.navigate,isActive:r&&N(()=>{var o,a;return e.exact?(o=r.isExactActive)==null?void 0:o.value:(a=r.isActive)==null?void 0:a.value}),href:N(()=>e.to?r==null?void 0:r.route.value.href:e.href)}}const Xl=le({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Au=!1;function LM(e,t){let i=!1,n,s;St&&(ni(()=>{window.addEventListener("popstate",r),n=e==null?void 0:e.beforeEach((o,a,l)=>{Au?i?t(l):l():setTimeout(()=>i?t(l):l()),Au=!0}),s=e==null?void 0:e.afterEach(()=>{Au=!1})}),ii(()=>{window.removeEventListener("popstate",r),n==null||n(),s==null||s()}));function r(o){var a;(a=o.state)!=null&&a.replaced||(i=!0,setTimeout(()=>i=!1))}}function NM(e,t){Ge(()=>{var i;return(i=e.isActive)==null?void 0:i.value},i=>{e.isLink.value&&i&&t&&ni(()=>{t(!0)})},{immediate:!0})}const __=le({active:{type:Boolean,default:void 0},symbol:{type:null,default:c_},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:et,appendIcon:et,block:Boolean,stacked:Boolean,ripple:{type:Boolean,default:!0},text:String,...Ds(),...$e(),...pi(),...Ls(),...wn(),...Vd(),...$d(),...$l(),...zd(),...mi(),...Xl(),...Vo(),...pt({tag:"button"}),...Tt(),...Tn({variant:"elevated"})},"v-btn"),Je=xe()({name:"VBtn",directives:{Ripple:Ar},props:__(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:i,slots:n}=t;const{themeClasses:s}=Pt(e),{borderClasses:r}=Os(e),{colorClasses:o,colorStyles:a,variantClasses:l}=Er(e),{densityClasses:c}=Li(e),{dimensionStyles:u}=Ns(e),{elevationClasses:h}=Sn(e),{loaderClasses:d}=zl(e),{locationStyles:f}=Wl(e),{positionClasses:p}=jd(e),{roundedClasses:g}=gi(e),{sizeClasses:y,sizeStyles:w}=Ho(e),x=Hd(e,e.symbol,!1),_=jl(e,i),C=N(()=>{var G;return e.active!==void 0?e.active:_.isLink.value?(G=_.isActive)==null?void 0:G.value:x==null?void 0:x.isSelected.value}),k=N(()=>(x==null?void 0:x.disabled.value)||e.disabled),V=N(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),L=N(()=>{if(e.value!==void 0)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function M(G){var j;k.value||((j=_.navigate)==null||j.call(_,G),x==null||x.toggle())}return NM(_,x==null?void 0:x.select),Be(()=>{var O,q;const G=_.isLink.value?"a":e.tag,j=!!(e.prependIcon||n.prepend),B=!!(e.appendIcon||n.append),R=!!(e.icon&&e.icon!==!0),F=(x==null?void 0:x.isSelected.value)&&(!_.isLink.value||((O=_.isActive)==null?void 0:O.value))||!x||((q=_.isActive)==null?void 0:q.value);return Et(b(G,{type:G==="a"?void 0:"button",class:["v-btn",x==null?void 0:x.selectedClass.value,{"v-btn--active":C.value,"v-btn--block":e.block,"v-btn--disabled":k.value,"v-btn--elevated":V.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--stacked":e.stacked},s.value,r.value,F?o.value:void 0,c.value,h.value,d.value,p.value,g.value,y.value,l.value,e.class],style:[F?a.value:void 0,u.value,f.value,w.value,e.style],disabled:k.value||void 0,href:_.href.value,onClick:M,value:L.value},{default:()=>{var X;return[Cr(!0,"v-btn"),!e.icon&&j&&b("span",{key:"prepend",class:"v-btn__prepend"},[n.prepend?b(wt,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},n.prepend):b(tt,{key:"prepend-icon",icon:e.prependIcon},null)]),b("span",{class:"v-btn__content","data-no-activator":""},[!n.default&&R?b(tt,{key:"content-icon",icon:e.icon},null):b(wt,{key:"content-defaults",disabled:!R,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var W;return[((W=n.default)==null?void 0:W.call(n))??e.text]}})]),!e.icon&&B&&b("span",{key:"append",class:"v-btn__append"},[n.append?b(wt,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},n.append):b(tt,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&b("span",{key:"loader",class:"v-btn__loader"},[((X=n.loader)==null?void 0:X.call(n))??b(Gd,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"23",width:"2"},null)])]}}),[[Bi("ripple"),!k.value&&e.ripple,null]])}),{}}});const UM=le({fluid:{type:Boolean,default:!1},...$e(),...pt()},"v-container"),Vn=xe()({name:"VContainer",props:UM(),setup(e,t){let{slots:i}=t;const{rtlClasses:n}=Di();return Be(()=>b(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},n.value,e.class],style:e.style},i)),{}}}),b_=(()=>Tl.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}))(),x_=(()=>Tl.reduce((e,t)=>{const i="offset"+vn(t);return e[i]={type:[String,Number],default:null},e},{}))(),w_=(()=>Tl.reduce((e,t)=>{const i="order"+vn(t);return e[i]={type:[String,Number],default:null},e},{}))(),Ig={col:Object.keys(b_),offset:Object.keys(x_),order:Object.keys(w_)};function VM(e,t,i){let n=e;if(!(i==null||i===!1)){if(t){const s=t.replace(e,"");n+=`-${s}`}return e==="col"&&(n="v-"+n),e==="col"&&(i===""||i===!0)||(n+=`-${i}`),n.toLowerCase()}}const HM=["auto","start","end","center","baseline","stretch"],GM=le({cols:{type:[Boolean,String,Number],default:!1},...b_,offset:{type:[String,Number],default:null},...x_,order:{type:[String,Number],default:null},...w_,alignSelf:{type:String,default:null,validator:e=>HM.includes(e)},...$e(),...pt()},"v-col"),Hn=xe()({name:"VCol",props:GM(),setup(e,t){let{slots:i}=t;const n=N(()=>{const s=[];let r;for(r in Ig)Ig[r].forEach(a=>{const l=e[a],c=VM(r,a,l);c&&s.push(c)});const o=s.some(a=>a.startsWith("v-col-"));return s.push({"v-col":!o||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),s});return()=>{var s;return Jn(e.tag,{class:[n.value,e.class],style:e.style},(s=i.default)==null?void 0:s.call(i))}}}),Xd=["start","end","center"],S_=["space-between","space-around","space-evenly"];function Yd(e,t){return Tl.reduce((i,n)=>{const s=e+vn(n);return i[s]=t(),i},{})}const $M=[...Xd,"baseline","stretch"],T_=e=>$M.includes(e),C_=Yd("align",()=>({type:String,default:null,validator:T_})),WM=[...Xd,...S_],E_=e=>WM.includes(e),A_=Yd("justify",()=>({type:String,default:null,validator:E_})),zM=[...Xd,...S_,"stretch"],I_=e=>zM.includes(e),P_=Yd("alignContent",()=>({type:String,default:null,validator:I_})),Pg={align:Object.keys(C_),justify:Object.keys(A_),alignContent:Object.keys(P_)},jM={align:"align",justify:"justify",alignContent:"align-content"};function XM(e,t,i){let n=jM[e];if(i!=null){if(t){const s=t.replace(e,"");n+=`-${s}`}return n+=`-${i}`,n.toLowerCase()}}const YM=le({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:T_},...C_,justify:{type:String,default:null,validator:E_},...A_,alignContent:{type:String,default:null,validator:I_},...P_,...$e(),...pt()},"v-row"),Gn=xe()({name:"VRow",props:YM(),setup(e,t){let{slots:i}=t;const n=N(()=>{const s=[];let r;for(r in Pg)Pg[r].forEach(o=>{const a=e[o],l=XM(r,o,a);l&&s.push(l)});return s.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),s});return()=>{var s;return Jn(e.tag,{class:["v-row",n.value,e.class],style:e.style},(s=i.default)==null?void 0:s.call(i))}}}),M_=As("flex-grow-1","div","VSpacer");const qM=le({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function si(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"center center",i=arguments.length>2?arguments[2]:void 0;return xe()({name:e,props:qM({mode:i,origin:t}),setup(n,s){let{slots:r}=s;const o={onBeforeEnter(a){a.style.transformOrigin=n.origin},onLeave(a){if(n.leaveAbsolute){const{offsetTop:l,offsetLeft:c,offsetWidth:u,offsetHeight:h}=a;a._transitionInitialStyles={position:a.style.position,top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height},a.style.position="absolute",a.style.top=`${l}px`,a.style.left=`${c}px`,a.style.width=`${u}px`,a.style.height=`${h}px`}n.hideOnLeave&&a.style.setProperty("display","none","important")},onAfterLeave(a){if(n.leaveAbsolute&&(a!=null&&a._transitionInitialStyles)){const{position:l,top:c,left:u,width:h,height:d}=a._transitionInitialStyles;delete a._transitionInitialStyles,a.style.position=l||"",a.style.top=c||"",a.style.left=u||"",a.style.width=h||"",a.style.height=d||""}}};return()=>{const a=n.group?$w:fn;return Jn(a,{name:n.disabled?"":e,css:!n.disabled,...n.group?void 0:{mode:n.mode},...n.disabled?{}:o},r.default)}}})}function R_(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return xe()({name:e,props:{mode:{type:String,default:i},disabled:Boolean},setup(n,s){let{slots:r}=s;return()=>Jn(fn,{name:n.disabled?"":e,css:!n.disabled,...n.disabled?{}:t},r.default)}})}function k_(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",n=hi(`offset-${i}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[i]:o.style[i]}},onEnter(o){const a=o._initialStyle;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const l=`${o[n]}px`;o.style[i]="0",o.offsetHeight,o.style.transition=a.transition,e&&o._parent&&o._parent.classList.add(e),requestAnimationFrame(()=>{o.style[i]=l})},onAfterEnter:r,onEnterCancelled:r,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[i]:o.style[i]},o.style.overflow="hidden",o.style[i]=`${o[n]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[i]="0")},onAfterLeave:s,onLeaveCancelled:s};function s(o){e&&o._parent&&o._parent.classList.remove(e),r(o)}function r(o){const a=o._initialStyle[i];o.style.overflow=o._initialStyle.overflow,a!=null&&(o.style[i]=a),delete o._initialStyle}}const KM=le({target:Object},"v-dialog-transition"),B_=xe()({name:"VDialogTransition",props:KM(),setup(e,t){let{slots:i}=t;const n={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,r){var d;await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>requestAnimationFrame(f)),s.style.visibility="";const{x:o,y:a,sx:l,sy:c,speed:u}=Rg(e.target,s),h=ms(s,[{transform:`translate(${o}px, ${a}px) scale(${l}, ${c})`,opacity:0},{}],{duration:225*u,easing:A1});(d=Mg(s))==null||d.forEach(f=>{ms(f,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*u,easing:fo})}),h.finished.then(()=>r())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,r){var d;await new Promise(f=>requestAnimationFrame(f));const{x:o,y:a,sx:l,sy:c,speed:u}=Rg(e.target,s);ms(s,[{},{transform:`translate(${o}px, ${a}px) scale(${l}, ${c})`,opacity:0}],{duration:125*u,easing:I1}).finished.then(()=>r()),(d=Mg(s))==null||d.forEach(f=>{ms(f,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*u,easing:fo})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>e.target?b(fn,Oe({name:"dialog-transition"},n,{css:!1}),i):b(fn,{name:"dialog-transition"},i)}});function Mg(e){var i;const t=(i=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:i.children;return t&&[...t]}function Rg(e,t){const i=e.getBoundingClientRect(),n=gd(t),[s,r]=getComputedStyle(t).transformOrigin.split(" ").map(w=>parseFloat(w)),[o,a]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=i.left+i.width/2;o==="left"||a==="left"?l-=i.width/2:(o==="right"||a==="right")&&(l+=i.width/2);let c=i.top+i.height/2;o==="top"||a==="top"?c-=i.height/2:(o==="bottom"||a==="bottom")&&(c+=i.height/2);const u=i.width/n.width,h=i.height/n.height,d=Math.max(1,u,h),f=u/d||0,p=h/d||0,g=n.width*n.height/(window.innerWidth*window.innerHeight),y=g>.12?Math.min(1.5,(g-.12)*10+1):1;return{x:l-(s+n.left),y:c-(r+n.top),sx:f,sy:p,speed:y}}si("fab-transition","center center","out-in");si("dialog-bottom-transition");si("dialog-top-transition");const kg=si("fade-transition"),ZM=si("scale-transition");si("scroll-x-transition");si("scroll-x-reverse-transition");si("scroll-y-transition");si("scroll-y-reverse-transition");si("slide-x-transition");si("slide-x-reverse-transition");const F_=si("slide-y-transition");si("slide-y-reverse-transition");const D_=R_("expand-transition",k_()),O_=R_("expand-x-transition",k_("",!0));const JM=le({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function QM(e,t){const i={},n=s=>()=>{if(!St)return Promise.resolve(!0);const r=s==="openDelay";return i.closeDelay&&window.clearTimeout(i.closeDelay),delete i.closeDelay,i.openDelay&&window.clearTimeout(i.openDelay),delete i.openDelay,new Promise(o=>{const a=parseInt(e[s]??0,10);i[s]=window.setTimeout(()=>{t==null||t(r),o(r)},a)})};return{runCloseDelay:n("closeDelay"),runOpenDelay:n("openDelay")}}const Bh=Symbol.for("vuetify:v-menu"),eR=le({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...JM()},"v-overlay-activator");function tR(e,t){let{isActive:i,isTop:n}=t;const s=Pe();let r=!1,o=!1,a=!0;const l=N(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),c=N(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!l.value),{runOpenDelay:u,runCloseDelay:h}=QM(e,_=>{_===(e.openOnHover&&r||l.value&&o)&&!(e.openOnHover&&i.value&&!n.value)&&(i.value!==_&&(a=!0),i.value=_)}),d={click:_=>{_.stopPropagation(),s.value=_.currentTarget||_.target,i.value=!i.value},mouseenter:_=>{var C;(C=_.sourceCapabilities)!=null&&C.firesTouchEvents||(r=!0,s.value=_.currentTarget||_.target,u())},mouseleave:_=>{r=!1,h()},focus:_=>{qu&&!_.target.matches(":focus-visible")||(o=!0,_.stopPropagation(),s.value=_.currentTarget||_.target,u())},blur:_=>{o=!1,_.stopPropagation(),h()}},f=N(()=>{const _={};return c.value&&(_.click=d.click),e.openOnHover&&(_.mouseenter=d.mouseenter,_.mouseleave=d.mouseleave),l.value&&(_.focus=d.focus,_.blur=d.blur),_}),p=N(()=>{const _={};if(e.openOnHover&&(_.mouseenter=()=>{r=!0,u()},_.mouseleave=()=>{r=!1,h()}),e.closeOnContentClick){const C=qe(Bh,null);_.click=()=>{i.value=!1,C==null||C.closeParents()}}return _}),g=N(()=>{const _={};return e.openOnHover&&(_.mouseenter=()=>{a&&(r=!0,a=!1,u())},_.mouseleave=()=>{r=!1,h()}),_});Ge(n,_=>{_&&(e.openOnHover&&!r&&(!l.value||!o)||l.value&&!o&&(!e.openOnHover||!r))&&(i.value=!1)});const y=Pe();Kn(()=>{y.value&&ni(()=>{const _=y.value;s.value=i1(_)?_.$el:_})});const w=Ft("useActivator");let x;return Ge(()=>!!e.activator,_=>{_&&St?(x=Xh(),x.run(()=>{iR(e,w,{activatorEl:s,activatorEvents:f})})):x&&x.stop()},{flush:"post",immediate:!0}),ii(()=>{x==null||x.stop()}),{activatorEl:s,activatorRef:y,activatorEvents:f,contentEvents:p,scrimEvents:g}}function iR(e,t,i){let{activatorEl:n,activatorEvents:s}=i;Ge(()=>e.activator,(l,c)=>{if(c&&l!==c){const u=a(c);u&&o(u)}l&&ni(()=>r())},{immediate:!0}),Ge(()=>e.activatorProps,()=>{r()}),ii(()=>{o()});function r(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;l&&(Object.entries(s.value).forEach(u=>{let[h,d]=u;l.addEventListener(h,d)}),Object.keys(c).forEach(u=>{c[u]==null?l.removeAttribute(u):l.setAttribute(u,c[u])}))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;l&&(Object.entries(s.value).forEach(u=>{let[h,d]=u;l.removeEventListener(h,d)}),Object.keys(c).forEach(u=>{l.removeAttribute(u)}))}function a(){var u,h;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator,c;if(l)if(l==="parent"){let d=(h=(u=t==null?void 0:t.proxy)==null?void 0:u.$el)==null?void 0:h.parentNode;for(;d.hasAttribute("data-no-activator");)d=d.parentNode;c=d}else typeof l=="string"?c=document.querySelector(l):"$el"in l?c=l.$el:c=l;return n.value=(c==null?void 0:c.nodeType)===Node.ELEMENT_NODE?c:null,n.value}}const L_=le({eager:Boolean},"lazy");function N_(e,t){const i=Re(!1),n=N(()=>i.value||e.eager||t.value);Ge(t,()=>i.value=!0);function s(){e.eager||(i.value=!1)}return{isBooted:i,hasContent:n,onAfterLeave:s}}function Iu(e,t){return{x:e.x+t.x,y:e.y+t.y}}function nR(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Bg(e,t){if(e.side==="top"||e.side==="bottom"){const{side:i,align:n}=e,s=n==="left"?0:n==="center"?t.width/2:n==="right"?t.width:n,r=i==="top"?0:i==="bottom"?t.height:i;return Iu({x:s,y:r},t)}else if(e.side==="left"||e.side==="right"){const{side:i,align:n}=e,s=i==="left"?0:i==="right"?t.width:i,r=n==="top"?0:n==="center"?t.height/2:n==="bottom"?t.height:n;return Iu({x:s,y:r},t)}return Iu({x:t.width/2,y:t.height/2},t)}const U_={static:oR,connected:lR},sR=le({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in U_},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"v-overlay-location-strategies");function rR(e,t){const i=Pe({}),n=Pe();St&&(Ss(()=>!!(t.isActive.value&&e.locationStrategy),r=>{var o,a;Ge(()=>e.locationStrategy,r),ii(()=>{n.value=void 0}),typeof e.locationStrategy=="function"?n.value=(o=e.locationStrategy(t,e,i))==null?void 0:o.updateLocation:n.value=(a=U_[e.locationStrategy](t,e,i))==null?void 0:a.updateLocation}),window.addEventListener("resize",s,{passive:!0}),ii(()=>{window.removeEventListener("resize",s),n.value=void 0}));function s(r){var o;(o=n.value)==null||o.call(n,r)}return{contentStyles:i,updateLocation:n}}function oR(){}function aR(e,t){const i=gd(e);return t?i.x+=parseFloat(e.style.right||0):i.x-=parseFloat(e.style.left||0),i.y-=parseFloat(e.style.top||0),i}function lR(e,t,i){k1(e.activatorEl.value)&&Object.assign(i.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:r}=md(()=>{const p=Xu(t.location,e.isRtl.value),g=t.origin==="overlap"?p:t.origin==="auto"?sc(p):Xu(t.origin,e.isRtl.value);return p.side===g.side&&p.align===rc(g).align?{preferredAnchor:qf(p),preferredOrigin:qf(g)}:{preferredAnchor:p,preferredOrigin:g}}),[o,a,l,c]=["minWidth","minHeight","maxWidth","maxHeight"].map(p=>N(()=>{const g=parseFloat(t[p]);return isNaN(g)?1/0:g})),u=N(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const p=t.offset.split(" ").map(parseFloat);return p.length<2&&p.push(0),p}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let h=!1;const d=new ResizeObserver(()=>{h&&f()});Ge([e.activatorEl,e.contentEl],(p,g)=>{let[y,w]=p,[x,_]=g;x&&d.unobserve(x),y&&d.observe(y),_&&d.unobserve(_),w&&d.observe(w)},{immediate:!0}),ii(()=>{d.disconnect()});function f(){if(h=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>h=!0)}),!e.activatorEl.value||!e.contentEl.value)return;const p=e.activatorEl.value.getBoundingClientRect(),g=aR(e.contentEl.value,e.isRtl.value),y=za(e.contentEl.value),w=12;y.length||(y.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(g.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),g.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const x=y.reduce((B,R)=>{const F=R.getBoundingClientRect(),O=new sr({x:R===document.documentElement?0:F.x,y:R===document.documentElement?0:F.y,width:R.clientWidth,height:R.clientHeight});return B?new sr({x:Math.max(B.left,O.left),y:Math.max(B.top,O.top),width:Math.min(B.right,O.right)-Math.max(B.left,O.left),height:Math.min(B.bottom,O.bottom)-Math.max(B.top,O.top)}):O},void 0);x.x+=w,x.y+=w,x.width-=w*2,x.height-=w*2;let _={anchor:s.value,origin:r.value};function C(B){const R=new sr(g),F=Bg(B.anchor,p),O=Bg(B.origin,R);let{x:q,y:X}=nR(F,O);switch(B.anchor.side){case"top":X-=u.value[0];break;case"bottom":X+=u.value[0];break;case"left":q-=u.value[0];break;case"right":q+=u.value[0];break}switch(B.anchor.align){case"top":X-=u.value[1];break;case"bottom":X+=u.value[1];break;case"left":q-=u.value[1];break;case"right":q+=u.value[1];break}return R.x+=q,R.y+=X,R.width=Math.min(R.width,l.value),R.height=Math.min(R.height,c.value),{overflows:Zf(R,x),x:q,y:X}}let k=0,V=0;const L={x:0,y:0},M={x:!1,y:!1};let G=-1;for(;;){if(G++>10){Yu("Infinite loop detected in connectedLocationStrategy");break}const{x:B,y:R,overflows:F}=C(_);k+=B,V+=R,g.x+=B,g.y+=R;{const O=Kf(_.anchor),q=F.x.before||F.x.after,X=F.y.before||F.y.after;let W=!1;if(["x","y"].forEach(S=>{if(S==="x"&&q&&!M.x||S==="y"&&X&&!M.y){const A={anchor:{..._.anchor},origin:{..._.origin}},E=S==="x"?O==="y"?rc:sc:O==="y"?sc:rc;A.anchor=E(A.anchor),A.origin=E(A.origin);const{overflows:I}=C(A);(I[S].before<=F[S].before&&I[S].after<=F[S].after||I[S].before+I[S].after<(F[S].before+F[S].after)/2)&&(_=A,W=M[S]=!0)}}),W)continue}F.x.before&&(k+=F.x.before,g.x+=F.x.before),F.x.after&&(k-=F.x.after,g.x-=F.x.after),F.y.before&&(V+=F.y.before,g.y+=F.y.before),F.y.after&&(V-=F.y.after,g.y-=F.y.after);{const O=Zf(g,x);L.x=x.width-O.x.before-O.x.after,L.y=x.height-O.y.before-O.y.after,k+=O.x.before,g.x+=O.x.before,V+=O.y.before,g.y+=O.y.before}break}const j=Kf(_.anchor);return Object.assign(i.value,{"--v-overlay-anchor-origin":`${_.anchor.side} ${_.anchor.align}`,transformOrigin:`${_.origin.side} ${_.origin.align}`,top:Ie(Pu(V)),left:e.isRtl.value?void 0:Ie(Pu(k)),right:e.isRtl.value?Ie(Pu(-k)):void 0,minWidth:Ie(j==="y"?Math.min(o.value,p.width):o.value),maxWidth:Ie(Fg(ws(L.x,o.value===1/0?0:o.value,l.value))),maxHeight:Ie(Fg(ws(L.y,a.value===1/0?0:a.value,c.value)))}),{available:L,contentBox:g}}return Ge(()=>[s.value,r.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>f()),ni(()=>{const p=f();if(!p)return;const{available:g,contentBox:y}=p;y.height>g.y&&requestAnimationFrame(()=>{f(),requestAnimationFrame(()=>{f()})})}),{updateLocation:f}}function Pu(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function Fg(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let Fh=!0;const cl=[];function cR(e){!Fh||cl.length?(cl.push(e),Dh()):(Fh=!1,e(),Dh())}let Dg=-1;function Dh(){cancelAnimationFrame(Dg),Dg=requestAnimationFrame(()=>{const e=cl.shift();e&&e(),cl.length?Dh():Fh=!0})}const Da={none:null,close:dR,block:fR,reposition:pR},uR=le({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in Da}},"v-overlay-scroll-strategies");function hR(e,t){if(!St)return;let i;Kn(async()=>{i==null||i.stop(),t.isActive.value&&e.scrollStrategy&&(i=Xh(),await ni(),i.active&&i.run(()=>{var n;typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,i):(n=Da[e.scrollStrategy])==null||n.call(Da,t,e,i)}))}),ii(()=>{i==null||i.stop()})}function dR(e){function t(i){e.isActive.value=!1}V_(e.activatorEl.value??e.contentEl.value,t)}function fR(e,t){var o;const i=(o=e.root.value)==null?void 0:o.offsetParent,n=[...new Set([...za(e.activatorEl.value,t.contained?i:void 0),...za(e.contentEl.value,t.contained?i:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,r=(a=>_d(a)&&a)(i||document.documentElement);r&&e.root.value.classList.add("v-overlay--scroll-blocked"),n.forEach((a,l)=>{a.style.setProperty("--v-body-scroll-x",Ie(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",Ie(-a.scrollTop)),a.style.setProperty("--v-scrollbar-offset",Ie(s)),a.classList.add("v-overlay-scroll-blocked")}),ii(()=>{n.forEach((a,l)=>{const c=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),u=parseFloat(a.style.getPropertyValue("--v-body-scroll-y"));a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-c,a.scrollTop=-u}),r&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function pR(e,t,i){let n=!1,s=-1,r=-1;function o(a){cR(()=>{var u,h;const l=performance.now();(h=(u=e.updateLocation).value)==null||h.call(u,a),n=(performance.now()-l)/(1e3/60)>2})}r=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{i.run(()=>{V_(e.activatorEl.value??e.contentEl.value,a=>{n?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{o(a)})})):o(a)})})}),ii(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(r),cancelAnimationFrame(s)})}function V_(e,t){const i=[document,...za(e)];i.forEach(n=>{n.addEventListener("scroll",t,{passive:!0})}),ii(()=>{i.forEach(n=>{n.removeEventListener("scroll",t)})})}const Go=le({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),ln=(e,t)=>{let{slots:i}=t;const{transition:n,disabled:s,...r}=e,{component:o=fn,...a}=typeof n=="object"?n:{};return Jn(o,Oe(typeof n=="string"?{name:s?"":n}:a,r,{disabled:s}),i)};function mR(){if(!St)return Re(!1);const{ssr:e}=gy();if(e){const t=Re(!1);return Zn(()=>{t.value=!0}),t}else return Re(!0)}function qd(){const t=Ft("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const Og=Symbol.for("vuetify:stack"),Ur=$t([]);function gR(e,t,i){const n=Ft("useStack"),s=!i,r=qe(Og,void 0),o=$t({activeChildren:new Set});Ut(Og,o);const a=Re(+t.value);Ss(e,()=>{var h;const u=(h=Ur.at(-1))==null?void 0:h[1];a.value=u?u+10:+t.value,s&&Ur.push([n.uid,a.value]),r==null||r.activeChildren.add(n.uid),ii(()=>{if(s){const d=Ue(Ur).findIndex(f=>f[0]===n.uid);Ur.splice(d,1)}r==null||r.activeChildren.delete(n.uid)})});const l=Re(!0);s&&Kn(()=>{var h;const u=((h=Ur.at(-1))==null?void 0:h[0])===n.uid;setTimeout(()=>l.value=u)});const c=N(()=>!o.activeChildren.size);return{globalTop:Eo(l),localTop:c,stackStyles:N(()=>({zIndex:a.value}))}}function vR(e){return{teleportTarget:N(()=>{const i=e.value;if(i===!0||!St)return;const n=i===!1?document.body:typeof i=="string"?document.querySelector(i):i;if(n==null)return;let s=n.querySelector(":scope > .v-overlay-container");return s||(s=document.createElement("div"),s.className="v-overlay-container",n.appendChild(s)),s})}}function yR(){return!0}function H_(e,t,i){if(!e||G_(e,i)===!1)return!1;const n=ly(t);if(typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&n.host===e.target)return!1;const s=(typeof i.value=="object"&&i.value.include||(()=>[]))();return s.push(t),!s.some(r=>r==null?void 0:r.contains(e.target))}function G_(e,t){return(typeof t.value=="object"&&t.value.closeConditional||yR)(e)}function _R(e,t,i){const n=typeof i.value=="function"?i.value:i.value.handler;t._clickOutside.lastMousedownWasOutside&&H_(e,t,i)&&setTimeout(()=>{G_(e,i)&&n&&n(e)},0)}function Lg(e,t){const i=ly(e);t(document),typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&t(i)}const bR={mounted(e,t){const i=s=>_R(s,e,t),n=s=>{e._clickOutside.lastMousedownWasOutside=H_(s,e,t)};Lg(e,s=>{s.addEventListener("click",i,!0),s.addEventListener("mousedown",n,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:i,onMousedown:n}},unmounted(e,t){e._clickOutside&&(Lg(e,i=>{var r;if(!i||!((r=e._clickOutside)!=null&&r[t.instance.$.uid]))return;const{onClick:n,onMousedown:s}=e._clickOutside[t.instance.$.uid];i.removeEventListener("click",n,!0),i.removeEventListener("mousedown",s,!0)}),delete e._clickOutside[t.instance.$.uid])}};function xR(e){const{modelValue:t,color:i,...n}=e;return b(fn,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&b("div",Oe({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},n),null)]})}const Kd=le({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[String,Boolean],default:!0},zIndex:{type:[Number,String],default:2e3},...eR(),...$e(),...Ls(),...L_(),...sR(),...uR(),...Tt(),...Go()},"v-overlay"),ul=xe()({name:"VOverlay",directives:{ClickOutside:bR},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Kd()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterLeave:()=>!0},setup(e,t){let{slots:i,attrs:n,emit:s}=t;const r=ct(e,"modelValue"),o=N({get:()=>r.value,set:A=>{A&&e.disabled||(r.value=A)}}),{teleportTarget:a}=vR(N(()=>e.attach||e.contained)),{themeClasses:l}=Pt(e),{rtlClasses:c,isRtl:u}=Di(),{hasContent:h,onAfterLeave:d}=N_(e,o),f=gn(N(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:p,localTop:g,stackStyles:y}=gR(o,we(e,"zIndex"),e._disableGlobalStack),{activatorEl:w,activatorRef:x,activatorEvents:_,contentEvents:C,scrimEvents:k}=tR(e,{isActive:o,isTop:g}),{dimensionStyles:V}=Ns(e),L=mR(),{scopeId:M}=qd();Ge(()=>e.disabled,A=>{A&&(o.value=!1)});const G=Pe(),j=Pe(),{contentStyles:B,updateLocation:R}=rR(e,{isRtl:u,contentEl:j,activatorEl:w,isActive:o});hR(e,{root:G,contentEl:j,activatorEl:w,isActive:o,updateLocation:R});function F(A){s("click:outside",A),e.persistent?S():o.value=!1}function O(){return o.value&&p.value}St&&Ge(o,A=>{A?window.addEventListener("keydown",q):window.removeEventListener("keydown",q)},{immediate:!0});function q(A){A.key==="Escape"&&p.value&&(e.persistent?S():o.value=!1)}const X=OM();Ss(()=>e.closeOnBack,()=>{LM(X,A=>{p.value&&o.value?(A(!1),e.persistent?S():o.value=!1):A()})});const W=Pe();Ge(()=>o.value&&(e.absolute||e.contained)&&a.value==null,A=>{if(A){const E=P1(G.value);E&&E!==document.scrollingElement&&(W.value=E.scrollTop)}});function S(){e.noClickAnimation||j.value&&ms(j.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:fo})}return Be(()=>{var A;return b(Xe,null,[(A=i.activator)==null?void 0:A.call(i,{isActive:o.value,props:Oe({ref:x},Jl(_.value),e.activatorProps)}),L.value&&b(aw,{disabled:!a.value,to:a.value},{default:()=>[h.value&&b("div",Oe({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":o.value,"v-overlay--contained":e.contained},l.value,c.value,e.class],style:[y.value,{top:Ie(W.value)},e.style],ref:G},M,n),[b(xR,Oe({color:f,modelValue:o.value&&!!e.scrim},Jl(k.value)),null),b(ln,{appear:!0,persisted:!0,transition:e.transition,target:w.value,onAfterLeave:()=>{d(),s("afterLeave")}},{default:()=>{var E;return[Et(b("div",Oe({ref:j,class:["v-overlay__content",e.contentClass],style:[V.value,B.value]},Jl(C.value),e.contentProps),[(E=i.default)==null?void 0:E.call(i,{isActive:o})]),[[Qn,o.value],[Bi("click-outside"),{handler:F,closeConditional:O,include:()=>[w.value]}]])]}})])]})])}),{activatorEl:w,animateClick:S,contentEl:j,globalTop:p,localTop:g,updateLocation:R}}}),Mu=Symbol("Forwarded refs");function Ru(e,t){let i=e;for(;i;){const n=Reflect.getOwnPropertyDescriptor(i,t);if(n)return n;i=Object.getPrototypeOf(i)}}function Yl(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e[Mu]=i,new Proxy(e,{get(s,r){if(Reflect.has(s,r))return Reflect.get(s,r);if(!(typeof r=="symbol"||r.startsWith("__"))){for(const o of i)if(o.value&&Reflect.has(o.value,r)){const a=Reflect.get(o.value,r);return typeof a=="function"?a.bind(o.value):a}}},has(s,r){if(Reflect.has(s,r))return!0;if(typeof r=="symbol"||r.startsWith("__"))return!1;for(const o of i)if(o.value&&Reflect.has(o.value,r))return!0;return!1},getOwnPropertyDescriptor(s,r){var a;const o=Reflect.getOwnPropertyDescriptor(s,r);if(o)return o;if(!(typeof r=="symbol"||r.startsWith("__"))){for(const l of i){if(!l.value)continue;const c=Ru(l.value,r)??("_"in l.value?Ru((a=l.value._)==null?void 0:a.setupState,r):void 0);if(c)return c}for(const l of i){const c=l.value&&l.value[Mu];if(!c)continue;const u=c.slice();for(;u.length;){const h=u.shift(),d=Ru(h.value,r);if(d)return d;const f=h.value&&h.value[Mu];f&&u.push(...f)}}}}})}const wR=le({id:String,...Po(Kd({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:B_}}),["absolute"])},"v-menu"),fs=xe()({name:"VMenu",props:wR(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const n=ct(e,"modelValue"),{scopeId:s}=qd(),r=qt(),o=N(()=>e.id||`v-menu-${r}`),a=Pe(),l=qe(Bh,null),c=Re(0);Ut(Bh,{register(){++c.value},unregister(){--c.value},closeParents(){setTimeout(()=>{c.value||(n.value=!1,l==null||l.closeParents())},40)}}),Ge(n,d=>{d?l==null||l.register():l==null||l.unregister()});function u(){l==null||l.closeParents()}const h=N(()=>Oe({"aria-haspopup":"menu","aria-expanded":String(n.value),"aria-owns":o.value},e.activatorProps));return Be(()=>{const[d]=ul.filterProps(e);return b(ul,Oe({ref:a,class:["v-menu",e.class],style:e.style},d,{modelValue:n.value,"onUpdate:modelValue":f=>n.value=f,absolute:!0,activatorProps:h.value,"onClick:outside":u},s),{activator:i.activator,default:function(){for(var f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];return b(wt,{root:!0},{default:()=>{var y;return[(y=i.default)==null?void 0:y.call(i,...p)]}})}})}),Yl({id:o,openChildren:c},a)}});function SR(e,t,i,n,s,r){return He(),at(fs,{activator:"parent","open-on-hover":!1,"open-on-click":!1,"model-value":i.activeDetailedMenuId==i.robot.id,"close-on-content-click":!1,"location-strategy":"connected",location:"start center",origin:"overlap","offset-x":200,"offset-y":200,"scroll-strategy":"reposition"},{default:se(()=>[b(Gn,null,{default:se(()=>[b(Je,{ref:"restart"+i.robot.id,dense:"",class:"mx-1",style:{"max-width":"50"},onMousedown:t[0]||(t[0]=o=>r.startHold("restart",i.robot)),onMouseup:t[1]||(t[1]=o=>r.stopHold("restart",i.robot)),onMouseleave:t[2]||(t[2]=o=>r.stopHold("restart",i.robot))},{default:se(()=>[b(tt,{icon:"mdi-restart"})]),_:1},512),b(Je,{ref:"shutdown"+i.robot.id,dense:"",class:"mx-1",style:{"max-width":"50"},onMousedown:t[3]||(t[3]=o=>r.startHold("shutdown",i.robot)),onMouseup:t[4]||(t[4]=o=>r.stopHold("shutdown",i.robot)),onMouseleave:t[5]||(t[5]=o=>r.stopHold("shutdown",i.robot))},{default:se(()=>[b(tt,{icon:"mdi-power"})]),_:1},512)]),_:1})]),_:1},8,["model-value"])}const TR=Kt(yM,[["render",SR]]),CR={inject:["state"],data(){return{state:qe("state"),isValid:bg,activeDetailedMenuId:null,holdStartTime:null,timeoutId:null}},mounted(){this.update()},methods:{update:function(){for(const e of this.state.world.teams.get(this.state.world.team).robots)if(bg(e)&&this.$refs["robotCard"+e.id]){let t=this.$refs["canvas"+e.id][0];this.drawStatus(e,t.getContext("2d"));const i=this.$refs["robotCard"+e.id][0].$el,n=iP(e,this.state.sim);n!=Zs.Critical&&i.getAnimations().forEach(r=>{r.cancel()});let s="";switch(e.id==this.state.controlledRobot&&(s+="background: rgb(var(--v-theme-status-controlled-robot));"),n){case Zs.None:e.visible||(s+=" outline: solid 5px rgb(var(--v-theme-status-visibility)); outline-offset:-1px");break;case Zs.Warning:s+=" outline: solid 5px rgb(var(--v-theme-status-warn)); outline-offset:-1px";break;case Zs.Error:s+=" outline: solid 5px rgb(var(--v-theme-status-error)); outline-offset:-1px";break;case Zs.Critical:i.getAnimations().length==0&&i.animate([{background:"red",outline:"solid 5px rgb(var(--v-theme-status-error))"}],{easing:"steps(2, jump-none)",duration:1e3,iterations:1/0});break}i.style=s}},drawStatus:function(e,t){const r=-.2777777777777778*Math.PI,o=230/180*Math.PI;t.resetTransform(),t.translate(50,50),t.clearRect(-50,-50,100,100),t.fillStyle="DarkBlue",t.beginPath(),t.arc(0,0,25.2,r,o),t.closePath(),t.fill(),t.fillStyle=e.team,t.beginPath(),t.arc(0,0,.025*280,0,2*Math.PI),t.closePath(),t.fill();const a={x:[-.055,.055,-.035,.035],y:[-.035,-.035,.055,.055]};let c=new Map([[0,"PPGP"],[1,"GPGP"],[2,"GGGP"],[3,"PGGP"],[4,"PPPG"],[5,"GPPG"],[6,"GGPG"],[7,"PGPG"],[8,"GGGG"],[9,"PPPP"],[10,"PPGG"],[11,"GGPP"],[12,"GPGG"],[13,"GPPP"],[14,"PGGG"],[15,"PGPP"]]).get(e.id);for(var u=0;u<4;u++)t.fillStyle=c[u]=="P"?"DeepPink":"LawnGreen",t.beginPath(),t.arc(a.x[u]*280,a.y[u]*280,.025*280,0,2*Math.PI),t.closePath(),t.fill();e.status.breakbeam_ball_detected&&(t.fillStyle="orange",t.beginPath(),t.arc(0,-.09*280,.009*2.5*280,0,2*Math.PI),t.closePath(),t.fill());const h={startX:[-.075,-.035,.035,.075,-.05],startY:[-.095,.12,.12,-.095,-.09],endX:[-.12,-.1,.1,.12,.05],endY:[-.03,.07,.07,-.03,-.09],textX:[-.12,-.12,.12,.12,0],textY:[-.12,.14,.14,-.12,-.13]},d=["fl","bl","br","fr","dribbler"];for(var u=0;u<5;u++){let p=e.status["motor_"+d[u]+"_general_error"],g=e.status["motor_"+d[u]+"_hall_error"],y=e.status["motor_"+d[u]+"_encoder_error"];if(p||g||y){t.beginPath(),t.strokeStyle="red",t.lineWidth=.02*280,t.moveTo(280*h.startX[u],280*h.startY[u]),t.lineTo(280*h.endX[u],280*h.endY[u]),t.stroke();let w=String(u);p&&(w=w+"G"),g&&(w=w+"H"),y&&(w=w+"E"),w=String(u),t.fillStyle="red",t.font="13px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(w,h.textX[u]*280,h.textY[u]*280)}}e.radio_connected||(t.fillStyle="yellow",t.font="15px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("DC",.14*280,-.14*280))},batteryIcon:function(e){return!e||e<=5?"mdi-battery-alert-variant-outline":e>=95?"mdi-battery":"mdi-battery-"+String(Math.round(e/10)*10)},batteryLevel:function(e){return e&&e.status&&e.status.battery_percent?String(e.status.battery_percent.toFixed(0))+"%":""},changeDetailedStatusMenu:function(e){this.activeDetailedMenuId=this.activeDetailedMenuId==e.id?null:e.id}},computed:{getRobotStatuses:function(){return this.state.world.teams.get(this.state.world.team).robots.map(e=>e.status)},getControlledRobot:function(){return this.state.controlledRobot}},watch:{getRobotStatuses:{handler(){},deep:!0},getControlledRobot:{handler(){},deep:!0}},components:{RobotDetailedMenuComponent:TR}};const ER=xe()({name:"VCardActions",props:$e(),setup(e,t){let{slots:i}=t;return _n({VBtn:{variant:"text"}}),Be(()=>{var n;return b("div",{class:["v-card-actions",e.class],style:e.style},[(n=i.default)==null?void 0:n.call(i)])}),{}}});function AR(e){return{aspectStyles:N(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const IR=le({aspectRatio:[String,Number],contentClass:String,...$e(),...Ls()},"v-responsive"),PR=xe()({name:"VResponsive",props:IR(),setup(e,t){let{slots:i}=t;const{aspectStyles:n}=AR(e),{dimensionStyles:s}=Ns(e);return Be(()=>{var r;return b("div",{class:["v-responsive",e.class],style:[s.value,e.style]},[b("div",{class:"v-responsive__sizer",style:n.value},null),(r=i.additional)==null?void 0:r.call(i),i.default&&b("div",{class:["v-responsive__content",e.contentClass]},[i.default()])])}),{}}});function MR(e,t){if(!bd)return;const i=t.modifiers||{},n=t.value,{handler:s,options:r}=typeof n=="object"?n:{handler:n,options:{}},o=new IntersectionObserver(function(){var h;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const c=(h=e._observe)==null?void 0:h[t.instance.$.uid];if(!c)return;const u=a.some(d=>d.isIntersecting);s&&(!i.quiet||c.init)&&(!i.once||u||c.init)&&s(u,a,l),u&&i.once?$_(e,t):c.init=!0},r);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:o},o.observe(e)}function $_(e,t){var n;const i=(n=e._observe)==null?void 0:n[t.instance.$.uid];i&&(i.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const RR={mounted:MR,unmounted:$_},W_=RR,kR=le({aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...$e(),...Go()},"v-img"),Zd=xe()({name:"VImg",directives:{intersect:W_},props:kR(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:i,slots:n}=t;const s=Re(""),r=Pe(),o=Re(e.eager?"loading":"idle"),a=Re(),l=Re(),c=N(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),u=N(()=>c.value.aspect||a.value/l.value||0);Ge(()=>e.src,()=>{h(o.value!=="idle")}),Ge(u,(M,G)=>{!M&&G&&r.value&&y(r.value)}),od(()=>h());function h(M){if(!(e.eager&&M)&&!(bd&&!M&&!e.eager)){if(o.value="loading",c.value.lazySrc){const G=new Image;G.src=c.value.lazySrc,y(G,null)}c.value.src&&ni(()=>{var G,j;if(i("loadstart",((G=r.value)==null?void 0:G.currentSrc)||c.value.src),(j=r.value)!=null&&j.complete){if(r.value.naturalWidth||f(),o.value==="error")return;u.value||y(r.value,null),d()}else u.value||y(r.value),p()})}}function d(){var M;p(),o.value="loaded",i("load",((M=r.value)==null?void 0:M.currentSrc)||c.value.src)}function f(){var M;o.value="error",i("error",((M=r.value)==null?void 0:M.currentSrc)||c.value.src)}function p(){const M=r.value;M&&(s.value=M.currentSrc||M.src)}let g=-1;function y(M){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const j=()=>{clearTimeout(g);const{naturalHeight:B,naturalWidth:R}=M;B||R?(a.value=R,l.value=B):!M.complete&&o.value==="loading"&&G!=null?g=window.setTimeout(j,G):(M.currentSrc.endsWith(".svg")||M.currentSrc.startsWith("data:image/svg+xml"))&&(a.value=1,l.value=1)};j()}const w=N(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),x=()=>{var j;if(!c.value.src||o.value==="idle")return null;const M=b("img",{class:["v-img__img",w.value],src:c.value.src,srcset:c.value.srcset,alt:e.alt,sizes:e.sizes,ref:r,onLoad:d,onError:f},null),G=(j=n.sources)==null?void 0:j.call(n);return b(ln,{transition:e.transition,appear:!0},{default:()=>[Et(G?b("picture",{class:"v-img__picture"},[G,M]):M,[[Qn,o.value==="loaded"]])]})},_=()=>b(ln,{transition:e.transition},{default:()=>[c.value.lazySrc&&o.value!=="loaded"&&b("img",{class:["v-img__img","v-img__img--preload",w.value],src:c.value.lazySrc,alt:e.alt},null)]}),C=()=>n.placeholder?b(ln,{transition:e.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!n.error)&&b("div",{class:"v-img__placeholder"},[n.placeholder()])]}):null,k=()=>n.error?b(ln,{transition:e.transition,appear:!0},{default:()=>[o.value==="error"&&b("div",{class:"v-img__error"},[n.error()])]}):null,V=()=>e.gradient?b("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,L=Re(!1);{const M=Ge(u,G=>{G&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{L.value=!0})}),M())})}return Be(()=>Et(b(PR,{class:["v-img",{"v-img--booting":!L.value},e.class],style:[{width:Ie(e.width==="auto"?a.value:e.width)},e.style],aspectRatio:u.value,"aria-label":e.alt,role:e.alt?"img":void 0},{additional:()=>b(Xe,null,[b(x,null,null),b(_,null,null),b(V,null,null),b(C,null,null),b(k,null,null)]),default:n.default}),[[Bi("intersect"),{handler:h,options:e.options},null,{once:!0}]])),{currentSrc:s,image:r,state:o,naturalWidth:a,naturalHeight:l}}}),BR=le({start:Boolean,end:Boolean,icon:et,image:String,...$e(),...pi(),...mi(),...Vo(),...pt(),...Tt(),...Tn({variant:"flat"})},"v-avatar"),mr=xe()({name:"VAvatar",props:BR(),setup(e,t){let{slots:i}=t;const{themeClasses:n}=Pt(e),{colorClasses:s,colorStyles:r,variantClasses:o}=Er(e),{densityClasses:a}=Li(e),{roundedClasses:l}=gi(e),{sizeClasses:c,sizeStyles:u}=Ho(e);return Be(()=>b(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},n.value,s.value,a.value,l.value,c.value,o.value,e.class],style:[r.value,u.value,e.style]},{default:()=>{var h;return[e.image?b(Zd,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?b(tt,{key:"icon",icon:e.icon},null):(h=i.default)==null?void 0:h.call(i),Cr(!1,"v-avatar")]}})),{}}}),FR=As("v-card-subtitle"),Oh=As("v-card-title"),DR=le({appendAvatar:String,appendIcon:et,prependAvatar:String,prependIcon:et,subtitle:String,title:String,...$e(),...pi()},"v-card-item"),OR=xe()({name:"VCardItem",props:DR(),setup(e,t){let{slots:i}=t;return Be(()=>{var c;const n=!!(e.prependAvatar||e.prependIcon),s=!!(n||i.prepend),r=!!(e.appendAvatar||e.appendIcon),o=!!(r||i.append),a=!!(e.title||i.title),l=!!(e.subtitle||i.subtitle);return b("div",{class:["v-card-item",e.class],style:e.style},[s&&b("div",{key:"prepend",class:"v-card-item__prepend"},[i.prepend?b(wt,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:e.density,icon:e.prependIcon,image:e.prependAvatar}}},i.prepend):n&&b(mr,{key:"prepend-avatar",density:e.density,icon:e.prependIcon,image:e.prependAvatar},null)]),b("div",{class:"v-card-item__content"},[a&&b(Oh,{key:"title"},{default:()=>{var u;return[((u=i.title)==null?void 0:u.call(i))??e.title]}}),l&&b(FR,{key:"subtitle"},{default:()=>{var u;return[((u=i.subtitle)==null?void 0:u.call(i))??e.subtitle]}}),(c=i.default)==null?void 0:c.call(i)]),o&&b("div",{key:"append",class:"v-card-item__append"},[i.append?b(wt,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,icon:e.appendIcon,image:e.appendAvatar}}},i.append):r&&b(mr,{key:"append-avatar",density:e.density,icon:e.appendIcon,image:e.appendAvatar},null)])])}),{}}}),z_=As("v-card-text"),LR=le({appendAvatar:String,appendIcon:et,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:et,ripple:{type:Boolean,default:!0},subtitle:String,text:String,title:String,...Ds(),...$e(),...pi(),...Ls(),...wn(),...$d(),...$l(),...zd(),...mi(),...Xl(),...pt(),...Tt(),...Tn({variant:"elevated"})},"v-card"),$n=xe()({name:"VCard",directives:{Ripple:Ar},props:LR(),setup(e,t){let{attrs:i,slots:n}=t;const{themeClasses:s}=Pt(e),{borderClasses:r}=Os(e),{colorClasses:o,colorStyles:a,variantClasses:l}=Er(e),{densityClasses:c}=Li(e),{dimensionStyles:u}=Ns(e),{elevationClasses:h}=Sn(e),{loaderClasses:d}=zl(e),{locationStyles:f}=Wl(e),{positionClasses:p}=jd(e),{roundedClasses:g}=gi(e),y=jl(e,i),w=N(()=>e.link!==!1&&y.isLink.value),x=N(()=>!e.disabled&&e.link!==!1&&(e.link||y.isClickable.value));return Be(()=>{const _=w.value?"a":e.tag,C=!!(n.title||e.title),k=!!(n.subtitle||e.subtitle),V=C||k,L=!!(n.append||e.appendAvatar||e.appendIcon),M=!!(n.prepend||e.prependAvatar||e.prependIcon),G=!!(n.image||e.image),j=V||M||L,B=!!(n.text||e.text);return Et(b(_,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":x.value},s.value,r.value,o.value,c.value,h.value,d.value,p.value,g.value,l.value,e.class],style:[a.value,u.value,f.value,e.style],href:y.href.value,onClick:x.value&&y.navigate,tabindex:e.disabled?-1:void 0},{default:()=>{var R;return[G&&b("div",{key:"image",class:"v-card__image"},[n.image?b(wt,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):b(Zd,{key:"image-img",cover:!0,src:e.image},null)]),b(Wd,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:n.loader}),j&&b(OR,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),B&&b(z_,{key:"text"},{default:()=>{var F;return[((F=n.text)==null?void 0:F.call(n))??e.text]}}),(R=n.default)==null?void 0:R.call(n),n.actions&&b(ER,null,{default:n.actions}),Cr(x.value,"v-card")]}}),[[Bi("ripple"),x.value&&e.ripple]])}),{}}});const NR=le({id:String,text:String,...Po(Kd({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"v-tooltip"),UR=xe()({name:"VTooltip",props:NR(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const n=ct(e,"modelValue"),{scopeId:s}=qd(),r=qt(),o=N(()=>e.id||`v-tooltip-${r}`),a=Pe(),l=N(()=>e.location.split(" ").length>1?e.location:e.location+" center"),c=N(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),u=N(()=>e.transition?e.transition:n.value?"scale-transition":"fade-transition"),h=N(()=>Oe({"aria-describedby":o.value},e.activatorProps));return Be(()=>{const[d]=ul.filterProps(e);return b(ul,Oe({ref:a,class:["v-tooltip",e.class],style:e.style,id:o.value},d,{modelValue:n.value,"onUpdate:modelValue":f=>n.value=f,transition:u.value,absolute:!0,location:l.value,origin:c.value,persistent:!0,role:"tooltip",activatorProps:h.value,_disableGlobalStack:!0},s),{activator:i.activator,default:function(){var y;for(var f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];return((y=i.default)==null?void 0:y.call(i,...p))??e.text}})}),Yl({},a)}});function VR(e,t,i,n,s,r){const o=zt("robot-detailed-menu-component");return He(),at(Hn,{style:{"max-width":"11vw","min-width":"11vw"}},{default:se(()=>[(He(!0),Ot(Xe,null,zn(s.state.world.teams.get(s.state.world.team).robots.filter(a=>s.isValid(a)),a=>(He(),at($n,{variant:"outlined",class:"mb-4 pl-4 pt-3 pb-1 justify-space-around",ref_for:!0,ref:"robotCard"+a.id,style:{"outline-offset":"-1px"},onClick:Gt(l=>s.state.setJoystickRobot(a.id),["left","stop"]),onContextmenu:Gt(l=>r.changeDetailedStatusMenu(a),["prevent"])},{default:se(()=>[b(Gn,null,{default:se(()=>[Ze(mt(a.id)+" ",1),gt("canvas",{ref_for:!0,ref:"canvas"+a.id,height:"100",width:"100",style:{width:"90px",height:"90px"}},null,512),b(Je,{variant:"plain",density:"compact",style:{"min-width":"0px",width:"0px"},disabled:r.batteryLevel(a)===""},{default:se(()=>[b(UR,{activator:"parent",location:"end"},{default:se(()=>[Ze(mt(r.batteryLevel(a)),1)]),_:2},1024),b(tt,{icon:r.batteryIcon(a.status.battery_percent),class:"mx-0 pl-1 justify-center",size:"small"},null,8,["icon"])]),_:2},1032,["disabled"])]),_:2},1024),b(o,{robot:a,activeDetailedMenuId:s.activeDetailedMenuId},null,8,["robot","activeDetailedMenuId"])]),_:2},1032,["onClick","onContextmenu"]))),256))]),_:1})}const HR=Kt(CR,[["render",VR]]),GR={data:function(){return{gcAddress:"ws://"+location.hostname+":8081",connection:null,connectionState:WebSocket.CLOSED,autoContinue:!1}},created:function(){this.attemptToConnect()},beforeUnmount:function(){this.connection.close()},methods:{sendGCCommand:function(e,t){this.connection.send(JSON.stringify({change:{origin:"UI",revertible:!0,new_command_change:{command:{type:e,forTeam:t}}}}))},toggleContinueAutomatically:function(){this.connection.send(JSON.stringify({config_delta:{autoContinue:this.autoContinue}}))},attemptToConnect:function(){var e=this;this.connection=new WebSocket(this.gcAddress+"/api/control"),this.connection.onmessage=function(t){var i=JSON.parse(t.data);i.config&&(e.autoContinue=i.config.autoContinue)},this.connection.onopen=function(t){console.log("Connected to the GC API server."),e.connectionState=t.target.readyState,e.connection.send(JSON.stringify({config_delta:{}}))},this.connection.onerror=function(t){console.log("Error communicating with GC API server:"),console.log(t),e.connectionState=t.target.readyState},this.connection.onclose=function(t){e.connectionState=t.target.readyState}}},computed:{gameControllerCommandsAvailable(){return this.connectionState===WebSocket.OPEN}}};const $R=le({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...$e(),...Tt()},"v-divider"),Lh=xe()({name:"VDivider",props:$R(),setup(e,t){let{attrs:i}=t;const{themeClasses:n}=Pt(e),{textColorClasses:s,textColorStyles:r}=di(we(e,"color")),o=N(()=>{const a={};return e.length&&(a[e.vertical?"maxHeight":"maxWidth"]=Ie(e.length)),e.thickness&&(a[e.vertical?"borderRightWidth":"borderTopWidth"]=Ie(e.thickness)),a});return Be(()=>b("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},n.value,s.value,e.class],style:[o.value,r.value,e.style],"aria-orientation":!i.role||i.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${i.role||"separator"}`},null)),{}}});const WR=le({text:String,clickable:Boolean,...$e(),...Tt()},"v-label"),Jd=xe()({name:"VLabel",props:WR(),setup(e,t){let{slots:i}=t;return Be(()=>{var n;return b("label",{class:["v-label",{"v-label--clickable":e.clickable},e.class],style:e.style},[e.text,(n=i.default)==null?void 0:n.call(i)])}),{}}});const j_=Symbol.for("vuetify:selection-control-group"),X_=le({color:String,disabled:Boolean,defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:et,trueIcon:et,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:_r},...$e(),...pi(),...Tt()},"selection-control-group"),zR=le({...X_({defaultsTarget:"VSelectionControl"})},"v-selection-control-group");xe()({name:"VSelectionControlGroup",props:zR(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const n=ct(e,"modelValue"),s=qt(),r=N(()=>e.id||`v-selection-control-group-${s}`),o=N(()=>e.name||r.value),a=new Set;return Ut(j_,{modelValue:n,forceUpdate:()=>{a.forEach(l=>l())},onForceUpdate:l=>{a.add(l),ii(()=>{a.delete(l)})}}),_n({[e.defaultsTarget]:{color:we(e,"color"),disabled:we(e,"disabled"),density:we(e,"density"),error:we(e,"error"),inline:we(e,"inline"),modelValue:n,multiple:N(()=>!!e.multiple||e.multiple==null&&Array.isArray(n.value)),name:o,falseIcon:we(e,"falseIcon"),trueIcon:we(e,"trueIcon"),readonly:we(e,"readonly"),ripple:we(e,"ripple"),type:we(e,"type"),valueComparator:we(e,"valueComparator")}}),Be(()=>{var l;return b("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(l=i.default)==null?void 0:l.call(i)])}),{}}});const Qd=le({label:String,trueValue:null,falseValue:null,value:null,...$e(),...X_()},"v-selection-control");function jR(e){const t=qe(j_,void 0),{densityClasses:i}=Li(e),n=ct(e,"modelValue"),s=N(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),r=N(()=>e.falseValue!==void 0?e.falseValue:!1),o=N(()=>!!e.multiple||e.multiple==null&&Array.isArray(n.value)),a=N({get(){const h=t?t.modelValue.value:n.value;return o.value?h.some(d=>e.valueComparator(d,s.value)):e.valueComparator(h,s.value)},set(h){if(e.readonly)return;const d=h?s.value:r.value;let f=d;o.value&&(f=h?[...Ln(n.value),d]:Ln(n.value).filter(p=>!e.valueComparator(p,s.value))),t?t.modelValue.value=f:n.value=f}}),{textColorClasses:l,textColorStyles:c}=di(N(()=>a.value&&!e.error&&!e.disabled?e.color:void 0)),u=N(()=>a.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:i,trueValue:s,falseValue:r,model:a,textColorClasses:l,textColorStyles:c,icon:u}}const Nh=xe()({name:"VSelectionControl",directives:{Ripple:Ar},inheritAttrs:!1,props:Qd(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:i,slots:n}=t;const{group:s,densityClasses:r,icon:o,model:a,textColorClasses:l,textColorStyles:c,trueValue:u}=jR(e),h=qt(),d=N(()=>e.id||`input-${h}`),f=Re(!1),p=Re(!1),g=Pe();s==null||s.onForceUpdate(()=>{g.value&&(g.value.checked=a.value)});function y(_){f.value=!0,(!qu||qu&&_.target.matches(":focus-visible"))&&(p.value=!0)}function w(){f.value=!1,p.value=!1}function x(_){e.readonly&&s&&ni(()=>s.forceUpdate()),a.value=_.target.checked}return Be(()=>{var V,L;const _=n.label?n.label({label:e.label,props:{for:d.value}}):e.label,[C,k]=Sl(i);return b("div",Oe({class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":f.value,"v-selection-control--focus-visible":p.value,"v-selection-control--inline":e.inline},r.value,e.class]},C,{style:e.style}),[b("div",{class:["v-selection-control__wrapper",l.value],style:c.value},[(V=n.default)==null?void 0:V.call(n),Et(b("div",{class:["v-selection-control__input"]},[o.value&&b(tt,{key:"icon",icon:o.value},null),b("input",Oe({ref:g,checked:a.value,disabled:e.disabled,id:d.value,onBlur:w,onFocus:y,onInput:x,"aria-disabled":e.readonly,type:e.type,value:u.value,name:e.name,"aria-checked":e.type==="checkbox"?a.value:void 0},k),null),(L=n.input)==null?void 0:L.call(n,{model:a,textColorClasses:l,textColorStyles:c,props:{onFocus:y,onBlur:w,id:d.value}})]),[[Bi("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),_&&b(Jd,{for:d.value,clickable:!0},{default:()=>[_]})])}),{isFocused:f,input:g}}});const XR=le({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...$e(),...Go({transition:{component:F_,leaveAbsolute:!0,group:!0}})},"v-messages"),YR=xe()({name:"VMessages",props:XR(),setup(e,t){let{slots:i}=t;const n=N(()=>Ln(e.messages)),{textColorClasses:s,textColorStyles:r}=di(N(()=>e.color));return Be(()=>b(ln,{transition:e.transition,tag:"div",class:["v-messages",s.value,e.class],style:[r.value,e.style],role:"alert","aria-live":"polite"},{default:()=>[e.active&&n.value.map((o,a)=>b("div",{class:"v-messages__message",key:`${a}-${n.value}`},[i.message?i.message({message:o}):o]))]})),{}}}),qR=Symbol.for("vuetify:form");function Y_(){return qe(qR,null)}const ef=le({focused:Boolean,"onUpdate:focused":Yi()},"focus");function $o(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn();const i=ct(e,"focused"),n=N(()=>({[`${t}--focused`]:i.value}));function s(){i.value=!0}function r(){i.value=!1}return{focusClasses:n,isFocused:i,focus:s,blur:r}}const KR=le({disabled:Boolean,error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:Boolean,rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...ef()},"validation");function ZR(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bn(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qt();const n=ct(e,"modelValue"),s=N(()=>e.validationValue===void 0?n.value:e.validationValue),r=Y_(),o=Pe([]),a=Re(!0),l=N(()=>!!(Ln(n.value===""?null:n.value).length||Ln(s.value===""?null:s.value).length)),c=N(()=>!!(e.disabled||r!=null&&r.isDisabled.value)),u=N(()=>!!(e.readonly||r!=null&&r.isReadonly.value)),h=N(()=>e.errorMessages.length?Ln(e.errorMessages).slice(0,Math.max(0,+e.maxErrors)):o.value),d=N(()=>e.error||h.value.length?!1:e.rules.length&&a.value?null:!0),f=Re(!1),p=N(()=>({[`${t}--error`]:d.value===!1,[`${t}--dirty`]:l.value,[`${t}--disabled`]:c.value,[`${t}--readonly`]:u.value})),g=N(()=>e.name??on(i));od(()=>{r==null||r.register({id:g.value,validate:_,reset:w,resetValidation:x})}),Fi(()=>{r==null||r.unregister(g.value)});const y=N(()=>e.validateOn||(r==null?void 0:r.validateOn.value)||"input");Zn(()=>r==null?void 0:r.update(g.value,d.value,h.value)),Ss(()=>y.value==="input",()=>{Ge(s,()=>{if(s.value!=null)_();else if(e.focused){const C=Ge(()=>e.focused,k=>{k||_(),C()})}})}),Ss(()=>y.value==="blur",()=>{Ge(()=>e.focused,C=>{C||_()})}),Ge(d,()=>{r==null||r.update(g.value,d.value,h.value)});function w(){x(),n.value=null}function x(){a.value=!0,o.value=[]}async function _(){const C=[];f.value=!0;for(const k of e.rules){if(C.length>=+(e.maxErrors??1))break;const L=await(typeof k=="function"?k:()=>k)(s.value);if(L!==!0){if(typeof L!="string"){console.warn(`${L} is not a valid value. Rule functions must return boolean true or a string.`);continue}C.push(L)}}return o.value=C,f.value=!1,a.value=!1,o.value}return{errorMessages:h,isDirty:l,isDisabled:c,isReadonly:u,isPristine:a,isValid:d,isValidating:f,reset:w,resetValidation:x,validate:_,validationClasses:p}}function q_(e){const{t}=Mo();function i(n){let{name:s}=n;const r={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[s],o=e[`onClick:${s}`],a=o&&r?t(`$vuetify.input.${r}`,e.label??""):void 0;return b(tt,{icon:e[`${s}Icon`],"aria-label":a,onClick:o},null)}return{InputIcon:i}}const Wo=le({id:String,appendIcon:et,prependIcon:et,hideDetails:[Boolean,String],hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Yi(),"onClick:append":Yi(),...$e(),...pi(),...KR()},"v-input"),qn=xe()({name:"VInput",props:{...Wo()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:i,slots:n,emit:s}=t;const{densityClasses:r}=Li(e),{InputIcon:o}=q_(e),a=qt(),l=N(()=>e.id||`input-${a}`),c=N(()=>`${l.value}-messages`),{errorMessages:u,isDirty:h,isDisabled:d,isReadonly:f,isPristine:p,isValid:g,isValidating:y,reset:w,resetValidation:x,validate:_,validationClasses:C}=ZR(e,"v-input",l),k=N(()=>({id:l,messagesId:c,isDirty:h,isDisabled:d,isReadonly:f,isPristine:p,isValid:g,isValidating:y,reset:w,resetValidation:x,validate:_})),V=N(()=>u.value.length>0?u.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages);return Be(()=>{var B,R,F,O;const L=!!(n.prepend||e.prependIcon),M=!!(n.append||e.appendIcon),G=V.value.length>0,j=!e.hideDetails||e.hideDetails==="auto"&&(G||!!n.details);return b("div",{class:["v-input",`v-input--${e.direction}`,r.value,C.value,e.class],style:e.style},[L&&b("div",{key:"prepend",class:"v-input__prepend"},[(B=n.prepend)==null?void 0:B.call(n,k.value),e.prependIcon&&b(o,{key:"prepend-icon",name:"prepend"},null)]),n.default&&b("div",{class:"v-input__control"},[(R=n.default)==null?void 0:R.call(n,k.value)]),M&&b("div",{key:"append",class:"v-input__append"},[e.appendIcon&&b(o,{key:"append-icon",name:"append"},null),(F=n.append)==null?void 0:F.call(n,k.value)]),j&&b("div",{class:"v-input__details"},[b(YR,{id:c.value,active:G,messages:V.value},{message:n.message}),(O=n.details)==null?void 0:O.call(n,k.value)])])}),{reset:w,resetValidation:x,validate:_}}}),JR=le({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Wo(),...Qd()},"v-switch"),Uh=xe()({name:"VSwitch",inheritAttrs:!1,props:JR(),emits:{"update:focused":e=>!0,"update:modelValue":()=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:i,slots:n}=t;const s=ct(e,"indeterminate"),r=ct(e,"modelValue"),{loaderClasses:o}=zl(e),{isFocused:a,focus:l,blur:c}=$o(e),u=N(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),h=qt(),d=N(()=>e.id||`switch-${h}`);function f(){s.value&&(s.value=!1)}return Be(()=>{const[p,g]=Sl(i),[y,w]=qn.filterProps(e),[x,_]=Nh.filterProps(e),C=Pe();function k(V){var L,M;V.stopPropagation(),V.preventDefault(),(M=(L=C.value)==null?void 0:L.input)==null||M.click()}return b(qn,Oe({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},o.value,e.class],style:e.style},p,y,{id:d.value,focused:a.value}),{...n,default:V=>{let{id:L,messagesId:M,isDisabled:G,isReadonly:j,isValid:B}=V;return b(Nh,Oe({ref:C},x,{modelValue:r.value,"onUpdate:modelValue":[R=>r.value=R,f],id:L.value,"aria-describedby":M.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:G.value,readonly:j.value,onFocus:l,onBlur:c},g),{...n,default:()=>b("div",{class:"v-switch__track",onClick:k},null),input:R=>{let{textColorClasses:F,textColorStyles:O}=R;return b("div",{class:["v-switch__thumb",F.value],style:O.value},[e.loading&&b(Wd,{name:"v-switch",active:!0,color:B.value===!1?void 0:u.value},{default:q=>n.loader?n.loader(q):b(Gd,{active:q.isActive,color:q.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),QR=gt("b",null,"Game Controller",-1),ek=gt("p",{class:"d-flex text-no-wrap my-1 justify-space-around"},"No local GC.",-1);function tk(e,t,i,n,s,r){return He(),at(Vn,{class:"d-flex flex-column"},{default:se(()=>[QR,r.gameControllerCommandsAvailable?(He(),at(Vn,{key:0,class:"d-flex flex-column"},{default:se(()=>[b(Je,{id:"gc_start_button",color:"green",class:"d-flex my-1 justify-space-around",onClick:t[0]||(t[0]=o=>r.sendGCCommand("NORMAL_START","UNKNOWN"))},{default:se(()=>[Ze("Start")]),_:1}),b(Je,{id:"gc_force_start_button",color:"green-darken-4",class:"d-flex my-1 justify-space-around",onClick:t[1]||(t[1]=o=>r.sendGCCommand("FORCE_START","UNKNOWN"))},{default:se(()=>[Ze("Force Start")]),_:1}),b(Je,{id:"gc_stop_button",color:"red",class:"d-flex my-1 justify-space-around",onClick:t[2]||(t[2]=o=>r.sendGCCommand("STOP","UNKNOWN"))},{default:se(()=>[Ze("Stop")]),_:1}),b(Je,{id:"gc_halt_button",color:"red-darken-4",class:"d-flex my-1 justify-space-around",onClick:t[3]||(t[3]=o=>r.sendGCCommand("HALT","UNKNOWN"))},{default:se(()=>[Ze("Halt")]),_:1}),b(Lh,{thickness:10}),b(Je,{id:"gc_blue_freekick_button",color:"blue-darken-3",class:"d-flex my-1 justify-space-around",onClick:t[4]||(t[4]=o=>r.sendGCCommand("DIRECT","BLUE"))},{default:se(()=>[Ze("Direct")]),_:1}),b(Je,{id:"gc_blue_kickoff_button",color:"blue-darken-3",class:"d-flex my-1 justify-space-around",onClick:t[5]||(t[5]=o=>r.sendGCCommand("KICKOFF","BLUE"))},{default:se(()=>[Ze("Kickoff")]),_:1}),b(Je,{id:"gc_blue_penalty_button",color:"blue-darken-3",class:"d-flex my-1 justify-space-around",onClick:t[6]||(t[6]=o=>r.sendGCCommand("PENALTY","BLUE"))},{default:se(()=>[Ze("Penalty")]),_:1}),b(Lh,{thickness:10}),b(Je,{id:"gc_yellow_freekick_button",color:"yellow-darken-1",class:"d-flex my-1 justify-space-around",onClick:t[7]||(t[7]=o=>r.sendGCCommand("DIRECT","YELLOW"))},{default:se(()=>[Ze("Direct")]),_:1}),b(Je,{id:"gc_yellow_kickoff_button",color:"yellow-darken-1",class:"d-flex my-1 justify-space-around",onClick:t[8]||(t[8]=o=>r.sendGCCommand("KICKOFF","YELLOW"))},{default:se(()=>[Ze("Kickoff")]),_:1}),b(Je,{id:"gc_yellow_penalty_button",color:"yellow-darken-1",class:"d-flex my-1 justify-space-around",onClick:t[9]||(t[9]=o=>r.sendGCCommand("PENALTY","YELLOW"))},{default:se(()=>[Ze("Penalty")]),_:1}),b(Uh,{label:"Auto Continue",density:"compact",modelValue:e.autoContinue,"onUpdate:modelValue":t[10]||(t[10]=o=>e.autoContinue=o),onChange:t[11]||(t[11]=o=>r.toggleContinueAutomatically())},null,8,["modelValue"])]),_:1})):cn("",!0),r.gameControllerCommandsAvailable?cn("",!0):(He(),at(Vn,{key:1,class:"d-flex flex-column"},{default:se(()=>[ek]),_:1}))]),_:1})}const ik=Kt(GR,[["render",tk]]),nk={inject:["state"],props:["team"],data(){return{state:qe("state")}},computed:{getRefState:function(){return this.state.world.referee},timeoutTimer:function(){const e=Math.floor(this.team.timeout_time/1e6);let t=Math.floor(e/60),i=Math.abs(Math.floor(e%60));return t+":"+i.toString().padStart(2,"0")},yellowCardTimer:function(){let e=null;if(this.team.yellow_card_times.forEach(function(s){(!e||s<e)&&(e=s)}),!e)return"N/A";const t=Math.floor(e/1e6);let i=Math.floor(t/60),n=Math.abs(Math.floor(t%60));return i+":"+n.toString().padStart(2,"0")},numberAllowedRobots:function(){return this.team.yellow_card_times?6-(this.team.red_cards+this.team.yellow_card_times.length):6}},watch:{getRefState:{handler(){},deep:!0}}},sk={style:{"text-align":"center"}},rk={style:{"text-align":"center"}},ok={style:{"text-align":"center"}},ak={style:{"text-align":"center"}},lk={style:{"text-align":"center"}};function ck(e,t,i,n,s,r){return He(),at($n,{variant:"outlined",style:ci({color:i.team.color,padding:"5px"})},{default:se(()=>[gt("p",null," Team: "+mt(i.team.name),1),gt("p",sk," Score: "+mt(i.team.score),1),gt("p",rk," Yellow: "+mt(i.team.yellow_card_times.length)+" | "+mt(r.yellowCardTimer),1),gt("p",ok," Red: "+mt(i.team.red_cards),1),gt("p",ak," Timeout("+mt(i.team.timeouts)+"): "+mt(r.timeoutTimer),1),gt("p",lk," #Allowed Robots:"+mt(r.numberAllowedRobots),1)]),_:1},8,["style"])}const uk=Kt(nk,[["render",ck]]),hk={inject:["state"],data(){return{state:qe("state")}},mounted(){},methods:{},computed:{getRefState:function(){return this.state.world.referee},stageProperty:function(){return cP(this.state.world.referee)},commandProperty:function(){return uP(this.state.world.referee)},doesStageTimeExist:function(){return this.state.world.referee&&this.state.world.referee.stage_time_left&&this.state.world.referee.stage_time_left.length>0},stageTimeLeft:function(){const e=Math.floor(this.state.world.referee.stage_time_left/1e6);let t=Math.floor(e/60),i=Math.abs(Math.floor(e%60));return t+":"+i.toString().padStart(2,"0")}},watch:{getRefState:{handler(){},deep:!0}},components:{TeamGameComponent:uk}},dk={key:0,class:"d-flex justify-center"};function fk(e,t,i,n,s,r){const o=zt("TeamGameComponent");return He(),at(Hn,{cols:"auto"},{default:se(()=>[r.doesStageTimeExist?(He(),Ot("div",dk,mt(r.stageTimeLeft),1)):cn("",!0),s.state.world.referee.blue.name||s.state.world.referee.yellow.name?(He(),at(Gn,{key:1,class:"nowrap justify-center ms-2 ps-2 mb-2 pb-2",align:"center"},{default:se(()=>[b(o,{team:s.state.world.referee.blue,style:{background:"blue"}},null,8,["team"]),b($n,{variant:"outlined",class:"ma-2 pa-2 align-centered",style:ci("color: "+r.stageProperty.color)},{default:se(()=>[b(Oh,{class:no("text-"+r.stageProperty.color+"-lighten-4")},{default:se(()=>[gt("b",null,mt(r.stageProperty.name),1)]),_:1},8,["class"])]),_:1},8,["style"]),b($n,{variant:"outlined",class:"ma-2 pa-2",style:ci("color: "+r.commandProperty.color)},{default:se(()=>[b(Oh,{class:no("text-"+r.commandProperty.color+"-lighten-4")},{default:se(()=>[gt("b",null,mt(r.commandProperty.name),1)]),_:1},8,["class"])]),_:1},8,["style"]),b(o,{team:s.state.world.referee.yellow,style:{background:"yellow",color:"black"}},null,8,["team"])]),_:1})):cn("",!0)]),_:1})}const pk=Kt(hk,[["render",fk]]),mk={props:{node:{type:Object,required:!0},name:{type:String,required:!0},spacing:{type:Number,default:5}},computed:{isValid:function(){return!(this.node===null||this.node===void 0)},isLeaf:function(){return!Array.isArray(this.node)&&(typeof this.node=="string"||typeof this.node=="number"||typeof this.node=="boolean"||this.node===null)},isArray:function(){return Array.isArray(this.node)},getMargin:function(){return"margin-left: "+this.spacing+"px"}}};function gk(e,t,i,n,s,r){const o=zt("AIRecursiveComponent",!0);return He(),Ot(Xe,null,[Ze(mt(i.name)+" ",1),r.isLeaf?(He(),Ot("div",{key:0,style:ci({"margin-left":i.spacing+"px"})},mt(i.node),5)):cn("",!0),r.isArray?(He(),Ot("div",{key:1,style:ci({"margin-left":i.spacing+"px"})},[(He(!0),Ot(Xe,null,zn(i.node,a=>(He(),at(o,{key:a,name:"",node:a,spacing:i.spacing+5,style:{"white-space":"normal"}},null,8,["node","spacing"]))),128))],4)):cn("",!0),!r.isArray&&!r.isLeaf&&r.isValid?(He(),Ot("div",{key:2,style:ci({"margin-left":i.spacing+"px"})},[(He(!0),Ot(Xe,null,zn(Object.getOwnPropertyNames(i.node),a=>(He(),at(o,{key:a,name:a,node:i.node[a],spacing:i.spacing+5,style:{"white-space":"normal"}},null,8,["name","node","spacing"]))),128))],4)):cn("",!0)],64)}const vk=Kt(mk,[["render",gk]]),yk={inject:["state"],mounted(){},computed:{getAIDescription:function(){let e={};try{e[this.state.world.ai.name]=JSON.parse(this.state.world.ai.description)}catch(t){t instanceof SyntaxError&&console.log("Play description contained invalid JSON")}return e&&this.state.world.ai.description!="{}"||(e={},e[this.state.world.ai.name]=""),e}},watch:{getAIDescription:{handler(){},deep:!0}},components:{AIRecursiveComponent:vk}},_k={style:{margin:"5px"}};function bk(e,t,i,n,s,r){const o=zt("AIRecursiveComponent");return He(),at($n,{variant:"outlined",style:{"white-space":"nowrap",overflow:"hidden"}},{default:se(()=>[gt("div",_k,[(He(!0),Ot(Xe,null,zn(Object.getOwnPropertyNames(r.getAIDescription),a=>(He(),at(o,{key:a,name:a,node:r.getAIDescription[a],spacing:5},null,8,["name","node"]))),128))])]),_:1})}const xk=Kt(yk,[["render",bk]]);const wk={inject:["state"],data(){return{selectedPlay:[]}},mounted(){this.setListSelectedPlay()},methods:{selectPlayOverride(e){e.value?this.state.selectedPlayName=e.id:this.state.selectedPlayName="",this.state.setOverridePlay(this.state.selectedPlayName)},setPlayEnabled(e){this.state.setPlayEnabled(e)},displayScore(e){return e==null?"NaN":e==Number.MAX_VALUE?"":e==-Number.MAX_VALUE?"-":e.toFixed(2)},isScoreInf(e){return e==Number.MAX_VALUE||e==-Number.MAX_VALUE},setListSelectedPlay(){this.state.selectedPlayName==""?this.selectedPlay=[]:this.selectedPlay=[this.state.selectedPlayName]},setAllPlayEnabledValue(e){for(var[t,i]of this.state.plays)i.enabled=e,this.setPlayEnabled(i)},getColor(e){return e.toLowerCase().includes("test")?"#212150FF":e.toLowerCase().includes("pass")?"#502150FF":"#212121FF"}},computed:{getPlays:function(){return this.state.plays},getSelectedPlayName:function(){return this.state.selectedPlayName}},watch:{getPlays:{handler(){},deep:!0},getSelectedPlayName:{handler(){this.setListSelectedPlay()},deep:!0}}};const Vh=Symbol.for("vuetify:list");function K_(){const e=qe(Vh,{hasPrepend:Re(!1),updateHasPrepend:()=>null}),t={hasPrepend:Re(!1),updateHasPrepend:i=>{i&&(t.hasPrepend.value=i)}};return Ut(Vh,t),e}function Z_(){return qe(Vh,null)}const Sk={open:e=>{let{id:t,value:i,opened:n,parents:s}=e;if(i){const r=new Set;r.add(t);let o=s.get(t);for(;o!=null;)r.add(o),o=s.get(o);return r}else return n.delete(t),n},select:()=>null},J_={open:e=>{let{id:t,value:i,opened:n,parents:s}=e;if(i){let r=s.get(t);for(n.add(t);r!=null&&r!==t;)n.add(r),r=s.get(r);return n}else n.delete(t);return n},select:()=>null},Tk={open:J_.open,select:e=>{let{id:t,value:i,opened:n,parents:s}=e;if(!i)return n;const r=[];let o=s.get(t);for(;o!=null;)r.push(o),o=s.get(o);return new Set(r)}},tf=e=>{const t={select:i=>{let{id:n,value:s,selected:r}=i;if(n=Ue(n),e&&!s){const o=Array.from(r.entries()).reduce((a,l)=>{let[c,u]=l;return u==="on"?[...a,c]:a},[]);if(o.length===1&&o[0]===n)return r}return r.set(n,s?"on":"off"),r},in:(i,n,s)=>{let r=new Map;for(const o of i||[])r=t.select({id:o,value:!0,selected:new Map(r),children:n,parents:s});return r},out:i=>{const n=[];for(const[s,r]of i.entries())r==="on"&&n.push(s);return n}};return t},Q_=e=>{const t=tf(e);return{select:n=>{let{selected:s,id:r,...o}=n;r=Ue(r);const a=s.has(r)?new Map([[r,s.get(r)]]):new Map;return t.select({...o,id:r,selected:a})},in:(n,s,r)=>{let o=new Map;return n!=null&&n.length&&(o=t.in(n.slice(0,1),s,r)),o},out:(n,s,r)=>t.out(n,s,r)}},Ck=e=>{const t=tf(e);return{select:n=>{let{id:s,selected:r,children:o,...a}=n;return s=Ue(s),o.has(s)?r:t.select({id:s,selected:r,children:o,...a})},in:t.in,out:t.out}},Ek=e=>{const t=Q_(e);return{select:n=>{let{id:s,selected:r,children:o,...a}=n;return s=Ue(s),o.has(s)?r:t.select({id:s,selected:r,children:o,...a})},in:t.in,out:t.out}},Ak=e=>{const t={select:i=>{let{id:n,value:s,selected:r,children:o,parents:a}=i;n=Ue(n);const l=new Map(r),c=[n];for(;c.length;){const h=c.shift();r.set(h,s?"on":"off"),o.has(h)&&c.push(...o.get(h))}let u=a.get(n);for(;u;){const h=o.get(u),d=h.every(p=>r.get(p)==="on"),f=h.every(p=>!r.has(p)||r.get(p)==="off");r.set(u,d?"on":f?"off":"indeterminate"),u=a.get(u)}return e&&!s&&Array.from(r.entries()).reduce((d,f)=>{let[p,g]=f;return g==="on"?[...d,p]:d},[]).length===0?l:r},in:(i,n,s)=>{let r=new Map;for(const o of i||[])r=t.select({id:o,value:!0,selected:new Map(r),children:n,parents:s});return r},out:(i,n)=>{const s=[];for(const[r,o]of i.entries())o==="on"&&!n.has(r)&&s.push(r);return s}};return t},To=Symbol.for("vuetify:nested"),eb={id:Re(),root:{register:()=>null,unregister:()=>null,parents:Pe(new Map),children:Pe(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:Pe(new Set),selected:Pe(new Map),selectedValues:Pe([])}},Ik=le({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),Pk=e=>{let t=!1;const i=Pe(new Map),n=Pe(new Map),s=ct(e,"opened",e.opened,h=>new Set(h),h=>[...h.values()]),r=N(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single-leaf":return Ek(e.mandatory);case"leaf":return Ck(e.mandatory);case"independent":return tf(e.mandatory);case"single-independent":return Q_(e.mandatory);case"classic":default:return Ak(e.mandatory)}}),o=N(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return Tk;case"single":return Sk;case"multiple":default:return J_}}),a=ct(e,"selected",e.selected,h=>r.value.in(h,i.value,n.value),h=>r.value.out(h,i.value,n.value));Fi(()=>{t=!0});function l(h){const d=[];let f=h;for(;f!=null;)d.unshift(f),f=n.value.get(f);return d}const c=Ft("nested"),u={id:Re(),root:{opened:s,selected:a,selectedValues:N(()=>{const h=[];for(const[d,f]of a.value.entries())f==="on"&&h.push(d);return h}),register:(h,d,f)=>{d&&h!==d&&n.value.set(h,d),f&&i.value.set(h,[]),d!=null&&i.value.set(d,[...i.value.get(d)||[],h])},unregister:h=>{if(t)return;i.value.delete(h);const d=n.value.get(h);if(d){const f=i.value.get(d)??[];i.value.set(d,f.filter(p=>p!==h))}n.value.delete(h),s.value.delete(h)},open:(h,d,f)=>{c.emit("click:open",{id:h,value:d,path:l(h),event:f});const p=o.value.open({id:h,value:d,opened:new Set(s.value),children:i.value,parents:n.value,event:f});p&&(s.value=p)},openOnSelect:(h,d,f)=>{const p=o.value.select({id:h,value:d,selected:new Map(a.value),opened:new Set(s.value),children:i.value,parents:n.value,event:f});p&&(s.value=p)},select:(h,d,f)=>{c.emit("click:select",{id:h,value:d,path:l(h),event:f});const p=r.value.select({id:h,value:d,selected:new Map(a.value),children:i.value,parents:n.value,event:f});p&&(a.value=p),u.root.openOnSelect(h,d,f)},children:i,parents:n}};return Ut(To,u),u.root},tb=(e,t)=>{const i=qe(To,eb),n=Symbol(qt()),s=N(()=>e.value??n),r={...i,id:s,open:(o,a)=>i.root.open(s.value,o,a),openOnSelect:(o,a)=>i.root.openOnSelect(s.value,o,a),isOpen:N(()=>i.root.opened.value.has(s.value)),parent:N(()=>i.root.parents.value.get(s.value)),select:(o,a)=>i.root.select(s.value,o,a),isSelected:N(()=>i.root.selected.value.get(Ue(s.value))==="on"),isIndeterminate:N(()=>i.root.selected.value.get(s.value)==="indeterminate"),isLeaf:N(()=>!i.root.children.value.get(s.value)),isGroupActivator:i.isGroupActivator};return!i.isGroupActivator&&i.root.register(s.value,i.id.value,t),Fi(()=>{!i.isGroupActivator&&i.root.unregister(s.value)}),t&&Ut(To,r),r},Mk=()=>{const e=qe(To,eb);Ut(To,{...e,isGroupActivator:!0})};function ql(){const e=Re(!1);return Zn(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:N(()=>e.value?void 0:{transition:"none !important"}),isBooted:Eo(e)}}const Rk=br({name:"VListGroupActivator",setup(e,t){let{slots:i}=t;return Mk(),()=>{var n;return(n=i.default)==null?void 0:n.call(i)}}}),kk=le({activeColor:String,color:String,collapseIcon:{type:et,default:"$collapse"},expandIcon:{type:et,default:"$expand"},prependIcon:et,appendIcon:et,fluid:Boolean,subgroup:Boolean,title:String,value:null,...$e(),...pt()},"v-list-group"),Ng=xe()({name:"VListGroup",props:kk(),setup(e,t){let{slots:i}=t;const{isOpen:n,open:s,id:r}=tb(we(e,"value"),!0),o=N(()=>`v-list-group--id-${String(r.value)}`),a=Z_(),{isBooted:l}=ql();function c(f){s(!n.value,f)}const u=N(()=>({onClick:c,class:"v-list-group__header",id:o.value})),h=N(()=>n.value?e.collapseIcon:e.expandIcon),d=N(()=>({VListItem:{active:n.value,activeColor:e.activeColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&h.value,appendIcon:e.appendIcon||!e.subgroup&&h.value,title:e.title,value:e.value}}));return Be(()=>b(e.tag,{class:["v-list-group",{"v-list-group--prepend":a==null?void 0:a.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":n.value},e.class],style:e.style},{default:()=>[i.activator&&b(wt,{defaults:d.value},{default:()=>[b(Rk,null,{default:()=>[i.activator({props:u.value,isOpen:n.value})]})]}),b(ln,{transition:{component:D_},disabled:!l.value},{default:()=>{var f;return[Et(b("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[(f=i.default)==null?void 0:f.call(i)]),[[Qn,n.value]])]}})]})),{}}});const Bk=As("v-list-item-subtitle"),Oa=As("v-list-item-title"),Fk=le({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:et,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:et,ripple:{type:Boolean,default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:Yi(),onClickOnce:Yi(),...Ds(),...$e(),...pi(),...Ls(),...wn(),...mi(),...Xl(),...pt(),...Tt(),...Tn({variant:"text"})},"v-list-item"),Ht=xe()({name:"VListItem",directives:{Ripple:Ar},props:Fk(),emits:{click:e=>!0},setup(e,t){let{attrs:i,slots:n,emit:s}=t;const r=jl(e,i),o=N(()=>e.value??r.href.value),{select:a,isSelected:l,isIndeterminate:c,isGroupActivator:u,root:h,parent:d,openOnSelect:f}=tb(o,!1),p=Z_(),g=N(()=>{var W;return e.active!==!1&&(e.active||((W=r.isActive)==null?void 0:W.value)||l.value)}),y=N(()=>e.link!==!1&&r.isLink.value),w=N(()=>!e.disabled&&e.link!==!1&&(e.link||r.isClickable.value||e.value!=null&&!!p)),x=N(()=>e.rounded||e.nav),_=N(()=>({color:g.value?e.activeColor??e.color:e.color,variant:e.variant}));Ge(()=>{var W;return(W=r.isActive)==null?void 0:W.value},W=>{W&&d.value!=null&&h.open(d.value,!0),W&&f(W)},{immediate:!0});const{themeClasses:C}=Pt(e),{borderClasses:k}=Os(e),{colorClasses:V,colorStyles:L,variantClasses:M}=Er(_),{densityClasses:G}=Li(e),{dimensionStyles:j}=Ns(e),{elevationClasses:B}=Sn(e),{roundedClasses:R}=gi(x),F=N(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),O=N(()=>({isActive:g.value,select:a,isSelected:l.value,isIndeterminate:c.value}));function q(W){var S;s("click",W),!(u||!w.value)&&((S=r.navigate)==null||S.call(r,W),e.value!=null&&a(!l.value,W))}function X(W){(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),q(W))}return Be(()=>{const W=y.value?"a":e.tag,S=!p||l.value||g.value,A=n.title||e.title,E=n.subtitle||e.subtitle,I=!!(e.appendAvatar||e.appendIcon),U=!!(I||n.append),Y=!!(e.prependAvatar||e.prependIcon),J=!!(Y||n.prepend);return p==null||p.updateHasPrepend(J),Et(b(W,{class:["v-list-item",{"v-list-item--active":g.value,"v-list-item--disabled":e.disabled,"v-list-item--link":w.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!J&&(p==null?void 0:p.hasPrepend.value),[`${e.activeClass}`]:e.activeClass&&g.value},C.value,k.value,S?V.value:void 0,G.value,B.value,F.value,R.value,M.value,e.class],style:[S?L.value:void 0,j.value,e.style],href:r.href.value,tabindex:w.value?0:void 0,onClick:q,onKeydown:w.value&&!y.value&&X},{default:()=>{var ee;return[Cr(w.value||g.value,"v-list-item"),J&&b("div",{key:"prepend",class:"v-list-item__prepend"},[n.prepend?b(wt,{key:"prepend-defaults",disabled:!Y,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var $;return[($=n.prepend)==null?void 0:$.call(n,O.value)]}}):b(Xe,null,[e.prependAvatar&&b(mr,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&b(tt,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),b("div",{class:"v-list-item__content","data-no-activator":""},[A&&b(Oa,{key:"title"},{default:()=>{var $;return[(($=n.title)==null?void 0:$.call(n,{title:e.title}))??e.title]}}),E&&b(Bk,{key:"subtitle"},{default:()=>{var $;return[(($=n.subtitle)==null?void 0:$.call(n,{subtitle:e.subtitle}))??e.subtitle]}}),(ee=n.default)==null?void 0:ee.call(n,O.value)]),U&&b("div",{key:"append",class:"v-list-item__append"},[n.append?b(wt,{key:"append-defaults",disabled:!I,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var $;return[($=n.append)==null?void 0:$.call(n,O.value)]}}):b(Xe,null,[e.appendIcon&&b(tt,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&b(mr,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]}}),[[Bi("ripple"),w.value&&e.ripple]])}),{}}}),Dk=le({color:String,inset:Boolean,sticky:Boolean,title:String,...$e(),...pt()},"v-list-subheader"),Ok=xe()({name:"VListSubheader",props:Dk(),setup(e,t){let{slots:i}=t;const{textColorClasses:n,textColorStyles:s}=di(we(e,"color"));return Be(()=>{const r=!!(i.default||e.title);return b(e.tag,{class:["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},n.value,e.class],style:[{textColorStyles:s},e.style]},{default:()=>{var o;return[r&&b("div",{class:"v-list-subheader__text"},[((o=i.default)==null?void 0:o.call(i))??e.title])]}})}),{}}}),Lk=le({items:Array},"v-list-children"),ib=xe()({name:"VListChildren",props:Lk(),setup(e,t){let{slots:i}=t;return K_(),()=>{var n,s;return((n=i.default)==null?void 0:n.call(i))??((s=e.items)==null?void 0:s.map(r=>{var f,p;let{children:o,props:a,type:l,raw:c}=r;if(l==="divider")return((f=i.divider)==null?void 0:f.call(i,{props:a}))??b(Lh,a,null);if(l==="subheader")return((p=i.subheader)==null?void 0:p.call(i,{props:a}))??b(Ok,a,{default:i.subheader});const u={subtitle:i.subtitle?g=>{var y;return(y=i.subtitle)==null?void 0:y.call(i,{...g,item:c})}:void 0,prepend:i.prepend?g=>{var y;return(y=i.prepend)==null?void 0:y.call(i,{...g,item:c})}:void 0,append:i.append?g=>{var y;return(y=i.append)==null?void 0:y.call(i,{...g,item:c})}:void 0,default:i.default?g=>{var y;return(y=i.default)==null?void 0:y.call(i,{...g,item:c})}:void 0,title:i.title?g=>{var y;return(y=i.title)==null?void 0:y.call(i,{...g,item:c})}:void 0},[h,d]=Ng.filterProps(a);return o?b(Ng,Oe({value:a==null?void 0:a.value},h),{activator:g=>{let{props:y}=g;return i.header?i.header({props:{...a,...y}}):b(Ht,Oe(a,y),u)},default:()=>b(ib,{items:o},i)}):i.item?i.item(a):b(Ht,a,u)}))}}}),nb=le({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"item");function sb(e,t){const i=rn(t,e.itemTitle,t),n=e.returnObject?t:rn(t,e.itemValue,i),s=rn(t,e.itemChildren),r=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?Io(t,["children"])[1]:t:void 0:rn(t,e.itemProps),o={title:i,value:n,...r};return{title:String(o.title??""),value:o.value,props:o,children:Array.isArray(s)?rb(e,s):void 0,raw:t}}function rb(e,t){const i=[];for(const n of t)i.push(sb(e,n));return i}function Nk(e){const t=N(()=>rb(e,e.items));function i(s){return s.map(r=>t.value.find(a=>_r(r,a.value))??sb(e,r))}function n(s){return s.map(r=>{let{props:o}=r;return o.value})}return{items:t,transformIn:i,transformOut:n}}function Uk(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Vk(e,t){const i=rn(t,e.itemType,"item"),n=Uk(t)?t:rn(t,e.itemTitle),s=rn(t,e.itemValue,void 0),r=rn(t,e.itemChildren),o=e.itemProps===!0?Io(t,["children"])[1]:rn(t,e.itemProps),a={title:n,value:s,...o};return{type:i,title:a.title,value:a.value,props:a,children:i==="item"&&r?ob(e,r):void 0,raw:t}}function ob(e,t){const i=[];for(const n of t)i.push(Vk(e,n));return i}function Hk(e){return{items:N(()=>ob(e,e.items))}}const Gk=le({activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...Ik({selectStrategy:"single-leaf",openStrategy:"list"}),...Ds(),...$e(),...pi(),...Ls(),...wn(),itemType:{type:String,default:"type"},...nb(),...mi(),...pt(),...Tt(),...Tn({variant:"text"})},"v-list"),kn=xe()({name:"VList",props:Gk(),emits:{"update:selected":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:i}=t;const{items:n}=Hk(e),{themeClasses:s}=Pt(e),{backgroundColorClasses:r,backgroundColorStyles:o}=gn(we(e,"bgColor")),{borderClasses:a}=Os(e),{densityClasses:l}=Li(e),{dimensionStyles:c}=Ns(e),{elevationClasses:u}=Sn(e),{roundedClasses:h}=gi(e),{open:d,select:f}=Pk(e),p=N(()=>e.lines?`v-list--${e.lines}-line`:void 0),g=we(e,"activeColor"),y=we(e,"color");K_(),_n({VListGroup:{activeColor:g,color:y},VListItem:{activeClass:we(e,"activeClass"),activeColor:g,color:y,density:we(e,"density"),disabled:we(e,"disabled"),lines:we(e,"lines"),nav:we(e,"nav"),variant:we(e,"variant")}});const w=Re(!1),x=Pe();function _(M){w.value=!0}function C(M){w.value=!1}function k(M){var G;!w.value&&!(M.relatedTarget&&((G=x.value)!=null&&G.contains(M.relatedTarget)))&&L()}function V(M){if(x.value){if(M.key==="ArrowDown")L("next");else if(M.key==="ArrowUp")L("prev");else if(M.key==="Home")L("first");else if(M.key==="End")L("last");else return;M.preventDefault()}}function L(M){if(x.value)return iy(x.value,M)}return Be(()=>b(e.tag,{ref:x,class:["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav},s.value,r.value,a.value,l.value,u.value,p.value,h.value,e.class],style:[o.value,c.value,e.style],role:"listbox","aria-activedescendant":void 0,onFocusin:_,onFocusout:C,onFocus:k,onKeydown:V},{default:()=>[b(ib,{items:n.value},i)]})),{open:d,select:f,focus:L}}}),$k={style:{"max-width":"80%",overflow:"hidden","text-wrap":"nowrap"}},Wk=["onUpdate:modelValue","id","onChange"];function zk(e,t,i,n,s,r){return r.getPlays.size==0?(He(),at(Vn,{key:0},{default:se(()=>[b(Hn,{class:"d-flex justify-center"},{default:se(()=>[b(Gd,{indeterminate:"",class:"mx-auto"})]),_:1})]),_:1})):(He(),at(Hn,{key:1},{default:se(()=>[b(Gn,{class:"flex-nowrap",justify:"space-between"},{default:se(()=>[b(Je,{size:"small",onClick:t[0]||(t[0]=Gt(o=>r.setAllPlayEnabledValue(!0),["stop"]))},{default:se(()=>[Ze(" Select All ")]),_:1}),b(Je,{size:"small",onClick:t[1]||(t[1]=Gt(o=>r.setAllPlayEnabledValue(!1),["stop"]))},{default:se(()=>[Ze(" Deselect All ")]),_:1})]),_:1}),b(Gn,{justify:"space-between",style:{"flex-wrap":"nowrap"}},{default:se(()=>[b(kn,{lines:"one",selectable:"true","active-color":"green",selected:s.selectedPlay,"onUpdate:selected":t[2]||(t[2]=o=>s.selectedPlay=o),"onClick:select":r.selectPlayOverride},{default:se(()=>[(He(!0),Ot(Xe,null,zn(r.getPlays,([o,a])=>(He(),at(Ht,{key:o,value:o,style:ci({"background-color":r.getColor(o)})},{default:se(()=>[b(Vn,{class:"flex-grow-1 flex-shrink-0 overflow-hidden",style:{"max-width":"11em"}},{default:se(()=>[b(Gn,{justify:"space-between",style:{"flex-wrap":"nowrap"}},{default:se(()=>[gt("div",$k,mt(o),1),b(M_,{class:"pr-3"}),gt("div",null,mt(r.displayScore(a.score)),1),r.isScoreInf(a.score)?(He(),at(tt,{key:0,icon:"mdi-infinity",class:"mx-0 pl-1 justify-center",size:"small"})):cn("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value","style"]))),128))]),_:1},8,["selected","onClick:select"]),b(kn,{lines:"one",selectable:"false",class:"flex-grow-0 flex-shrink-1"},{default:se(()=>[(He(!0),Ot(Xe,null,zn(r.getPlays,([o,a])=>(He(),at(Ht,{key:o+"chkbox"},{default:se(()=>[Et(gt("input",{type:"checkbox","onUpdate:modelValue":l=>a.enabled=l,id:o,onChange:l=>r.setPlayEnabled(a)},null,40,Wk),[[Yw,a.enabled]])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}const jk=Kt(wk,[["render",zk]]),Xk={inject:["state"],data:function(){return{negativeSide:!1,positiveSide:!1}},methods:{handleSetSide:function(e){this.negativeSide&&this.positiveSide&&(e>0?this.negativeSide=!1:this.positiveSide=!1),!this.negativeSide&&!this.positiveSide?this.state.setIgnoreFieldSide(0):this.state.setIgnoreFieldSide(e)},handleHover:function(e){this.state.hoveredFieldIgnoreSide=e}},computed:{getIgnoreSide:function(){return this.state.world.ignoreSide}},watch:{getIgnoreSide:{handler(){this.state.world.ignoreSide<0?(this.negativeSide=!0,this.positiveSide=!1):this.state.world.ignoreSide>0?(this.negativeSide=!1,this.positiveSide=!0):(this.negativeSide=!1,this.positiveSide=!1)},deep:!0}}},Yk=gt("b",null,"Field Side",-1);function qk(e,t,i,n,s,r){return He(),at(Vn,{class:"d-flex flex-column"},{default:se(()=>[Yk,gt("div",{onMouseover:t[2]||(t[2]=o=>r.handleHover(-1)),onMouseleave:t[3]||(t[3]=o=>r.handleHover(0))},[b(Uh,{label:"Ignore - Field Side",density:"compact",modelValue:e.negativeSide,"onUpdate:modelValue":t[0]||(t[0]=o=>e.negativeSide=o),onChange:t[1]||(t[1]=o=>r.handleSetSide(-1))},null,8,["modelValue"])],32),gt("div",{onMouseover:t[6]||(t[6]=o=>r.handleHover(1)),onMouseleave:t[7]||(t[7]=o=>r.handleHover(0))},[b(Uh,{label:"Ignore + Field Side",density:"compact",modelValue:e.positiveSide,"onUpdate:modelValue":t[4]||(t[4]=o=>e.positiveSide=o),onChange:t[5]||(t[5]=o=>r.handleSetSide(1))},null,8,["modelValue"])],32)]),_:1})}const Kk=Kt(Xk,[["render",qk]]),Zk={inject:["state"],data(){return{alert:!1,selectedItem:null,state:qe("state")}},mounted(){},methods:{setGoalieId(e){this.state.setGoalie(e)}},computed:{goalieServiceStatus:function(){return this.state.goalieServiceStatus}},watch:{goalieServiceStatus:{handler(){if(this.state.goalieServiceStatus[0])this.alert=!1;else{this.alert=!0;const e=this;setTimeout(function(){e.alert=!1;const t=parseInt(e.state.getGoalie());isNaN(t)?e.selectedItem=null:e.selectedItem=t},4e3)}},deep:!0}},components:{}};const Jk=As("v-alert-title"),Qk=["success","info","warning","error"],eB=le({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:et,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Qk.includes(e)},...$e(),...pi(),...Ls(),...wn(),...$l(),...zd(),...mi(),...pt(),...Tt(),...Tn({variant:"flat"})},"v-alert"),tB=xe()({name:"VAlert",props:eB(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:i,slots:n}=t;const s=ct(e,"modelValue"),r=N(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),o=N(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:a}=Pt(e),{colorClasses:l,colorStyles:c,variantClasses:u}=Er(o),{densityClasses:h}=Li(e),{dimensionStyles:d}=Ns(e),{elevationClasses:f}=Sn(e),{locationStyles:p}=Wl(e),{positionClasses:g}=jd(e),{roundedClasses:y}=gi(e),{textColorClasses:w,textColorStyles:x}=di(we(e,"borderColor")),{t:_}=Mo(),C=N(()=>({"aria-label":_(e.closeLabel),onClick(k){s.value=!1,i("click:close",k)}}));return()=>{const k=!!(n.prepend||r.value),V=!!(n.title||e.title),L=!!(n.close||e.closable);return s.value&&b(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},a.value,l.value,h.value,f.value,g.value,y.value,u.value,e.class],style:[c.value,d.value,p.value,e.style],role:"alert"},{default:()=>{var M,G;return[Cr(!1,"v-alert"),e.border&&b("div",{key:"border",class:["v-alert__border",w.value],style:x.value},null),k&&b("div",{key:"prepend",class:"v-alert__prepend"},[n.prepend?b(wt,{key:"prepend-defaults",disabled:!r.value,defaults:{VIcon:{density:e.density,icon:r.value,size:e.prominent?44:28}}},n.prepend):b(tt,{key:"prepend-icon",density:e.density,icon:r.value,size:e.prominent?44:28},null)]),b("div",{class:"v-alert__content"},[V&&b(Jk,{key:"title"},{default:()=>{var j;return[((j=n.title)==null?void 0:j.call(n))??e.title]}}),((M=n.text)==null?void 0:M.call(n))??e.text,(G=n.default)==null?void 0:G.call(n)]),n.append&&b("div",{key:"append",class:"v-alert__append"},[n.append()]),L&&b("div",{key:"close",class:"v-alert__close"},[n.close?b(wt,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var j;return[(j=n.close)==null?void 0:j.call(n,{props:C.value})]}}):b(Je,Oe({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},C.value),null)])]}})}}});const iB=le({floating:Boolean,...$e()},"v-field-label"),wa=xe()({name:"VFieldLabel",props:iB(),setup(e,t){let{slots:i}=t;return Be(()=>b(Jd,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},i)),{}}}),nB=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],ab=le({appendInnerIcon:et,bgColor:String,clearable:Boolean,clearIcon:{type:et,default:"$clear"},active:Boolean,color:String,baseColor:String,dirty:Boolean,disabled:Boolean,error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:et,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>nB.includes(e)},"onClick:clear":Yi(),"onClick:appendInner":Yi(),"onClick:prependInner":Yi(),...$e(),...$d(),...mi(),...Tt()},"v-field"),lb=xe()({name:"VField",inheritAttrs:!1,props:{id:String,...ef(),...ab()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:i,emit:n,slots:s}=t;const{themeClasses:r}=Pt(e),{loaderClasses:o}=zl(e),{focusClasses:a,isFocused:l,focus:c,blur:u}=$o(e),{InputIcon:h}=q_(e),{roundedClasses:d}=gi(e),{rtlClasses:f}=Di(),p=N(()=>e.dirty||e.active),g=N(()=>!e.singleLine&&!!(e.label||s.label)),y=qt(),w=N(()=>e.id||`input-${y}`),x=N(()=>`${w.value}-messages`),_=Pe(),C=Pe(),k=Pe(),{backgroundColorClasses:V,backgroundColorStyles:L}=gn(we(e,"bgColor")),{textColorClasses:M,textColorStyles:G}=di(N(()=>e.error||e.disabled?void 0:p.value&&l.value?e.color:e.baseColor));Ge(p,R=>{if(g.value){const F=_.value.$el,O=C.value.$el;requestAnimationFrame(()=>{const q=gd(F),X=O.getBoundingClientRect(),W=X.x-q.x,S=X.y-q.y-(q.height/2-X.height/2),A=X.width/.75,E=Math.abs(A-q.width)>1?{maxWidth:Ie(A)}:void 0,I=getComputedStyle(F),U=getComputedStyle(O),Y=parseFloat(I.transitionDuration)*1e3||150,J=parseFloat(U.getPropertyValue("--v-field-label-scale")),ee=U.getPropertyValue("color");F.style.visibility="visible",O.style.visibility="hidden",ms(F,{transform:`translate(${W}px, ${S}px) scale(${J})`,color:ee,...E},{duration:Y,easing:fo,direction:R?"normal":"reverse"}).finished.then(()=>{F.style.removeProperty("visibility"),O.style.removeProperty("visibility")})})}},{flush:"post"});const j=N(()=>({isActive:p,isFocused:l,controlRef:k,blur:u,focus:c}));function B(R){R.target!==document.activeElement&&R.preventDefault()}return Be(()=>{var W,S,A;const R=e.variant==="outlined",F=s["prepend-inner"]||e.prependInnerIcon,O=!!(e.clearable||s.clear),q=!!(s["append-inner"]||e.appendInnerIcon||O),X=s.label?s.label({label:e.label,props:{for:w.value}}):e.label;return b("div",Oe({class:["v-field",{"v-field--active":p.value,"v-field--appended":q,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":F,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!X,[`v-field--variant-${e.variant}`]:!0},r.value,V.value,a.value,o.value,d.value,f.value,e.class],style:[L.value,G.value,e.style],onClick:B},i),[b("div",{class:"v-field__overlay"},null),b(Wd,{name:"v-field",active:!!e.loading,color:e.error?"error":e.color},{default:s.loader}),F&&b("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&b(h,{key:"prepend-icon",name:"prependInner"},null),(W=s["prepend-inner"])==null?void 0:W.call(s,j.value)]),b("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&g.value&&b(wa,{key:"floating-label",ref:C,class:[M.value],floating:!0,for:w.value},{default:()=>[X]}),b(wa,{ref:_,for:w.value},{default:()=>[X]}),(S=s.default)==null?void 0:S.call(s,{...j.value,props:{id:w.value,class:"v-field__input","aria-describedby":x.value},focus:c,blur:u})]),O&&b(O_,{key:"clear"},{default:()=>[Et(b("div",{class:"v-field__clearable",onMousedown:E=>{E.preventDefault(),E.stopPropagation()}},[s.clear?s.clear():b(h,{name:"clear"},null)]),[[Qn,e.dirty]])]}),q&&b("div",{key:"append",class:"v-field__append-inner"},[(A=s["append-inner"])==null?void 0:A.call(s,j.value),e.appendInnerIcon&&b(h,{key:"append-icon",name:"appendInner"},null)]),b("div",{class:["v-field__outline",M.value]},[R&&b(Xe,null,[b("div",{class:"v-field__outline__start"},null),g.value&&b("div",{class:"v-field__outline__notch"},[b(wa,{ref:C,floating:!0,for:w.value},{default:()=>[X]})]),b("div",{class:"v-field__outline__end"},null)]),["plain","underlined"].includes(e.variant)&&g.value&&b(wa,{ref:C,floating:!0,for:w.value},{default:()=>[X]})])])}),{controlRef:k}}});function sB(e){const t=Object.keys(lb.props).filter(i=>!o1(i)&&i!=="class"&&i!=="style");return Io(e,t)}const rB=le({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...$e(),...Go({transition:{component:F_}})},"v-counter"),oB=xe()({name:"VCounter",functional:!0,props:rB(),setup(e,t){let{slots:i}=t;const n=N(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return Be(()=>b(ln,{transition:e.transition},{default:()=>[Et(b("div",{class:["v-counter",e.class],style:e.style},[i.default?i.default({counter:n.value,max:e.max,value:e.value}):n.value]),[[Qn,e.active]])]})),{}}}),aB=["color","file","time","date","datetime-local","week","month"],cb=le({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"},modelModifiers:Object,...Wo(),...ab()},"v-text-field"),Ug=xe()({name:"VTextField",directives:{Intersect:W_},inheritAttrs:!1,props:cb(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:i,emit:n,slots:s}=t;const r=ct(e,"modelValue"),{isFocused:o,focus:a,blur:l}=$o(e),c=N(()=>typeof e.counterValue=="function"?e.counterValue(r.value):(r.value??"").toString().length),u=N(()=>{if(i.maxlength)return i.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function h(k,V){var L,M;!e.autofocus||!k||(M=(L=V[0].target)==null?void 0:L.focus)==null||M.call(L)}const d=Pe(),f=Pe(),p=Pe(),g=N(()=>aB.includes(e.type)||e.persistentPlaceholder||o.value||e.active);function y(){var k;p.value!==document.activeElement&&((k=p.value)==null||k.focus()),o.value||a()}function w(k){n("mousedown:control",k),k.target!==p.value&&(y(),k.preventDefault())}function x(k){y(),n("click:control",k)}function _(k){k.stopPropagation(),y(),ni(()=>{r.value=null,a1(e["onClick:clear"],k)})}function C(k){var L;const V=k.target;if(r.value=V.value,(L=e.modelModifiers)!=null&&L.trim&&["text","search","password","tel","url"].includes(e.type)){const M=[V.selectionStart,V.selectionEnd];ni(()=>{V.selectionStart=M[0],V.selectionEnd=M[1]})}}return Be(()=>{const k=!!(s.counter||e.counter||e.counterValue),V=!!(k||s.details),[L,M]=Sl(i),[{modelValue:G,...j}]=qn.filterProps(e),[B]=sB(e);return b(qn,Oe({ref:d,modelValue:r.value,"onUpdate:modelValue":R=>r.value=R,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)},e.class],style:e.style},L,j,{focused:o.value}),{...s,default:R=>{let{id:F,isDisabled:O,isDirty:q,isReadonly:X,isValid:W}=R;return b(lb,Oe({ref:f,onMousedown:w,onClick:x,"onClick:clear":_,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},B,{id:F.value,active:g.value||q.value,dirty:q.value||e.dirty,disabled:O.value,focused:o.value,error:W.value===!1}),{...s,default:S=>{let{props:{class:A,...E}}=S;const I=Et(b("input",Oe({ref:p,value:r.value,onInput:C,autofocus:e.autofocus,readonly:X.value,disabled:O.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:y,onBlur:l},E,M),null),[[Bi("intersect"),{handler:h},null,{once:!0}]]);return b(Xe,null,[e.prefix&&b("span",{class:"v-text-field__prefix"},[e.prefix]),s.default?b("div",{class:A,"data-no-activator":""},[s.default(),I]):dn(I,{class:A}),e.suffix&&b("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:V?R=>{var F;return b(Xe,null,[(F=s.details)==null?void 0:F.call(s,R),k&&b(Xe,null,[b("span",null,null),b(oB,{active:e.persistentCounter||o.value,value:c.value,max:u.value},s.counter)])])}:void 0})}),Yl({},d,f,p)}});const ub=le({indeterminate:Boolean,indeterminateIcon:{type:et,default:"$checkboxIndeterminate"},...Qd({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"v-checkbox-btn"),Hh=xe()({name:"VCheckboxBtn",props:ub(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:i}=t;const n=ct(e,"indeterminate"),s=ct(e,"modelValue");function r(l){n.value&&(n.value=!1)}const o=N(()=>e.indeterminate?e.indeterminateIcon:e.falseIcon),a=N(()=>e.indeterminate?e.indeterminateIcon:e.trueIcon);return Be(()=>b(Nh,Oe(e,{modelValue:s.value,"onUpdate:modelValue":[l=>s.value=l,r],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:a.value,"aria-checked":e.indeterminate?"mixed":void 0}),i)),{}}}),lB=le({...Wo(),...Po(ub(),["inline"])},"v-checkbox"),Vg=xe()({name:"VCheckbox",inheritAttrs:!1,props:lB(),emits:{"update:focused":e=>!0},setup(e,t){let{attrs:i,slots:n}=t;const{isFocused:s,focus:r,blur:o}=$o(e),a=qt(),l=N(()=>e.id||`checkbox-${a}`);return Be(()=>{const[c,u]=Sl(i),[h,d]=qn.filterProps(e),[f,p]=Hh.filterProps(e);return b(qn,Oe({class:["v-checkbox",e.class]},c,h,{id:l.value,focused:s.value,style:e.style}),{...n,default:g=>{let{id:y,messagesId:w,isDisabled:x,isReadonly:_}=g;return b(Hh,Oe(f,{id:y.value,"aria-describedby":w.value,disabled:x.value,readonly:_.value},u,{onFocus:r,onBlur:o}),n)}})}),{}}});const hb=Symbol.for("vuetify:v-chip-group"),cB=le({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:_r},...$e(),...Ud({selectedClass:"v-chip--selected"}),...pt(),...Tt(),...Tn({variant:"tonal"})},"v-chip-group");xe()({name:"VChipGroup",props:cB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const{themeClasses:n}=Pt(e),{isSelected:s,select:r,next:o,prev:a,selected:l}=Gl(e,hb);return _n({VChip:{color:we(e,"color"),disabled:we(e,"disabled"),filter:we(e,"filter"),variant:we(e,"variant")}}),Be(()=>b(e.tag,{class:["v-chip-group",{"v-chip-group--column":e.column},n.value,e.class],style:e.style},{default:()=>{var c;return[(c=i.default)==null?void 0:c.call(i,{isSelected:s,select:r,next:o,prev:a,selected:l.value})]}})),{}}});const uB=le({activeClass:String,appendAvatar:String,appendIcon:et,closable:Boolean,closeIcon:{type:et,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:et,ripple:{type:Boolean,default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:Yi(),onClickOnce:Yi(),...Ds(),...$e(),...pi(),...wn(),...Vd(),...mi(),...Xl(),...Vo(),...pt({tag:"span"}),...Tt(),...Tn({variant:"tonal"})},"v-chip"),hB=xe()({name:"VChip",directives:{Ripple:Ar},props:uB(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:i,emit:n,slots:s}=t;const{t:r}=Mo(),{borderClasses:o}=Os(e),{colorClasses:a,colorStyles:l,variantClasses:c}=Er(e),{densityClasses:u}=Li(e),{elevationClasses:h}=Sn(e),{roundedClasses:d}=gi(e),{sizeClasses:f}=Ho(e),{themeClasses:p}=Pt(e),g=ct(e,"modelValue"),y=Hd(e,hb,!1),w=jl(e,i),x=N(()=>e.link!==!1&&w.isLink.value),_=N(()=>!e.disabled&&e.link!==!1&&(!!y||e.link||w.isClickable.value)),C=N(()=>({"aria-label":r(e.closeLabel),onClick(L){g.value=!1,n("click:close",L)}}));function k(L){var M;n("click",L),_.value&&((M=w.navigate)==null||M.call(w,L),y==null||y.toggle())}function V(L){(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),k(L))}return()=>{const L=w.isLink.value?"a":e.tag,M=!!(e.appendIcon||e.appendAvatar),G=!!(M||s.append),j=!!(s.close||e.closable),B=!!(s.filter||e.filter)&&y,R=!!(e.prependIcon||e.prependAvatar),F=!!(R||s.prepend),O=!y||y.isSelected.value;return g.value&&Et(b(L,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":_.value,"v-chip--filter":B,"v-chip--pill":e.pill},p.value,o.value,O?a.value:void 0,u.value,h.value,d.value,f.value,c.value,y==null?void 0:y.selectedClass.value,e.class],style:[O?l.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,href:w.href.value,tabindex:_.value?0:void 0,onClick:k,onKeydown:_.value&&!x.value&&V},{default:()=>{var q;return[Cr(_.value,"v-chip"),B&&b(O_,{key:"filter"},{default:()=>[Et(b("div",{class:"v-chip__filter"},[s.filter?Et(b(wt,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},null),[[Bi("slot"),s.filter,"default"]]):b(tt,{key:"filter-icon",icon:e.filterIcon},null)]),[[Qn,y.isSelected.value]])]}),F&&b("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?b(wt,{key:"prepend-defaults",disabled:!R,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):b(Xe,null,[e.prependIcon&&b(tt,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&b(mr,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),b("div",{class:"v-chip__content"},[((q=s.default)==null?void 0:q.call(s,{isSelected:y==null?void 0:y.isSelected.value,selectedClass:y==null?void 0:y.selectedClass.value,select:y==null?void 0:y.select,toggle:y==null?void 0:y.toggle,value:y==null?void 0:y.value.value,disabled:e.disabled}))??e.text]),G&&b("div",{key:"append",class:"v-chip__append"},[s.append?b(wt,{key:"append-defaults",disabled:!M,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):b(Xe,null,[e.appendIcon&&b(tt,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&b(mr,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),j&&b("div",Oe({key:"close",class:"v-chip__close"},C.value),[s.close?b(wt,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):b(tt,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Bi("ripple"),_.value&&e.ripple,null]])}}}),dB=le({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:et,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:_r},...nb({itemChildren:!1})},"select"),fB=le({...dB(),...Po(cb({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Go({transition:{component:B_}})},"v-select"),pB=xe()({name:"VSelect",props:fB(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:i}=t;const{t:n}=Mo(),s=Pe(),r=Pe(),o=ct(e,"menu"),a=N({get:()=>o.value,set:B=>{var R;o.value&&!B&&((R=r.value)!=null&&R.openChildren)||(o.value=B)}}),{items:l,transformIn:c,transformOut:u}=Nk(e),h=ct(e,"modelValue",[],B=>c(Ln(B)),B=>{const R=u(B);return e.multiple?R:R[0]??null}),d=Y_(),f=N(()=>h.value.map(B=>l.value.find(R=>e.valueComparator(R.value,B.value))||B)),p=N(()=>f.value.map(B=>B.props.value)),g=Re(!1);let y="",w;const x=N(()=>e.hideSelected?l.value.filter(B=>!f.value.some(R=>R===B)):l.value),_=Pe();function C(B){e.openOnClear&&(a.value=!0)}function k(){e.hideNoData&&!l.value.length||e.readonly||d!=null&&d.isReadonly.value||(a.value=!a.value)}function V(B){var X,W,S,A;if(e.readonly||d!=null&&d.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(B.key)&&B.preventDefault(),["Enter","ArrowDown"," "].includes(B.key)&&(a.value=!0),["Escape","Tab"].includes(B.key)&&(a.value=!1),B.key==="ArrowDown"?(X=_.value)==null||X.focus("next"):B.key==="ArrowUp"?(W=_.value)==null||W.focus("prev"):B.key==="Home"?(S=_.value)==null||S.focus("first"):B.key==="End"&&((A=_.value)==null||A.focus("last"));const R=1e3;function F(E){const I=E.key.length===1,U=!E.ctrlKey&&!E.metaKey&&!E.altKey;return I&&U}if(e.multiple||!F(B))return;const O=performance.now();O-w>R&&(y=""),y+=B.key.toLowerCase(),w=O;const q=l.value.find(E=>E.title.toLowerCase().startsWith(y));q!==void 0&&(h.value=[q])}function L(B){if(e.multiple){const R=p.value.findIndex(F=>e.valueComparator(F,B.value));if(R===-1)h.value=[...h.value,B];else{const F=[...h.value];F.splice(R,1),h.value=F}}else h.value=[B],a.value=!1}function M(B){var R;(R=_.value)!=null&&R.$el.contains(B.relatedTarget)||(a.value=!1)}function G(){var B;g.value&&((B=s.value)==null||B.focus())}function j(B){g.value=!0}return Be(()=>{const B=!!(e.chips||i.chip),R=!!(!e.hideNoData||x.value.length||i.prepend||i.append||i["no-data"]),F=h.value.length>0,[O]=Ug.filterProps(e),q=F||!g.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return b(Ug,Oe({ref:s},O,{modelValue:h.value.map(X=>X.props.value).join(", "),"onUpdate:modelValue":X=>{X==null&&(h.value=[])},focused:g.value,"onUpdate:focused":X=>g.value=X,validationValue:h.externalValue,dirty:F,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":h.value.length},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:!0,placeholder:q,"onClick:clear":C,"onMousedown:control":k,onBlur:M,onKeydown:V}),{...i,default:()=>b(Xe,null,[b(fs,Oe({ref:r,modelValue:a.value,"onUpdate:modelValue":X=>a.value=X,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:G},e.menuProps),{default:()=>[R&&b(kn,{ref:_,selected:p.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:X=>X.preventDefault(),onFocusin:j},{default:()=>{var X,W,S;return[!x.value.length&&!e.hideNoData&&(((X=i["no-data"])==null?void 0:X.call(i))??b(Ht,{title:n(e.noDataText)},null)),(W=i["prepend-item"])==null?void 0:W.call(i),x.value.map((A,E)=>{var I;return i.item?(I=i.item)==null?void 0:I.call(i,{item:A,index:E,props:Oe(A.props,{onClick:()=>L(A)})}):b(Ht,Oe({key:E},A.props,{onClick:()=>L(A)}),{prepend:U=>{let{isSelected:Y}=U;return b(Xe,null,[e.multiple&&!e.hideSelected?b(Hh,{modelValue:Y,ripple:!1,tabindex:"-1"},null):void 0,A.props.prependIcon&&b(tt,{icon:A.props.prependIcon},null)])}})}),(S=i["append-item"])==null?void 0:S.call(i)]}})]}),f.value.map((X,W)=>{var E;function S(I){I.stopPropagation(),I.preventDefault(),L(X)}const A={"onClick:close":S,onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return b("div",{key:X.value,class:"v-select__selection"},[B?i.chip?b(wt,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:X.title}}},{default:()=>{var I;return[(I=i.chip)==null?void 0:I.call(i,{item:X,index:W,props:A})]}}):b(hB,Oe({key:"chip",closable:e.closableChips,size:"small",text:X.title},A),null):((E=i.selection)==null?void 0:E.call(i,{item:X,index:W}))??b("span",{class:"v-select__selection-text"},[X.title,e.multiple&&W<f.value.length-1&&b("span",{class:"v-select__selection-comma"},[Ze(",")])])])})])})}),Yl({isFocused:g,menu:a,select:L},s)}}),mB=gt("b",null,"Goalie",-1);function gB(e,t,i,n,s,r){return He(),Ot(Xe,null,[b(Vn,{class:"d-flex flex-column"},{default:se(()=>[mB,gt("p",null,"ID: "+mt(s.state.getGoalie()),1),b(pB,{modelValue:s.selectedItem,"onUpdate:modelValue":[t[0]||(t[0]=o=>s.selectedItem=o),r.setGoalieId],label:"set ID",class:"flex-grow-0 align-end",items:Array.from({length:16},(o,a)=>a),density:"compact",variant:"solo"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),b(tB,{title:"Set Goalie Failed",text:s.state.goalieServiceStatus[1],type:"error",density:"compact","model-value":s.alert},null,8,["text","model-value"])],64)}const vB=Kt(Zk,[["render",gB]]),yB={inject:["state"],data(){return{historySlider:0,playbackSpeed:1,playbackTimer:null,state:qe("state")}},mounted(){},methods:{playPauseIcon:function(){return this.state.selectedHistoryFrame==-1||!this.state.historyReplayIsPaused?"mdi-pause":"mdi-play"},togglePause:function(){this.state.selectedHistoryFrame==-1?(this.pause(),this.state.selectedHistoryFrame=this.state.worldHistory.length-1):this.state.historyReplayIsPaused?(this.playbackSpeed=1,this.play()):this.pause()},play:function(){clearInterval(this.playbackTimer),this.state.historyReplayIsPaused=!1,this.playbackTimer=setInterval(this.playbackUpdate,20)},pause:function(){this.state.historyReplayIsPaused=!0,this.playbackSpeed=1,clearInterval(this.playbackTimer)},rewind:function(){this.state.selectedHistoryFrame==-1&&(this.playbackSpeed=1,this.state.selectedHistoryFrame=this.state.worldHistory.length-1),this.playbackSpeed>=0?this.playbackSpeed=-1:this.playbackSpeed-=.5,this.play()},fastforward:function(){this.playbackSpeed<=1?this.playbackSpeed=1.5:this.playbackSpeed+=.5,this.play()},goToRealTime:function(){this.pause(),this.playbackSpeed=1,this.state.selectedHistoryFrame=-1},stepButton:function(e){this.state.historyReplayIsPaused=!0,this.playbackSpeed=1,this.state.selectedHistoryFrame==-1&&(this.state.selectedHistoryFrame=this.state.worldHistory.length-1),this.stepFrames(e)},stepFrames:function(e){let t=this.state.selectedHistoryFrame+e;t>=this.state.worldHistory.length?t=this.state.worldHistory.length-1:t<0&&(t=0),this.state.selectedHistoryFrame=t},startSlider:function(e){this.state.historyReplayIsPaused=!0,this.state.selectedHistoryFrame=this.state.worldHistory.length-1+e},playbackUpdate:function(){this.state.selectedHistoryFrame==-1&&this.pause(),this.state.historyReplayIsPaused||(this.state.selectedHistoryFrame>=this.state.worldHistory.length-1&&this.playbackSpeed>=0?this.state.historyReplayIsPaused=!0:this.state.selectedHistoryFrame<=0&&this.playbackSpeed<=0?this.state.historyReplayIsPaused=!0:this.stepFrames(2*Math.round(this.playbackSpeed)))},loadHistoryFrame:function(){if(this.state.selectedHistoryFrame==-1)this.state.world=this.state.realtimeWorld;else{let t=this.state.historyEndIndex+1+this.state.selectedHistoryFrame;t>=this.state.worldHistory.length&&(t=t-this.state.worldHistory.length),this.state.world=this.state.worldHistory[t],this.state.graphicState.updateField()}const e=Array.from(this.state.world.field.overlays.keys());for(const t of[this.state.graphicState.underlayContainer,this.state.graphicState.overlayContainer]){const i=Array.from(t.children);for(const n of i)e.includes(n.name)||(n.clear(),t.removeChild(n))}}},computed:{selectedHistoryFrame:function(){return this.state.selectedHistoryFrame},historyWarningStyle:function(){return this.state.selectedHistoryFrame==-1?"":"red"}},watch:{historySlider:{handler(){this.state.selectedHistoryFrame!=-1&&(this.state.selectedHistoryFrame=this.state.worldHistory.length-1+this.historySlider)},deep:!1},selectedHistoryFrame:{handler(){this.state.selectedHistoryFrame==-1?this.historySlider=0:this.historySlider=this.state.selectedHistoryFrame-(this.state.worldHistory.length-1),this.loadHistoryFrame()},deep:!1}},components:{}};const nf=Symbol.for("vuetify:v-slider");function _B(e,t,i){const n=i==="vertical",s=t.getBoundingClientRect(),r="touches"in e?e.touches[0]:e;return n?r.clientY-(s.top+s.height/2):r.clientX-(s.left+s.width/2)}function bB(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const xB=le({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...mi(),...wn({elevation:2})},"slider"),wB=e=>{const t=N(()=>parseFloat(e.min)),i=N(()=>parseFloat(e.max)),n=N(()=>+e.step>0?parseFloat(e.step):0),s=N(()=>Math.max(zf(n.value),zf(t.value)));function r(o){if(n.value<=0)return o;const a=ws(o,t.value,i.value),l=t.value%n.value,c=Math.round((a-l)/n.value)*n.value+l;return parseFloat(Math.min(c,i.value).toFixed(s.value))}return{min:t,max:i,step:n,decimals:s,roundValue:r}},SB=e=>{let{props:t,steps:i,onSliderStart:n,onSliderMove:s,onSliderEnd:r,getActiveThumb:o}=e;const{isRtl:a}=Di(),l=we(t,"reverse"),c=N(()=>{let $=a.value?"rtl":"ltr";return t.reverse&&($=$==="rtl"?"ltr":"rtl"),$}),{min:u,max:h,step:d,decimals:f,roundValue:p}=i,g=N(()=>parseInt(t.thumbSize,10)),y=N(()=>parseInt(t.tickSize,10)),w=N(()=>parseInt(t.trackSize,10)),x=N(()=>(h.value-u.value)/d.value),_=we(t,"disabled"),C=N(()=>t.direction==="vertical"),k=N(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),V=N(()=>t.error||t.disabled?void 0:t.trackColor??t.color),L=N(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),M=Re(!1),G=Re(0),j=Pe(),B=Pe();function R($){var ie;const Q=t.direction==="vertical",he=Q?"top":"left",Fe=Q?"height":"width",Te=Q?"clientY":"clientX",{[he]:ve,[Fe]:D}=(ie=j.value)==null?void 0:ie.$el.getBoundingClientRect(),H=bB($,Te);let K=Math.min(Math.max((H-ve-G.value)/D,0),1)||0;return(Q||c.value==="rtl")&&(K=1-K),p(u.value+K*(h.value-u.value))}const F=$=>{r({value:R($)}),M.value=!1,G.value=0},O=$=>{B.value=o($),B.value&&(B.value.focus(),M.value=!0,B.value.contains($.target)?G.value=_B($,B.value,t.direction):(G.value=0,s({value:R($)})),n({value:R($)}))},q={passive:!0,capture:!0};function X($){s({value:R($)})}function W($){$.stopPropagation(),$.preventDefault(),F($),window.removeEventListener("mousemove",X,q),window.removeEventListener("mouseup",W)}function S($){var Q;F($),window.removeEventListener("touchmove",X,q),(Q=$.target)==null||Q.removeEventListener("touchend",S)}function A($){var Q;O($),window.addEventListener("touchmove",X,q),(Q=$.target)==null||Q.addEventListener("touchend",S,{passive:!1})}function E($){$.preventDefault(),O($),window.addEventListener("mousemove",X,q),window.addEventListener("mouseup",W,{passive:!1})}const I=$=>{const Q=($-u.value)/(h.value-u.value)*100;return ws(isNaN(Q)?0:Q,0,100)},U=we(t,"showTicks"),Y=N(()=>U.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map($=>({value:$,position:I($),label:$.toString()})):Object.keys(t.ticks).map($=>({value:parseFloat($),position:I(parseFloat($)),label:t.ticks[$]})):x.value!==1/0?pd(x.value+1).map($=>{const Q=u.value+$*d.value;return{value:Q,position:I(Q)}}):[]:[]),J=N(()=>Y.value.some($=>{let{label:Q}=$;return!!Q})),ee={activeThumbRef:B,color:we(t,"color"),decimals:f,disabled:_,direction:we(t,"direction"),elevation:we(t,"elevation"),hasLabels:J,horizontalDirection:c,isReversed:l,min:u,max:h,mousePressed:M,numTicks:x,onSliderMousedown:E,onSliderTouchstart:A,parsedTicks:Y,parseMouseMove:R,position:I,readonly:we(t,"readonly"),rounded:we(t,"rounded"),roundValue:p,showTicks:U,startOffset:G,step:d,thumbSize:g,thumbColor:k,thumbLabel:we(t,"thumbLabel"),ticks:we(t,"ticks"),tickSize:y,trackColor:V,trackContainerRef:j,trackFillColor:L,trackSize:w,vertical:C};return Ut(nf,ee),ee},TB=le({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:Boolean,default:!0},...$e()},"v-slider-thumb"),CB=xe()({name:"VSliderThumb",directives:{Ripple:Ar},props:TB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i,emit:n}=t;const s=qe(nf);if(!s)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:r,step:o,vertical:a,disabled:l,thumbSize:c,thumbLabel:u,direction:h,readonly:d,elevation:f,isReversed:p,horizontalDirection:g,mousePressed:y,decimals:w}=s,{textColorClasses:x,textColorStyles:_}=di(r),{pageup:C,pagedown:k,end:V,home:L,left:M,right:G,down:j,up:B}=n1,R=[C,k,V,L,M,G,j,B],F=N(()=>o.value?[1,2,3]:[1,5,10]);function O(X,W){if(!R.includes(X.key))return;X.preventDefault();const S=o.value||.1,A=(e.max-e.min)/S;if([M,G,j,B].includes(X.key)){const I=(g.value==="rtl"?[M,B]:[G,B]).includes(X.key)?1:-1,U=X.shiftKey?2:X.ctrlKey?1:0;W=W+I*S*F.value[U]}else if(X.key===L)W=e.min;else if(X.key===V)W=e.max;else{const E=X.key===k?1:-1;W=W-E*S*(A>100?A/10:10)}return Math.max(e.min,Math.min(e.max,W))}function q(X){const W=O(X,e.modelValue);W!=null&&n("update:modelValue",W)}return Be(()=>{const X=Ie(a.value||p.value?100-e.position:e.position,"%"),{elevationClasses:W}=Sn(N(()=>l.value?void 0:f.value));return b("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&y.value},e.class],style:[{"--v-slider-thumb-position":X,"--v-slider-thumb-size":Ie(c.value)},e.style],role:"slider",tabindex:l.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":d.value,"aria-orientation":h.value,onKeydown:d.value?void 0:q},[b("div",{class:["v-slider-thumb__surface",x.value,W.value],style:{..._.value}},null),Et(b("div",{class:["v-slider-thumb__ripple",x.value],style:_.value},null),[[Bi("ripple"),e.ripple,null,{circle:!0,center:!0}]]),b(ZM,{origin:"bottom center"},{default:()=>{var S;return[Et(b("div",{class:"v-slider-thumb__label-container"},[b("div",{class:["v-slider-thumb__label"]},[b("div",null,[((S=i["thumb-label"])==null?void 0:S.call(i,{modelValue:e.modelValue}))??e.modelValue.toFixed(o.value?w.value:1)])])]),[[Qn,u.value&&e.focused||u.value==="always"]])]}})])}),{}}});const EB=le({start:{type:Number,required:!0},stop:{type:Number,required:!0},...$e()},"v-slider-track"),AB=xe()({name:"VSliderTrack",props:EB(),emits:{},setup(e,t){let{slots:i}=t;const n=qe(nf);if(!n)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:s,horizontalDirection:r,parsedTicks:o,rounded:a,showTicks:l,tickSize:c,trackColor:u,trackFillColor:h,trackSize:d,vertical:f,min:p,max:g}=n,{roundedClasses:y}=gi(a),{backgroundColorClasses:w,backgroundColorStyles:x}=gn(h),{backgroundColorClasses:_,backgroundColorStyles:C}=gn(u),k=N(()=>`inset-${f.value?"block-end":"inline-start"}`),V=N(()=>f.value?"height":"width"),L=N(()=>({[k.value]:"0%",[V.value]:"100%"})),M=N(()=>e.stop-e.start),G=N(()=>({[k.value]:Ie(e.start,"%"),[V.value]:Ie(M.value,"%")})),j=N(()=>l.value?(f.value?o.value.slice().reverse():o.value).map((R,F)=>{var X;const O=f.value?"bottom":"margin-inline-start",q=R.value!==p.value&&R.value!==g.value?Ie(R.position,"%"):void 0;return b("div",{key:R.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":R.position>=e.start&&R.position<=e.stop,"v-slider-track__tick--first":R.value===p.value,"v-slider-track__tick--last":R.value===g.value}],style:{[O]:q}},[(R.label||i["tick-label"])&&b("div",{class:"v-slider-track__tick-label"},[((X=i["tick-label"])==null?void 0:X.call(i,{tick:R,index:F}))??R.label])])}):[]);return Be(()=>b("div",{class:["v-slider-track",y.value,e.class],style:[{"--v-slider-track-size":Ie(d.value),"--v-slider-tick-size":Ie(c.value),direction:f.value?void 0:r.value},e.style]},[b("div",{class:["v-slider-track__background",_.value,{"v-slider-track__background--opacity":!!s.value||!h.value}],style:{...L.value,...C.value}},null),b("div",{class:["v-slider-track__fill",w.value],style:{...G.value,...x.value}},null),l.value&&b("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":l.value==="always"}]},[j.value])])),{}}}),IB=le({...ef(),...xB(),...Wo(),modelValue:{type:[Number,String],default:0}},"v-slider"),PB=xe()({name:"VSlider",props:IB(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:i,emit:n}=t;const s=Pe(),{rtlClasses:r}=Di(),o=wB(e),a=ct(e,"modelValue",void 0,V=>{const L=typeof V=="string"?parseFloat(V):V??o.min.value;return o.roundValue(L)}),{min:l,max:c,mousePressed:u,roundValue:h,onSliderMousedown:d,onSliderTouchstart:f,trackContainerRef:p,position:g,hasLabels:y,readonly:w}=SB({props:e,steps:o,onSliderStart:()=>{n("start",a.value)},onSliderEnd:V=>{let{value:L}=V;const M=h(L);a.value=M,n("end",M)},onSliderMove:V=>{let{value:L}=V;return a.value=h(L)},getActiveThumb:()=>{var V;return(V=s.value)==null?void 0:V.$el}}),{isFocused:x,focus:_,blur:C}=$o(e),k=N(()=>g(a.value));return Be(()=>{const[V,L]=qn.filterProps(e),M=!!(e.label||i.label||i.prepend);return b(qn,Oe({class:["v-slider",{"v-slider--has-labels":!!i["tick-label"]||y.value,"v-slider--focused":x.value,"v-slider--pressed":u.value,"v-slider--disabled":e.disabled},r.value,e.class],style:e.style},V,{focused:x.value}),{...i,prepend:M?G=>{var j,B;return b(Xe,null,[((j=i.label)==null?void 0:j.call(i,G))??e.label?b(Jd,{id:G.id.value,class:"v-slider__label",text:e.label},null):void 0,(B=i.prepend)==null?void 0:B.call(i,G)])}:void 0,default:G=>{let{id:j,messagesId:B}=G;return b("div",{class:"v-slider__container",onMousedown:w.value?void 0:d,onTouchstartPassive:w.value?void 0:f},[b("input",{id:j.value,name:e.name||j.value,disabled:e.disabled,readonly:e.readonly,tabindex:"-1",value:a.value},null),b(AB,{ref:p,start:0,stop:k.value},{"tick-label":i["tick-label"]}),b(CB,{ref:s,"aria-describedby":B.value,focused:x.value,min:l.value,max:c.value,modelValue:a.value,"onUpdate:modelValue":R=>a.value=R,position:k.value,elevation:e.elevation,onFocus:_,onBlur:C},{"thumb-label":i["thumb-label"]})])}})}),{}}});function MB(e,t,i,n,s,r){return He(),at(Hn,{class:"flex-grow-0 flex-shrink-0 justify-center mt-n8 pt-n8 mb-n4 pb-n4"},{default:se(()=>[b(PB,{modelValue:s.historySlider,"onUpdate:modelValue":t[0]||(t[0]=o=>s.historySlider=o),min:-s.state.worldHistory.length+1,max:"0",step:"1",onStart:r.startSlider,class:"px-10 pt-2 pb-n5 mb-n5",align:"center",color:r.historyWarningStyle},null,8,["modelValue","min","onStart","color"]),b(Gn,{class:"nowrap justify-center mx-3 my-0 px-1 py-0",align:"center"},{default:se(()=>[b(Je,{dense:"",class:"mx-1",style:{"max-width":"50"},onClick:t[1]||(t[1]=Gt(o=>r.rewind(),["stop"]))},{default:se(()=>[b(tt,{icon:"mdi-rewind"})]),_:1}),b(Je,{dense:"",class:"mx-1",style:{"max-width":"50"},onClick:t[2]||(t[2]=Gt(o=>r.stepButton(-1),["stop"]))},{default:se(()=>[b(tt,{icon:"mdi-step-backward"})]),_:1}),b(Je,{dense:"",class:"mx-1",style:{"max-width":"50"},onClick:t[3]||(t[3]=Gt(o=>r.togglePause(),["stop"]))},{default:se(()=>[b(tt,{icon:r.playPauseIcon()},null,8,["icon"])]),_:1}),b(Je,{dense:"",class:"mx-1",style:{"max-width":"50"},onClick:t[4]||(t[4]=Gt(o=>r.stepButton(1),["stop"]))},{default:se(()=>[b(tt,{icon:"mdi-step-forward"})]),_:1}),b(Je,{dense:"",class:"mx-1",style:{"max-width":"50"},onClick:t[5]||(t[5]=Gt(o=>r.fastforward(),["stop"]))},{default:se(()=>[b(tt,{icon:"mdi-fast-forward"})]),_:1}),b(Je,{dense:"",class:"mx-1",style:{"max-width":"50"},onClick:t[6]||(t[6]=Gt(o=>r.goToRealTime(),["stop"])),color:r.historyWarningStyle},{default:se(()=>[b(tt,{icon:"mdi-clock-end"})]),_:1},8,["color"])]),_:1})]),_:1})}const RB=Kt(yB,[["render",MB]]),kB={inject:["state"],data(){return{state:qe("state"),useKenobiTopic:!0,fieldBoundaryVisible:!0,holdStartTime:null,timeoutId:null,globalTheme:xS()}},computed:{themeList:function(){const e=new Map;for(const t of Object.keys(this.globalTheme.themes)){const i=this.globalTheme.themes[t];i.variables&&i.variables.name&&e.set(t,i)}return e}},methods:{savePlaybook(){console.log("not implemented yet")},loadPlaybook(){console.log("not implemented yet")},setUseKenobiTopic(){console.log("set kenobi: ",this.useKenobiTopic),this.state.setUseKenobiTopic(this.useKenobiTopic)},setFieldRotation(e){console.log("set field rotation: ",e),this.state.renderConfig.angle=e},setTheme(e){this.globalTheme.name=e},setFieldBoundaryVisibility(){this.state.graphicState.fieldContainer.getChildByName("fieldBoundary").visible=this.fieldBoundaryVisible},rebootKenobi(){this.state.sendRebootKenobiRequest()},startHold:function(e){this.holdStartTime===null&&(this.holdStartTime=performance.now()),this.timeoutId&&clearTimeout(this.timeoutId);const t=this;this.timeoutId=setTimeout(function(){t.holdStartTime=null,t.timeoutId=null,t.state.sendPowerRequest(-1,e)},1e3)},stopHold:function(e){this.holdStartTime=null,this.timeoutId&&clearTimeout(this.timeoutId)}}};function BB(e,t,i,n,s,r){return He(),Ot(Xe,null,[b(fs,{style:{color:"rgb(var(--v-theme-ateam-color))"},location:"bottom"},{activator:se(({props:o})=>[b(Je,Oe({class:"px-0 ml-3"},o),{default:se(()=>[Ze(" File ")]),_:2},1040)]),default:se(()=>[b(kn,{style:{"background-color":"rgb(var(--v-theme-ateam-color))"}},{default:se(()=>[b(Ht,{onClick:t[0]||(t[0]=Gt(o=>r.savePlaybook(),["stop"]))},{default:se(()=>[Ze(" Save Playbook ")]),_:1}),b(Ht,{onClick:t[1]||(t[1]=Gt(o=>r.loadPlaybook(),["stop"]))},{default:se(()=>[Ze(" Load Playbook ")]),_:1})]),_:1})]),_:1}),b(fs,{style:{color:"rgb(var(--v-theme-ateam-color))"},location:"bottom"},{activator:se(({props:o})=>[b(Je,Oe({class:"px-0 ml-3"},o),{default:se(()=>[Ze(" View ")]),_:2},1040)]),default:se(()=>[b(kn,{style:{"background-color":"rgb(var(--v-theme-ateam-color))"}},{default:se(()=>[b(Vg,{label:"Use Kenobi World Topic",modelValue:s.useKenobiTopic,"onUpdate:modelValue":t[2]||(t[2]=o=>s.useKenobiTopic=o),onChange:t[3]||(t[3]=o=>r.setUseKenobiTopic()),density:"compact","hide-details":"",class:"px-2"},null,8,["modelValue"]),b(Vg,{label:"Display Field Walls",modelValue:s.fieldBoundaryVisible,"onUpdate:modelValue":t[4]||(t[4]=o=>s.fieldBoundaryVisible=o),onChange:t[5]||(t[5]=o=>r.setFieldBoundaryVisibility()),density:"compact","hide-details":"",class:"px-2"},null,8,["modelValue"]),b(Ht,{link:""},{append:se(()=>[b(tt,{icon:"mdi-menu-right",size:"small"})]),default:se(()=>[Ze(" Rotate Field "),b(fs,{activator:"parent","open-on-focus":!1,"open-on-hover":"",submenu:"",location:"right"},{default:se(()=>[b(kn,{style:{"background-color":"rgb(var(--v-theme-ateam-color))"}},{default:se(()=>[(He(),Ot(Xe,null,zn([0,90,180,270],o=>b(Ht,{key:"rotateField"+o,onClick:Gt(a=>r.setFieldRotation(o),["stop"])},{default:se(()=>[b(Oa,null,{default:se(()=>[Ze(mt(o),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1}),b(Ht,{link:""},{append:se(()=>[b(tt,{icon:"mdi-menu-right",size:"small"})]),default:se(()=>[Ze(" Select Theme "),b(fs,{activator:"parent","open-on-focus":!1,"open-on-hover":"",submenu:"",location:"right"},{default:se(()=>[b(kn,{style:{"background-color":"rgb(var(--v-theme-ateam-color))"}},{default:se(()=>[(He(!0),Ot(Xe,null,zn(r.themeList,([o,a])=>(He(),at(Ht,{key:"setTheme"+a.variables.name,onClick:Gt(l=>r.setTheme(o),["stop"])},{default:se(()=>[b(Oa,null,{default:se(()=>[Ze(mt(a.variables.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),b(fs,{style:{color:"rgb(var(--v-theme-ateam-color))"},location:"bottom"},{activator:se(({props:o})=>[b(Je,Oe({class:"px-0 ml-3"},o),{default:se(()=>[Ze(" Power ")]),_:2},1040)]),default:se(()=>[b(kn,{style:{"background-color":"rgb(var(--v-theme-ateam-color))"}},{default:se(()=>[(He(),at(Ht,{key:r.rebootKenobi,onClick:t[6]||(t[6]=Gt(o=>r.rebootKenobi(),["stop"]))},{default:se(()=>[b(Oa,null,{default:se(()=>[Ze(" Reboot Kenobi ")]),_:1})]),_:1})),b(Ht,null,{default:se(()=>[b(Je,{onMousedown:t[7]||(t[7]=o=>r.startHold("restart")),onMouseup:t[8]||(t[8]=o=>r.stopHold("restart")),onMouseleave:t[9]||(t[9]=o=>r.stopHold("restart"))},{default:se(()=>[Ze(" Restart All Robots ")]),_:1})]),_:1}),b(Ht,null,{default:se(()=>[b(Je,{onMousedown:t[10]||(t[10]=o=>r.startHold("shutdown")),onMouseup:t[11]||(t[11]=o=>r.stopHold("shutdown")),onMouseleave:t[12]||(t[12]=o=>r.stopHold("shutdown"))},{default:se(()=>[Ze(" Shut Down All Robots ")]),_:1})]),_:1})]),_:1})]),_:1})],64)}const FB=Kt(kB,[["render",BB]]),DB={data(){return{intervalIds:[],state:new fM,renderConfig:{angle:0,scale:75,factor:1},kenobiStatus:"Hello There",kenobiStatusStyle:"green",kenobiFPS:100,kenobiFPSStyle:"green",kenobiFPSALERT:"ateam-color",tab:null}},provide(){return{state:this.state,renderConfig:this.renderConfig}},methods:{updateField:function(){this.state.useKenobi||(this.state.realtimeWorld.timestamp=Date.now(),this.state.updateHistory()),this.state.selectedHistoryFrame==-1&&this.$refs.mainField.update()},updateStatus:function(){this.$refs.robotStatus.update(),Date.now()-this.state.lastTimeReceivedKenobi>200?(this.kenobiStatusStyle="red",this.kenobiStatus="That's a name I've not heard in a long time"):(this.kenobiStatusStyle="green",this.kenobiStatus="Hello There"),this.kenobiFPS=Math.round(this.state.realtimeWorld.fps),this.kenobiFPS>=95?(this.kenobiFPSALERT="ateam-color",this.kenobiFPSStyle="green"):this.kenobiFPS>90?(this.kenobiFPSALERT="ateam-color",this.kenobiFPSStyle="yellow"):(this.kenobiFPSALERT="status-error",this.kenobiFPSStyle="red")}},beforeUnmount(){for(const e of this.intervalIds)clearInterval(e)},created(){this.intervalIds.push(setInterval(this.updateField,10)),this.intervalIds.push(setInterval(this.updateStatus,100))},mounted(){this.state.connectToRos()},components:{FieldComponent:vM,StatusComponent:HR,RefButtonsComponent:ik,GameStatusComponent:pk,AIComponent:xk,PlaybookComponent:jk,FieldSideComponent:Kk,GoaliePickerComponent:vB,HistoryComponent:RB,MenuBarComponent:FB}};const OB=le({...$e(),...wS({fullHeight:!0}),...Tt()},"v-app"),LB=xe()({name:"VApp",props:OB(),setup(e,t){let{slots:i}=t;const n=Pt(e),{layoutClasses:s,layoutStyles:r,getLayoutItem:o,items:a,layoutRef:l}=AS(e),{rtlClasses:c}=Di();return Be(()=>{var u;return b("div",{ref:l,class:["v-application",n.themeClasses.value,s.value,c.value,e.class],style:[r.value,e.style]},[b("div",{class:"v-application__wrap"},[(u=i.default)==null?void 0:u.call(i)])])}),{getLayoutItem:o,items:a,theme:n}}});const db=le({text:String,...$e(),...pt()},"v-toolbar-title"),fb=xe()({name:"VToolbarTitle",props:db(),setup(e,t){let{slots:i}=t;return Be(()=>{const n=!!(i.default||i.text||e.text);return b(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var s;return[n&&b("div",{class:"v-toolbar-title__placeholder"},[i.text?i.text():e.text,(s=i.default)==null?void 0:s.call(i)])]}})}),{}}}),NB=[null,"prominent","default","comfortable","compact"],pb=le({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>NB.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ds(),...$e(),...wn(),...mi(),...pt({tag:"header"}),...Tt()},"v-toolbar"),Hg=xe()({name:"VToolbar",props:pb(),setup(e,t){var f;let{slots:i}=t;const{backgroundColorClasses:n,backgroundColorStyles:s}=gn(we(e,"color")),{borderClasses:r}=Os(e),{elevationClasses:o}=Sn(e),{roundedClasses:a}=gi(e),{themeClasses:l}=Pt(e),{rtlClasses:c}=Di(),u=Re(!!(e.extended||(f=i.extension)!=null&&f.call(i))),h=N(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),d=N(()=>u.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return _n({VBtn:{variant:"text"}}),Be(()=>{var w;const p=!!(e.title||i.title),g=!!(i.image||e.image),y=(w=i.extension)==null?void 0:w.call(i);return u.value=!!(e.extended||y),b(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},n.value,r.value,o.value,a.value,l.value,c.value,e.class],style:[s.value,e.style]},{default:()=>[g&&b("div",{key:"image",class:"v-toolbar__image"},[i.image?b(wt,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):b(Zd,{key:"image-img",cover:!0,src:e.image},null)]),b(wt,{defaults:{VTabs:{height:Ie(h.value)}}},{default:()=>{var x,_,C;return[b("div",{class:"v-toolbar__content",style:{height:Ie(h.value)}},[i.prepend&&b("div",{class:"v-toolbar__prepend"},[(x=i.prepend)==null?void 0:x.call(i)]),p&&b(fb,{key:"title",text:e.title},{text:i.title}),(_=i.default)==null?void 0:_.call(i),i.append&&b("div",{class:"v-toolbar__append"},[(C=i.append)==null?void 0:C.call(i)])])]}}),b(wt,{defaults:{VTabs:{height:Ie(d.value)}}},{default:()=>[b(D_,null,{default:()=>[u.value&&b("div",{class:"v-toolbar__extension",style:{height:Ie(d.value)}},[y])]})]})]})}),{contentHeight:h,extensionHeight:d}}}),UB=le({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function VB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:i}=t;let n=0;const s=Pe(null),r=Re(0),o=Re(0),a=Re(0),l=Re(!1),c=Re(!1),u=N(()=>Number(e.scrollThreshold)),h=N(()=>ws((u.value-r.value)/u.value||0)),d=()=>{const f=s.value;!f||i&&!i.value||(n=r.value,r.value="window"in f?f.pageYOffset:f.scrollTop,c.value=r.value<n,a.value=Math.abs(r.value-u.value))};return Ge(c,()=>{o.value=o.value||r.value}),Ge(l,()=>{o.value=0}),Zn(()=>{Ge(()=>e.scrollTarget,f=>{var g;const p=f?document.querySelector(f):window;if(!p){bs(`Unable to locate element with identifier ${f}`,xl());return}p!==s.value&&((g=s.value)==null||g.removeEventListener("scroll",d),s.value=p,s.value.addEventListener("scroll",d,{passive:!0}))},{immediate:!0})}),Fi(()=>{var f;(f=s.value)==null||f.removeEventListener("scroll",d)}),i&&Ge(i,d,{immediate:!0}),{scrollThreshold:u,currentScroll:r,currentThreshold:a,isScrollActive:l,scrollRatio:h,isScrollingUp:c,savedScroll:o}}const HB=le({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...pb(),...SS(),...UB(),height:{type:[Number,String],default:64}},"v-app-bar"),GB=xe()({name:"VAppBar",props:HB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const n=Pe(),s=ct(e,"modelValue"),r=N(()=>{var _;const x=new Set(((_=e.scrollBehavior)==null?void 0:_.split(" "))??[]);return{hide:x.has("hide"),inverted:x.has("inverted"),collapse:x.has("collapse"),elevate:x.has("elevate"),fadeImage:x.has("fade-image")}}),o=N(()=>{const x=r.value;return x.hide||x.inverted||x.collapse||x.elevate||x.fadeImage||!s.value}),{currentScroll:a,scrollThreshold:l,isScrollingUp:c,scrollRatio:u}=VB(e,{canScroll:o}),h=N(()=>e.collapse||r.value.collapse&&(r.value.inverted?u.value>0:u.value===0)),d=N(()=>e.flat||r.value.elevate&&(r.value.inverted?a.value>0:a.value===0)),f=N(()=>r.value.fadeImage?r.value.inverted?1-u.value:u.value:void 0),p=N(()=>{var C,k;if(r.value.hide&&r.value.inverted)return 0;const x=((C=n.value)==null?void 0:C.contentHeight)??0,_=((k=n.value)==null?void 0:k.extensionHeight)??0;return x+_});function g(){r.value.hide?r.value.inverted?s.value=a.value>l.value:s.value=c.value||a.value<l.value:s.value=!0}Ge(a,g,{immediate:!0}),Ge(r,g);const{ssrBootStyles:y}=ql(),{layoutItemStyles:w}=CS({id:e.name,order:N(()=>parseInt(e.order,10)),position:we(e,"location"),layoutSize:p,elementSize:Re(void 0),active:s,absolute:we(e,"absolute")});return Be(()=>{const[x]=Hg.filterProps(e);return b(Hg,Oe({ref:n,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...w.value,"--v-toolbar-image-opacity":f.value,height:void 0,...y.value},e.style]},x,{collapse:h.value,flat:d.value}),i)}),{}}}),$B=xe()({name:"VAppBarTitle",props:db(),setup(e,t){let{slots:i}=t;return Be(()=>b(fb,Oe(e,{class:"v-app-bar-title"}),i)),{}}});const WB=le({scrollable:Boolean,...$e(),...pt({tag:"main"})},"v-main"),zB=xe()({name:"VMain",props:WB(),setup(e,t){let{slots:i}=t;const{mainStyles:n}=TS(),{ssrBootStyles:s}=ql();return Be(()=>b(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[n.value,s.value,e.style]},{default:()=>{var r,o;return[e.scrollable?b("div",{class:"v-main__scroller"},[(r=i.default)==null?void 0:r.call(i)]):(o=i.default)==null?void 0:o.call(i)]}})),{}}});function Gg(e){const i=Math.abs(e);return Math.sign(e)*(i/((1/.501-2)*(1-i)+1))}function $g(e){let{selectedElement:t,containerSize:i,contentSize:n,isRtl:s,currentScrollOffset:r,isHorizontal:o}=e;const a=o?t.clientWidth:t.clientHeight,l=o?t.offsetLeft:t.offsetTop,c=s&&o?n-l-a:l,u=i+r,h=a+c,d=a*.4;return c<=r?r=Math.max(c-d,0):u<=h&&(r=Math.min(r-(u-h-d),n-i)),r}function jB(e){let{selectedElement:t,containerSize:i,contentSize:n,isRtl:s,isHorizontal:r}=e;const o=r?t.clientWidth:t.clientHeight,a=r?t.offsetLeft:t.offsetTop,l=s&&r?n-a-o/2-i/2:a+o/2-i/2;return Math.min(n-i,Math.max(0,l))}const XB=Symbol.for("vuetify:v-slide-group"),mb=le({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:XB},nextIcon:{type:et,default:"$next"},prevIcon:{type:et,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...$e(),...pt(),...Ud({selectedClass:"v-slide-group-item--active"})},"v-slide-group"),Wg=xe()({name:"VSlideGroup",props:mb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const{isRtl:n}=Di(),{mobile:s}=gy(),r=Gl(e,e.symbol),o=Re(!1),a=Re(0),l=Re(0),c=Re(0),u=N(()=>e.direction==="horizontal"),{resizeRef:h,contentRect:d}=Xa(),{resizeRef:f,contentRect:p}=Xa(),g=N(()=>r.selected.value.length?r.items.value.findIndex(E=>E.id===r.selected.value[0]):-1),y=N(()=>r.selected.value.length?r.items.value.findIndex(E=>E.id===r.selected.value[r.selected.value.length-1]):-1);if(St){let E=-1;Ge(()=>[r.selected.value,d.value,p.value,u.value],()=>{cancelAnimationFrame(E),E=requestAnimationFrame(()=>{if(d.value&&p.value){const I=u.value?"width":"height";l.value=d.value[I],c.value=p.value[I],o.value=l.value+1<c.value}if(g.value>=0&&f.value){const I=f.value.children[y.value];g.value===0||!o.value?a.value=0:e.centerActive?a.value=jB({selectedElement:I,containerSize:l.value,contentSize:c.value,isRtl:n.value,isHorizontal:u.value}):o.value&&(a.value=$g({selectedElement:I,containerSize:l.value,contentSize:c.value,isRtl:n.value,currentScrollOffset:a.value,isHorizontal:u.value}))}})})}const w=Re(!1);let x=0,_=0;function C(E){const I=u.value?"clientX":"clientY";_=(n.value&&u.value?-1:1)*a.value,x=E.touches[0][I],w.value=!0}function k(E){if(!o.value)return;const I=u.value?"clientX":"clientY",U=n.value&&u.value?-1:1;a.value=U*(_+x-E.touches[0][I])}function V(E){const I=c.value-l.value;a.value<0||!o.value?a.value=0:a.value>=I&&(a.value=I),w.value=!1}function L(){h.value&&(h.value[u.value?"scrollLeft":"scrollTop"]=0)}const M=Re(!1);function G(E){if(M.value=!0,!(!o.value||!f.value)){for(const I of E.composedPath())for(const U of f.value.children)if(U===I){a.value=$g({selectedElement:U,containerSize:l.value,contentSize:c.value,isRtl:n.value,currentScrollOffset:a.value,isHorizontal:u.value});return}}}function j(E){M.value=!1}function B(E){var I;!M.value&&!(E.relatedTarget&&((I=f.value)!=null&&I.contains(E.relatedTarget)))&&F()}function R(E){f.value&&(u.value?E.key==="ArrowRight"?F(n.value?"prev":"next"):E.key==="ArrowLeft"&&F(n.value?"next":"prev"):E.key==="ArrowDown"?F("next"):E.key==="ArrowUp"&&F("prev"),E.key==="Home"?F("first"):E.key==="End"&&F("last"))}function F(E){var I,U,Y,J,ee;if(f.value)if(!E)(I=ty(f.value)[0])==null||I.focus();else if(E==="next"){const $=(U=f.value.querySelector(":focus"))==null?void 0:U.nextElementSibling;$?$.focus():F("first")}else if(E==="prev"){const $=(Y=f.value.querySelector(":focus"))==null?void 0:Y.previousElementSibling;$?$.focus():F("last")}else E==="first"?(J=f.value.firstElementChild)==null||J.focus():E==="last"&&((ee=f.value.lastElementChild)==null||ee.focus())}function O(E){const I=a.value+(E==="prev"?-1:1)*l.value;a.value=ws(I,0,c.value-l.value)}const q=N(()=>{let E=a.value>c.value-l.value?-(c.value-l.value)+Gg(c.value-l.value-a.value):-a.value;a.value<=0&&(E=Gg(-a.value));const I=n.value&&u.value?-1:1;return{transform:`translate${u.value?"X":"Y"}(${I*E}px)`,transition:w.value?"none":"",willChange:w.value?"transform":""}}),X=N(()=>({next:r.next,prev:r.prev,select:r.select,isSelected:r.isSelected})),W=N(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return o.value||Math.abs(a.value)>0;case"mobile":return s.value||o.value||Math.abs(a.value)>0;default:return!s.value&&(o.value||Math.abs(a.value)>0)}}),S=N(()=>Math.abs(a.value)>0),A=N(()=>c.value>Math.abs(a.value)+l.value);return Be(()=>b(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!u.value,"v-slide-group--has-affixes":W.value,"v-slide-group--is-overflowing":o.value},e.class],style:e.style,tabindex:M.value||r.selected.value.length?-1:0,onFocus:B},{default:()=>{var E,I,U;return[W.value&&b("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!S.value}],onClick:()=>O("prev")},[((E=i.prev)==null?void 0:E.call(i,X.value))??b(kg,null,{default:()=>[b(tt,{icon:n.value?e.nextIcon:e.prevIcon},null)]})]),b("div",{key:"container",ref:h,class:"v-slide-group__container",onScroll:L},[b("div",{ref:f,class:"v-slide-group__content",style:q.value,onTouchstartPassive:C,onTouchmovePassive:k,onTouchendPassive:V,onFocusin:G,onFocusout:j,onKeydown:R},[(I=i.default)==null?void 0:I.call(i,X.value)])]),W.value&&b("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!A.value}],onClick:()=>O("next")},[((U=i.next)==null?void 0:U.call(i,X.value))??b(kg,null,{default:()=>[b(tt,{icon:n.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:r.selected,scrollTo:O,scrollOffset:a,focus:F}}});const gb=Symbol.for("vuetify:v-tabs"),YB=le({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Po(__({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"v-tabs"),Gh=xe()({name:"VTab",props:YB(),setup(e,t){let{slots:i,attrs:n}=t;const{textColorClasses:s,textColorStyles:r}=di(e,"sliderColor"),o=N(()=>e.direction==="horizontal"),a=Re(!1),l=Pe(),c=Pe();function u(h){var f,p;let{value:d}=h;if(a.value=d,d){const g=(p=(f=l.value)==null?void 0:f.$el.parentElement)==null?void 0:p.querySelector(".v-tab--selected .v-tab__slider"),y=c.value;if(!g||!y)return;const w=getComputedStyle(g).color,x=g.getBoundingClientRect(),_=y.getBoundingClientRect(),C=o.value?"x":"y",k=o.value?"X":"Y",V=o.value?"right":"bottom",L=o.value?"width":"height",M=x[C],G=_[C],j=M>G?x[V]-_[V]:x[C]-_[C],B=Math.sign(j)>0?o.value?"right":"bottom":Math.sign(j)<0?o.value?"left":"top":"center",F=(Math.abs(j)+(Math.sign(j)<0?x[L]:_[L]))/Math.max(x[L],_[L]),O=x[L]/_[L],q=1.5;ms(y,{backgroundColor:[w,""],transform:[`translate${k}(${j}px) scale${k}(${O})`,`translate${k}(${j/q}px) scale${k}(${(F-1)/q+1})`,""],transformOrigin:Array(3).fill(B)},{duration:225,easing:fo})}}return Be(()=>{const[h]=Je.filterProps(e);return b(Je,Oe({symbol:gb,ref:l,class:["v-tab",e.class],style:e.style,tabindex:a.value?0:-1,role:"tab","aria-selected":String(a.value),active:!1,block:e.fixed,maxWidth:e.fixed?300:void 0,rounded:0},h,n,{"onGroup:selected":u}),{default:()=>{var d;return[((d=i.default)==null?void 0:d.call(i))??e.text,!e.hideSlider&&b("div",{ref:c,class:["v-tab__slider",s.value],style:r.value},null)]}})}),{}}});function qB(e){return e?e.map(t=>typeof t=="string"?{title:t,value:t}:t):[]}const KB=le({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...mb({mandatory:"force"}),...pi(),...pt()},"v-tabs"),ZB=xe()({name:"VTabs",props:KB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const n=ct(e,"modelValue"),s=N(()=>qB(e.items)),{densityClasses:r}=Li(e),{backgroundColorClasses:o,backgroundColorStyles:a}=gn(we(e,"bgColor"));return _n({VTab:{color:we(e,"color"),direction:we(e,"direction"),stacked:we(e,"stacked"),fixed:we(e,"fixedTabs"),sliderColor:we(e,"sliderColor"),hideSlider:we(e,"hideSlider")}}),Be(()=>{const[l]=Wg.filterProps(e);return b(Wg,Oe(l,{modelValue:n.value,"onUpdate:modelValue":c=>n.value=c,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},r.value,o.value,e.class],style:[{"--v-tabs-height":Ie(e.height)},a.value,e.style],role:"tablist",symbol:gb}),{default:()=>[i.default?i.default():s.value.map(c=>b(Gh,Oe(c,{key:c.title}),null))]})}),{}}});const JB=e=>{const{touchstartX:t,touchendX:i,touchstartY:n,touchendY:s}=e,r=.5,o=16;e.offsetX=i-t,e.offsetY=s-n,Math.abs(e.offsetY)<r*Math.abs(e.offsetX)&&(e.left&&i<t-o&&e.left(e),e.right&&i>t+o&&e.right(e)),Math.abs(e.offsetX)<r*Math.abs(e.offsetY)&&(e.up&&s<n-o&&e.up(e),e.down&&s>n+o&&e.down(e))};function QB(e,t){var n;const i=e.changedTouches[0];t.touchstartX=i.clientX,t.touchstartY=i.clientY,(n=t.start)==null||n.call(t,{originalEvent:e,...t})}function eF(e,t){var n;const i=e.changedTouches[0];t.touchendX=i.clientX,t.touchendY=i.clientY,(n=t.end)==null||n.call(t,{originalEvent:e,...t}),JB(t)}function tF(e,t){var n;const i=e.changedTouches[0];t.touchmoveX=i.clientX,t.touchmoveY=i.clientY,(n=t.move)==null||n.call(t,{originalEvent:e,...t})}function iF(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:i=>QB(i,t),touchend:i=>eF(i,t),touchmove:i=>tF(i,t)}}function nF(e,t){var a;const i=t.value,n=i!=null&&i.parent?e.parentElement:e,s=(i==null?void 0:i.options)??{passive:!0},r=(a=t.instance)==null?void 0:a.$.uid;if(!n||!r)return;const o=iF(t.value);n._touchHandlers=n._touchHandlers??Object.create(null),n._touchHandlers[r]=o,ey(o).forEach(l=>{n.addEventListener(l,o[l],s)})}function sF(e,t){var r,o;const i=(r=t.value)!=null&&r.parent?e.parentElement:e,n=(o=t.instance)==null?void 0:o.$.uid;if(!(i!=null&&i._touchHandlers)||!n)return;const s=i._touchHandlers[n];ey(s).forEach(a=>{i.removeEventListener(a,s[a])}),delete i._touchHandlers[n]}const vb={mounted:nF,unmounted:sF},rF=vb,yb=Symbol.for("vuetify:v-window"),_b=Symbol.for("vuetify:v-window-group"),oF=le({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...$e(),...pt(),...Tt()},"v-window"),aF=xe()({name:"VWindow",directives:{Touch:vb},props:oF(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const{themeClasses:n}=Pt(e),{isRtl:s}=Di(),{t:r}=Mo(),o=Gl(e,_b),a=Pe(),l=N(()=>s.value?!e.reverse:e.reverse),c=Re(!1),u=N(()=>{const C=e.direction==="vertical"?"y":"x",V=(l.value?!c.value:c.value)?"-reverse":"";return`v-window-${C}${V}-transition`}),h=Re(0),d=Pe(void 0),f=N(()=>o.items.value.findIndex(C=>o.selected.value.includes(C.id)));Ge(f,(C,k)=>{const V=o.items.value.length,L=V-1;V<=2?c.value=C<k:C===L&&k===0?c.value=!0:C===0&&k===L?c.value=!1:c.value=C<k}),Ut(yb,{transition:u,isReversed:c,transitionCount:h,transitionHeight:d,rootRef:a});const p=N(()=>e.continuous||f.value!==0),g=N(()=>e.continuous||f.value!==o.items.value.length-1);function y(){p.value&&o.prev()}function w(){g.value&&o.next()}const x=N(()=>{const C=[],k={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${l.value?"right":"left"}`,onClick:o.prev,ariaLabel:r("$vuetify.carousel.prev")};C.push(p.value?i.prev?i.prev({props:k}):b(Je,k,null):b("div",null,null));const V={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${l.value?"left":"right"}`,onClick:o.next,ariaLabel:r("$vuetify.carousel.next")};return C.push(g.value?i.next?i.next({props:V}):b(Je,V,null):b("div",null,null)),C}),_=N(()=>e.touch===!1?e.touch:{...{left:()=>{l.value?y():w()},right:()=>{l.value?w():y()},start:k=>{let{originalEvent:V}=k;V.stopPropagation()}},...e.touch===!0?{}:e.touch});return Be(()=>Et(b(e.tag,{ref:a,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},n.value,e.class],style:e.style},{default:()=>{var C,k;return[b("div",{class:"v-window__container",style:{height:d.value}},[(C=i.default)==null?void 0:C.call(i,{group:o}),e.showArrows!==!1&&b("div",{class:"v-window__controls"},[x.value])]),(k=i.additional)==null?void 0:k.call(i,{group:o})]}}),[[Bi("touch"),_.value]])),{group:o}}}),lF=le({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...$e(),...Vd(),...L_()},"v-window-item"),zg=xe()({name:"VWindowItem",directives:{Touch:rF},props:lF(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:i}=t;const n=qe(yb),s=Hd(e,_b),{isBooted:r}=ql();if(!n||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=Re(!1),a=N(()=>r.value&&(n.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function l(){!o.value||!n||(o.value=!1,n.transitionCount.value>0&&(n.transitionCount.value-=1,n.transitionCount.value===0&&(n.transitionHeight.value=void 0)))}function c(){var p;o.value||!n||(o.value=!0,n.transitionCount.value===0&&(n.transitionHeight.value=Ie((p=n.rootRef.value)==null?void 0:p.clientHeight)),n.transitionCount.value+=1)}function u(){l()}function h(p){o.value&&ni(()=>{!a.value||!o.value||!n||(n.transitionHeight.value=Ie(p.clientHeight))})}const d=N(()=>{const p=n.isReversed.value?e.reverseTransition:e.transition;return a.value?{name:typeof p!="string"?n.transition.value:p,onBeforeEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:c,onAfterLeave:l,onLeaveCancelled:u,onEnter:h}:!1}),{hasContent:f}=N_(e,s.isSelected);return Be(()=>b(ln,{transition:d.value,disabled:!r.value},{default:()=>{var p;return[Et(b("div",{class:["v-window-item",s.selectedClass.value,e.class],style:e.style},[f.value&&((p=i.default)==null?void 0:p.call(i))]),[[Qn,s.isSelected.value]])]}})),{}}});function cF(e,t,i,n,s,r){const o=zt("MenuBarComponent"),a=zt("GoaliePickerComponent"),l=zt("FieldSideComponent"),c=zt("RefButtonsComponent"),u=zt("StatusComponent"),h=zt("HistoryComponent"),d=zt("GameStatusComponent"),f=zt("FieldComponent"),p=zt("AIComponent"),g=zt("PlaybookComponent");return He(),at(LB,null,{default:se(()=>[b(GB,{app:"",ref:"Top Bar",color:s.kenobiFPSALERT,density:"compact"},{default:se(()=>[b($B,{class:"flex-0-0",textContent:"Ateam UI",style:{"text-wrap-mode":"nowrap"}}),b(o),b(M_),b($n,{class:"d-flex justify-center mr-2 pa-1",style:ci("color: "+s.kenobiStatusStyle)},{default:se(()=>[Ze(mt(s.kenobiStatus),1)]),_:1},8,["style"]),b($n,{class:"d-flex justify-center mr-2 pa-1",style:ci("color: "+s.kenobiFPSStyle)},{default:se(()=>[Ze(mt(s.kenobiFPS),1)]),_:1},8,["style"])]),_:1},8,["color"]),b(zB,null,{default:se(()=>[b(Vn,{fluid:"",class:"d-inline-flex justify-space-between"},{default:se(()=>[b(Gn,{class:""},{default:se(()=>[b(Hn,{class:"flex-grow-0 flex-shrink-0",style:{"min-width":"12vw"}},{default:se(()=>[b(a),b(l),s.state.comp?cn("",!0):(He(),at(c,{key:0}))]),_:1}),b(u,{ref:"robotStatus"},null,512),b(Hn,{class:"flex-grow-1 flex-shrink-1",style:{height:"auto"}},{default:se(()=>[b(h,{ref:"historyComponent"},null,512),b(d,{ref:"refStatus"},null,512),b(f,{ref:"mainField",class:"ma-2 pa-2"},null,512)]),_:1}),b(Hn,{class:"flex-grow-0 flex-shrink-0 justify-center overflow-y-auto",style:{height:"100vh","max-width":"18vw","min-width":"18vw"}},{default:se(()=>[b($n,null,{default:se(()=>[b(ZB,{modelValue:s.tab,"onUpdate:modelValue":t[0]||(t[0]=y=>s.tab=y),"show-arrows":"false"},{default:se(()=>[b(Gh,{value:"dataTree"},{default:se(()=>[Ze("Data Tree")]),_:1}),b(Gh,{value:"playBook"},{default:se(()=>[Ze("Play List")]),_:1})]),_:1},8,["modelValue"]),b(z_,null,{default:se(()=>[b(aF,{modelValue:s.tab,"onUpdate:modelValue":t[1]||(t[1]=y=>s.tab=y)},{default:se(()=>[b(zg,{value:"dataTree"},{default:se(()=>[b(p,{ref:"AIStatus"},null,512)]),_:1}),b(zg,{value:"playBook"},{default:se(()=>[b(g,{ref:"Play Book"},null,512)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const uF=Kt(DB,[["render",cF]]);Neutralino.init();Neutralino.events.on("windowClose",function(){Neutralino.app.exit()});Neutralino.window.maximize();const bb=e1(uF);bb.use(MS);bb.mount("#app");
